/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------------------------------------------*/

var _d=Object.create;var wo=Object.defineProperty;var Td=Object.getOwnPropertyDescriptor;var Od=Object.getOwnPropertyNames;var Dd=Object.getPrototypeOf,Id=Object.prototype.hasOwnProperty;var m=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Fd=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Od(e))!Id.call(t,i)&&i!==n&&wo(t,i,{get:()=>e[i],enumerable:!(r=Td(e,i))||r.enumerable});return t};var A=(t,e,n)=>(n=t!=null?_d(Dd(t)):{},Fd(e||!t||!t.__esModule?wo(n,"default",{value:t,enumerable:!0}):n,t));var ut=m((xy,No)=>{"use strict";var Fo=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);No.exports=t=>t?Object.keys(t).map(e=>[Fo.has(e)?Fo.get(e):e,t[e]]).reduce((e,n)=>(e[n[0]]=n[1],e),Object.create(null)):{}});var dt=m((Sy,jo)=>{"use strict";var Ao=typeof process=="object"&&process?process:{stdout:null,stderr:null},Xd=require("events"),$o=require("stream"),Bo=require("string_decoder").StringDecoder,ye=Symbol("EOF"),Ee=Symbol("maybeEmitEnd"),_e=Symbol("emittedEnd"),En=Symbol("emittingEnd"),Gt=Symbol("emittedError"),vn=Symbol("closed"),qo=Symbol("read"),xn=Symbol("flush"),Mo=Symbol("flushChunk"),q=Symbol("encoding"),ve=Symbol("decoder"),Sn=Symbol("flowing"),Vt=Symbol("paused"),ft=Symbol("resume"),k=Symbol("bufferLength"),Jr=Symbol("bufferPush"),Yr=Symbol("bufferShift"),O=Symbol("objectMode"),D=Symbol("destroyed"),Xr=Symbol("emitData"),Uo=Symbol("emitEnd"),Zr=Symbol("emitEnd2"),xe=Symbol("async"),Jt=t=>Promise.resolve().then(t),Ho=global._MP_NO_ITERATOR_SYMBOLS_!=="1",Zd=Ho&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),Kd=Ho&&Symbol.iterator||Symbol("iterator not implemented"),Qd=t=>t==="end"||t==="finish"||t==="prefinish",eh=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,th=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),bn=class{constructor(e,n,r){this.src=e,this.dest=n,this.opts=r,this.ondrain=()=>e[ft](),n.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Kr=class extends bn{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,n,r){super(e,n,r),this.proxyErrors=i=>n.emit("error",i),e.on("error",this.proxyErrors)}};jo.exports=class Wo extends $o{constructor(e){super(),this[Sn]=!1,this[Vt]=!1,this.pipes=[],this.buffer=[],this[O]=e&&e.objectMode||!1,this[O]?this[q]=null:this[q]=e&&e.encoding||null,this[q]==="buffer"&&(this[q]=null),this[xe]=e&&!!e.async||!1,this[ve]=this[q]?new Bo(this[q]):null,this[ye]=!1,this[_e]=!1,this[En]=!1,this[vn]=!1,this[Gt]=null,this.writable=!0,this.readable=!0,this[k]=0,this[D]=!1}get bufferLength(){return this[k]}get encoding(){return this[q]}set encoding(e){if(this[O])throw new Error("cannot set encoding in objectMode");if(this[q]&&e!==this[q]&&(this[ve]&&this[ve].lastNeed||this[k]))throw new Error("cannot change encoding");this[q]!==e&&(this[ve]=e?new Bo(e):null,this.buffer.length&&(this.buffer=this.buffer.map(n=>this[ve].write(n)))),this[q]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[O]}set objectMode(e){this[O]=this[O]||!!e}get async(){return this[xe]}set async(e){this[xe]=this[xe]||!!e}write(e,n,r){if(this[ye])throw new Error("write after end");if(this[D])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof n=="function"&&(r=n,n="utf8"),n||(n="utf8");let i=this[xe]?Jt:s=>s();return!this[O]&&!Buffer.isBuffer(e)&&(th(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):eh(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[O]?(this.flowing&&this[k]!==0&&this[xn](!0),this.flowing?this.emit("data",e):this[Jr](e),this[k]!==0&&this.emit("readable"),r&&i(r),this.flowing):e.length?(typeof e=="string"&&!(n===this[q]&&!this[ve].lastNeed)&&(e=Buffer.from(e,n)),Buffer.isBuffer(e)&&this[q]&&(e=this[ve].write(e)),this.flowing&&this[k]!==0&&this[xn](!0),this.flowing?this.emit("data",e):this[Jr](e),this[k]!==0&&this.emit("readable"),r&&i(r),this.flowing):(this[k]!==0&&this.emit("readable"),r&&i(r),this.flowing)}read(e){if(this[D])return null;if(this[k]===0||e===0||e>this[k])return this[Ee](),null;this[O]&&(e=null),this.buffer.length>1&&!this[O]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[k])]);let n=this[qo](e||null,this.buffer[0]);return this[Ee](),n}[qo](e,n){return e===n.length||e===null?this[Yr]():(this.buffer[0]=n.slice(e),n=n.slice(0,e),this[k]-=e),this.emit("data",n),!this.buffer.length&&!this[ye]&&this.emit("drain"),n}end(e,n,r){return typeof e=="function"&&(r=e,e=null),typeof n=="function"&&(r=n,n="utf8"),e&&this.write(e,n),r&&this.once("end",r),this[ye]=!0,this.writable=!1,(this.flowing||!this[Vt])&&this[Ee](),this}[ft](){this[D]||(this[Vt]=!1,this[Sn]=!0,this.emit("resume"),this.buffer.length?this[xn]():this[ye]?this[Ee]():this.emit("drain"))}resume(){return this[ft]()}pause(){this[Sn]=!1,this[Vt]=!0}get destroyed(){return this[D]}get flowing(){return this[Sn]}get paused(){return this[Vt]}[Jr](e){this[O]?this[k]+=1:this[k]+=e.length,this.buffer.push(e)}[Yr](){return this.buffer.length&&(this[O]?this[k]-=1:this[k]-=this.buffer[0].length),this.buffer.shift()}[xn](e){do;while(this[Mo](this[Yr]()));!e&&!this.buffer.length&&!this[ye]&&this.emit("drain")}[Mo](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,n){if(this[D])return;let r=this[_e];return n=n||{},e===Ao.stdout||e===Ao.stderr?n.end=!1:n.end=n.end!==!1,n.proxyErrors=!!n.proxyErrors,r?n.end&&e.end():(this.pipes.push(n.proxyErrors?new Kr(this,e,n):new bn(this,e,n)),this[xe]?Jt(()=>this[ft]()):this[ft]()),e}unpipe(e){let n=this.pipes.find(r=>r.dest===e);n&&(this.pipes.splice(this.pipes.indexOf(n),1),n.unpipe())}addListener(e,n){return this.on(e,n)}on(e,n){let r=super.on(e,n);return e==="data"&&!this.pipes.length&&!this.flowing?this[ft]():e==="readable"&&this[k]!==0?super.emit("readable"):Qd(e)&&this[_e]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[Gt]&&(this[xe]?Jt(()=>n.call(this,this[Gt])):n.call(this,this[Gt])),r}get emittedEnd(){return this[_e]}[Ee](){!this[En]&&!this[_e]&&!this[D]&&this.buffer.length===0&&this[ye]&&(this[En]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[vn]&&this.emit("close"),this[En]=!1)}emit(e,n,...r){if(e!=="error"&&e!=="close"&&e!==D&&this[D])return;if(e==="data")return n?this[xe]?Jt(()=>this[Xr](n)):this[Xr](n):!1;if(e==="end")return this[Uo]();if(e==="close"){if(this[vn]=!0,!this[_e]&&!this[D])return;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[Gt]=n;let s=super.emit("error",n);return this[Ee](),s}else if(e==="resume"){let s=super.emit("resume");return this[Ee](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let i=super.emit(e,n,...r);return this[Ee](),i}[Xr](e){for(let r of this.pipes)r.dest.write(e)===!1&&this.pause();let n=super.emit("data",e);return this[Ee](),n}[Uo](){this[_e]||(this[_e]=!0,this.readable=!1,this[xe]?Jt(()=>this[Zr]()):this[Zr]())}[Zr](){if(this[ve]){let n=this[ve].end();if(n){for(let r of this.pipes)r.dest.write(n);super.emit("data",n)}}for(let n of this.pipes)n.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[O]||(e.dataLength=0);let n=this.promise();return this.on("data",r=>{e.push(r),this[O]||(e.dataLength+=r.length)}),n.then(()=>e)}concat(){return this[O]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[O]?Promise.reject(new Error("cannot concat in objectMode")):this[q]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,n)=>{this.on(D,()=>n(new Error("stream destroyed"))),this.on("error",r=>n(r)),this.on("end",()=>e())})}[Zd](){return{next:()=>{let n=this.read();if(n!==null)return Promise.resolve({done:!1,value:n});if(this[ye])return Promise.resolve({done:!0});let r=null,i=null,s=l=>{this.removeListener("data",o),this.removeListener("end",a),i(l)},o=l=>{this.removeListener("error",s),this.removeListener("end",a),this.pause(),r({value:l,done:!!this[ye]})},a=()=>{this.removeListener("error",s),this.removeListener("data",o),r({done:!0})},c=()=>s(new Error("stream destroyed"));return new Promise((l,u)=>{i=u,r=l,this.once(D,c),this.once("error",s),this.once("end",a),this.once("data",o)})}}}[Kd](){return{next:()=>{let n=this.read();return{value:n,done:n===null}}}}destroy(e){return this[D]?(e?this.emit("error",e):this.emit(D),this):(this[D]=!0,this.buffer.length=0,this[k]=0,typeof this.close=="function"&&!this[vn]&&this.close(),e?this.emit("error",e):this.emit(D),this)}static isStream(e){return!!e&&(e instanceof Wo||e instanceof $o||e instanceof Xd&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var Go=m((by,zo)=>{var nh=require("zlib").constants||{ZLIB_VERNUM:4736};zo.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},nh))});var mi=m(H=>{"use strict";var ri=require("assert"),Te=require("buffer").Buffer,Yo=require("zlib"),je=H.constants=Go(),rh=dt(),Vo=Te.concat,ze=Symbol("_superWrite"),mt=class extends Error{constructor(e){super("zlib: "+e.message),this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},ih=Symbol("opts"),Yt=Symbol("flushFlag"),Jo=Symbol("finishFlushFlag"),hi=Symbol("fullFlushFlag"),b=Symbol("handle"),Pn=Symbol("onError"),ht=Symbol("sawError"),Qr=Symbol("level"),ei=Symbol("strategy"),ti=Symbol("ended"),Py=Symbol("_defaultFullFlush"),Cn=class extends rh{constructor(e,n){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e),this[ht]=!1,this[ti]=!1,this[ih]=e,this[Yt]=e.flush,this[Jo]=e.finishFlush;try{this[b]=new Yo[n](e)}catch(r){throw new mt(r)}this[Pn]=r=>{this[ht]||(this[ht]=!0,this.close(),this.emit("error",r))},this[b].on("error",r=>this[Pn](new mt(r))),this.once("end",()=>this.close)}close(){this[b]&&(this[b].close(),this[b]=null,this.emit("close"))}reset(){if(!this[ht])return ri(this[b],"zlib binding closed"),this[b].reset()}flush(e){this.ended||(typeof e!="number"&&(e=this[hi]),this.write(Object.assign(Te.alloc(0),{[Yt]:e})))}end(e,n,r){return e&&this.write(e,n),this.flush(this[Jo]),this[ti]=!0,super.end(null,null,r)}get ended(){return this[ti]}write(e,n,r){if(typeof n=="function"&&(r=n,n="utf8"),typeof e=="string"&&(e=Te.from(e,n)),this[ht])return;ri(this[b],"zlib binding closed");let i=this[b]._handle,s=i.close;i.close=()=>{};let o=this[b].close;this[b].close=()=>{},Te.concat=l=>l;let a;try{let l=typeof e[Yt]=="number"?e[Yt]:this[Yt];a=this[b]._processChunk(e,l),Te.concat=Vo}catch(l){Te.concat=Vo,this[Pn](new mt(l))}finally{this[b]&&(this[b]._handle=i,i.close=s,this[b].close=o,this[b].removeAllListeners("error"))}this[b]&&this[b].on("error",l=>this[Pn](new mt(l)));let c;if(a)if(Array.isArray(a)&&a.length>0){c=this[ze](Te.from(a[0]));for(let l=1;l<a.length;l++)c=this[ze](a[l])}else c=this[ze](Te.from(a));return r&&r(),c}[ze](e){return super.write(e)}},Se=class extends Cn{constructor(e,n){e=e||{},e.flush=e.flush||je.Z_NO_FLUSH,e.finishFlush=e.finishFlush||je.Z_FINISH,super(e,n),this[hi]=je.Z_FULL_FLUSH,this[Qr]=e.level,this[ei]=e.strategy}params(e,n){if(!this[ht]){if(!this[b])throw new Error("cannot switch params when binding is closed");if(!this[b].params)throw new Error("not supported in this implementation");if(this[Qr]!==e||this[ei]!==n){this.flush(je.Z_SYNC_FLUSH),ri(this[b],"zlib binding closed");let r=this[b].flush;this[b].flush=(i,s)=>{this.flush(i),s()};try{this[b].params(e,n)}finally{this[b].flush=r}this[b]&&(this[Qr]=e,this[ei]=n)}}}},ii=class extends Se{constructor(e){super(e,"Deflate")}},si=class extends Se{constructor(e){super(e,"Inflate")}},ni=Symbol("_portable"),oi=class extends Se{constructor(e){super(e,"Gzip"),this[ni]=e&&!!e.portable}[ze](e){return this[ni]?(this[ni]=!1,e[9]=255,super[ze](e)):super[ze](e)}},ai=class extends Se{constructor(e){super(e,"Gunzip")}},ci=class extends Se{constructor(e){super(e,"DeflateRaw")}},li=class extends Se{constructor(e){super(e,"InflateRaw")}},ui=class extends Se{constructor(e){super(e,"Unzip")}},Ln=class extends Cn{constructor(e,n){e=e||{},e.flush=e.flush||je.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||je.BROTLI_OPERATION_FINISH,super(e,n),this[hi]=je.BROTLI_OPERATION_FLUSH}},fi=class extends Ln{constructor(e){super(e,"BrotliCompress")}},di=class extends Ln{constructor(e){super(e,"BrotliDecompress")}};H.Deflate=ii;H.Inflate=si;H.Gzip=oi;H.Gunzip=ai;H.DeflateRaw=ci;H.InflateRaw=li;H.Unzip=ui;typeof Yo.BrotliCompress=="function"?(H.BrotliCompress=fi,H.BrotliDecompress=di):H.BrotliCompress=H.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var pt=m((Ry,Xo)=>{var sh=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;Xo.exports=sh!=="win32"?t=>t:t=>t&&t.replace(/\\/g,"/")});var Rn=m((_y,Zo)=>{"use strict";var oh=dt(),pi=pt(),gi=Symbol("slurp");Zo.exports=class extends oh{constructor(e,n,r){switch(super(),this.pause(),this.extended=n,this.globalExtended=r,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=pi(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=pi(e.linkpath),this.uname=e.uname,this.gname=e.gname,n&&this[gi](n),r&&this[gi](r,!0)}write(e){let n=e.length;if(n>this.blockRemain)throw new Error("writing more to entry than is appropriate");let r=this.remain,i=this.blockRemain;return this.remain=Math.max(0,r-n),this.blockRemain=Math.max(0,i-n),this.ignore?!0:r>=n?super.write(e):super.write(e.slice(0,r))}[gi](e,n){for(let r in e)e[r]!==null&&e[r]!==void 0&&!(n&&r==="path")&&(this[r]=r==="path"||r==="linkpath"?pi(e[r]):e[r])}}});var wi=m(kn=>{"use strict";kn.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);kn.code=new Map(Array.from(kn.name).map(t=>[t[1],t[0]]))});var ta=m((Oy,ea)=>{"use strict";var ah=(t,e)=>{if(Number.isSafeInteger(t))t<0?lh(t,e):ch(t,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},ch=(t,e)=>{e[0]=128;for(var n=e.length;n>1;n--)e[n-1]=t&255,t=Math.floor(t/256)},lh=(t,e)=>{e[0]=255;var n=!1;t=t*-1;for(var r=e.length;r>1;r--){var i=t&255;t=Math.floor(t/256),n?e[r-1]=Ko(i):i===0?e[r-1]=0:(n=!0,e[r-1]=Qo(i))}},uh=t=>{let e=t[0],n=e===128?dh(t.slice(1,t.length)):e===255?fh(t):null;if(n===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(n))throw Error("parsed number outside of javascript safe integer range");return n},fh=t=>{for(var e=t.length,n=0,r=!1,i=e-1;i>-1;i--){var s=t[i],o;r?o=Ko(s):s===0?o=s:(r=!0,o=Qo(s)),o!==0&&(n-=o*Math.pow(256,e-i-1))}return n},dh=t=>{for(var e=t.length,n=0,r=e-1;r>-1;r--){var i=t[r];i!==0&&(n+=i*Math.pow(256,e-r-1))}return n},Ko=t=>(255^t)&255,Qo=t=>(255^t)+1&255;ea.exports={encode:ah,parse:uh}});var wt=m((Dy,ra)=>{"use strict";var yi=wi(),gt=require("path").posix,na=ta(),Ei=Symbol("slurp"),W=Symbol("type"),Si=class{constructor(e,n,r,i){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[W]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(e)?this.decode(e,n||0,r,i):e&&this.set(e)}decode(e,n,r,i){if(n||(n=0),!e||!(e.length>=n+512))throw new Error("need 512 bytes for header");if(this.path=Ge(e,n,100),this.mode=Oe(e,n+100,8),this.uid=Oe(e,n+108,8),this.gid=Oe(e,n+116,8),this.size=Oe(e,n+124,12),this.mtime=vi(e,n+136,12),this.cksum=Oe(e,n+148,12),this[Ei](r),this[Ei](i,!0),this[W]=Ge(e,n+156,1),this[W]===""&&(this[W]="0"),this[W]==="0"&&this.path.slice(-1)==="/"&&(this[W]="5"),this[W]==="5"&&(this.size=0),this.linkpath=Ge(e,n+157,100),e.slice(n+257,n+265).toString()==="ustar\x0000")if(this.uname=Ge(e,n+265,32),this.gname=Ge(e,n+297,32),this.devmaj=Oe(e,n+329,8),this.devmin=Oe(e,n+337,8),e[n+475]!==0){let o=Ge(e,n+345,155);this.path=o+"/"+this.path}else{let o=Ge(e,n+345,130);o&&(this.path=o+"/"+this.path),this.atime=vi(e,n+476,12),this.ctime=vi(e,n+488,12)}let s=8*32;for(let o=n;o<n+148;o++)s+=e[o];for(let o=n+156;o<n+512;o++)s+=e[o];this.cksumValid=s===this.cksum,this.cksum===null&&s===8*32&&(this.nullBlock=!0)}[Ei](e,n){for(let r in e)e[r]!==null&&e[r]!==void 0&&!(n&&r==="path")&&(this[r]=e[r])}encode(e,n){if(e||(e=this.block=Buffer.alloc(512),n=0),n||(n=0),!(e.length>=n+512))throw new Error("need 512 bytes for header");let r=this.ctime||this.atime?130:155,i=hh(this.path||"",r),s=i[0],o=i[1];this.needPax=i[2],this.needPax=Ve(e,n,100,s)||this.needPax,this.needPax=De(e,n+100,8,this.mode)||this.needPax,this.needPax=De(e,n+108,8,this.uid)||this.needPax,this.needPax=De(e,n+116,8,this.gid)||this.needPax,this.needPax=De(e,n+124,12,this.size)||this.needPax,this.needPax=xi(e,n+136,12,this.mtime)||this.needPax,e[n+156]=this[W].charCodeAt(0),this.needPax=Ve(e,n+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",n+257,8),this.needPax=Ve(e,n+265,32,this.uname)||this.needPax,this.needPax=Ve(e,n+297,32,this.gname)||this.needPax,this.needPax=De(e,n+329,8,this.devmaj)||this.needPax,this.needPax=De(e,n+337,8,this.devmin)||this.needPax,this.needPax=Ve(e,n+345,r,o)||this.needPax,e[n+475]!==0?this.needPax=Ve(e,n+345,155,o)||this.needPax:(this.needPax=Ve(e,n+345,130,o)||this.needPax,this.needPax=xi(e,n+476,12,this.atime)||this.needPax,this.needPax=xi(e,n+488,12,this.ctime)||this.needPax);let a=8*32;for(let c=n;c<n+148;c++)a+=e[c];for(let c=n+156;c<n+512;c++)a+=e[c];return this.cksum=a,De(e,n+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(let n in e)e[n]!==null&&e[n]!==void 0&&(this[n]=e[n])}get type(){return yi.name.get(this[W])||this[W]}get typeKey(){return this[W]}set type(e){yi.code.has(e)?this[W]=yi.code.get(e):this[W]=e}},hh=(t,e)=>{let r=t,i="",s,o=gt.parse(t).root||".";if(Buffer.byteLength(r)<100)s=[r,i,!1];else{i=gt.dirname(r),r=gt.basename(r);do Buffer.byteLength(r)<=100&&Buffer.byteLength(i)<=e?s=[r,i,!1]:Buffer.byteLength(r)>100&&Buffer.byteLength(i)<=e?s=[r.slice(0,100-1),i,!0]:(r=gt.join(gt.basename(i),r),i=gt.dirname(i));while(i!==o&&!s);s||(s=[t.slice(0,100-1),"",!0])}return s},Ge=(t,e,n)=>t.slice(e,e+n).toString("utf8").replace(/\0.*/,""),vi=(t,e,n)=>mh(Oe(t,e,n)),mh=t=>t===null?null:new Date(t*1e3),Oe=(t,e,n)=>t[e]&128?na.parse(t.slice(e,e+n)):gh(t,e,n),ph=t=>isNaN(t)?null:t,gh=(t,e,n)=>ph(parseInt(t.slice(e,e+n).toString("utf8").replace(/\0.*$/,"").trim(),8)),wh={12:8589934591,8:2097151},De=(t,e,n,r)=>r===null?!1:r>wh[n]||r<0?(na.encode(r,t.slice(e,e+n)),!0):(yh(t,e,n,r),!1),yh=(t,e,n,r)=>t.write(Eh(r,n),e,n,"ascii"),Eh=(t,e)=>vh(Math.floor(t).toString(8),e),vh=(t,e)=>(t.length===e-1?t:new Array(e-t.length-1).join("0")+t+" ")+"\0",xi=(t,e,n,r)=>r===null?!1:De(t,e,n,r.getTime()/1e3),xh=new Array(156).join("\0"),Ve=(t,e,n,r)=>r===null?!1:(t.write(r+xh,e,n,"utf8"),r.length!==Buffer.byteLength(r)||r.length>n);ra.exports=Si});var _n=m((Iy,ia)=>{"use strict";var Sh=wt(),bh=require("path"),Xt=class{constructor(e,n){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=n||!1}encode(){let e=this.encodeBody();if(e==="")return null;let n=Buffer.byteLength(e),r=512*Math.ceil(1+n/512),i=Buffer.allocUnsafe(r);for(let s=0;s<512;s++)i[s]=0;new Sh({path:("PaxHeader/"+bh.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:n,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(i),i.write(e,512,n,"utf8");for(let s=n+512;s<i.length;s++)i[s]=0;return i}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===null||this[e]===void 0)return"";let n=this[e]instanceof Date?this[e].getTime()/1e3:this[e],r=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+n+`
`,i=Buffer.byteLength(r),s=Math.floor(Math.log(i)/Math.log(10))+1;return i+s>=Math.pow(10,s)&&(s+=1),s+i+r}};Xt.parse=(t,e,n)=>new Xt(Ph(Ch(t),e),n);var Ph=(t,e)=>e?Object.keys(t).reduce((n,r)=>(n[r]=t[r],n),e):t,Ch=t=>t.replace(/\n$/,"").split(`
`).reduce(Lh,Object.create(null)),Lh=(t,e)=>{let n=parseInt(e,10);if(n!==Buffer.byteLength(e)+1)return t;e=e.slice((n+" ").length);let r=e.split("="),i=r.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!i)return t;let s=r.join("=");return t[i]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(i)?new Date(s*1e3):/^[0-9]+$/.test(s)?+s:s,t};ia.exports=Xt});var yt=m((Fy,sa)=>{sa.exports=t=>{let e=t.length-1,n=-1;for(;e>-1&&t.charAt(e)==="/";)n=e,e--;return n===-1?t:t.slice(0,n)}});var Tn=m((Ny,oa)=>{"use strict";oa.exports=t=>class extends t{warn(e,n,r={}){this.file&&(r.file=this.file),this.cwd&&(r.cwd=this.cwd),r.code=n instanceof Error&&n.code||e,r.tarCode=e,!this.strict&&r.recoverable!==!1?(n instanceof Error&&(r=Object.assign(n,r),n=n.message),this.emit("warn",r.tarCode,n,r)):n instanceof Error?this.emit("error",Object.assign(n,r)):this.emit("error",Object.assign(new Error(`${e}: ${n}`),r))}}});var Pi=m(($y,aa)=>{"use strict";var On=["|","<",">","?",":"],bi=On.map(t=>String.fromCharCode(61440+t.charCodeAt(0))),Rh=new Map(On.map((t,e)=>[t,bi[e]])),kh=new Map(bi.map((t,e)=>[t,On[e]]));aa.exports={encode:t=>On.reduce((e,n)=>e.split(n).join(Rh.get(n)),t),decode:t=>bi.reduce((e,n)=>e.split(n).join(kh.get(n)),t)}});var Ci=m((By,la)=>{var{isAbsolute:_h,parse:ca}=require("path").win32;la.exports=t=>{let e="",n=ca(t);for(;_h(t)||n.root;){let r=t.charAt(0)==="/"&&t.slice(0,4)!=="//?/"?"/":n.root;t=t.slice(r.length),e+=r,n=ca(t)}return[e,t]}});var fa=m((qy,ua)=>{"use strict";ua.exports=(t,e,n)=>(t&=4095,n&&(t=(t|384)&-19),e&&(t&256&&(t|=64),t&32&&(t|=8),t&4&&(t|=1)),t)});var Ni=m((Hy,Ca)=>{"use strict";var ya=dt(),Ea=_n(),va=wt(),de=require("fs"),da=require("path"),fe=pt(),Th=yt(),xa=(t,e)=>e?(t=fe(t).replace(/^\.(\/|$)/,""),Th(e)+"/"+t):fe(t),Oh=16*1024*1024,ha=Symbol("process"),ma=Symbol("file"),pa=Symbol("directory"),Ri=Symbol("symlink"),ga=Symbol("hardlink"),Zt=Symbol("header"),Dn=Symbol("read"),ki=Symbol("lstat"),In=Symbol("onlstat"),_i=Symbol("onread"),Ti=Symbol("onreadlink"),Oi=Symbol("openfile"),Di=Symbol("onopenfile"),Ie=Symbol("close"),Fn=Symbol("mode"),Ii=Symbol("awaitDrain"),Li=Symbol("ondrain"),he=Symbol("prefix"),wa=Symbol("hadError"),Sa=Tn(),Dh=Pi(),ba=Ci(),Pa=fa(),Nn=Sa(class extends ya{constructor(e,n){if(n=n||{},super(n),typeof e!="string")throw new TypeError("path is required");this.path=fe(e),this.portable=!!n.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=n.maxReadSize||Oh,this.linkCache=n.linkCache||new Map,this.statCache=n.statCache||new Map,this.preservePaths=!!n.preservePaths,this.cwd=fe(n.cwd||process.cwd()),this.strict=!!n.strict,this.noPax=!!n.noPax,this.noMtime=!!n.noMtime,this.mtime=n.mtime||null,this.prefix=n.prefix?fe(n.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof n.onwarn=="function"&&this.on("warn",n.onwarn);let r=!1;if(!this.preservePaths){let[i,s]=ba(this.path);i&&(this.path=s,r=i)}this.win32=!!n.win32||process.platform==="win32",this.win32&&(this.path=Dh.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=fe(n.absolute||da.resolve(this.cwd,e)),this.path===""&&(this.path="./"),r&&this.warn("TAR_ENTRY_INFO",`stripping ${r} from absolute path`,{entry:this,path:r+this.path}),this.statCache.has(this.absolute)?this[In](this.statCache.get(this.absolute)):this[ki]()}emit(e,...n){return e==="error"&&(this[wa]=!0),super.emit(e,...n)}[ki](){de.lstat(this.absolute,(e,n)=>{if(e)return this.emit("error",e);this[In](n)})}[In](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=Fh(e),this.emit("stat",e),this[ha]()}[ha](){switch(this.type){case"File":return this[ma]();case"Directory":return this[pa]();case"SymbolicLink":return this[Ri]();default:return this.end()}}[Fn](e){return Pa(e,this.type==="Directory",this.portable)}[he](e){return xa(e,this.prefix)}[Zt](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new va({path:this[he](this.path),linkpath:this.type==="Link"?this[he](this.linkpath):this.linkpath,mode:this[Fn](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new Ea({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[he](this.path),linkpath:this.type==="Link"?this[he](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[pa](){this.path.slice(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[Zt](),this.end()}[Ri](){de.readlink(this.absolute,(e,n)=>{if(e)return this.emit("error",e);this[Ti](n)})}[Ti](e){this.linkpath=fe(e),this[Zt](),this.end()}[ga](e){this.type="Link",this.linkpath=fe(da.relative(this.cwd,e)),this.stat.size=0,this[Zt](),this.end()}[ma](){if(this.stat.nlink>1){let e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){let n=this.linkCache.get(e);if(n.indexOf(this.cwd)===0)return this[ga](n)}this.linkCache.set(e,this.absolute)}if(this[Zt](),this.stat.size===0)return this.end();this[Oi]()}[Oi](){de.open(this.absolute,"r",(e,n)=>{if(e)return this.emit("error",e);this[Di](n)})}[Di](e){if(this.fd=e,this[wa])return this[Ie]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let n=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(n),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[Dn]()}[Dn](){let{fd:e,buf:n,offset:r,length:i,pos:s}=this;de.read(e,n,r,i,s,(o,a)=>{if(o)return this[Ie](()=>this.emit("error",o));this[_i](a)})}[Ie](e){de.close(this.fd,e)}[_i](e){if(e<=0&&this.remain>0){let i=new Error("encountered unexpected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[Ie](()=>this.emit("error",i))}if(e>this.remain){let i=new Error("did not encounter expected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[Ie](()=>this.emit("error",i))}if(e===this.remain)for(let i=e;i<this.length&&e<this.blockRemain;i++)this.buf[i+this.offset]=0,e++,this.remain++;let n=this.offset===0&&e===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+e);this.write(n)?this[Li]():this[Ii](()=>this[Li]())}[Ii](e){this.once("drain",e)}write(e){if(this.blockRemain<e.length){let n=new Error("writing more data than expected");return n.path=this.absolute,this.emit("error",n)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e)}[Li](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[Ie](e=>e?this.emit("error",e):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[Dn]()}}),Fi=class extends Nn{[ki](){this[In](de.lstatSync(this.absolute))}[Ri](){this[Ti](de.readlinkSync(this.absolute))}[Oi](){this[Di](de.openSync(this.absolute,"r"))}[Dn](){let e=!0;try{let{fd:n,buf:r,offset:i,length:s,pos:o}=this,a=de.readSync(n,r,i,s,o);this[_i](a),e=!1}finally{if(e)try{this[Ie](()=>{})}catch{}}}[Ii](e){e()}[Ie](e){de.closeSync(this.fd),e()}},Ih=Sa(class extends ya{constructor(e,n){n=n||{},super(n),this.preservePaths=!!n.preservePaths,this.portable=!!n.portable,this.strict=!!n.strict,this.noPax=!!n.noPax,this.noMtime=!!n.noMtime,this.readEntry=e,this.type=e.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=n.prefix||null,this.path=fe(e.path),this.mode=this[Fn](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:n.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=fe(e.linkpath),typeof n.onwarn=="function"&&this.on("warn",n.onwarn);let r=!1;if(!this.preservePaths){let[i,s]=ba(this.path);i&&(this.path=s,r=i)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new va({path:this[he](this.path),linkpath:this.type==="Link"?this[he](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),r&&this.warn("TAR_ENTRY_INFO",`stripping ${r} from absolute path`,{entry:this,path:r+this.path}),this.header.encode()&&!this.noPax&&super.write(new Ea({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[he](this.path),linkpath:this.type==="Link"?this[he](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[he](e){return xa(e,this.prefix)}[Fn](e){return Pa(e,this.type==="Directory",this.portable)}write(e){let n=e.length;if(n>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=n,super.write(e)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});Nn.Sync=Fi;Nn.Tar=Ih;var Fh=t=>t.isFile()?"File":t.isDirectory()?"Directory":t.isSymbolicLink()?"SymbolicLink":"Unsupported";Ca.exports=Nn});var Ra=m((Wy,La)=>{"use strict";La.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Ai=m((jy,ka)=>{"use strict";ka.exports=E;E.Node=Je;E.create=E;function E(t){var e=this;if(e instanceof E||(e=new E),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)e.push(arguments[n]);return e}E.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e};E.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};E.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};E.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)Ah(this,arguments[t]);return this.length};E.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)$h(this,arguments[t]);return this.length};E.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};E.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};E.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,r=0;n!==null;r++)t.call(e,n.value,r,this),n=n.next};E.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,r=this.length-1;n!==null;r--)t.call(e,n.value,r,this),n=n.prev};E.prototype.get=function(t){for(var e=0,n=this.head;n!==null&&e<t;e++)n=n.next;if(e===t&&n!==null)return n.value};E.prototype.getReverse=function(t){for(var e=0,n=this.tail;n!==null&&e<t;e++)n=n.prev;if(e===t&&n!==null)return n.value};E.prototype.map=function(t,e){e=e||this;for(var n=new E,r=this.head;r!==null;)n.push(t.call(e,r.value,this)),r=r.next;return n};E.prototype.mapReverse=function(t,e){e=e||this;for(var n=new E,r=this.tail;r!==null;)n.push(t.call(e,r.value,this)),r=r.prev;return n};E.prototype.reduce=function(t,e){var n,r=this.head;if(arguments.length>1)n=e;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=t(n,r.value,i),r=r.next;return n};E.prototype.reduceReverse=function(t,e){var n,r=this.tail;if(arguments.length>1)n=e;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=t(n,r.value,i),r=r.prev;return n};E.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;n!==null;e++)t[e]=n.value,n=n.next;return t};E.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;n!==null;e++)t[e]=n.value,n=n.prev;return t};E.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new E;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,i=this.head;i!==null&&r<t;r++)i=i.next;for(;i!==null&&r<e;r++,i=i.next)n.push(i.value);return n};E.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new E;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,i=this.tail;i!==null&&r>e;r--)i=i.prev;for(;i!==null&&r>t;r--,i=i.prev)n.push(i.value);return n};E.prototype.splice=function(t,e,...n){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var r=0,i=this.head;i!==null&&r<t;r++)i=i.next;for(var s=[],r=0;i&&r<e;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=Nh(this,i,n[r]);return s};E.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=e,this.tail=t,this};function Nh(t,e,n){var r=e===t.head?new Je(n,null,e,t):new Je(n,e,e.next,t);return r.next===null&&(t.tail=r),r.prev===null&&(t.head=r),t.length++,r}function Ah(t,e){t.tail=new Je(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function $h(t,e){t.head=new Je(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Je(t,e,n,r){if(!(this instanceof Je))return new Je(t,e,n,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{Ra()(E)}catch{}});var jn=m((Gy,Na)=>{"use strict";var Hn=class{constructor(e,n){this.path=e||"./",this.absolute=n,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},Bh=dt(),qh=mi(),Mh=Rn(),zi=Ni(),Uh=zi.Sync,Hh=zi.Tar,Wh=Ai(),_a=Buffer.alloc(1024),Bn=Symbol("onStat"),An=Symbol("ended"),me=Symbol("queue"),Et=Symbol("current"),Ye=Symbol("process"),$n=Symbol("processing"),Ta=Symbol("processJob"),pe=Symbol("jobs"),$i=Symbol("jobDone"),qn=Symbol("addFSEntry"),Oa=Symbol("addTarEntry"),Ui=Symbol("stat"),Hi=Symbol("readdir"),Mn=Symbol("onreaddir"),Un=Symbol("pipe"),Da=Symbol("entry"),Bi=Symbol("entryOpt"),Wi=Symbol("writeEntryClass"),Fa=Symbol("write"),qi=Symbol("ondrain"),Wn=require("fs"),Ia=require("path"),jh=Tn(),Mi=pt(),Gi=jh(class extends Bh{constructor(e){super(e),e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=Mi(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[Wi]=zi,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip?(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new qh.Gzip(e.gzip),this.zip.on("data",n=>super.write(n)),this.zip.on("end",n=>super.end()),this.zip.on("drain",n=>this[qi]()),this.on("resume",n=>this.zip.resume())):this.on("drain",this[qi]),this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter=typeof e.filter=="function"?e.filter:n=>!0,this[me]=new Wh,this[pe]=0,this.jobs=+e.jobs||4,this[$n]=!1,this[An]=!1}[Fa](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[An]=!0,this[Ye](),this}write(e){if(this[An])throw new Error("write after end");return e instanceof Mh?this[Oa](e):this[qn](e),this.flowing}[Oa](e){let n=Mi(Ia.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let r=new Hn(e.path,n,!1);r.entry=new Hh(e,this[Bi](r)),r.entry.on("end",i=>this[$i](r)),this[pe]+=1,this[me].push(r)}this[Ye]()}[qn](e){let n=Mi(Ia.resolve(this.cwd,e));this[me].push(new Hn(e,n)),this[Ye]()}[Ui](e){e.pending=!0,this[pe]+=1;let n=this.follow?"stat":"lstat";Wn[n](e.absolute,(r,i)=>{e.pending=!1,this[pe]-=1,r?this.emit("error",r):this[Bn](e,i)})}[Bn](e,n){this.statCache.set(e.absolute,n),e.stat=n,this.filter(e.path,n)||(e.ignore=!0),this[Ye]()}[Hi](e){e.pending=!0,this[pe]+=1,Wn.readdir(e.absolute,(n,r)=>{if(e.pending=!1,this[pe]-=1,n)return this.emit("error",n);this[Mn](e,r)})}[Mn](e,n){this.readdirCache.set(e.absolute,n),e.readdir=n,this[Ye]()}[Ye](){if(!this[$n]){this[$n]=!0;for(let e=this[me].head;e!==null&&this[pe]<this.jobs;e=e.next)if(this[Ta](e.value),e.value.ignore){let n=e.next;this[me].removeNode(e),e.next=n}this[$n]=!1,this[An]&&!this[me].length&&this[pe]===0&&(this.zip?this.zip.end(_a):(super.write(_a),super.end()))}}get[Et](){return this[me]&&this[me].head&&this[me].head.value}[$i](e){this[me].shift(),this[pe]-=1,this[Ye]()}[Ta](e){if(!e.pending){if(e.entry){e===this[Et]&&!e.piped&&this[Un](e);return}if(e.stat||(this.statCache.has(e.absolute)?this[Bn](e,this.statCache.get(e.absolute)):this[Ui](e)),!!e.stat&&!e.ignore&&!(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir&&(this.readdirCache.has(e.absolute)?this[Mn](e,this.readdirCache.get(e.absolute)):this[Hi](e),!e.readdir))){if(e.entry=this[Da](e),!e.entry){e.ignore=!0;return}e===this[Et]&&!e.piped&&this[Un](e)}}}[Bi](e){return{onwarn:(n,r,i)=>this.warn(n,r,i),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[Da](e){this[pe]+=1;try{return new this[Wi](e.path,this[Bi](e)).on("end",()=>this[$i](e)).on("error",n=>this.emit("error",n))}catch(n){this.emit("error",n)}}[qi](){this[Et]&&this[Et].entry&&this[Et].entry.resume()}[Un](e){e.piped=!0,e.readdir&&e.readdir.forEach(i=>{let s=e.path,o=s==="./"?"":s.replace(/\/*$/,"/");this[qn](o+i)});let n=e.entry,r=this.zip;r?n.on("data",i=>{r.write(i)||n.pause()}):n.on("data",i=>{super.write(i)||n.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),ji=class extends Gi{constructor(e){super(e),this[Wi]=Uh}pause(){}resume(){}[Ui](e){let n=this.follow?"statSync":"lstatSync";this[Bn](e,Wn[n](e.absolute))}[Hi](e,n){this[Mn](e,Wn.readdirSync(e.absolute))}[Un](e){let n=e.entry,r=this.zip;e.readdir&&e.readdir.forEach(i=>{let s=e.path,o=s==="./"?"":s.replace(/\/*$/,"/");this[qn](o+i)}),r?n.on("data",i=>{r.write(i)}):n.on("data",i=>{super[Fa](i)})}};Gi.Sync=ji;Na.exports=Gi});var Rt=m(Qt=>{"use strict";var zh=dt(),Gh=require("events").EventEmitter,M=require("fs"),Yi=M.writev;if(!Yi){let t=process.binding("fs"),e=t.FSReqWrap||t.FSReqCallback;Yi=(n,r,i,s)=>{let o=(c,l)=>s(c,l,r),a=new e;a.oncomplete=o,t.writeBuffers(n,r,i,a)}}var Ct=Symbol("_autoClose"),ne=Symbol("_close"),Kt=Symbol("_ended"),S=Symbol("_fd"),Aa=Symbol("_finished"),Ne=Symbol("_flags"),Vi=Symbol("_flush"),Xi=Symbol("_handleChunk"),Zi=Symbol("_makeBuf"),Yn=Symbol("_mode"),zn=Symbol("_needDrain"),bt=Symbol("_onerror"),Lt=Symbol("_onopen"),Ji=Symbol("_onread"),xt=Symbol("_onwrite"),Ae=Symbol("_open"),be=Symbol("_path"),Xe=Symbol("_pos"),ge=Symbol("_queue"),St=Symbol("_read"),$a=Symbol("_readSize"),Fe=Symbol("_reading"),Gn=Symbol("_remain"),Ba=Symbol("_size"),Vn=Symbol("_write"),vt=Symbol("_writing"),Jn=Symbol("_defaultFlag"),Pt=Symbol("_errored"),Xn=class extends zh{constructor(e,n){if(n=n||{},super(n),this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[Pt]=!1,this[S]=typeof n.fd=="number"?n.fd:null,this[be]=e,this[$a]=n.readSize||16*1024*1024,this[Fe]=!1,this[Ba]=typeof n.size=="number"?n.size:1/0,this[Gn]=this[Ba],this[Ct]=typeof n.autoClose=="boolean"?n.autoClose:!0,typeof this[S]=="number"?this[St]():this[Ae]()}get fd(){return this[S]}get path(){return this[be]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[Ae](){M.open(this[be],"r",(e,n)=>this[Lt](e,n))}[Lt](e,n){e?this[bt](e):(this[S]=n,this.emit("open",n),this[St]())}[Zi](){return Buffer.allocUnsafe(Math.min(this[$a],this[Gn]))}[St](){if(!this[Fe]){this[Fe]=!0;let e=this[Zi]();if(e.length===0)return process.nextTick(()=>this[Ji](null,0,e));M.read(this[S],e,0,e.length,null,(n,r,i)=>this[Ji](n,r,i))}}[Ji](e,n,r){this[Fe]=!1,e?this[bt](e):this[Xi](n,r)&&this[St]()}[ne](){if(this[Ct]&&typeof this[S]=="number"){let e=this[S];this[S]=null,M.close(e,n=>n?this.emit("error",n):this.emit("close"))}}[bt](e){this[Fe]=!0,this[ne](),this.emit("error",e)}[Xi](e,n){let r=!1;return this[Gn]-=e,e>0&&(r=super.write(e<n.length?n.slice(0,e):n)),(e===0||this[Gn]<=0)&&(r=!1,this[ne](),super.end()),r}emit(e,n){switch(e){case"prefinish":case"finish":break;case"drain":typeof this[S]=="number"&&this[St]();break;case"error":return this[Pt]?void 0:(this[Pt]=!0,super.emit(e,n));default:return super.emit(e,n)}}},Ki=class extends Xn{[Ae](){let e=!0;try{this[Lt](null,M.openSync(this[be],"r")),e=!1}finally{e&&this[ne]()}}[St](){let e=!0;try{if(!this[Fe]){this[Fe]=!0;do{let n=this[Zi](),r=n.length===0?0:M.readSync(this[S],n,0,n.length,null);if(!this[Xi](r,n))break}while(!0);this[Fe]=!1}e=!1}finally{e&&this[ne]()}}[ne](){if(this[Ct]&&typeof this[S]=="number"){let e=this[S];this[S]=null,M.closeSync(e),this.emit("close")}}},Zn=class extends Gh{constructor(e,n){n=n||{},super(n),this.readable=!1,this.writable=!0,this[Pt]=!1,this[vt]=!1,this[Kt]=!1,this[zn]=!1,this[ge]=[],this[be]=e,this[S]=typeof n.fd=="number"?n.fd:null,this[Yn]=n.mode===void 0?438:n.mode,this[Xe]=typeof n.start=="number"?n.start:null,this[Ct]=typeof n.autoClose=="boolean"?n.autoClose:!0;let r=this[Xe]!==null?"r+":"w";this[Jn]=n.flags===void 0,this[Ne]=this[Jn]?r:n.flags,this[S]===null&&this[Ae]()}emit(e,n){if(e==="error"){if(this[Pt])return;this[Pt]=!0}return super.emit(e,n)}get fd(){return this[S]}get path(){return this[be]}[bt](e){this[ne](),this[vt]=!0,this.emit("error",e)}[Ae](){M.open(this[be],this[Ne],this[Yn],(e,n)=>this[Lt](e,n))}[Lt](e,n){this[Jn]&&this[Ne]==="r+"&&e&&e.code==="ENOENT"?(this[Ne]="w",this[Ae]()):e?this[bt](e):(this[S]=n,this.emit("open",n),this[Vi]())}end(e,n){return e&&this.write(e,n),this[Kt]=!0,!this[vt]&&!this[ge].length&&typeof this[S]=="number"&&this[xt](null,0),this}write(e,n){return typeof e=="string"&&(e=Buffer.from(e,n)),this[Kt]?(this.emit("error",new Error("write() after end()")),!1):this[S]===null||this[vt]||this[ge].length?(this[ge].push(e),this[zn]=!0,!1):(this[vt]=!0,this[Vn](e),!0)}[Vn](e){M.write(this[S],e,0,e.length,this[Xe],(n,r)=>this[xt](n,r))}[xt](e,n){e?this[bt](e):(this[Xe]!==null&&(this[Xe]+=n),this[ge].length?this[Vi]():(this[vt]=!1,this[Kt]&&!this[Aa]?(this[Aa]=!0,this[ne](),this.emit("finish")):this[zn]&&(this[zn]=!1,this.emit("drain"))))}[Vi](){if(this[ge].length===0)this[Kt]&&this[xt](null,0);else if(this[ge].length===1)this[Vn](this[ge].pop());else{let e=this[ge];this[ge]=[],Yi(this[S],e,this[Xe],(n,r)=>this[xt](n,r))}}[ne](){if(this[Ct]&&typeof this[S]=="number"){let e=this[S];this[S]=null,M.close(e,n=>n?this.emit("error",n):this.emit("close"))}}},Qi=class extends Zn{[Ae](){let e;if(this[Jn]&&this[Ne]==="r+")try{e=M.openSync(this[be],this[Ne],this[Yn])}catch(n){if(n.code==="ENOENT")return this[Ne]="w",this[Ae]();throw n}else e=M.openSync(this[be],this[Ne],this[Yn]);this[Lt](null,e)}[ne](){if(this[Ct]&&typeof this[S]=="number"){let e=this[S];this[S]=null,M.closeSync(e),this.emit("close")}}[Vn](e){let n=!0;try{this[xt](null,M.writeSync(this[S],e,0,e.length,this[Xe])),n=!1}finally{if(n)try{this[ne]()}catch{}}}};Qt.ReadStream=Xn;Qt.ReadStreamSync=Ki;Qt.WriteStream=Zn;Qt.WriteStreamSync=Qi});var ir=m((Yy,Ga)=>{"use strict";var Vh=Tn(),Jh=wt(),Yh=require("events"),Xh=Ai(),Zh=1024*1024,Kh=Rn(),qa=_n(),Qh=mi(),{nextTick:em}=require("process"),es=Buffer.from([31,139]),Y=Symbol("state"),Ze=Symbol("writeEntry"),Pe=Symbol("readEntry"),ts=Symbol("nextEntry"),Ma=Symbol("processEntry"),X=Symbol("extendedHeader"),en=Symbol("globalExtendedHeader"),$e=Symbol("meta"),Ua=Symbol("emitMeta"),P=Symbol("buffer"),Ce=Symbol("queue"),Ke=Symbol("ended"),Ha=Symbol("emittedEnd"),Qe=Symbol("emit"),U=Symbol("unzip"),Kn=Symbol("consumeChunk"),Qn=Symbol("consumeChunkSub"),ns=Symbol("consumeBody"),Wa=Symbol("consumeMeta"),ja=Symbol("consumeHeader"),er=Symbol("consuming"),rs=Symbol("bufferConcat"),is=Symbol("maybeEnd"),tn=Symbol("writing"),Be=Symbol("aborted"),tr=Symbol("onDone"),et=Symbol("sawValidEntry"),nr=Symbol("sawNullBlock"),rr=Symbol("sawEOF"),za=Symbol("closeStream"),tm=t=>!0;Ga.exports=Vh(class extends Yh{constructor(e){e=e||{},super(e),this.file=e.file||"",this[et]=null,this.on(tr,n=>{(this[Y]==="begin"||this[et]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(tr,e.ondone):this.on(tr,n=>{this.emit("prefinish"),this.emit("finish"),this.emit("end")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||Zh,this.filter=typeof e.filter=="function"?e.filter:tm,this.writable=!0,this.readable=!1,this[Ce]=new Xh,this[P]=null,this[Pe]=null,this[Ze]=null,this[Y]="begin",this[$e]="",this[X]=null,this[en]=null,this[Ke]=!1,this[U]=null,this[Be]=!1,this[nr]=!1,this[rr]=!1,this.on("end",()=>this[za]()),typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onentry=="function"&&this.on("entry",e.onentry)}[ja](e,n){this[et]===null&&(this[et]=!1);let r;try{r=new Jh(e,n,this[X],this[en])}catch(i){return this.warn("TAR_ENTRY_INVALID",i)}if(r.nullBlock)this[nr]?(this[rr]=!0,this[Y]==="begin"&&(this[Y]="header"),this[Qe]("eof")):(this[nr]=!0,this[Qe]("nullBlock"));else if(this[nr]=!1,!r.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:r});else if(!r.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:r});else{let i=r.type;if(/^(Symbolic)?Link$/.test(i)&&!r.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:r});else if(!/^(Symbolic)?Link$/.test(i)&&r.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:r});else{let s=this[Ze]=new Kh(r,this[X],this[en]);if(!this[et])if(s.remain){let o=()=>{s.invalid||(this[et]=!0)};s.on("end",o)}else this[et]=!0;s.meta?s.size>this.maxMetaEntrySize?(s.ignore=!0,this[Qe]("ignoredEntry",s),this[Y]="ignore",s.resume()):s.size>0&&(this[$e]="",s.on("data",o=>this[$e]+=o),this[Y]="meta"):(this[X]=null,s.ignore=s.ignore||!this.filter(s.path,s),s.ignore?(this[Qe]("ignoredEntry",s),this[Y]=s.remain?"ignore":"header",s.resume()):(s.remain?this[Y]="body":(this[Y]="header",s.end()),this[Pe]?this[Ce].push(s):(this[Ce].push(s),this[ts]())))}}}[za](){em(()=>this.emit("close"))}[Ma](e){let n=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[Pe]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",r=>this[ts]()),n=!1)):(this[Pe]=null,n=!1),n}[ts](){do;while(this[Ma](this[Ce].shift()));if(!this[Ce].length){let e=this[Pe];!e||e.flowing||e.size===e.remain?this[tn]||this.emit("drain"):e.once("drain",r=>this.emit("drain"))}}[ns](e,n){let r=this[Ze],i=r.blockRemain,s=i>=e.length&&n===0?e:e.slice(n,n+i);return r.write(s),r.blockRemain||(this[Y]="header",this[Ze]=null,r.end()),s.length}[Wa](e,n){let r=this[Ze],i=this[ns](e,n);return this[Ze]||this[Ua](r),i}[Qe](e,n,r){!this[Ce].length&&!this[Pe]?this.emit(e,n,r):this[Ce].push([e,n,r])}[Ua](e){switch(this[Qe]("meta",this[$e]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[X]=qa.parse(this[$e],this[X],!1);break;case"GlobalExtendedHeader":this[en]=qa.parse(this[$e],this[en],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[X]=this[X]||Object.create(null),this[X].path=this[$e].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[X]=this[X]||Object.create(null),this[X].linkpath=this[$e].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[Be]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[Be])return;if(this[U]===null&&e){if(this[P]&&(e=Buffer.concat([this[P],e]),this[P]=null),e.length<es.length)return this[P]=e,!0;for(let r=0;this[U]===null&&r<es.length;r++)e[r]!==es[r]&&(this[U]=!1);if(this[U]===null){let r=this[Ke];this[Ke]=!1,this[U]=new Qh.Unzip,this[U].on("data",s=>this[Kn](s)),this[U].on("error",s=>this.abort(s)),this[U].on("end",s=>{this[Ke]=!0,this[Kn]()}),this[tn]=!0;let i=this[U][r?"end":"write"](e);return this[tn]=!1,i}}this[tn]=!0,this[U]?this[U].write(e):this[Kn](e),this[tn]=!1;let n=this[Ce].length?!1:this[Pe]?this[Pe].flowing:!0;return!n&&!this[Ce].length&&this[Pe].once("drain",r=>this.emit("drain")),n}[rs](e){e&&!this[Be]&&(this[P]=this[P]?Buffer.concat([this[P],e]):e)}[is](){if(this[Ke]&&!this[Ha]&&!this[Be]&&!this[er]){this[Ha]=!0;let e=this[Ze];if(e&&e.blockRemain){let n=this[P]?this[P].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${n} available)`,{entry:e}),this[P]&&e.write(this[P]),e.end()}this[Qe](tr)}}[Kn](e){if(this[er])this[rs](e);else if(!e&&!this[P])this[is]();else{if(this[er]=!0,this[P]){this[rs](e);let n=this[P];this[P]=null,this[Qn](n)}else this[Qn](e);for(;this[P]&&this[P].length>=512&&!this[Be]&&!this[rr];){let n=this[P];this[P]=null,this[Qn](n)}this[er]=!1}(!this[P]||this[Ke])&&this[is]()}[Qn](e){let n=0,r=e.length;for(;n+512<=r&&!this[Be]&&!this[rr];)switch(this[Y]){case"begin":case"header":this[ja](e,n),n+=512;break;case"ignore":case"body":n+=this[ns](e,n);break;case"meta":n+=this[Wa](e,n);break;default:throw new Error("invalid state: "+this[Y])}n<r&&(this[P]?this[P]=Buffer.concat([e.slice(n),this[P]]):this[P]=e.slice(n))}end(e){this[Be]||(this[U]?this[U].end(e):(this[Ke]=!0,this.write(e)))}})});var sr=m((Xy,Xa)=>{"use strict";var nm=ut(),Ja=ir(),kt=require("fs"),rm=Rt(),Va=require("path"),ss=yt();Xa.exports=(t,e,n)=>{typeof t=="function"?(n=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(n=e,e=null),e?e=Array.from(e):e=[];let r=nm(t);if(r.sync&&typeof n=="function")throw new TypeError("callback not supported for sync tar functions");if(!r.file&&typeof n=="function")throw new TypeError("callback only supported with file option");return e.length&&sm(r,e),r.noResume||im(r),r.file&&r.sync?om(r):r.file?am(r,n):Ya(r)};var im=t=>{let e=t.onentry;t.onentry=e?n=>{e(n),n.resume()}:n=>n.resume()},sm=(t,e)=>{let n=new Map(e.map(s=>[ss(s),!0])),r=t.filter,i=(s,o)=>{let a=o||Va.parse(s).root||".",c=s===a?!1:n.has(s)?n.get(s):i(Va.dirname(s),a);return n.set(s,c),c};t.filter=r?(s,o)=>r(s,o)&&i(ss(s)):s=>i(ss(s))},om=t=>{let e=Ya(t),n=t.file,r=!0,i;try{let s=kt.statSync(n),o=t.maxReadSize||16*1024*1024;if(s.size<o)e.end(kt.readFileSync(n));else{let a=0,c=Buffer.allocUnsafe(o);for(i=kt.openSync(n,"r");a<s.size;){let l=kt.readSync(i,c,0,o,a);a+=l,e.write(c.slice(0,l))}e.end()}r=!1}finally{if(r&&i)try{kt.closeSync(i)}catch{}}},am=(t,e)=>{let n=new Ja(t),r=t.maxReadSize||16*1024*1024,i=t.file,s=new Promise((o,a)=>{n.on("error",a),n.on("end",o),kt.stat(i,(c,l)=>{if(c)a(c);else{let u=new rm.ReadStream(i,{readSize:r,size:l.size});u.on("error",a),u.pipe(n)}})});return e?s.then(e,e):s},Ya=t=>new Ja(t)});var nc=m((Zy,tc)=>{"use strict";var cm=ut(),or=jn(),Za=Rt(),Ka=sr(),Qa=require("path");tc.exports=(t,e,n)=>{if(typeof e=="function"&&(n=e),Array.isArray(t)&&(e=t,t={}),!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);let r=cm(t);if(r.sync&&typeof n=="function")throw new TypeError("callback not supported for sync tar functions");if(!r.file&&typeof n=="function")throw new TypeError("callback only supported with file option");return r.file&&r.sync?lm(r,e):r.file?um(r,e,n):r.sync?fm(r,e):dm(r,e)};var lm=(t,e)=>{let n=new or.Sync(t),r=new Za.WriteStreamSync(t.file,{mode:t.mode||438});n.pipe(r),ec(n,e)},um=(t,e,n)=>{let r=new or(t),i=new Za.WriteStream(t.file,{mode:t.mode||438});r.pipe(i);let s=new Promise((o,a)=>{i.on("error",a),i.on("close",o),r.on("error",a)});return os(r,e),n?s.then(n,n):s},ec=(t,e)=>{e.forEach(n=>{n.charAt(0)==="@"?Ka({file:Qa.resolve(t.cwd,n.slice(1)),sync:!0,noResume:!0,onentry:r=>t.add(r)}):t.add(n)}),t.end()},os=(t,e)=>{for(;e.length;){let n=e.shift();if(n.charAt(0)==="@")return Ka({file:Qa.resolve(t.cwd,n.slice(1)),noResume:!0,onentry:r=>t.add(r)}).then(r=>os(t,e));t.add(n)}t.end()},fm=(t,e)=>{let n=new or.Sync(t);return ec(n,e),n},dm=(t,e)=>{let n=new or(t);return os(n,e),n}});var as=m((Ky,lc)=>{"use strict";var hm=ut(),rc=jn(),j=require("fs"),ic=Rt(),sc=sr(),oc=require("path"),ac=wt();lc.exports=(t,e,n)=>{let r=hm(t);if(!r.file)throw new TypeError("file is required");if(r.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),r.sync?mm(r,e):gm(r,e,n)};var mm=(t,e)=>{let n=new rc.Sync(t),r=!0,i,s;try{try{i=j.openSync(t.file,"r+")}catch(c){if(c.code==="ENOENT")i=j.openSync(t.file,"w+");else throw c}let o=j.fstatSync(i),a=Buffer.alloc(512);e:for(s=0;s<o.size;s+=512){for(let u=0,f=0;u<512;u+=f){if(f=j.readSync(i,a,u,a.length-u,s+u),s===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!f)break e}let c=new ac(a);if(!c.cksumValid)break;let l=512*Math.ceil(c.size/512);if(s+l+512>o.size)break;s+=l,t.mtimeCache&&t.mtimeCache.set(c.path,c.mtime)}r=!1,pm(t,n,s,i,e)}finally{if(r)try{j.closeSync(i)}catch{}}},pm=(t,e,n,r,i)=>{let s=new ic.WriteStreamSync(t.file,{fd:r,start:n});e.pipe(s),wm(e,i)},gm=(t,e,n)=>{e=Array.from(e);let r=new rc(t),i=(o,a,c)=>{let l=(g,y)=>{g?j.close(o,w=>c(g)):c(null,y)},u=0;if(a===0)return l(null,0);let f=0,d=Buffer.alloc(512),h=(g,y)=>{if(g)return l(g);if(f+=y,f<512&&y)return j.read(o,d,f,d.length-f,u+f,h);if(u===0&&d[0]===31&&d[1]===139)return l(new Error("cannot append to compressed archives"));if(f<512)return l(null,u);let w=new ac(d);if(!w.cksumValid)return l(null,u);let p=512*Math.ceil(w.size/512);if(u+p+512>a||(u+=p+512,u>=a))return l(null,u);t.mtimeCache&&t.mtimeCache.set(w.path,w.mtime),f=0,j.read(o,d,0,512,u,h)};j.read(o,d,0,512,u,h)},s=new Promise((o,a)=>{r.on("error",a);let c="r+",l=(u,f)=>{if(u&&u.code==="ENOENT"&&c==="r+")return c="w+",j.open(t.file,c,l);if(u)return a(u);j.fstat(f,(d,h)=>{if(d)return j.close(f,()=>a(d));i(f,h.size,(g,y)=>{if(g)return a(g);let w=new ic.WriteStream(t.file,{fd:f,start:y});r.pipe(w),w.on("error",a),w.on("close",o),cc(r,e)})})};j.open(t.file,c,l)});return n?s.then(n,n):s},wm=(t,e)=>{e.forEach(n=>{n.charAt(0)==="@"?sc({file:oc.resolve(t.cwd,n.slice(1)),sync:!0,noResume:!0,onentry:r=>t.add(r)}):t.add(n)}),t.end()},cc=(t,e)=>{for(;e.length;){let n=e.shift();if(n.charAt(0)==="@")return sc({file:oc.resolve(t.cwd,n.slice(1)),noResume:!0,onentry:r=>t.add(r)}).then(r=>cc(t,e));t.add(n)}t.end()}});var fc=m((Qy,uc)=>{"use strict";var ym=ut(),Em=as();uc.exports=(t,e,n)=>{let r=ym(t);if(!r.file)throw new TypeError("file is required");if(r.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),vm(r),Em(r,e,n)};var vm=t=>{let e=t.filter;t.mtimeCache||(t.mtimeCache=new Map),t.filter=e?(n,r)=>e(n,r)&&!(t.mtimeCache.get(n)>r.mtime):(n,r)=>!(t.mtimeCache.get(n)>r.mtime)}});var mc=m((eE,hc)=>{var{promisify:dc}=require("util"),qe=require("fs"),xm=t=>{if(!t)t={mode:511,fs:qe};else if(typeof t=="object")t={mode:511,fs:qe,...t};else if(typeof t=="number")t={mode:t,fs:qe};else if(typeof t=="string")t={mode:parseInt(t,8),fs:qe};else throw new TypeError("invalid options argument");return t.mkdir=t.mkdir||t.fs.mkdir||qe.mkdir,t.mkdirAsync=dc(t.mkdir),t.stat=t.stat||t.fs.stat||qe.stat,t.statAsync=dc(t.stat),t.statSync=t.statSync||t.fs.statSync||qe.statSync,t.mkdirSync=t.mkdirSync||t.fs.mkdirSync||qe.mkdirSync,t};hc.exports=xm});var gc=m((tE,pc)=>{var Sm=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:bm,parse:Pm}=require("path"),Cm=t=>{if(/\0/.test(t))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:t,code:"ERR_INVALID_ARG_VALUE"});if(t=bm(t),Sm==="win32"){let e=/[*|"<>?:]/,{root:n}=Pm(t);if(e.test(t.substr(n.length)))throw Object.assign(new Error("Illegal characters in path."),{path:t,code:"EINVAL"})}return t};pc.exports=Cm});var xc=m((nE,vc)=>{var{dirname:wc}=require("path"),yc=(t,e,n=void 0)=>n===e?Promise.resolve():t.statAsync(e).then(r=>r.isDirectory()?n:void 0,r=>r.code==="ENOENT"?yc(t,wc(e),e):void 0),Ec=(t,e,n=void 0)=>{if(n!==e)try{return t.statSync(e).isDirectory()?n:void 0}catch(r){return r.code==="ENOENT"?Ec(t,wc(e),e):void 0}};vc.exports={findMade:yc,findMadeSync:Ec}});var us=m((rE,bc)=>{var{dirname:Sc}=require("path"),cs=(t,e,n)=>{e.recursive=!1;let r=Sc(t);return r===t?e.mkdirAsync(t,e).catch(i=>{if(i.code!=="EISDIR")throw i}):e.mkdirAsync(t,e).then(()=>n||t,i=>{if(i.code==="ENOENT")return cs(r,e).then(s=>cs(t,e,s));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;return e.statAsync(t).then(s=>{if(s.isDirectory())return n;throw i},()=>{throw i})})},ls=(t,e,n)=>{let r=Sc(t);if(e.recursive=!1,r===t)try{return e.mkdirSync(t,e)}catch(i){if(i.code!=="EISDIR")throw i;return}try{return e.mkdirSync(t,e),n||t}catch(i){if(i.code==="ENOENT")return ls(t,e,ls(r,e,n));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;try{if(!e.statSync(t).isDirectory())throw i}catch{throw i}}};bc.exports={mkdirpManual:cs,mkdirpManualSync:ls}});var Lc=m((iE,Cc)=>{var{dirname:Pc}=require("path"),{findMade:Lm,findMadeSync:Rm}=xc(),{mkdirpManual:km,mkdirpManualSync:_m}=us(),Tm=(t,e)=>(e.recursive=!0,Pc(t)===t?e.mkdirAsync(t,e):Lm(e,t).then(r=>e.mkdirAsync(t,e).then(()=>r).catch(i=>{if(i.code==="ENOENT")return km(t,e);throw i}))),Om=(t,e)=>{if(e.recursive=!0,Pc(t)===t)return e.mkdirSync(t,e);let r=Rm(e,t);try{return e.mkdirSync(t,e),r}catch(i){if(i.code==="ENOENT")return _m(t,e);throw i}};Cc.exports={mkdirpNative:Tm,mkdirpNativeSync:Om}});var Tc=m((sE,_c)=>{var Rc=require("fs"),Dm=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,fs=Dm.replace(/^v/,"").split("."),kc=+fs[0]>10||+fs[0]==10&&+fs[1]>=12,Im=kc?t=>t.mkdir===Rc.mkdir:()=>!1,Fm=kc?t=>t.mkdirSync===Rc.mkdirSync:()=>!1;_c.exports={useNative:Im,useNativeSync:Fm}});var Ac=m((oE,Nc)=>{var _t=mc(),Tt=gc(),{mkdirpNative:Oc,mkdirpNativeSync:Dc}=Lc(),{mkdirpManual:Ic,mkdirpManualSync:Fc}=us(),{useNative:Nm,useNativeSync:Am}=Tc(),Ot=(t,e)=>(t=Tt(t),e=_t(e),Nm(e)?Oc(t,e):Ic(t,e)),$m=(t,e)=>(t=Tt(t),e=_t(e),Am(e)?Dc(t,e):Fc(t,e));Ot.sync=$m;Ot.native=(t,e)=>Oc(Tt(t),_t(e));Ot.manual=(t,e)=>Ic(Tt(t),_t(e));Ot.nativeSync=(t,e)=>Dc(Tt(t),_t(e));Ot.manualSync=(t,e)=>Fc(Tt(t),_t(e));Nc.exports=Ot});var Wc=m((aE,Hc)=>{"use strict";var Z=require("fs"),tt=require("path"),Bm=Z.lchown?"lchown":"chown",qm=Z.lchownSync?"lchownSync":"chownSync",Bc=Z.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),$c=(t,e,n)=>{try{return Z[qm](t,e,n)}catch(r){if(r.code!=="ENOENT")throw r}},Mm=(t,e,n)=>{try{return Z.chownSync(t,e,n)}catch(r){if(r.code!=="ENOENT")throw r}},Um=Bc?(t,e,n,r)=>i=>{!i||i.code!=="EISDIR"?r(i):Z.chown(t,e,n,r)}:(t,e,n,r)=>r,ds=Bc?(t,e,n)=>{try{return $c(t,e,n)}catch(r){if(r.code!=="EISDIR")throw r;Mm(t,e,n)}}:(t,e,n)=>$c(t,e,n),Hm=process.version,qc=(t,e,n)=>Z.readdir(t,e,n),Wm=(t,e)=>Z.readdirSync(t,e);/^v4\./.test(Hm)&&(qc=(t,e,n)=>Z.readdir(t,n));var ar=(t,e,n,r)=>{Z[Bm](t,e,n,Um(t,e,n,i=>{r(i&&i.code!=="ENOENT"?i:null)}))},Mc=(t,e,n,r,i)=>{if(typeof e=="string")return Z.lstat(tt.resolve(t,e),(s,o)=>{if(s)return i(s.code!=="ENOENT"?s:null);o.name=e,Mc(t,o,n,r,i)});if(e.isDirectory())hs(tt.resolve(t,e.name),n,r,s=>{if(s)return i(s);let o=tt.resolve(t,e.name);ar(o,n,r,i)});else{let s=tt.resolve(t,e.name);ar(s,n,r,i)}},hs=(t,e,n,r)=>{qc(t,{withFileTypes:!0},(i,s)=>{if(i){if(i.code==="ENOENT")return r();if(i.code!=="ENOTDIR"&&i.code!=="ENOTSUP")return r(i)}if(i||!s.length)return ar(t,e,n,r);let o=s.length,a=null,c=l=>{if(!a){if(l)return r(a=l);if(--o===0)return ar(t,e,n,r)}};s.forEach(l=>Mc(t,l,e,n,c))})},jm=(t,e,n,r)=>{if(typeof e=="string")try{let i=Z.lstatSync(tt.resolve(t,e));i.name=e,e=i}catch(i){if(i.code==="ENOENT")return;throw i}e.isDirectory()&&Uc(tt.resolve(t,e.name),n,r),ds(tt.resolve(t,e.name),n,r)},Uc=(t,e,n)=>{let r;try{r=Wm(t,{withFileTypes:!0})}catch(i){if(i.code==="ENOENT")return;if(i.code==="ENOTDIR"||i.code==="ENOTSUP")return ds(t,e,n);throw i}return r&&r.length&&r.forEach(i=>jm(t,i,e,n)),ds(t,e,n)};Hc.exports=hs;hs.sync=Uc});var Vc=m((cE,ms)=>{"use strict";var jc=Ac(),K=require("fs"),cr=require("path"),zc=Wc(),re=pt(),lr=class extends Error{constructor(e,n){super("Cannot extract through symbolic link"),this.path=n,this.symlink=e}get name(){return"SylinkError"}},ur=class extends Error{constructor(e,n){super(n+": Cannot cd into '"+e+"'"),this.path=e,this.code=n}get name(){return"CwdError"}},fr=(t,e)=>t.get(re(e)),nn=(t,e,n)=>t.set(re(e),n),zm=(t,e)=>{K.stat(t,(n,r)=>{(n||!r.isDirectory())&&(n=new ur(t,n&&n.code||"ENOTDIR")),e(n)})};ms.exports=(t,e,n)=>{t=re(t);let r=e.umask,i=e.mode|448,s=(i&r)!==0,o=e.uid,a=e.gid,c=typeof o=="number"&&typeof a=="number"&&(o!==e.processUid||a!==e.processGid),l=e.preserve,u=e.unlink,f=e.cache,d=re(e.cwd),h=(w,p)=>{w?n(w):(nn(f,t,!0),p&&c?zc(p,o,a,x=>h(x)):s?K.chmod(t,i,n):n())};if(f&&fr(f,t)===!0)return h();if(t===d)return zm(t,h);if(l)return jc(t,{mode:i}).then(w=>h(null,w),h);let y=re(cr.relative(d,t)).split("/");dr(d,y,i,f,u,d,null,h)};var dr=(t,e,n,r,i,s,o,a)=>{if(!e.length)return a(null,o);let c=e.shift(),l=re(cr.resolve(t+"/"+c));if(fr(r,l))return dr(l,e,n,r,i,s,o,a);K.mkdir(l,n,Gc(l,e,n,r,i,s,o,a))},Gc=(t,e,n,r,i,s,o,a)=>c=>{c?K.lstat(t,(l,u)=>{if(l)l.path=l.path&&re(l.path),a(l);else if(u.isDirectory())dr(t,e,n,r,i,s,o,a);else if(i)K.unlink(t,f=>{if(f)return a(f);K.mkdir(t,n,Gc(t,e,n,r,i,s,o,a))});else{if(u.isSymbolicLink())return a(new lr(t,t+"/"+e.join("/")));a(c)}}):(o=o||t,dr(t,e,n,r,i,s,o,a))},Gm=t=>{let e=!1,n="ENOTDIR";try{e=K.statSync(t).isDirectory()}catch(r){n=r.code}finally{if(!e)throw new ur(t,n)}};ms.exports.sync=(t,e)=>{t=re(t);let n=e.umask,r=e.mode|448,i=(r&n)!==0,s=e.uid,o=e.gid,a=typeof s=="number"&&typeof o=="number"&&(s!==e.processUid||o!==e.processGid),c=e.preserve,l=e.unlink,u=e.cache,f=re(e.cwd),d=w=>{nn(u,t,!0),w&&a&&zc.sync(w,s,o),i&&K.chmodSync(t,r)};if(u&&fr(u,t)===!0)return d();if(t===f)return Gm(f),d();if(c)return d(jc.sync(t,r));let g=re(cr.relative(f,t)).split("/"),y=null;for(let w=g.shift(),p=f;w&&(p+="/"+w);w=g.shift())if(p=re(cr.resolve(p)),!fr(u,p))try{K.mkdirSync(p,r),y=y||p,nn(u,p,!0)}catch{let L=K.lstatSync(p);if(L.isDirectory()){nn(u,p,!0);continue}else if(l){K.unlinkSync(p),K.mkdirSync(p,r),y=y||p,nn(u,p,!0);continue}else if(L.isSymbolicLink())return new lr(p,p+"/"+g.join("/"))}return d(y)}});var gs=m((lE,Jc)=>{var ps=Object.create(null),{hasOwnProperty:Vm}=Object.prototype;Jc.exports=t=>(Vm.call(ps,t)||(ps[t]=t.normalize("NFKD")),ps[t])});var Kc=m((uE,Zc)=>{var Yc=require("assert"),Jm=gs(),Ym=yt(),{join:Xc}=require("path"),Xm=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,Zm=Xm==="win32";Zc.exports=()=>{let t=new Map,e=new Map,n=l=>l.split("/").slice(0,-1).reduce((f,d)=>(f.length&&(d=Xc(f[f.length-1],d)),f.push(d||"/"),f),[]),r=new Set,i=l=>{let u=e.get(l);if(!u)throw new Error("function does not have any path reservations");return{paths:u.paths.map(f=>t.get(f)),dirs:[...u.dirs].map(f=>t.get(f))}},s=l=>{let{paths:u,dirs:f}=i(l);return u.every(d=>d[0]===l)&&f.every(d=>d[0]instanceof Set&&d[0].has(l))},o=l=>r.has(l)||!s(l)?!1:(r.add(l),l(()=>a(l)),!0),a=l=>{if(!r.has(l))return!1;let{paths:u,dirs:f}=e.get(l),d=new Set;return u.forEach(h=>{let g=t.get(h);Yc.equal(g[0],l),g.length===1?t.delete(h):(g.shift(),typeof g[0]=="function"?d.add(g[0]):g[0].forEach(y=>d.add(y)))}),f.forEach(h=>{let g=t.get(h);Yc(g[0]instanceof Set),g[0].size===1&&g.length===1?t.delete(h):g[0].size===1?(g.shift(),d.add(g[0])):g[0].delete(l)}),r.delete(l),d.forEach(h=>o(h)),!0};return{check:s,reserve:(l,u)=>{l=Zm?["win32 parallelization disabled"]:l.map(d=>Jm(Ym(Xc(d))).toLowerCase());let f=new Set(l.map(d=>n(d)).reduce((d,h)=>d.concat(h)));return e.set(u,{dirs:f,paths:l}),l.forEach(d=>{let h=t.get(d);h?h.push(u):t.set(d,[u])}),f.forEach(d=>{let h=t.get(d);h?h[h.length-1]instanceof Set?h[h.length-1].add(u):h.push(new Set([u])):t.set(d,[new Set([u])])}),o(u)}}}});var tl=m((fE,el)=>{var Km=process.env.__FAKE_PLATFORM__||process.platform,Qm=Km==="win32",ep=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:tp,O_TRUNC:np,O_WRONLY:rp,UV_FS_O_FILEMAP:Qc=0}=ep.constants,ip=Qm&&!!Qc,sp=512*1024,op=Qc|np|tp|rp;el.exports=ip?t=>t<sp?op:"w":()=>"w"});var Cs=m((dE,pl)=>{"use strict";var ap=require("assert"),cp=ir(),v=require("fs"),lp=Rt(),Le=require("path"),dl=Vc(),nl=Pi(),up=Kc(),fp=Ci(),z=pt(),dp=yt(),hp=gs(),rl=Symbol("onEntry"),Es=Symbol("checkFs"),il=Symbol("checkFs2"),pr=Symbol("pruneCache"),vs=Symbol("isReusable"),Q=Symbol("makeFs"),xs=Symbol("file"),Ss=Symbol("directory"),gr=Symbol("link"),sl=Symbol("symlink"),ol=Symbol("hardlink"),al=Symbol("unsupported"),cl=Symbol("checkPath"),Me=Symbol("mkdir"),I=Symbol("onError"),hr=Symbol("pending"),ll=Symbol("pend"),Dt=Symbol("unpend"),ws=Symbol("ended"),ys=Symbol("maybeClose"),bs=Symbol("skip"),rn=Symbol("doChown"),sn=Symbol("uid"),on=Symbol("gid"),an=Symbol("checkedCwd"),hl=require("crypto"),ml=tl(),mp=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,cn=mp==="win32",pp=(t,e)=>{if(!cn)return v.unlink(t,e);let n=t+".DELETE."+hl.randomBytes(16).toString("hex");v.rename(t,n,r=>{if(r)return e(r);v.unlink(n,e)})},gp=t=>{if(!cn)return v.unlinkSync(t);let e=t+".DELETE."+hl.randomBytes(16).toString("hex");v.renameSync(t,e),v.unlinkSync(e)},ul=(t,e,n)=>t===t>>>0?t:e===e>>>0?e:n,fl=t=>hp(dp(z(t))).toLowerCase(),wp=(t,e)=>{e=fl(e);for(let n of t.keys()){let r=fl(n);(r===e||r.indexOf(e+"/")===0)&&t.delete(n)}},yp=t=>{for(let e of t.keys())t.delete(e)},ln=class extends cp{constructor(e){if(e||(e={}),e.ondone=n=>{this[ws]=!0,this[ys]()},super(e),this[an]=!1,this.reservations=up(),this.transform=typeof e.transform=="function"?e.transform:null,this.writable=!0,this.readable=!1,this[hr]=0,this[ws]=!1,this.dirCache=e.dirCache||new Map,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||cn,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=z(Le.resolve(e.cwd||process.cwd())),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:process.umask(),this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",n=>this[rl](n))}warn(e,n,r={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(r.recoverable=!1),super.warn(e,n,r)}[ys](){this[ws]&&this[hr]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"))}[cl](e){if(this.strip){let n=z(e.path).split("/");if(n.length<this.strip)return!1;if(e.path=n.slice(this.strip).join("/"),e.type==="Link"){let r=z(e.linkpath).split("/");if(r.length>=this.strip)e.linkpath=r.slice(this.strip).join("/");else return!1}}if(!this.preservePaths){let n=z(e.path),r=n.split("/");if(r.includes("..")||cn&&/^[a-z]:\.\.$/i.test(r[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:n}),!1;let[i,s]=fp(n);i&&(e.path=s,this.warn("TAR_ENTRY_INFO",`stripping ${i} from absolute path`,{entry:e,path:n}))}if(Le.isAbsolute(e.path)?e.absolute=z(Le.resolve(e.path)):e.absolute=z(Le.resolve(this.cwd,e.path)),!this.preservePaths&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:z(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:n}=Le.win32.parse(e.absolute);e.absolute=n+nl.encode(e.absolute.slice(n.length));let{root:r}=Le.win32.parse(e.path);e.path=r+nl.encode(e.path.slice(r.length))}return!0}[rl](e){if(!this[cl](e))return e.resume();switch(ap.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[Es](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[al](e)}}[I](e,n){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:n}),this[Dt](),n.resume())}[Me](e,n,r){dl(z(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:n,noChmod:this.noChmod},r)}[rn](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[sn](e){return ul(this.uid,e.uid,this.processUid)}[on](e){return ul(this.gid,e.gid,this.processGid)}[xs](e,n){let r=e.mode&4095||this.fmode,i=new lp.WriteStream(e.absolute,{flags:ml(e.size),mode:r,autoClose:!1});i.on("error",c=>{i.fd&&v.close(i.fd,()=>{}),i.write=()=>!0,this[I](c,e),n()});let s=1,o=c=>{if(c){i.fd&&v.close(i.fd,()=>{}),this[I](c,e),n();return}--s===0&&v.close(i.fd,l=>{l?this[I](l,e):this[Dt](),n()})};i.on("finish",c=>{let l=e.absolute,u=i.fd;if(e.mtime&&!this.noMtime){s++;let f=e.atime||new Date,d=e.mtime;v.futimes(u,f,d,h=>h?v.utimes(l,f,d,g=>o(g&&h)):o())}if(this[rn](e)){s++;let f=this[sn](e),d=this[on](e);v.fchown(u,f,d,h=>h?v.chown(l,f,d,g=>o(g&&h)):o())}o()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",c=>{this[I](c,e),n()}),e.pipe(a)),a.pipe(i)}[Ss](e,n){let r=e.mode&4095||this.dmode;this[Me](e.absolute,r,i=>{if(i){this[I](i,e),n();return}let s=1,o=a=>{--s===0&&(n(),this[Dt](),e.resume())};e.mtime&&!this.noMtime&&(s++,v.utimes(e.absolute,e.atime||new Date,e.mtime,o)),this[rn](e)&&(s++,v.chown(e.absolute,this[sn](e),this[on](e),o)),o()})}[al](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[sl](e,n){this[gr](e,e.linkpath,"symlink",n)}[ol](e,n){let r=z(Le.resolve(this.cwd,e.linkpath));this[gr](e,r,"link",n)}[ll](){this[hr]++}[Dt](){this[hr]--,this[ys]()}[bs](e){this[Dt](),e.resume()}[vs](e,n){return e.type==="File"&&!this.unlink&&n.isFile()&&n.nlink<=1&&!cn}[Es](e){this[ll]();let n=[e.path];e.linkpath&&n.push(e.linkpath),this.reservations.reserve(n,r=>this[il](e,r))}[pr](e){e.type==="SymbolicLink"?yp(this.dirCache):e.type!=="Directory"&&wp(this.dirCache,e.absolute)}[il](e,n){this[pr](e);let r=a=>{this[pr](e),n(a)},i=()=>{this[Me](this.cwd,this.dmode,a=>{if(a){this[I](a,e),r();return}this[an]=!0,s()})},s=()=>{if(e.absolute!==this.cwd){let a=z(Le.dirname(e.absolute));if(a!==this.cwd)return this[Me](a,this.dmode,c=>{if(c){this[I](c,e),r();return}o()})}o()},o=()=>{v.lstat(e.absolute,(a,c)=>{if(c&&(this.keep||this.newer&&c.mtime>e.mtime)){this[bs](e),r();return}if(a||this[vs](e,c))return this[Q](null,e,r);if(c.isDirectory()){if(e.type==="Directory"){let l=!this.noChmod&&e.mode&&(c.mode&4095)!==e.mode,u=f=>this[Q](f,e,r);return l?v.chmod(e.absolute,e.mode,u):u()}if(e.absolute!==this.cwd)return v.rmdir(e.absolute,l=>this[Q](l,e,r))}if(e.absolute===this.cwd)return this[Q](null,e,r);pp(e.absolute,l=>this[Q](l,e,r))})};this[an]?s():i()}[Q](e,n,r){if(e){this[I](e,n),r();return}switch(n.type){case"File":case"OldFile":case"ContiguousFile":return this[xs](n,r);case"Link":return this[ol](n,r);case"SymbolicLink":return this[sl](n,r);case"Directory":case"GNUDumpDir":return this[Ss](n,r)}}[gr](e,n,r,i){v[r](n,e.absolute,s=>{s?this[I](s,e):(this[Dt](),e.resume()),i()})}},mr=t=>{try{return[null,t()]}catch(e){return[e,null]}},Ps=class extends ln{[Q](e,n){return super[Q](e,n,()=>{})}[Es](e){if(this[pr](e),!this[an]){let s=this[Me](this.cwd,this.dmode);if(s)return this[I](s,e);this[an]=!0}if(e.absolute!==this.cwd){let s=z(Le.dirname(e.absolute));if(s!==this.cwd){let o=this[Me](s,this.dmode);if(o)return this[I](o,e)}}let[n,r]=mr(()=>v.lstatSync(e.absolute));if(r&&(this.keep||this.newer&&r.mtime>e.mtime))return this[bs](e);if(n||this[vs](e,r))return this[Q](null,e);if(r.isDirectory()){if(e.type==="Directory"){let o=!this.noChmod&&e.mode&&(r.mode&4095)!==e.mode,[a]=o?mr(()=>{v.chmodSync(e.absolute,e.mode)}):[];return this[Q](a,e)}let[s]=mr(()=>v.rmdirSync(e.absolute));this[Q](s,e)}let[i]=e.absolute===this.cwd?[]:mr(()=>gp(e.absolute));this[Q](i,e)}[xs](e,n){let r=e.mode&4095||this.fmode,i=a=>{let c;try{v.closeSync(s)}catch(l){c=l}(a||c)&&this[I](a||c,e),n()},s;try{s=v.openSync(e.absolute,ml(e.size),r)}catch(a){return i(a)}let o=this.transform&&this.transform(e)||e;o!==e&&(o.on("error",a=>this[I](a,e)),e.pipe(o)),o.on("data",a=>{try{v.writeSync(s,a,0,a.length)}catch(c){i(c)}}),o.on("end",a=>{let c=null;if(e.mtime&&!this.noMtime){let l=e.atime||new Date,u=e.mtime;try{v.futimesSync(s,l,u)}catch(f){try{v.utimesSync(e.absolute,l,u)}catch{c=f}}}if(this[rn](e)){let l=this[sn](e),u=this[on](e);try{v.fchownSync(s,l,u)}catch(f){try{v.chownSync(e.absolute,l,u)}catch{c=c||f}}}i(c)})}[Ss](e,n){let r=e.mode&4095||this.dmode,i=this[Me](e.absolute,r);if(i){this[I](i,e),n();return}if(e.mtime&&!this.noMtime)try{v.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch{}if(this[rn](e))try{v.chownSync(e.absolute,this[sn](e),this[on](e))}catch{}n(),e.resume()}[Me](e,n){try{return dl.sync(z(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:n})}catch(r){return r}}[gr](e,n,r,i){try{v[r+"Sync"](n,e.absolute),i(),e.resume()}catch(s){return this[I](s,e)}}};ln.Sync=Ps;pl.exports=ln});var vl=m((hE,El)=>{"use strict";var Ep=ut(),wr=Cs(),wl=require("fs"),yl=Rt(),gl=require("path"),Ls=yt();El.exports=(t,e,n)=>{typeof t=="function"?(n=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(n=e,e=null),e?e=Array.from(e):e=[];let r=Ep(t);if(r.sync&&typeof n=="function")throw new TypeError("callback not supported for sync tar functions");if(!r.file&&typeof n=="function")throw new TypeError("callback only supported with file option");return e.length&&vp(r,e),r.file&&r.sync?xp(r):r.file?Sp(r,n):r.sync?bp(r):Pp(r)};var vp=(t,e)=>{let n=new Map(e.map(s=>[Ls(s),!0])),r=t.filter,i=(s,o)=>{let a=o||gl.parse(s).root||".",c=s===a?!1:n.has(s)?n.get(s):i(gl.dirname(s),a);return n.set(s,c),c};t.filter=r?(s,o)=>r(s,o)&&i(Ls(s)):s=>i(Ls(s))},xp=t=>{let e=new wr.Sync(t),n=t.file,r=wl.statSync(n),i=t.maxReadSize||16*1024*1024;new yl.ReadStreamSync(n,{readSize:i,size:r.size}).pipe(e)},Sp=(t,e)=>{let n=new wr(t),r=t.maxReadSize||16*1024*1024,i=t.file,s=new Promise((o,a)=>{n.on("error",a),n.on("close",o),wl.stat(i,(c,l)=>{if(c)a(c);else{let u=new yl.ReadStream(i,{readSize:r,size:l.size});u.on("error",a),u.pipe(n)}})});return e?s.then(e,e):s},bp=t=>new wr.Sync(t),Pp=t=>new wr(t)});var Rs=m(R=>{"use strict";R.c=R.create=nc();R.r=R.replace=as();R.t=R.list=sr();R.u=R.update=fc();R.x=R.extract=vl();R.Pack=jn();R.Unpack=Cs();R.Parse=ir();R.ReadEntry=Rn();R.WriteEntry=Ni();R.Header=wt();R.Pax=_n();R.types=wi()});var ks=m((pE,xl)=>{xl.exports=function(e,n,r){e(n),r&&r(n===!0?null:n)}});var yr=m((gE,bl)=>{"use strict";var Sl=ks();bl.exports=function(e,n){if(!e)return function(i,s){return i?Sl(s,i,n):s(!0)};Array.isArray(e)||(e=Object.keys(e).map(function(i){return e[i]}));var r=0;return function(i,s){if(i)return Sl(s,i,n);r>=e.length?s(!0):s(null,e[r++])}}});var Cl=m((wE,Pl)=>{"use strict";var Cp=yr();Pl.exports=function(t){return Cp(Object.keys(t))}});var _s=m((yE,Ll)=>{"use strict";var Lp=ks();Ll.exports=function(e,n){return function(r,i){if(r)return Lp(i,r,n);if(e!=null){var s=e;e=null,i(null,s)}else i(!0)}}});var kl=m((EE,Rl)=>{"use strict";Rl.exports=function(e){var n=0;return e=e||1/0,function(r,i){if(r)return i&&i(r);if(n>e)return i(!0);i(null,n++)}}});var Tl=m((vE,_l)=>{"use strict";_l.exports=function(e){return e=e||Math.random,function(n,r){return n?r&&r(n):r(null,e())}}});var Dl=m((xE,Ol)=>{"use strict";Ol.exports=function(){return function(e,n){n(!0)}}});var Fl=m((SE,Il)=>{"use strict";Il.exports=function(e){return function(n,r){r(e)}}});var Al=m((bE,Nl)=>{"use strict";Nl.exports={keys:Cl(),once:_s(),values:yr(),count:kl(),infinite:Tl(),empty:Dl(),error:Fl()}});var It=m((PE,$l)=>{"use strict";$l.exports=function(e,n){var r,i,s;n||(s=new Error("no done callback supplied"));function o(a){if(r=a,i)return o.abort();(function c(){for(var l=!0,u=!1;l;)if(u=!1,r(null,function(f,d){if(u=!0,f=f||i){if(l=!1,n)n(f===!0?null:f);else if(f&&f!==!0)throw console.warn(s),f}else e&&e(d)===!1||i?(l=!1,r(i||!0,n||function(){})):l||c()}),!u){l=!1;return}})()}return o.abort=function(a,c){if(typeof a=="function"&&(c=a,a=!0),i=a||!0,r)return r(i,c||function(){})},o}});var ql=m((CE,Bl)=>{"use strict";var Rp=It();Bl.exports=function(e){return Rp(null,e)}});var Ul=m((LE,Ml)=>{"use strict";var kp=It();Ml.exports=function(e){return kp(function(n){console.log(n)},e)}});var Ft=m((RE,Hl)=>{Hl.exports=function(e){return e&&(typeof e=="string"?function(n){return n[e]}:typeof e=="object"&&typeof e.exec=="function"?function(n){var r=e.exec(n);return r&&r[0]}:e)}});var zl=m((kE,jl)=>{"use strict";function Wl(t){return t}var _p=Ft(),Tp=It();jl.exports=function(e,n){var r=!1;return n?e=_p(e)||Wl:(n=e,e=Wl),Tp(function(i){if(e(i))return r=!0,n(null,i),!1},function(i){r||n(i===!0?null:i,null)})}});var Er=m((_E,Gl)=>{"use strict";var Op=It();Gl.exports=function(e,n,r){r||(r=n,n=null);var i=Op(function(s){n=e(n,s)},function(s){r(s,n)});return arguments.length===2?function(s){s(null,function(o,a){if(o)return r(o===!0?null:o);n=a,i(s)})}:i}});var Ts=m((TE,Vl)=>{"use strict";var Dp=Er();Vl.exports=function(e){return Dp(function(n,r){return n.push(r),n},[],e)}});var Yl=m((OE,Jl)=>{"use strict";var Ip=Ts();Jl.exports=function(){return e=>{let n,r,i=new Promise((s,o)=>{n=s,r=o});return Ip((s,o)=>{s?r(s):n(o)})(e),i}}});var Zl=m((DE,Xl)=>{"use strict";var Fp=Er();Xl.exports=function(e){return Fp(function(n,r){return n+r},"",e)}});var Ql=m((IE,Kl)=>{"use strict";Kl.exports={drain:It(),onEnd:ql(),log:Ul(),find:zl(),reduce:Er(),collect:Ts(),collectAsPromise:Yl(),concat:Zl()}});var tu=m((FE,eu)=>{"use strict";function Np(t){return t}var Ap=Ft();eu.exports=function(e){return e?(e=Ap(e),function(n){return function(r,i){n(r,function(s,o){try{o=s?null:e(o)}catch(a){return n(a,function(){return i(a)})}i(s,o)})}}):Np}});var ru=m((NE,nu)=>{"use strict";function $p(t){return t}var Bp=Ft();nu.exports=function(e){if(!e)return $p;e=Bp(e);var n=!1,r,i;return function(s){return function o(a,c){if(i)return c(i);a?(i=a,n?s(a,function(l){n?r=c:c(a)}):s(a,function(l){c(a)})):s(null,function(l,u){l?c(l):i?c(i):(n=!0,e(u,function(f,d){n=!1,i?(c(i),r&&r(i)):f?o(f,c):c(null,d)}))})}}}});var Os=m((AE,iu)=>{var qp=Ft();function Mp(t){return t}iu.exports=function(e){return typeof e=="object"&&typeof e.test=="function"?function(n){return e.test(n)}:qp(e)||Mp}});var vr=m(($E,su)=>{"use strict";var Up=Os();su.exports=function(e){return e=Up(e),function(n){return function r(i,s){for(var o,a=!0;a;)a=!1,o=!0,n(i,function(c,l){if(!c&&!e(l))return o?a=!0:r(c,s);s(c,l)}),o=!1}}}});var au=m((BE,ou)=>{"use strict";var Hp=Os(),Wp=vr();ou.exports=function(e){return e=Hp(e),Wp(function(n){return!e(n)})}});var lu=m((qE,cu)=>{"use strict";cu.exports=function(e,n){var r=!1;function i(s){r||!n||(r=!0,n(s===!0?null:s))}return function(s){return function(o,a){return o&&i(o),s(o,function(c,l){c?i(c):e&&e(l),a(c,l)})}}}});var fu=m((ME,uu)=>{"use strict";uu.exports=function(e,n){n=n||{};var r=n.last||!1,i=!1;if(typeof e=="number"){r=!0;var s=e;e=function(){return--s}}return function(o){function a(c){o(!0,function(l){r=!1,c(l||!0)})}return function(c,l){i&&!c?r?a(l):l(i):(i=c)?o(i,l):o(null,function(u,f){(i=i||u)?l(i):e(f)?l(null,f):(i=!0,r?l(null,f):a(l))})}}}});var Ds=m((UE,du)=>{"use strict";function jp(t){return t}var zp=Ft(),Gp=vr();du.exports=function(e,n){e=zp(e)||jp;var r={};return Gp(function(i){var s=e(i);return r[s]?!!n:(r[s]=!0,!n)})}});var mu=m((HE,hu)=>{"use strict";var Vp=Ds();hu.exports=function(e){return Vp(e,!0)}});var gu=m((WE,pu)=>{"use strict";var Jp=yr(),Yp=_s();pu.exports=function(){return function(e){var n;return function(r,i){r?n?n(r,function(a){e(a||r,i)}):e(r,i):n?s():o();function s(){n(null,function(a,c){a?a===!0?o():e(!0,function(l){i(a)}):i(null,c)})}function o(){n=null,e(null,function(a,c){if(a)return i(a);c&&typeof c=="object"?c=Jp(c):typeof c!="function"&&(c=Yp(c)),n=c,s()})}}}}});var yu=m((jE,wu)=>{"use strict";wu.exports={map:tu(),asyncMap:ru(),filter:vr(),filterNot:au(),through:lu(),take:fu(),unique:Ds(),nonUnique:mu(),flatten:gu()}});var Is=m((zE,Eu)=>{"use strict";Eu.exports=function t(e){var n=arguments.length;if(typeof e=="function"&&e.length===1){for(var r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return function(a){if(r==null)throw new TypeError("partial sink should only be called once!");var c=r;switch(r=null,n){case 1:return t(a,c[0]);case 2:return t(a,c[0],c[1]);case 3:return t(a,c[0],c[1],c[2]);case 4:return t(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),t.apply(null,c)}}}var s=e;s&&typeof s.source=="function"&&(s=s.source);for(var i=1;i<n;i++){var o=arguments[i];typeof o=="function"?s=o(s):o&&typeof o=="object"&&(o.sink(s),s=o.source)}return s}});var un=m((nt,bu)=>{"use strict";var vu=Al(),xu=Ql(),Su=yu();nt=bu.exports=Is();nt.pull=nt;for(ie in vu)nt[ie]=vu[ie];var ie;for(ie in Su)nt[ie]=Su[ie];var ie;for(ie in xu)nt[ie]=xu[ie];var ie});var Lu=m((ZE,Cu)=>{var At=1e3,$t=At*60,Bt=$t*60,rt=Bt*24,Kp=rt*7,Qp=rt*365.25;Cu.exports=function(t,e){e=e||{};var n=typeof t;if(n==="string"&&t.length>0)return eg(t);if(n==="number"&&isFinite(t))return e.long?ng(t):tg(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function eg(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*Qp;case"weeks":case"week":case"w":return n*Kp;case"days":case"day":case"d":return n*rt;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Bt;case"minutes":case"minute":case"mins":case"min":case"m":return n*$t;case"seconds":case"second":case"secs":case"sec":case"s":return n*At;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function tg(t){var e=Math.abs(t);return e>=rt?Math.round(t/rt)+"d":e>=Bt?Math.round(t/Bt)+"h":e>=$t?Math.round(t/$t)+"m":e>=At?Math.round(t/At)+"s":t+"ms"}function ng(t){var e=Math.abs(t);return e>=rt?xr(t,e,rt,"day"):e>=Bt?xr(t,e,Bt,"hour"):e>=$t?xr(t,e,$t,"minute"):e>=At?xr(t,e,At,"second"):t+" ms"}function xr(t,e,n,r){var i=e>=n*1.5;return Math.round(t/n)+" "+r+(i?"s":"")}});var As=m((KE,Ru)=>{function rg(t){n.debug=n,n.default=n,n.coerce=c,n.disable=s,n.enable=i,n.enabled=o,n.humanize=Lu(),n.destroy=l,Object.keys(t).forEach(u=>{n[u]=t[u]}),n.names=[],n.skips=[],n.formatters={};function e(u){let f=0;for(let d=0;d<u.length;d++)f=(f<<5)-f+u.charCodeAt(d),f|=0;return n.colors[Math.abs(f)%n.colors.length]}n.selectColor=e;function n(u){let f,d=null,h,g;function y(...w){if(!y.enabled)return;let p=y,x=Number(new Date),L=x-(f||x);p.diff=L,p.prev=f,p.curr=x,f=x,w[0]=n.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let N=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(B,le)=>{if(B==="%%")return"%";N++;let we=n.formatters[le];if(typeof we=="function"){let Ht=w[N];B=we.call(p,Ht),w.splice(N,1),N--}return B}),n.formatArgs.call(p,w),(p.log||n.log).apply(p,w)}return y.namespace=u,y.useColors=n.useColors(),y.color=n.selectColor(u),y.extend=r,y.destroy=n.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(h!==n.namespaces&&(h=n.namespaces,g=n.enabled(u)),g),set:w=>{d=w}}),typeof n.init=="function"&&n.init(y),y}function r(u,f){let d=n(this.namespace+(typeof f>"u"?":":f)+u);return d.log=this.log,d}function i(u){n.save(u),n.namespaces=u,n.names=[],n.skips=[];let f,d=(typeof u=="string"?u:"").split(/[\s,]+/),h=d.length;for(f=0;f<h;f++)!d[f]||(u=d[f].replace(/\*/g,".*?"),u[0]==="-"?n.skips.push(new RegExp("^"+u.slice(1)+"$")):n.names.push(new RegExp("^"+u+"$")))}function s(){let u=[...n.names.map(a),...n.skips.map(a).map(f=>"-"+f)].join(",");return n.enable(""),u}function o(u){if(u[u.length-1]==="*")return!0;let f,d;for(f=0,d=n.skips.length;f<d;f++)if(n.skips[f].test(u))return!1;for(f=0,d=n.names.length;f<d;f++)if(n.names[f].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}Ru.exports=rg});var ku=m((G,Sr)=>{G.formatArgs=sg;G.save=og;G.load=ag;G.useColors=ig;G.storage=cg();G.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();G.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function ig(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function sg(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Sr.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(n++,i==="%c"&&(r=n))}),t.splice(r,0,e)}G.log=console.debug||console.log||(()=>{});function og(t){try{t?G.storage.setItem("debug",t):G.storage.removeItem("debug")}catch{}}function ag(){let t;try{t=G.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function cg(){try{return localStorage}catch{}}Sr.exports=As()(G);var{formatters:lg}=Sr.exports;lg.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Tu=m((QE,_u)=>{"use strict";_u.exports=(t,e)=>{e=e||process.argv;let n=t.startsWith("-")?"":t.length===1?"-":"--",r=e.indexOf(n+t),i=e.indexOf("--");return r!==-1&&(i===-1?!0:r<i)}});var Du=m((ev,Ou)=>{"use strict";var ug=require("os"),oe=Tu(),F=process.env,qt;oe("no-color")||oe("no-colors")||oe("color=false")?qt=!1:(oe("color")||oe("colors")||oe("color=true")||oe("color=always"))&&(qt=!0);"FORCE_COLOR"in F&&(qt=F.FORCE_COLOR.length===0||parseInt(F.FORCE_COLOR,10)!==0);function fg(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function dg(t){if(qt===!1)return 0;if(oe("color=16m")||oe("color=full")||oe("color=truecolor"))return 3;if(oe("color=256"))return 2;if(t&&!t.isTTY&&qt!==!0)return 0;let e=qt?1:0;if(process.platform==="win32"){let n=ug.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in F)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(n=>n in F)||F.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in F)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(F.TEAMCITY_VERSION)?1:0;if(F.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in F){let n=parseInt((F.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(F.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(F.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(F.TERM)||"COLORTERM"in F?1:(F.TERM==="dumb",e)}function $s(t){let e=dg(t);return fg(e)}Ou.exports={supportsColor:$s,stdout:$s(process.stdout),stderr:$s(process.stderr)}});var Fu=m((T,Pr)=>{var hg=require("tty"),br=require("util");T.init=vg;T.log=wg;T.formatArgs=pg;T.save=yg;T.load=Eg;T.useColors=mg;T.destroy=br.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");T.colors=[6,2,3,4,5,1];try{let t=Du();t&&(t.stderr||t).level>=2&&(T.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}T.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let n=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),r=process.env[e];return/^(yes|on|true|enabled)$/i.test(r)?r=!0:/^(no|off|false|disabled)$/i.test(r)?r=!1:r==="null"?r=null:r=Number(r),t[n]=r,t},{});function mg(){return"colors"in T.inspectOpts?Boolean(T.inspectOpts.colors):hg.isatty(process.stderr.fd)}function pg(t){let{namespace:e,useColors:n}=this;if(n){let r=this.color,i="\x1B[3"+(r<8?r:"8;5;"+r),s=`  ${i};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+Pr.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=gg()+e+" "+t[0]}function gg(){return T.inspectOpts.hideDate?"":new Date().toISOString()+" "}function wg(...t){return process.stderr.write(br.format(...t)+`
`)}function yg(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function Eg(){return process.env.DEBUG}function vg(t){t.inspectOpts={};let e=Object.keys(T.inspectOpts);for(let n=0;n<e.length;n++)t.inspectOpts[e[n]]=T.inspectOpts[e[n]]}Pr.exports=As()(T);var{formatters:Iu}=Pr.exports;Iu.o=function(t){return this.inspectOpts.colors=this.useColors,br.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Iu.O=function(t){return this.inspectOpts.colors=this.useColors,br.inspect(t,this.inspectOpts)}});var Cr=m((tv,Bs)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Bs.exports=ku():Bs.exports=Fu()});var Au=m((nv,Nu)=>{var fn;Nu.exports=function(){if(!fn){try{fn=Cr()("follow-redirects")}catch{}typeof fn!="function"&&(fn=function(){})}fn.apply(null,arguments)}});var ju=m((rv,Ws)=>{var it=require("url"),qs=it.URL,xg=require("http"),Sg=require("https"),qu=require("stream").Writable,Mu=require("assert"),Uu=Au(),Us=["abort","aborted","connect","error","socket","timeout"],Hs=Object.create(null);Us.forEach(function(t){Hs[t]=function(e,n,r){this._redirectable.emit(t,e,n,r)}});var bg=hn("ERR_INVALID_URL","Invalid URL",TypeError),$u=hn("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),Pg=hn("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),Cg=hn("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),Lg=hn("ERR_STREAM_WRITE_AFTER_END","write after end");function V(t,e){qu.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var n=this;this._onNativeResponse=function(r){n._processResponse(r)},this._performRequest()}V.prototype=Object.create(qu.prototype);V.prototype.abort=function(){Wu(this._currentRequest),this.emit("abort")};V.prototype.write=function(t,e,n){if(this._ending)throw new Lg;if(!st(t)&&!_g(t))throw new TypeError("data should be a string, Buffer or Uint8Array");if(dn(e)&&(n=e,e=null),t.length===0){n&&n();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,n)):(this.emit("error",new Cg),this.abort())};V.prototype.end=function(t,e,n){if(dn(t)?(n=t,t=e=null):dn(e)&&(n=e,e=null),!t)this._ended=this._ending=!0,this._currentRequest.end(null,null,n);else{var r=this,i=this._currentRequest;this.write(t,e,function(){r._ended=!0,i.end(null,null,n)}),this._ending=!0}};V.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)};V.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)};V.prototype.setTimeout=function(t,e){var n=this;function r(o){o.setTimeout(t),o.removeListener("timeout",o.destroy),o.addListener("timeout",o.destroy)}function i(o){n._timeout&&clearTimeout(n._timeout),n._timeout=setTimeout(function(){n.emit("timeout"),s()},t),r(o)}function s(){n._timeout&&(clearTimeout(n._timeout),n._timeout=null),n.removeListener("abort",s),n.removeListener("error",s),n.removeListener("response",s),e&&n.removeListener("timeout",e),n.socket||n._currentRequest.removeListener("socket",i)}return e&&this.on("timeout",e),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",r),this.on("abort",s),this.on("error",s),this.on("response",s),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){V.prototype[t]=function(e,n){return this._currentRequest[t](e,n)}});["aborted","connection","socket"].forEach(function(t){Object.defineProperty(V.prototype,t,{get:function(){return this._currentRequest[t]}})});V.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}};V.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(!e){this.emit("error",new TypeError("Unsupported protocol "+t));return}if(this._options.agents){var n=t.slice(0,-1);this._options.agent=this._options.agents[n]}var r=this._currentRequest=e.request(this._options,this._onNativeResponse);r._redirectable=this;for(var i of Us)r.on(i,Hs[i]);if(this._currentUrl=/^\//.test(this._options.path)?it.format(this._options):this._options.path,this._isRedirect){var s=0,o=this,a=this._requestBodyBuffers;(function c(l){if(r===o._currentRequest)if(l)o.emit("error",l);else if(s<a.length){var u=a[s++];r.finished||r.write(u.data,u.encoding,c)}else o._ended&&r.end()})()}};V.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var n=t.headers.location;if(!n||this._options.followRedirects===!1||e<300||e>=400){t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[];return}if(Wu(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new Pg);return}var r,i=this._options.beforeRedirect;i&&(r=Object.assign({Host:t.req.getHeader("host")},this._options.headers));var s=this._options.method;((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],Ms(/^content-/i,this._options.headers));var o=Ms(/^host$/i,this._options.headers),a=it.parse(this._currentUrl),c=o||a.host,l=/^\w+:/.test(n)?this._currentUrl:it.format(Object.assign(a,{host:c})),u;try{u=it.resolve(l,n)}catch(g){this.emit("error",new $u({cause:g}));return}Uu("redirecting to",u),this._isRedirect=!0;var f=it.parse(u);if(Object.assign(this._options,f),(f.protocol!==a.protocol&&f.protocol!=="https:"||f.host!==c&&!kg(f.host,c))&&Ms(/^(?:authorization|cookie)$/i,this._options.headers),dn(i)){var d={headers:t.headers,statusCode:e},h={url:l,method:s,headers:r};try{i(this._options,d,h)}catch(g){this.emit("error",g);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(g){this.emit("error",new $u({cause:g}))}};function Hu(t){var e={maxRedirects:21,maxBodyLength:10485760},n={};return Object.keys(t).forEach(function(r){var i=r+":",s=n[i]=t[r],o=e[r]=Object.create(s);function a(l,u,f){if(st(l)){var d;try{d=Bu(new qs(l))}catch{d=it.parse(l)}if(!st(d.protocol))throw new bg({input:l});l=d}else qs&&l instanceof qs?l=Bu(l):(f=u,u=l,l={protocol:i});return dn(u)&&(f=u,u=null),u=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},l,u),u.nativeProtocols=n,!st(u.host)&&!st(u.hostname)&&(u.hostname="::1"),Mu.equal(u.protocol,i,"protocol mismatch"),Uu("options",u),new V(u,f)}function c(l,u,f){var d=o.request(l,u,f);return d.end(),d}Object.defineProperties(o,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),e}function Rg(){}function Bu(t){var e={protocol:t.protocol,hostname:t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:t.pathname+t.search,href:t.href};return t.port!==""&&(e.port=Number(t.port)),e}function Ms(t,e){var n;for(var r in e)t.test(r)&&(n=e[r],delete e[r]);return n===null||typeof n>"u"?void 0:String(n).trim()}function hn(t,e,n){function r(i){Error.captureStackTrace(this,this.constructor),Object.assign(this,i||{}),this.code=t,this.message=this.cause?e+": "+this.cause.message:e}return r.prototype=new(n||Error),r.prototype.constructor=r,r.prototype.name="Error ["+t+"]",r}function Wu(t){for(var e of Us)t.removeListener(e,Hs[e]);t.on("error",Rg),t.abort()}function kg(t,e){Mu(st(t)&&st(e));var n=t.length-e.length-1;return n>0&&t[n]==="."&&t.endsWith(e)}function st(t){return typeof t=="string"||t instanceof String}function dn(t){return typeof t=="function"}function _g(t){return typeof t=="object"&&"length"in t}Ws.exports=Hu({http:xg,https:Sg});Ws.exports.wrap=Hu});var js=m((pv,Vu)=>{"use strict";var zu=require("child_process"),Tg=1024*1024,Gu={exec(t,e){zu.exec(t,{maxBuffer:2*Tg,windowsHide:!0},e)},spawn(t,e,n){return zu.spawn(t,e,n)},stripLine(t,e){let n=0;for(;e-- >0;){let r=t.indexOf(`
`,n);r>=0&&(n=r+1)}return n>0?t.substring(n):t},split(t,e){let n=t.trim().split(/\s+/);return n.length>e&&(n[e-1]=n.slice(e-1).join(" ")),n},extractColumns(t,e,n){let r=t.split(/(\r\n|\n|\r)/),i=[];return n||(n=Math.max.apply(null,e)+1),r.forEach(s=>{let o=Gu.split(s,n),a=[];e.forEach(c=>{a.push(o[c]||"")}),i.push(a)}),i},parseTable(t){let e=t.split(/(\r\n\r\n|\r\n\n|\n\r\n)|\n\n/).filter(n=>n.trim().length>0).map(n=>n.split(/(\r\n|\n|\r)/).filter(r=>r.trim().length>0));return e.forEach(n=>{for(let r=0;n[r];){let i=n[r];i.startsWith(" ")?(n[r-1]+=i.trimLeft(),n.splice(r,1)):r+=1}}),e.map(n=>{let r={};return n.forEach(i=>{let s=i.indexOf(":"),o=i.slice(0,s).trim();r[o]=i.slice(s+1).trim()}),r})}};Vu.exports=Gu});var Yu=m((gv,Ju)=>{"use strict";var Og=require("os"),Lr=require("fs"),ee=js(),Dg=t=>new Promise((e,n)=>{Lr.existsSync(t)?e():Lr.mkdir(t,r=>{r?n(r):e()})}),zs={darwin(t){return new Promise((e,n)=>{ee.exec("netstat -anv -p TCP && netstat -anv -p UDP",function(r,i,s){if(r)n(r);else{if(r=s.toString().trim(),r){n(r);return}let o=ee.stripLine(i.toString(),2),a=ee.extractColumns(o,[0,3,8],10).filter(c=>!!String(c[0]).match(/^(udp|tcp)/)).find(c=>{let l=String(c[1]).match(/\.(\d+)$/);if(l&&l[1]===String(t))return!0});a&&a[2].length?e(parseInt(a[2],10)):n(new Error(`pid of port (${t}) not found`))}})})},freebsd:"darwin",sunos:"darwin",linux(t){return new Promise((e,n)=>{let r="netstat -tunlp";ee.exec(r,function(i,s,o){if(i)n(i);else{let a=o.toString().trim();a&&console.warn(a);let c=ee.stripLine(s.toString(),2),l=ee.extractColumns(c,[3,6],7).find(u=>{let f=String(u[0]).match(/:(\d+)$/);if(f&&f[1]===String(t))return!0});if(l&&l[1]){let u=l[1].split("/",1)[0];u.length?e(parseInt(u,10)):n(new Error(`pid of port (${t}) not found`))}else n(new Error(`pid of port (${t}) not found`))}})})},win32(t){return new Promise((e,n)=>{ee.exec("netstat -ano",function(r,i,s){if(r)n(r);else{if(r=s.toString().trim(),r){n(r);return}let o=ee.stripLine(i.toString(),4),a=ee.extractColumns(o,[1,4],5).find(c=>{let l=String(c[0]).match(/:(\d+)$/);if(l&&l[1]===String(t))return!0});a&&a[1].length&&parseInt(a[1],10)>0?e(parseInt(a[1],10)):n(new Error(`pid of port (${t}) not found`))}})})},android(t){return new Promise((e,n)=>{let r=Og.tmpdir()+"/.find-process",i=r+"/"+process.pid,s='netstat -tunp >> "'+i+'"';Dg(r).then(()=>{ee.exec(s,()=>{Lr.readFile(i,"utf8",(o,a)=>{if(Lr.unlink(i,()=>{}),o)n(o);else{a=ee.stripLine(a,2);let c=ee.extractColumns(a,[3,6],7).find(l=>{let u=String(l[0]).match(/:(\d+)$/);if(u&&u[1]===String(t))return!0});if(c&&c[1]){let l=c[1].split("/",1)[0];l.length?e(parseInt(l,10)):n(new Error(`pid of port (${t}) not found`))}else n(new Error(`pid of port (${t}) not found`))}})})})})}};function Ig(t){let e=process.platform;return new Promise((n,r)=>{if(!(e in zs))return r(new Error(`platform ${e} is unsupported`));let i=zs[e];typeof i=="string"&&(i=zs[i]),i(t).then(n,r)})}Ju.exports=Ig});var Qu=m((wv,Ku)=>{"use strict";var Rr=require("path"),Ue=js();function Gs(t,e){return e?t&&t.match?t.match(e):!1:!0}function Xu(t){let e=t.split(Rr.sep),n=e[e.length-1];n&&(e[e.length-1]=n.split(" ")[0]);let r=[];for(let i of e){let s=i.indexOf(" -");if(s>=0){r.push(i.substring(0,s).trim());break}else if(i.endsWith(" ")){r.push(i.trim());break}r.push(i)}return r.join(Rr.sep)}function Zu(t){if(process.platform==="darwin"){let e=t.indexOf(".app/");if(e>=0)return Rr.basename(t.substring(0,e))}return Rr.basename(t)}var Vs={darwin(t){return new Promise((e,n)=>{let r;"pid"in t?r=`ps -p ${t.pid} -ww -o pid,ppid,uid,gid,args`:r="ps ax -ww -o pid,ppid,uid,gid,args",Ue.exec(r,function(i,s,o){if(i)"pid"in t?e([]):n(i);else{if(i=o.toString().trim(),i){n(i);return}let a=Ue.stripLine(s.toString(),1),l=Ue.extractColumns(a,[0,1,2,3,4],5).filter(u=>u[0]&&t.pid?u[0]===String(t.pid):u[4]&&t.name?Gs(u[4],t.name):!!u[0]).map(u=>{let f=String(u[4]),d=Xu(f);return{pid:parseInt(u[0],10),ppid:parseInt(u[1],10),uid:parseInt(u[2],10),gid:parseInt(u[3],10),name:Zu(d),bin:d,cmd:u[4]}});t.strict&&t.name&&(l=l.filter(u=>u.name===t.name)),e(l)}})})},linux:"darwin",sunos:"darwin",freebsd:"darwin",win32(t){return new Promise((e,n)=>{let r="Get-CimInstance -className win32_process | select Name,ProcessId,ParentProcessId,CommandLine,ExecutablePath",i=[],s=Ue.spawn("powershell.exe",["/c",r],{detached:!1,windowsHide:!0});s.stdout.on("data",o=>{i.push(o.toString())}),s.on("close",o=>{if(o!==0)return n(new Error("Command '"+r+"' terminated with code: "+o));let a=Ue.parseTable(i.join("")).filter(c=>{if("pid"in t)return c.ProcessId===String(t.pid);if(t.name){let l=c.Name||"";return t.strict?l===t.name||l.endsWith(".exe")&&l.slice(0,-4)===t.name:Gs(c.CommandLine||l,t.name)}else return!0}).map(c=>({pid:parseInt(c.ProcessId,10),ppid:parseInt(c.ParentProcessId,10),bin:c.ExecutablePath,name:c.Name||"",cmd:c.CommandLine}));e(a)})})},android(t){return new Promise((e,n)=>{let r="ps";Ue.exec(r,function(i,s,o){if(i)"pid"in t?e([]):n(i);else{if(i=o.toString().trim(),i){n(i);return}let a=Ue.stripLine(s.toString(),1),l=Ue.extractColumns(a,[0,3],4).filter(u=>u[0]&&t.pid?u[0]===String(t.pid):u[1]&&t.name?Gs(u[1],t.name):!!u[0]).map(u=>{let f=String(u[1]),d=Xu(f);return{pid:parseInt(u[0],10),name:Zu(d),bin:d,cmd:f}});t.strict&&t.name&&(l=l.filter(u=>u.name===t.name)),e(l)}})})}};function Fg(t){let e=process.platform;return new Promise((n,r)=>{if(!(e in Vs))return r(new Error(`platform ${e} is unsupported`));let i=Vs[e];typeof i=="string"&&(i=Vs[i]),i(t).then(n,r)})}Ku.exports=Fg});var nf=m((yv,tf)=>{"use strict";var Ng=Yu(),ef=Qu(),Js={port(t,e){return Ng(t,e).then(n=>Js.pid(n,e),()=>[])},pid(t,e){return ef({pid:t,strict:e})},name(t,e){return ef({name:t,strict:e})}};function Ag(t,e,n){return new Promise((r,i)=>{if(!(t in Js))i(new Error(`do not support find by "${t}"`));else{let s=/^\d+$/.test(e);t==="pid"&&!s?i(new Error("pid must be a number")):t==="port"&&!s?i(new Error("port must be a number")):Js[t](e,n).then(r,i)}})}tf.exports=Ag});var sf=m((Ev,rf)=>{"use strict";rf.exports=nf()});var Ys=m((Mx,cf)=>{var qx=cf.exports=function(t){(function e(){var n=!0,r=!1,i=!1;do i=!0,n=!1,t.call(this,function(){i?n=!0:e()}),i=!1;while(n)})()}});var uf=m((Ux,lf)=>{var Wg=Ys();lf.exports=function(t,e){return function(n){var r=[],i,s;function o(l){r.push(l)}t=t||function(l){this.queue(l)},e=e||function(){this.queue(null)};var a={emit:function(l,u){l=="data"&&o(u),l=="end"&&(i=!0,o(null)),l=="error"&&(s=u)},queue:o},c;return function(l,u){if(i=i||l,l)return n(l,function(){if(c){var f=c;c=null,f(l)}u(l)});c=u,Wg(function f(d){if(!!c)if(u=c,s)c=null,u(s);else if(r.length){var h=r.shift();c=null,u(h===null,h)}else n(i,function(g,y){if(g&&g!==!0)return s=g,d();if(i=i||g)e.call(a);else if(y!==null&&(t.call(a,y),s||i))return n(s||i,function(){c=null,u(s||i)});d(f)})})}}}});var df=m((Hx,ff)=>{ff.exports=function(){var t=[],e=0;function n(){return t.reduce(function(r,i){return r+i.length},0)}return{length:e,data:this,add:function(r){if(!Buffer.isBuffer(r))throw new Error("data must be a buffer, was: "+JSON.stringify(r));return this.length=e=e+r.length,t.push(r),this},has:function(r){return r==null?e>0:e>=r},get:function(r){var i;if(r==null||r===e){e=0;var s=t;return t=[],s.length==1?s[0]:Buffer.concat(s)}else if(t.length>1&&r<=(i=t[0].length)){var o=t[0].slice(0,r);return r===i?t.shift():t[0]=t[0].slice(r,i),e-=r,o}else if(r<e){for(var a=[],c=0;c+t[0].length<r;){var l=t.shift();c+=l.length,a.push(l)}return c<r&&(a.push(t[0].slice(0,r-c)),t[0]=t[0].slice(r-c,t[0].length),this.length=e=e-r),Buffer.concat(a)}else throw new Error("could not get "+r+" bytes")}}}});var gf=m((Wx,pf)=>{"use strict";var jg=df();function zg(t){return Number.isFinite(t)}function hf(t){return typeof t=="function"}function mf(t,e){return e?function(n,r){var i=setTimeout(function(){t(new Error("pull-reader: read exceeded timeout"),r)},e);t(n,function(s,o){clearTimeout(i),r(s,o)})}:t}pf.exports=function(t){var e=[],n,r,i=!1,s=jg(),o,a,c;function l(){for(;e.length;)if(e[0].length==null&&s.has(1))e.shift().cb(null,s.get());else if(s.has(e[0].length)){var d=e.shift();d.cb(null,s.get(d.length))}else if(o==!0&&e[0].length&&s.length<e[0].length){var h="stream ended with:"+s.length+" but wanted:"+e[0].length;e.shift().cb(new Error(h))}else if(o)e.shift().cb(o);else return!!e.length;return e.length||!s.has(1)||c}function u(){var d=l();d&&!i&&n&&!i&&!a&&(i=!0,r(null,function(h,g){if(i=!1,h)return o=h,l();s.add(g),u()}))}function f(d){if(c){for(;e.length;)e.shift().cb(c);return cb&&cb(c)}r=mf(d,t),n=d,u()}return f.abort=function(d,h){c=d||!0,n?(i=!0,n(c,function(){for(;e.length;)e.shift().cb(c);h&&h(c)})):h()},f.read=function(d,h,g){if(hf(h)&&(g=h,h=t),hf(g))e.push({length:zg(d)?d:null,cb:g}),u();else return a=!0,function(y,w){if(i||s.has(1)){if(y)return n(y,w);e.push({length:null,cb:w}),u()}else mf(n,h)(y,function(p,x){w(p,x)})}},f}});var kf=m((ot,Rf)=>{var Gg=uf(),Vg=gf(),wf=Cr(),yf=0,Ef=1,vf=2,xf="GOODBYE";function Sf(t){let e=Buffer.alloc(9),n=0,r=t.value!==void 0?t.value:t.end;return typeof t=="string"&&t===xf?(e.fill(0),[e,null]):(typeof r=="string"?(n=Ef,r=Buffer.from(r,"utf-8")):Buffer.isBuffer(r)?n=yf:(n=vf,r=Buffer.from(JSON.stringify(r),"utf-8")),n=t.stream<<3|t.end<<2|n,e[0]=n,e.writeUInt32BE(r.length,1),e.writeInt32BE(t.req||0,5),[e,r])}function bf(t){if(t.length!==9)throw new Error("expected header to be 9 bytes long");let e=t[0],n=t.readUInt32BE(1);return{req:t.readInt32BE(5),stream:!!(e&8),end:!!(e&4),value:null,length:n,type:e&3}}function Pf(t,e){if(t.length!==e.length)throw new Error("incorrect length, expected:"+e.length+" found:"+t.length);if(e.type===yf)e.value=t;else if(e.type===Ef)e.value=t.toString();else if(e.type===vf)e.value=JSON.parse(t.toString());else throw new Error("unknown message type");return e}function Cf(t){return Gg(function(n){t&&t("encoded: %o",n);let[r,i]=Sf(n);this.queue(r),i!==null&&this.queue(i)})}function Lf(t){let e=Vg(),n=!1;return function(i){return e(i),function(o,a){if(n)return a(!0);if(o)return e.abort(o,a);e.read(9,function(l,u){if(l)return a(l);let f=bf(u);if(f.length===0)return n=!0,a(null,xf);e.read(f.length,function(h,g){if(h)return a(h);try{Pf(g,f)}catch(y){return a(y)}t&&t("decoded: %o",f),a(null,f)})})}}}ot=Rf.exports=function(e,n){let r=n===!0?wf("packet-stream-codec"):typeof n=="string"?wf(n):null;return{source:Cf(r)(e.source),sink(i){return e.sink(Lf(r)(i))}}};ot.encodePair=Sf;ot.decodeHead=bf;ot.decodeBody=Pf;ot.encode=Cf;ot.decode=Lf});var Xs=m((jx,_f)=>{function Jg(t){return t&&(t===!0?!0:{message:t.message,name:t.name,stack:t.stack})}function Yg(t){console.error("packet-stream asked to read after closed",t)}_f.exports={flat:Jg,closedread:Yg}});var Df=m((zx,Of)=>{var{flat:Tf,closedread:Xg}=Xs();function Tr(t,e,n){this.id=t,this.read=null,this.writeEnd=null,this.readEnd=null,this._ps=e,this._remove=n}Tr.prototype.write=function(t,e){let n=this._ps;e?(this.writeEnd=e,n&&(n.read({req:this.id,stream:!0,end:!0,value:Tf(e)}),this.readEnd&&this.destroy(e),n._maybedone(e))):n&&n.read({req:this.id,stream:!0,end:!1,value:t})};Tr.prototype.end=function(t){this.write(null,Tf(t||!0))};Tr.prototype.destroy=function(t){if(this.writeEnd){if(!this.readEnd){this.readEnd=!0;try{this.read&&this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}}else{if(this.writeEnd=!0,!this.readEnd){this.readEnd=!0;try{this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}this.write(null,t)}this._ps&&(this._remove(),this._remove=null,this.read=Xg,this._ps=null)};Of.exports=Tr});var Nf=m((Gx,Ff)=>{var If=Df(),{flat:Zs,closedread:Zg}=Xs();function te(t){this.ended=!1,this.opts=t,this._req_counter=1,this._requests=new Map,this._instreams=new Map,this._outstreams=new Map,this._closecbs=[],this._closing=!1,this._closed=!1,t.close&&this._closecbs.push(t.close)}te.prototype.message=function(t){this.read({req:0,stream:!1,end:!1,value:t})};te.prototype.request=function(t,e){if(this._closing)return e(new Error("parent stream is closing"));let n=this._req_counter++;this._requests.set(n,(r,i)=>{this._requests.delete(n),e(r,i),this._maybedone(r)}),this.read({req:n,stream:!1,end:!1,value:t})};te.prototype.stream=function(){if(this._closing)throw new Error("parent stream is closing");let t=this._req_counter++,e=new If(t,this,()=>{this._outstreams.delete(t)});return this._outstreams.set(t,e),e};te.prototype.close=function(t){if(!t)throw new Error("packet-stream.close *must* have callback");if(this._closed)return t();this._closecbs.push(t),this._closing=!0,this._maybedone()};te.prototype.destroy=function(t){t=t||Zs(t),this.ended=t,this._closing=!0;let e=t===!0?new Error("unexpected end of parent stream"):t,n=0;this._requests.forEach(r=>{n++,r(e)}),this._instreams.forEach(r=>{n++,r.writeEnd=!0,r.destroy(e)}),this._outstreams.forEach(r=>{n++,r.writeEnd=!0,r.destroy(e)}),n===0&&t===!0&&(e=null),this._maybedone(e)};te.prototype._maybedone=function(t){this._closed||!this._closing||this._requests.size!==0||this._instreams.size!==0||this._outstreams.size!==0||(this.read(null,t||!0),this._closed=!0,this._closecbs.forEach(e=>{e(t)}),this.opts=null,this._closecbs.length=0,this.read=Zg,this._requests.clear(),this._instreams.clear(),this._outstreams.clear())};te.prototype.read=function(t){console.error("please overwrite read method to do IO",t)};te.prototype.write=function(t,e){this.ended||(e?this.destroy(e):t.req&&!t.stream?this._onrequest(t):t.req&&t.stream?this._onstream(t):this._onmessage(t))};te.prototype._onmessage=function(t){this.opts&&typeof this.opts.message=="function"&&this.opts.message(t.value)};te.prototype._onrequest=function(t){let e=t.req*-1;if(t.req<0)this._requests.has(e)&&this._requests.get(e)(t.end?t.value:null,t.end?null:t.value);else if(this.opts&&typeof this.opts.request=="function"){let n=!1;this.opts.request(t.value,(r,i)=>{if(n)throw new Error("cb called twice from local api");n=!0,r?this.read({value:Zs(r),end:!0,req:e}):this.read({value:i,end:!1,req:e}),this._maybedone()})}else{if(this.ended){let n=this.ended===!0?new Error("unexpected end of parent stream"):this.ended;this.read({value:Zs(n),end:!0,stream:!1,req:e})}else this.read({value:{message:"Unable to handle requests",name:"NO_REQUEST_HANDLER",stack:null},end:!0,stream:!1,req:e});this._maybedone()}};te.prototype._onstream=function(t){if(t.req<0){let e=t.req*-1,n=this._outstreams.get(e);if(!n)return console.error("no stream for incoming msg",t);t.end?(n.writeEnd&&this._outstreams.delete(e),n.readEnd=!0,n.read(null,t.value),this._maybedone()):n.read(t.value)}else{let e=t.req,n=this._instreams.get(e);n||(n=new If(e*-1,this,()=>{this._instreams.delete(e)}),this._instreams.set(e,n),this.opts&&typeof this.opts.stream=="function"&&this.opts.stream(n)),t.end?(n.writeEnd&&this._instreams.delete(e),n.readEnd=!0,n.read&&n.read(null,t.value),this._maybedone()):n.read?n.read(t.value):console.error("no .read for stream:",n.id,"dropped:",t)}};Ff.exports=t=>new te(t)});var $f=m((Vx,pn)=>{"use strict";var Kg=un();function Qg(t){let e=!1;return(n,r)=>{e||(e=!0,t(n,r))}}function Ks(t,e){let n=[],r=!1,i=!1,s,o,a=Qg((c,l)=>{e&&e(c,l),t=null,e=null,s=null,o&&o(c||!0,()=>{})});return t.read=function(c,l){if(r=r||l,s){let u=s;s=null,u(r,c)}else!r&&!i&&n.push(c);r&&a(r!==!0?r:null)},{source(c,l){c?(t&&t.write(null,c),l(c),n.length=0,i=!0,a(c!==!0?c:null)):n.length?l(null,n.shift()):r?l(r):s=l},sink(c){if(r)return o=null,c(r,()=>{});o=c,Kg.drain(l=>{if(r)return!1;t.write(l)},l=>{t&&!t.writeEnd&&t.write(null,l||!0),a&&a(l)})(c)}}}function Af(t,e){return Ks(t,n=>{t.writeEnd||t.write(null,n||!0),e&&e(n)})}function ew(t){return Af(t).source}function tw(t,e){return Af(t,e).sink}pn.exports=Ks;pn.exports.source=ew;pn.exports.sink=tw;pn.exports.duplex=Ks});var qf=m((Jx,Bf)=>{Bf.exports=function(e){var n,r,i;function s(o){return function(a,c){o(a,function(l,u){if(l&&!i)return i=!0,c(null,e);l&&n?c(l):l?r=c:c(null,u)})}}return s.end=function(){return n=!0,r&&r(n),s},s}});var Uf=m((Yx,Mf)=>{var nw=qf(),Qs=un();Mf.exports=function(t,e){e=e||"GOODBYE";var n=nw(e);return{source:Qs(t.source,n),sink:Qs(Qs.filter(function(r){if(r!==e)return!0;n.end()}),t.sink)}}});var gn=m(ce=>{"use strict";var Or=un();function rw(t){return t?Object.keys(t).length===0:!0}ce.set=function(e,n,r){let i,s;for(let o=0;o<n.length;o++){let a=n[o];e[a]=e[a]||{},i=e,s=a,e=e[a]}i[s]=r};ce.get=function(e,n){if(typeof n=="string")return e[n];let r;for(let i=0;i<n.length;i++){let s=n[i];if(r=e=e[s],e==null)return e}return r};ce.prefix=function(e,n){let r;for(let i=0;i<n.length;i++){let s=n[i];if(r=e=e[s],typeof e!="object")return e}return typeof r!="object"?!!r:!1};function iw(t,e){for(let n in e){let r=e[n];t[r]||(t[r]={}),t=t[r]}return t}function sw(t,e){(function n(r,i){let s=e[i];if(r)e.length-1===i?delete r[s]:i<e.length&&n(r[s],i+1);else return;rw(r[s])&&delete r[s]})(t,0)}function ow(t,e){for(let n in e)t[n]=e[n];return t}ce.mount=function(e,n,r){if(!Array.isArray(n))throw new Error("path must be array of strings");return ow(iw(e,n),r)};ce.unmount=function(e,n){return sw(e,n)};var Dr=t=>t==="source",Ir=t=>t==="sink",eo=t=>t==="duplex",aw=t=>t==="sync",cw=t=>t==="async",Hf=t=>aw(t)||cw(t),lw=t=>Dr(t)||Ir(t)||eo(t);ce.isRequest=Hf;ce.isStream=lw;function to(t){return function(e){e(t||!0,()=>{})}}function Wf(t){return{source:Or.error(t),sink:to(t)}}ce.errorAsStream=function(e,n){return Dr(e)?Or.error(n):Ir(e)?to(n):Wf(n)};ce.errorAsStreamOrCb=function(e,n,r){return Hf(e)?r(n):eo(e)?Wf(n):Dr(e)?Or.error(n):Ir(e)?to(n):r(n)};ce.pipeToStream=function(e,n,r){Dr(e)?n(r):Ir(e)?r(n):eo(e)&&Or(n,r,n)}});var no=m((Zx,jf)=>{"use strict";function uw(t){return typeof t=="string"?[`Error: ${t}`]:t.stack?t.stack.split(`
`):[`${t.name}: ${t.message}`]}jf.exports=function(e,n){let r=new Error(n),i=r.stack.split(`
`);i.splice(1,1);let s=uw(e);s[0]="  "+s[0];for(let o=1;o<i.length;o++)if(s.includes(i[o])){i.splice(o);break}return r.stack=i.concat(s).join(`
`),r}});var Jf=m((Kx,Vf)=>{"use strict";var fw=Nf(),ro=$f(),dw=Uf(),Mt=gn(),zf=no(),Gf=Cr()("muxrpc:psc");Vf.exports=function(e,n,r){let i=fw({message(){},request(o,a){if(!Array.isArray(o.args))return a(new Error(`invalid request, args should be array, was: ${JSON.stringify(o)}`));let c=o.name,l=o.args,u=!1,f=!1;l.push((d,h)=>{f=!0,u=!0,a(d,h)});try{e("async",c,l)}catch(d){if(u||f)throw zf(d,"no callback provided to muxrpc async funtion");a(d)}},stream(o){o.read=function(c,l){if(l)return o.write(null,l);let{name:u,type:f,args:d}=c,h,g;if(o.read=null,!Mt.isStream(f))return o.write(null,new Error(`unsupported stream type: ${f}`));try{g=e(f,u,d)}catch(p){h=p}let w=ro[f==="source"?"sink":f==="sink"?"source":"duplex"](o);return Mt.pipeToStream(f,w,h?Mt.errorAsStream(f,h):g)}},close(o){if(i=null,s.ended=!0,!s.closed&&(s.closed=!0,r)){let a=r;r=null,a(o)}}}),s=dw(ro(i,()=>{}));return s=n?n(s,Gf.enabled?Gf.namespace:!1):s,s.remoteCall=function(o,a,c,l){if(a==="emit")return i.message(c);if(!(Mt.isRequest(o)||Mt.isStream(o)))throw new Error(`unsupported type: ${JSON.stringify(o)}`);if(Mt.isRequest(o))return i.request({name:a,args:c},l);let u=i.stream(),f=ro[o](u,l);return u.write({name:a,args:c,type:o}),f},s.isOpen=function(){return!i.ended},s.close=function(o,a){if(typeof o=="function"&&(a=o,o=!1),!i){a&&a();return}if(o){i.destroy(o),a&&a();return}return i.close(c=>{if(a)a(c);else if(c)throw zf(c,"no callback provided for muxrpc close")}),this},s.closed=!1,s}});var Xf=m((Qx,Yf)=>{"use strict";var hw=no(),mw=gn();function io(t,e,n,r){for(let i in e){let s=e[i],o=n?n.concat(i):[i];if(s&&typeof s=="object"){let a=s;t[i]=io({},a,o,r)}else{let a=s;t[i]=(...c)=>r(a,o,c)}}return t}function pw(t){if(t)throw hw(t,"callback not provided")}function gw(t,e,n,r){t=t||{};function i(s,o,a){let c=typeof a[a.length-1]=="function"?a.pop():s==="sync"||s==="async"?null:pw;if(typeof c=="function"){let l;try{l=n(s,o,a,c)}catch(u){return mw.errorAsStreamOrCb(s,u,c)}return l}else return new Promise((l,u)=>{n(s,o,a,(f,d)=>{f?u(f):l(d)})})}return r?i("async","manifest",[function(s,o){if(s)return r(s);io(t,o,null,i),r(null,o,t)}]):io(t,e,null,i),t}Yf.exports=gw});var Qf=m((eS,Kf)=>{"use strict";var Fr=gn();function Zf(t){return Array.isArray(t)?t:t.split(".")}function ww(t){return t&&typeof t.pre=="function"&&typeof t.test=="function"&&typeof t.post=="function"}Kf.exports=function(e){if(ww(e))return e;if(typeof e=="function")return{pre:e};let n=null,r={};function i(s){if(s.allow){n={};for(let o of s.allow)Fr.set(n,Zf(o),!0)}else n=null;if(s.deny)for(let o of s.deny)Fr.set(r,Zf(o),!0);else r={};return this}return e&&i(e),i.pre=s=>{if(s=Array.isArray(s)?s:[s],n&&!Fr.prefix(n,s))return new Error(`method:${s} is not in list of allowed methods`);if(r&&Fr.prefix(r,s))return new Error(`method:${s} is on list of disallowed methods`)},i.post=()=>{},i.test=s=>i.pre(s),i.get=()=>({allow:n,deny:r}),i}});var td=m((tS,ed)=>{"use strict";var yw=Qf(),so=gn();ed.exports=function(e,n,r){r=yw(r);function i(o,a){return o===so.get(n,a)}function s(o,a,c){if(a==="emit")throw new Error("emit has been removed");if(o==="async"&&i("sync",a)){let l=c.pop(),u;try{u=so.get(e,a).apply(this,c)}catch(f){return l(f)}return l(null,u)}if(!i(o,a))throw new Error(`no ${o}:${a}`);return so.get(e,a).apply(this,c)}return function(a,c,l){let u=r.pre(c,l);if(u)throw u;return s.call(this,a,c,l)}}});var id=m((nS,rd)=>{"use strict";var Ew=kf(),vw=require("events").EventEmitter,xw=Jf(),Sw=Xf(),bw=td();function nd(t,e,n,r,i,s,o){let a;typeof t=="function"&&(a=t,t={}),e=e||{},t=t||{};let c=new vw;s||(s=Ew);let l,u={_emit(d,h){return c&&c._emit(d,h),u},id:r},f=xw(bw(n,e,i).bind(u),s,d=>{if(!c.closed&&(c.closed=!0,c.emit("closed"),l)){let h=l;l=null,h(d)}});if(Sw(c,t,(d,h,g,y)=>{if(f.closed)throw new Error("stream is closed");return f.remoteCall(d,h,g,y)},a),c._emit=c.emit,o){Object.__defineGetter__.call(c,"id",()=>u.id),Object.__defineSetter__.call(c,"id",h=>{u.id=h});let d=!0;c.createStream=h=>{if(l=h,d)return d=!1,f;throw new Error("one stream per rpc")}}else c.stream=f;return c.closed=!1,c.close=function(d,h){return f.close(d,h),this},c}rd.exports=function(t,e,n){return arguments.length>3?nd.apply(this,arguments):function(r,i,s){return nd(t,e,r,s,i,n,!0)}}});var oo=m((Re,ad)=>{var rS=Is(),Pw=Ys();function sd(t){t.destroy?t.destroy():console.error("warning, stream-to-pull-stream: \nthe wrapped node-stream does not implement `destroy`, \nthis may cause resource leaks.")}function od(t,e,n){var r,i=!1,s;function o(){s||(s=!0,n&&n(r===!0?null:r))}function a(){i||(i=!0,l(),r?o():t(r=!0,o))}function c(u){l(),r||t(r=u,o)}function l(){e.on("finish",a),e.removeListener("close",a),e.removeListener("error",c)}e.on("close",a),e.on("finish",a),e.on("error",c),process.nextTick(function(){Pw(function(u){t(null,function(f,d){if(r=r||f,f===!0)return e._isStdio?o():e.end();if(r=r||f)return sd(e),o(r);if(e._isStdio)e.write(d,function(){u()});else{var h=e.write(d);h===!1?e.once("drain",u):u()}})})})}function Cw(t){var e=!1,n=!1,r;function i(){var s=t.read();if(s!==null&&r){var o=r;r=null,o(null,s)}}return t.on("readable",function(){n=!0,r&&i()}).on("end",function(){e=!0,r&&r(e)}).on("error",function(s){e=s,r&&r(e)}),function(s,o){r=o,e?o(e):n&&i()}}function Nr(t){var e=[],n=[],r,i=!1,s;function o(){for(;(e.length||r)&&n.length;)n.shift()(e.length?null:r,e.shift());!e.length&&i&&(i=!1,t.resume())}return t.on("data",function(a){e.push(a),o(),e.length&&t.pause&&(i=!0,t.pause())}),t.on("end",function(){r=!0,o()}),t.on("close",function(){r=!0,o()}),t.on("error",function(a){r=a,o()}),function(a,c){if(!c)throw new Error("*must* provide cb");if(a){let u=function(){for(;n.length;)n.shift()(a);c(a)};var l=u;if(r)return u();t.once("close",u),sd(t)}else n.push(c),o()}}var Lw=Nr,Ar=function(t,e){return function(n){return od(n,t,e)}},$r=function(t){return Nr(t)};Re=ad.exports=function(t,e){return t.writable&&t.write?t.readable?function(n){return od(n,t,e),Nr(t)}:Ar(t,e):$r(t)};Re.sink=Ar;Re.source=$r;Re.read=Lw;Re.read1=Nr;Re.read2=Cw;Re.duplex=function(t,e){return{source:$r(t),sink:Ar(t,e)}};Re.transform=function(t){return function(e){var n=$r(t);return Ar(t)(e),n}}});var ld=m((iS,Br)=>{var Rw=require("stream");Br.exports=ao;Br.exports.source=function(t){return ao(null,t)};Br.exports.sink=function(t){return ao(t,null)};var cd=typeof setImmediate>"u"?process.nextTick:setImmediate;function ao(t,e){t&&typeof t=="object"&&(e=t.source,t=t.sink);var n=[],r=[],i,s,o=new Rw;o.writable=o.readable=!0,o.write=function(w){return n.length?n.shift()(null,w):r.push(w),n.length||(s=!0),!!n.length},o.end=function(){e?r.length?y():e(i=!0,n.length?n.shift():function(){}):n.length&&n.shift()(!0)},o.source=function(w,p){r.length?(p(null,r.shift()),r.length||o.emit("drain")):((i=i||w)?p(i):n.push(p),s&&(s=!1,o.emit("drain")))};var a;t&&(a=t(o.source)),a&&!e&&(e=a);var c=[],l=[],u=!1,f=!1,d=!1;if(o.sink=function(w){e=w,cd(y)},e){o.sink(e),o.paused=!0;var h=o.on.bind(o);o.on=(w,p)=>{var x=h(w,p);return w==="data"&&o.paused&&cd(o.resume.bind(o)),x};var g=o.pipe.bind(o);o.pipe=function(w,p){var x=g(w,p);return o.paused&&o.resume(),x}}function y(){if(f=!1,!(!e||d)){for(;c.length&&!o.paused;)o.emit("data",c.shift());if(!o.paused){if(u)return o.emit("end");d=!0,e(null,function w(p,x){d=!1,o.paused?(p===!0?u=p:p?o.emit("error",p):c.push(x),f=!0):p&&(i=p)!==!0?o.emit("error",p):(i=i||p)?o.emit("end"):(o.emit("data",x),d=!0,e(null,w))})}}}return o.pause=function(){return o.paused=!0,o},o.resume=function(){return o.paused=!1,y(),o},o.destroy=function(){!i&&e&&e(i=!0,function(){}),i=!0,n.length&&n.shift()(!0),o.emit("close")},o}});var fd=m((sS,ud)=>{ud.exports=kw;function kw(t,e){typeof t=="function"&&(e=t,t=!1);var n=[],r,i;function s(f,d){f&&(r=f,i&&u(r)),i=d,l()}var o;function a(f){o=o||f||!0,l()}function c(f){if(!o){if(i){u(r,f);return}n.push(f)}}if(t)return{push:c,end:a,source:s,buffer:n};return s.push=c,s.end=a,s.buffer=n,s;function l(){!i||(r?u(r):!n.length&&o?u(o):n.length&&u(null,n.shift()))}function u(f,d){var h=i;if(f&&e){var g=e;e=null,g(f===!0?null:f)}i=null,h(f,d)}}});var Wr=A(require("http"));async function jr(t){return new Promise((e,n)=>{let r=[];t.setEncoding("utf8"),t.on("data",i=>r.push(i)),t.on("error",i=>n(i)),t.on("end",()=>{let i=JSON.parse(r.join(""));e(i)})})}async function Wt(t,e){return new Promise((n,r)=>{let s=Wr.request({socketPath:t,path:"/",method:"POST"},o=>n(o));s.on("error",o=>r(o)),s.write(e),s.end()})}var kd=A(require("path"));async function zr(t){let e=`for pid in \`cd /proc && ls -d [0-9]*\`; do { echo $pid ; readlink /proc/$pid/cwd ; readlink /proc/$pid/ns/mnt ; cat /proc/$pid/stat | tr "
" " " ; echo ; cat /proc/$pid/environ | tr "
" " " ; echo ; cat < /proc/$pid/cmdline | tr "
" " " ; echo ; } ; echo --- ; done ; readlink /proc/self/ns/mnt 2>/dev/null`,{stdout:n}=await t.exec(e,{logOutput:!1}),r=6,i=n.split(`
---
`),s=i.pop().trim();return{processes:i.map(a=>a.split(`
`)).filter(a=>a.length>=r).map(([a,c,l,u,f,d])=>{let h=/.*\) [^ ]* ([^ ]*) ([^ ]*)/.exec(u)||[];return{pid:a,ppid:h[1],pgrp:h[2],cwd:c,mntNS:l,cmd:d.replace(/\0/g," "),env:f.split("\0").reduce((g,y)=>{let w=y.indexOf("=");return w!==-1&&(g[y.substr(0,w)]=y.substr(w+1)),g},{})}}),mntNS:s}}async function yn(t){let{processes:e}=await zr(t);return e.filter(n=>"VSCODE_REMOTE_CONTAINERS_SESSION"in n.env).map(n=>({...n,sessionId:n.env.VSCODE_REMOTE_CONTAINERS_SESSION}))}var $=A(require("path")),Ed=A(require("fs"));var Mr=A(require("child_process")),ho=require("string_decoder");var vo=A(require("os")),jt=A(require("fs")),xo=A(require("path"));var ke=(a=>(a[a.Trace=1]="Trace",a[a.Debug=2]="Debug",a[a.Info=3]="Info",a[a.Warning=4]="Warning",a[a.Error=5]="Error",a[a.Critical=6]="Critical",a[a.Off=7]="Off",a))(ke||{}),yo={info:3,debug:2,trace:1},Kw=Object.keys(yo).reduce((t,e)=>(t[yo[e]]=e,t),[]);var Nd=/(\x9B|\x1B\[)[0-?]*[ -\/]*[@-~]/g;function So(t,e){let n=!!e;return{event:r=>{n&&(n=!1,t.forEach(i=>i.event({type:"text",level:3,timestamp:Date.now(),text:e}))),t.forEach(i=>i.event(r))}}}function bo(t,e){let n=Bd(t);return{event(r){let i=Ad(r,e());i&&n.write(i)},join:n.join}}function He(t,e=2){return{event:t.event,write(n,r=e){t.event({type:"text",level:r,timestamp:Date.now(),text:n})},raw(n,r=e){t.event({type:"raw",level:r,timestamp:Date.now(),text:n})},start(n,r=e){let i=Date.now();return t.event({type:"start",level:r,timestamp:i,text:n}),i},stop(n,r,i=e){t.event({type:"stop",level:i,timestamp:Date.now(),text:n,startTimestamp:r})},get dimensions(){return t.dimensions},onDidChangeDimensions:t.onDidChangeDimensions}}function Ad(t,e){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":case"raw":return`[${new Date(t.timestamp).toISOString()}] ${Gr(t.text)}`;case"start":return`[${new Date(t.timestamp).toISOString()}] Start: ${Gr(t.text)}`;case"stop":return 2>=e?`[${new Date(t.timestamp).toISOString()}] Stop (${t.timestamp-t.startTimestamp} ms): ${Gr(t.text)}`:void 0;default:throw $d(t)}}function Gr(t){return t.replace(Nd,"").replace(/(\r?\n)?$/,vo.EOL)}function $d(t){return new Error(`Unknown log event type: ${t.type}`)}function Bd(t){let e=[],n=!1,r,i;function s(){n=!1,i&&!e.length&&(r=void 0,i(),i=void 0)}function o(a,c=!1){if(a&&e.push(a),!c&&!n&&e.length){n=!0;let l=e.join("");e.length=0,jt.appendFile(t,l,u=>{u&&(u.code==="ENOENT"?jt.mkdir(xo.dirname(t),{recursive:!0},f=>{f?(s(),console.error(f)):jt.appendFile(t,l,d=>{s(),d&&console.error(d),o()})}):(s(),console.error(u))),s(),o()})}}return{write:o,join:()=>r||(n?r=new Promise(a=>i=a):Promise.resolve())}}function We(t){return t.split(/\r?\n/).map(e=>`\x1B[1m\x1B[31m${e}\x1B[39m\x1B[22m`).join(`\r
`)+`\r
`}var C=A(require("fs")),ue=require("util");function lt(t){return new Promise(e=>C.stat(t,(n,r)=>e(!n&&r.isFile())))}var zt=(0,ue.promisify)(C.readFile),Md=(0,ue.promisify)(C.writeFile),ny=(0,ue.promisify)(C.appendFile),Po=(0,ue.promisify)(C.rename),Co=(0,ue.promisify)(C.readdir),Ud=(0,ue.promisify)(C.unlink);var Hd=(0,ue.promisify)(C.rmdir),Lo=(0,ue.promisify)(C.rm),ry=(0,ue.promisify)(C.copyFile);var Ro;(function(t){t[t.lineFeed=10]="lineFeed",t[t.carriageReturn=13]="carriageReturn",t[t.space=32]="space",t[t._0=48]="_0",t[t._1=49]="_1",t[t._2=50]="_2",t[t._3=51]="_3",t[t._4=52]="_4",t[t._5=53]="_5",t[t._6=54]="_6",t[t._7=55]="_7",t[t._8=56]="_8",t[t._9=57]="_9",t[t.a=97]="a",t[t.b=98]="b",t[t.c=99]="c",t[t.d=100]="d",t[t.e=101]="e",t[t.f=102]="f",t[t.g=103]="g",t[t.h=104]="h",t[t.i=105]="i",t[t.j=106]="j",t[t.k=107]="k",t[t.l=108]="l",t[t.m=109]="m",t[t.n=110]="n",t[t.o=111]="o",t[t.p=112]="p",t[t.q=113]="q",t[t.r=114]="r",t[t.s=115]="s",t[t.t=116]="t",t[t.u=117]="u",t[t.v=118]="v",t[t.w=119]="w",t[t.x=120]="x",t[t.y=121]="y",t[t.z=122]="z",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.asterisk=42]="asterisk",t[t.backslash=92]="backslash",t[t.closeBrace=125]="closeBrace",t[t.closeBracket=93]="closeBracket",t[t.colon=58]="colon",t[t.comma=44]="comma",t[t.dot=46]="dot",t[t.doubleQuote=34]="doubleQuote",t[t.minus=45]="minus",t[t.openBrace=123]="openBrace",t[t.openBracket=91]="openBracket",t[t.plus=43]="plus",t[t.slash=47]="slash",t[t.formFeed=12]="formFeed",t[t.tab=9]="tab"})(Ro||(Ro={}));var _o;(function(t){t.DEFAULT={allowTrailingComma:!1}})(_o||(_o={}));var To;(function(t){t[t.None=0]="None",t[t.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=2]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",t[t.InvalidUnicode=4]="InvalidUnicode",t[t.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",t[t.InvalidCharacter=6]="InvalidCharacter"})(To||(To={}));var Oo;(function(t){t[t.OpenBraceToken=1]="OpenBraceToken",t[t.CloseBraceToken=2]="CloseBraceToken",t[t.OpenBracketToken=3]="OpenBracketToken",t[t.CloseBracketToken=4]="CloseBracketToken",t[t.CommaToken=5]="CommaToken",t[t.ColonToken=6]="ColonToken",t[t.NullKeyword=7]="NullKeyword",t[t.TrueKeyword=8]="TrueKeyword",t[t.FalseKeyword=9]="FalseKeyword",t[t.StringLiteral=10]="StringLiteral",t[t.NumericLiteral=11]="NumericLiteral",t[t.LineCommentTrivia=12]="LineCommentTrivia",t[t.BlockCommentTrivia=13]="BlockCommentTrivia",t[t.LineBreakTrivia=14]="LineBreakTrivia",t[t.Trivia=15]="Trivia",t[t.Unknown=16]="Unknown",t[t.EOF=17]="EOF"})(Oo||(Oo={}));var Do;(function(t){t[t.InvalidSymbol=1]="InvalidSymbol",t[t.InvalidNumberFormat=2]="InvalidNumberFormat",t[t.PropertyNameExpected=3]="PropertyNameExpected",t[t.ValueExpected=4]="ValueExpected",t[t.ColonExpected=5]="ColonExpected",t[t.CommaExpected=6]="CommaExpected",t[t.CloseBraceExpected=7]="CloseBraceExpected",t[t.CloseBracketExpected=8]="CloseBracketExpected",t[t.EndOfFileExpected=9]="EndOfFileExpected",t[t.InvalidCommentToken=10]="InvalidCommentToken",t[t.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=12]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",t[t.InvalidUnicode=14]="InvalidUnicode",t[t.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",t[t.InvalidCharacter=16]="InvalidCharacter"})(Do||(Do={}));var dd=A(Rs());var _w=A(un());var Xp=A(require("path")),Ns=require("string_decoder");var se="\u2404";async function Nt(t,e,n,r="linux",i="Container"){let s=typeof t=="function",o=r==="win32",a=s?await t({env:n?{VSCODE_REMOTE_CONTAINERS_SESSION:n}:{},cmd:o?"powershell":"/bin/sh",args:o?["-NoProfile","-Command","-"]:[],output:e}):t;if(!s){let d=o?`powershell -NoProfile -Command "powershell -NoProfile -Command -"
`:`/bin/sh -c 'echo ${se}; /bin/sh'
`;a.stdin.write(d),await new Promise(g=>{let y="",w=new Ns.StringDecoder;a.stdout.on("data",function p(x){y+=w.write(x),y.includes(d)&&(a.stdout.off("data",p),g())})})}let c=Zp(a),l;async function u(d,h){let g=l=(async()=>{try{await l}catch{}return f(Fs(r,d),h)})();try{return await Promise.race([g,c.unexpectedExit])}finally{c.disposeStdioListeners(),l===g&&(l=void 0)}}async function f(d,h){let g=`Run in ${i.toLowerCase()}: ${d.replace(/\n.*/g,"")}`,y;if((h==null?void 0:h.logOutput)!=="silent"&&(y=e.start(g,h==null?void 0:h.logLevel)),a.stdin.destroyed){e.write("Stdin closed!");let{code:le,signal:we}=await a.exit;return Promise.reject({message:`Shell server terminated (code: ${le}, signal: ${we})`,code:le,signal:we})}r==="win32"?a.stdin.write(`[Console]::Write('${se}'); ( ${d} ); [Console]::Write("${se}$LastExitCode ${se}"); [Console]::Error.Write('${se}')
`):a.stdin.write(`echo -n ${se}; ( ${d} ); echo -n ${se}$?${se}; echo -n ${se} >&2
`);let[w,p]=Pu(a.stdout,[1,2],(h==null?void 0:h.logOutput)==="continuous"?(le,we,Ht)=>{we===1&&Ht===0&&e.write(le,h==null?void 0:h.logLevel)}:()=>{}),x=Pu(a.stderr,[1],(h==null?void 0:h.logOutput)==="continuous"?(le,we,Ht)=>{we===0&&Ht===0&&e.write(le,h==null?void 0:h.logLevel)}:()=>{})[0];h!=null&&h.stdin&&(await w,a.stdin.write(h==null?void 0:h.stdin));let[L,N]=await p,[ct]=await x,B=parseInt(N,10)||0;return((h==null?void 0:h.logOutput)===void 0||(h==null?void 0:h.logOutput)===!0)&&(e.write(L,h==null?void 0:h.logLevel),e.write(ct,h==null?void 0:h.logLevel),B&&e.write(`Exit code ${B}`,h==null?void 0:h.logLevel)),(h==null?void 0:h.logOutput)==="continuous"&&B&&e.write(`Exit code ${B}`,h==null?void 0:h.logLevel),(h==null?void 0:h.logOutput)!=="silent"&&e.stop(g,y,h==null?void 0:h.logLevel),B?Promise.reject({message:`Command in ${i.toLowerCase()} failed: ${d}`,code:B,stdout:L,stderr:ct}):{stdout:L,stderr:ct}}return{exec:u,process:a,platform:r,path:Fs(r,Xp)}}function Pu(t,e,n){let r=e.map(()=>{let u;return{promise:new Promise((d,h)=>u={resolve:d,reject:h}),...u}}),i=new Ns.StringDecoder("utf8"),s=[],o=0,a=[];function c(u){let f=i.write(u);l(f)}function l(u){let f=u.indexOf(se);if(f!==-1){let d=u.substr(0,f);s.push(d),n(d,o,a.length),a.push(s.join("")),s.length=0,a.length===e[o]&&(r[o].resolve(a),o++,a=[],o===e.length&&t.off("data",c)),f+1<u.length&&l(u.substr(f+1))}else s.push(u),n(u,o,a.length)}return t.on("data",c),r.map(u=>u.promise)}function Zp(t){let e,n=new Promise((c,l)=>e=l),r=[],i=[],s=c=>r.push(c),o=c=>i.push(c);return t.stdout.on("data",s),t.stderr.on("data",o),t.exit.then(({code:c,signal:l})=>{e(`Shell server terminated (code: ${c}, signal: ${l})
${Buffer.concat(r).toString()}
${Buffer.concat(i).toString()}`)},c=>{e(`Shell server failed: ${c&&(c.stack||c.message)}`)}),{unexpectedExit:n,disposeStdioListeners:()=>{t.stdout.off("data",s),t.stderr.off("data",o),r.length=0,i.length=0}}}var Mg=A(ju());var of=A(Rs());var $g=A(sf());async function kr(t){return new Promise(e=>setTimeout(e,t))}var zS=id(),GS=oo(),VS=ld(),JS=fd();var ZS=oo();var pd=/^\\\\wsl(\.localhost|\$)?\\/;function qr(t){return pd.test(t.toLowerCase())}function co(t){let e=t.toLowerCase(),n=pd.exec(e);if(!n)return"";let r=e.indexOf("\\",n[0].length);return t.substring(n[0].length,r)}async function lo(t,e,n){let{stdout:r}=await ae({exec:mn(void 0),cmd:"wsl",args:["-d",t,"-e","wslpath","-u",e],output:n});return r.toString().trim()}var eP=$.join(__dirname,"..","..","node_modules",".bin","ts-node"),af=$.basename(process.argv[0])==="ts-node"||process.argv.indexOf("ts-node/register")!==-1;async function ae(t){let{exec:e,cmd:n,args:r,cwd:i,env:s,stdin:o,output:a,print:c}=t,l=await e({cmd:n,args:r,cwd:i,env:s,output:a});return new Promise((u,f)=>{let d=[],h=[],g=c==="continuous"?new ho.StringDecoder:void 0;l.stdout.on("data",p=>{d.push(p),c==="continuous"&&a.write(g.write(p))}),l.stdout.on("error",p=>{if((p==null?void 0:p.code)!=="ENOTCONN")throw p});let y=c==="continuous"?new ho.StringDecoder:void 0;l.stderr.on("data",p=>{h.push(p),c==="continuous"&&a.write(We(y.write(p)))}),l.stderr.on("error",p=>{if((p==null?void 0:p.code)!=="ENOTCONN")throw p});let w=[];l.exit.then(({code:p})=>{try{w.forEach(N=>N.dispose());let x=Buffer.concat(d),L=Buffer.concat(h);(c===!0||p&&c==="onerror")&&(a.write(x.toString().replace(/\r?\n/g,`\r
`)),a.write(We(L.toString()))),c&&p&&a.write(`Exit code ${p}`),p?f({message:`Command failed: ${n} ${(r||[]).join(" ")}`,stdout:x,stderr:L,code:p}):u({stdout:x,stderr:L})}catch(x){f(x)}},f),o instanceof Buffer?(l.stdin.write(o,p=>{p&&f(p)}),l.stdin.end()):o instanceof Ed.ReadStream?o.pipe(l.stdin):typeof o=="function"&&w.push(o(p=>l.stdin.write(p)))})}function mn(t){return async function(e){let{cmd:n,args:r,output:i}=e,s=`Run: ${n} ${(r||[]).join(" ").replace(/\n.*/g,"")}`,o=i.start(s),a=e.cwd||t,c=e.env?{...process.env,...e.env}:process.env,l=await vd(n,a,c,i),u=Mr.spawn(l,r,{cwd:a,env:c,windowsHide:!0});return{stdin:u.stdin,stdout:u.stdout,stderr:u.stderr,exit:new Promise((f,d)=>{u.once("error",h=>{i.stop(s,o),d(h)}),u.once("close",(h,g)=>{i.stop(s,o),f({code:h,signal:g})})}),async terminate(){u.kill("SIGKILL")}}}}function uo(t,e,n,r){return async function(i){let{env:s,cmd:o,args:a,output:c}=i,l=i.cwd||n,u=l?`cd '${l}' && `:"",f=Object.keys(s||{}).map(N=>`${N}='${s[N]}' `).join(""),d=(a||[]).map(N=>` '${N.replace(/'/g,`'"'"'`)}'`).join(""),h=`${u}${f}${o}${d}`,g=h!==o?["/bin/sh","-c",h]:[h],y=[...e,...g],w=`Run: ${t} ${y.join(" ").replace(/\n.*/g,"")}`,p=c.start(w),x=await vd(t,process.cwd(),process.env,c),L=Mr.spawn(x,y,{windowsHide:!0,env:r?{...process.env,...r}:void 0});return{stdin:L.stdin,stdout:L.stdout,stderr:L.stderr,exit:new Promise((N,ct)=>{L.once("error",B=>{c.stop(w,p),ct(B)}),L.once("close",(B,le)=>{c.stop(w,p),N({code:B,signal:le})})}),async terminate(){L.kill("SIGKILL")}}}}async function vd(t,e=process.cwd(),n,r){if(process.platform!=="win32")return t;if($.isAbsolute(t))return await fo(t)||t;if(/[/\\]/.test(t)){let a=$.join(e,t);return await fo(a)||a}let i,s;if(n){for(let a of Object.keys(n))if(a.toLowerCase()==="path"){let c=n[a];typeof c=="string"&&(i=c,s=c.split($.delimiter).filter(Boolean),s.push($.join(n.ProgramW6432||"C:\\Program Files","Docker\\Docker\\resources\\bin")));break}}if(s===void 0||s.length===0){r.write(`findLocalWindowsExecutable: No PATH to look up executable '${t}'.`);let a=new Error(`No PATH to look up executable '${t}'.`);throw a.code="ENOENT",a}for(let a of s){let c;$.isAbsolute(a)?c=$.join(a,t):c=$.join(e,a,t);let l=await fo(c);if(l)return l}r.write(`findLocalWindowsExecutable: Exectuable '${t}' not found on PATH '${i}'.`);let o=new Error(`Exectuable '${t}' not found on PATH '${i}'.`);throw o.code="ENOENT",o}var wd=process.env.PATHEXT,yd=wd?wd.toLowerCase().split(";"):[".com",".exe",".bat",".cmd"];async function fo(t){if(yd.indexOf($.extname(t))!==-1)return await lt(t)?t:void 0;for(let e of yd){let n=t+e;if(await lt(n))return n}}async function Ut(t,e){if(qr(t)){let n=co(t),r=await lo(n,t,e);return uo("wsl",["-d",n,"-e"],r)}return mn(t)}function Fs(t,e){return e&&typeof e=="object"&&"win32"in e?t==="win32"?e.win32:e.posix:e}var Iw=0;function Ur(t){return t.VSCODE_SSH_ASKPASS_HANDLE?{VSCODE_SSH_ASKPASS_COUNTER:String(++Iw)}:{}}async function at(t,...e){let n=mo(t);return ae({...n,args:(n.args||[]).concat(e)})}async function xd(t,...e){let n=mo(t,"dockerComposeCLI"in t?await t.dockerComposeCLI():void 0);return ae({...n,args:(n.args||[]).concat(e)})}function wn(t,e,n){return async function(r){let{exec:i,cmd:s,args:o,env:a}=mo(t),{argsPrefix:c,args:l}=Aw(e,n,r,!1);return i({cmd:s,args:(o||[]).concat(l),env:a,output:Fw(r.output,s,c)})}}function Fw(t,e,n){return Nw(t,`Run: ${e} ${(n||[]).join(" ").replace(/\n.*/g,"")}`,"Run in container:")}function Nw(t,e,n){let r=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");return He({...t,get dimensions(){return t.dimensions},event:s=>t.event("text"in s?{...s,text:s.text.replace(r,n)}:s)})}function Aw(t,e,n,r){let{env:i,cwd:s,cmd:o,args:a}=n,c=["exec","-i"];r&&c.push("-t"),e&&c.push("-u",e),i&&Object.keys(i).forEach(u=>c.push("-e",`${u}=${i[u]}`)),s&&c.push("-w",s),c.push(t);let l=c.slice();return c.push(o),a&&c.push(...a),{argsPrefix:l,args:c}}function mo(t,e){return"dockerEnv"in t?{exec:t.common.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:{...t.dockerEnv,...Ur(t.dockerEnv)},output:t.common.output}:"cliHost"in t?{exec:t.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:{...t.env,...Ur(t.env)},output:t.output}:{...t,env:{...t.env,...Ur(t.env)}}}async function Sd(t,e){let n={exec:await Ut(t.cwd,e),cmd:t.dockerCLI,env:t.env,output:e};if(t.rebuild){let{stdout:r,stderr:i}=await at(n,"rm","-f",t.containerId);e.write("Command output: "+JSON.stringify({stdout:r.toString(),stderr:i.toString()}))}else if(!t.shutdownAction||t.shutdownAction==="stopCompose"){let r=wn(n,t.containerId,t.user),i=await Nt(r,e);if((await yn(i)).filter(o=>o.sessionId!==t.sessionId).length===0){let o=["--project-name",t.projectName];t.composeFiles.forEach(c=>o.push("-f",c)),t.envFile&&o.push("--env-file",t.envFile),o.push("stop","-t","0"),t.runServices&&t.runServices.length&&(o.push(...t.runServices),t.runServices.indexOf(t.service)===-1&&o.push(t.service));let a;try{let c={...n,cmd:t.dockerComposeCLI.cmd,args:t.dockerComposeCLI.args};if(t.buildContainerRunArgs){let{stdout:f}=await at(n,...t.buildContainerRunArgs);a=f.toString().trim(),c={exec:wn(n,a,"root"),cmd:"docker-compose",env:{},output:e}}let{stdout:l,stderr:u}=await xd(c,...o);e.write("Command output: "+JSON.stringify({stdout:l.toString(),stderr:u.toString()}))}finally{a&&await at(n,"rm","-f",a)}}}}async function bd(t,e){let n={exec:await Ut(t.cwd,e),cmd:t.dockerCLI,env:t.env,output:e};if(t.rebuild){let{stdout:r,stderr:i}=await at(n,"rm","-f",t.containerId);e.write("Command output: "+JSON.stringify({stdout:r.toString(),stderr:i.toString()}))}else if(!t.shutdownAction||t.shutdownAction==="stopContainer"){let r=wn(n,t.containerId,t.user),i=await Nt(r,e);if((await yn(i)).filter(o=>o.sessionId!==t.sessionId).length===0){let{stdout:o,stderr:a}=await at(n,"stop",t.containerId);e.write("Command output: "+JSON.stringify({stdout:o.toString(),stderr:a.toString()}))}}}var Hr=process.argv[2],Pd=process.argv[3],po=ke[process.argv[4]]||3,$w=new Date(parseInt(process.argv[6],10)),Cd=process.argv[5]?kd.join(process.argv[5],`shutdownMonitor-${$w.toISOString().replace(/:/g,"-")}.log`):void 0,go=[],Ld=Cd?bo(Cd,()=>Math.min(2,po)):void 0;Ld&&go.push(Ld);go.push({event:t=>{1>=po&&Wt(Hr,JSON.stringify({type:"log",event:t})).catch(e=>{console.error(e)})}});var _=He(So(go));_.write("Starting monitor process...");var Bw=Date.now(),J;(async()=>{let t=0;for(;;)try{let e=await Wt(Hr,JSON.stringify({type:"poll"})),n=await jr(e);_.write("Received message: "+JSON.stringify(n));for(let r of n)if(r.type==="cleanup"){try{await Rd(!0)}catch(i){_.write("Unexpected error: "+(i&&(i.stack||i.message)||String(i)))}return}else r.type==="configure"&&(J=r.options,J.logLevel&&(po=J.logLevel),Wt(Hr,JSON.stringify({type:"reply",sequence:r.sequence})).catch(i=>{_.write("Error confirming configuration: "+(i&&(i.stack||i.message)||String(i)))}));t=0}catch(e){if(_.write("Error polling extension: "+(e&&(e.stack||e.message)||String(e))),e&&(e.code==="ECONNREFUSED"||e.code==="ENOENT")){await Rd(!1);return}++t>=5&&await kr(1e3)}})().catch(t=>{_.write("Unexpected error: "+(t&&(t.stack||t.message)||String(t)))});async function Rd(t){if(_.write(`Cleaning up after ${Date.now()-Bw} ms...`),J)switch(J.delay&&(_.write(`Delaying for ${J.delay} ms.`),await kr(J.delay)),Pd){case"dockerCompose":await Sd(J,_);break;case"singleContainer":await bd(J,_);break;case"test":let{stdout:e,stderr:n}=await ae({exec:await Ut(J.cwd,_),cmd:J.cmd,args:J.args,env:J.env,output:_});_.write("Command output: "+JSON.stringify({stdout:e.toString(),stderr:n.toString()}));break;default:_.write(`Type does not exist: ${Pd}`);break}else _.write("Not configured!");if(_.write("Done."),t)try{let e=await Wt(Hr,JSON.stringify({type:"done"})),n=await jr(e);_.write("Received reply: "+JSON.stringify(n))}catch(e){_.write("Error confirming to extension: "+(e&&(e.stack||e.message)||String(e)))}}
//# sourceMappingURL=shutdownMonitorProcess.js.map
