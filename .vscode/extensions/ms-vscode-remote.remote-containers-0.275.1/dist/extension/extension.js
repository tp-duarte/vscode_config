/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------------------------------------------*/

var tV=Object.create;var uh=Object.defineProperty;var rV=Object.getOwnPropertyDescriptor;var nV=Object.getOwnPropertyNames;var oV=Object.getPrototypeOf,iV=Object.prototype.hasOwnProperty;var Ne=(e,t)=>()=>(e&&(t=e(e=0)),t);var B=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),xE=(e,t)=>{for(var r in t)uh(e,r,{get:t[r],enumerable:!0})},PT=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of nV(t))!iV.call(e,o)&&o!==r&&uh(e,o,{get:()=>t[o],enumerable:!(n=rV(t,o))||n.enumerable});return e};var ce=(e,t,r)=>(r=e!=null?tV(oV(e)):{},PT(t||!e||!e.__esModule?uh(r,"default",{value:e,enumerable:!0}):r,e)),sV=e=>PT(uh({},"__esModule",{value:!0}),e);var JT=B((Moe,QT)=>{var Fu=1e3,Mu=Fu*60,$u=Mu*60,nc=$u*24,SV=nc*7,bV=nc*365.25;QT.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return xV(e);if(r==="number"&&isFinite(e))return t.long?TV(e):PV(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function xV(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*bV;case"weeks":case"week":case"w":return r*SV;case"days":case"day":case"d":return r*nc;case"hours":case"hour":case"hrs":case"hr":case"h":return r*$u;case"minutes":case"minute":case"mins":case"min":case"m":return r*Mu;case"seconds":case"second":case"secs":case"sec":case"s":return r*Fu;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function PV(e){var t=Math.abs(e);return t>=nc?Math.round(e/nc)+"d":t>=$u?Math.round(e/$u)+"h":t>=Mu?Math.round(e/Mu)+"m":t>=Fu?Math.round(e/Fu)+"s":e+"ms"}function TV(e){var t=Math.abs(e);return t>=nc?yh(e,t,nc,"day"):t>=$u?yh(e,t,$u,"hour"):t>=Mu?yh(e,t,Mu,"minute"):t>=Fu?yh(e,t,Fu,"second"):e+" ms"}function yh(e,t,r,n){var o=t>=r*1.5;return Math.round(e/r)+" "+n+(o?"s":"")}});var AE=B(($oe,ZT)=>{function IV(e){r.debug=r,r.default=r,r.coerce=c,r.disable=i,r.enable=o,r.enabled=s,r.humanize=JT(),r.destroy=u,Object.keys(e).forEach(l=>{r[l]=e[l]}),r.names=[],r.skips=[],r.formatters={};function t(l){let d=0;for(let f=0;f<l.length;f++)d=(d<<5)-d+l.charCodeAt(f),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=t;function r(l){let d,f=null,p,m;function h(...g){if(!h.enabled)return;let v=h,w=Number(new Date),E=w-(d||w);v.diff=E,v.prev=d,v.curr=w,d=w,g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let C=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(x,I)=>{if(x==="%%")return"%";C++;let P=r.formatters[I];if(typeof P=="function"){let T=g[C];x=P.call(v,T),g.splice(C,1),C--}return x}),r.formatArgs.call(v,g),(v.log||r.log).apply(v,g)}return h.namespace=l,h.useColors=r.useColors(),h.color=r.selectColor(l),h.extend=n,h.destroy=r.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(p!==r.namespaces&&(p=r.namespaces,m=r.enabled(l)),m),set:g=>{f=g}}),typeof r.init=="function"&&r.init(h),h}function n(l,d){let f=r(this.namespace+(typeof d>"u"?":":d)+l);return f.log=this.log,f}function o(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let d,f=(typeof l=="string"?l:"").split(/[\s,]+/),p=f.length;for(d=0;d<p;d++)!f[d]||(l=f[d].replace(/\*/g,".*?"),l[0]==="-"?r.skips.push(new RegExp("^"+l.slice(1)+"$")):r.names.push(new RegExp("^"+l+"$")))}function i(){let l=[...r.names.map(a),...r.skips.map(a).map(d=>"-"+d)].join(",");return r.enable(""),l}function s(l){if(l[l.length-1]==="*")return!0;let d,f;for(d=0,f=r.skips.length;d<f;d++)if(r.skips[d].test(l))return!1;for(d=0,f=r.names.length;d<f;d++)if(r.names[d].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack||l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}ZT.exports=IV});var eI=B((An,wh)=>{An.formatArgs=RV;An.save=kV;An.load=AV;An.useColors=DV;An.storage=OV();An.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();An.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function DV(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function RV(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+wh.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(r++,o==="%c"&&(n=r))}),e.splice(n,0,t)}An.log=console.debug||console.log||(()=>{});function kV(e){try{e?An.storage.setItem("debug",e):An.storage.removeItem("debug")}catch{}}function AV(){let e;try{e=An.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function OV(){try{return localStorage}catch{}}wh.exports=AE()(An);var{formatters:NV}=wh.exports;NV.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var rI=B((Uoe,tI)=>{"use strict";tI.exports=(e,t)=>{t=t||process.argv;let r=e.startsWith("-")?"":e.length===1?"-":"--",n=t.indexOf(r+e),o=t.indexOf("--");return n!==-1&&(o===-1?!0:n<o)}});var oI=B((joe,nI)=>{"use strict";var LV=require("os"),Fo=rI(),Or=process.env,Uu;Fo("no-color")||Fo("no-colors")||Fo("color=false")?Uu=!1:(Fo("color")||Fo("colors")||Fo("color=true")||Fo("color=always"))&&(Uu=!0);"FORCE_COLOR"in Or&&(Uu=Or.FORCE_COLOR.length===0||parseInt(Or.FORCE_COLOR,10)!==0);function FV(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function MV(e){if(Uu===!1)return 0;if(Fo("color=16m")||Fo("color=full")||Fo("color=truecolor"))return 3;if(Fo("color=256"))return 2;if(e&&!e.isTTY&&Uu!==!0)return 0;let t=Uu?1:0;if(process.platform==="win32"){let r=LV.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in Or)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(r=>r in Or)||Or.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in Or)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Or.TEAMCITY_VERSION)?1:0;if(Or.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Or){let r=parseInt((Or.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Or.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Or.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Or.TERM)||"COLORTERM"in Or?1:(Or.TERM==="dumb",t)}function OE(e){let t=MV(e);return FV(t)}nI.exports={supportsColor:OE,stdout:OE(process.stdout),stderr:OE(process.stderr)}});var sI=B((xr,Ch)=>{var $V=require("tty"),Eh=require("util");xr.init=WV;xr.log=qV;xr.formatArgs=jV;xr.save=BV;xr.load=VV;xr.useColors=UV;xr.destroy=Eh.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");xr.colors=[6,2,3,4,5,1];try{let e=oI();e&&(e.stderr||e).level>=2&&(xr.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}xr.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(o,i)=>i.toUpperCase()),n=process.env[t];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[r]=n,e},{});function UV(){return"colors"in xr.inspectOpts?Boolean(xr.inspectOpts.colors):$V.isatty(process.stderr.fd)}function jV(e){let{namespace:t,useColors:r}=this;if(r){let n=this.color,o="\x1B[3"+(n<8?n:"8;5;"+n),i=`  ${o};1m${t} \x1B[0m`;e[0]=i+e[0].split(`
`).join(`
`+i),e.push(o+"m+"+Ch.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=HV()+t+" "+e[0]}function HV(){return xr.inspectOpts.hideDate?"":new Date().toISOString()+" "}function qV(...e){return process.stderr.write(Eh.format(...e)+`
`)}function BV(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function VV(){return process.env.DEBUG}function WV(e){e.inspectOpts={};let t=Object.keys(xr.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=xr.inspectOpts[t[r]]}Ch.exports=AE()(xr);var{formatters:iI}=Ch.exports;iI.o=function(e){return this.inspectOpts.colors=this.useColors,Eh.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};iI.O=function(e){return this.inspectOpts.colors=this.useColors,Eh.inspect(e,this.inspectOpts)}});var _h=B((Hoe,NE)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?NE.exports=eI():NE.exports=sI()});var cI=B((qoe,aI)=>{var vf;aI.exports=function(){if(!vf){try{vf=_h()("follow-redirects")}catch{}typeof vf!="function"&&(vf=function(){})}vf.apply(null,arguments)}});var ju=B((Boe,UE)=>{var oc=require("url"),LE=oc.URL,GV=require("http"),zV=require("https"),dI=require("stream").Writable,fI=require("assert"),pI=cI(),ME=["abort","aborted","connect","error","socket","timeout"],$E=Object.create(null);ME.forEach(function(e){$E[e]=function(t,r,n){this._redirectable.emit(e,t,r,n)}});var YV=wf("ERR_INVALID_URL","Invalid URL",TypeError),uI=wf("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),KV=wf("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),XV=wf("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),QV=wf("ERR_STREAM_WRITE_AFTER_END","write after end");function On(e,t){dI.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var r=this;this._onNativeResponse=function(n){r._processResponse(n)},this._performRequest()}On.prototype=Object.create(dI.prototype);On.prototype.abort=function(){hI(this._currentRequest),this.emit("abort")};On.prototype.write=function(e,t,r){if(this._ending)throw new QV;if(!ic(e)&&!eW(e))throw new TypeError("data should be a string, Buffer or Uint8Array");if(yf(t)&&(r=t,t=null),e.length===0){r&&r();return}this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,r)):(this.emit("error",new XV),this.abort())};On.prototype.end=function(e,t,r){if(yf(e)?(r=e,e=t=null):yf(t)&&(r=t,t=null),!e)this._ended=this._ending=!0,this._currentRequest.end(null,null,r);else{var n=this,o=this._currentRequest;this.write(e,t,function(){n._ended=!0,o.end(null,null,r)}),this._ending=!0}};On.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)};On.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)};On.prototype.setTimeout=function(e,t){var r=this;function n(s){s.setTimeout(e),s.removeListener("timeout",s.destroy),s.addListener("timeout",s.destroy)}function o(s){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),i()},e),n(s)}function i(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),r.removeListener("abort",i),r.removeListener("error",i),r.removeListener("response",i),t&&r.removeListener("timeout",t),r.socket||r._currentRequest.removeListener("socket",o)}return t&&this.on("timeout",t),this.socket?o(this.socket):this._currentRequest.once("socket",o),this.on("socket",n),this.on("abort",i),this.on("error",i),this.on("response",i),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(e){On.prototype[e]=function(t,r){return this._currentRequest[e](t,r)}});["aborted","connection","socket"].forEach(function(e){Object.defineProperty(On.prototype,e,{get:function(){return this._currentRequest[e]}})});On.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var t=e.path.indexOf("?");t<0?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t))}};On.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(!t){this.emit("error",new TypeError("Unsupported protocol "+e));return}if(this._options.agents){var r=e.slice(0,-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=t.request(this._options,this._onNativeResponse);n._redirectable=this;for(var o of ME)n.on(o,$E[o]);if(this._currentUrl=/^\//.test(this._options.path)?oc.format(this._options):this._options.path,this._isRedirect){var i=0,s=this,a=this._requestBodyBuffers;(function c(u){if(n===s._currentRequest)if(u)s.emit("error",u);else if(i<a.length){var l=a[i++];n.finished||n.write(l.data,l.encoding,c)}else s._ended&&n.end()})()}};On.prototype._processResponse=function(e){var t=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:t});var r=e.headers.location;if(!r||this._options.followRedirects===!1||t<300||t>=400){e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),this._requestBodyBuffers=[];return}if(hI(this._currentRequest),e.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new KV);return}var n,o=this._options.beforeRedirect;o&&(n=Object.assign({Host:e.req.getHeader("host")},this._options.headers));var i=this._options.method;((t===301||t===302)&&this._options.method==="POST"||t===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],FE(/^content-/i,this._options.headers));var s=FE(/^host$/i,this._options.headers),a=oc.parse(this._currentUrl),c=s||a.host,u=/^\w+:/.test(r)?this._currentUrl:oc.format(Object.assign(a,{host:c})),l;try{l=oc.resolve(u,r)}catch(m){this.emit("error",new uI({cause:m}));return}pI("redirecting to",l),this._isRedirect=!0;var d=oc.parse(l);if(Object.assign(this._options,d),(d.protocol!==a.protocol&&d.protocol!=="https:"||d.host!==c&&!ZV(d.host,c))&&FE(/^(?:authorization|cookie)$/i,this._options.headers),yf(o)){var f={headers:e.headers,statusCode:t},p={url:u,method:i,headers:n};try{o(this._options,f,p)}catch(m){this.emit("error",m);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(m){this.emit("error",new uI({cause:m}))}};function mI(e){var t={maxRedirects:21,maxBodyLength:10485760},r={};return Object.keys(e).forEach(function(n){var o=n+":",i=r[o]=e[n],s=t[n]=Object.create(i);function a(u,l,d){if(ic(u)){var f;try{f=lI(new LE(u))}catch{f=oc.parse(u)}if(!ic(f.protocol))throw new YV({input:u});u=f}else LE&&u instanceof LE?u=lI(u):(d=l,l=u,u={protocol:o});return yf(l)&&(d=l,l=null),l=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},u,l),l.nativeProtocols=r,!ic(l.host)&&!ic(l.hostname)&&(l.hostname="::1"),fI.equal(l.protocol,o,"protocol mismatch"),pI("options",l),new On(l,d)}function c(u,l,d){var f=s.request(u,l,d);return f.end(),f}Object.defineProperties(s,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),t}function JV(){}function lI(e){var t={protocol:e.protocol,hostname:e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:e.pathname+e.search,href:e.href};return e.port!==""&&(t.port=Number(e.port)),t}function FE(e,t){var r;for(var n in t)e.test(n)&&(r=t[n],delete t[n]);return r===null||typeof r>"u"?void 0:String(r).trim()}function wf(e,t,r){function n(o){Error.captureStackTrace(this,this.constructor),Object.assign(this,o||{}),this.code=e,this.message=this.cause?t+": "+this.cause.message:t}return n.prototype=new(r||Error),n.prototype.constructor=n,n.prototype.name="Error ["+e+"]",n}function hI(e){for(var t of ME)e.removeListener(t,$E[t]);e.on("error",JV),e.abort()}function ZV(e,t){fI(ic(e)&&ic(t));var r=e.length-t.length-1;return r>0&&e[r]==="."&&e.endsWith(t)}function ic(e){return typeof e=="string"||e instanceof String}function yf(e){return typeof e=="function"}function eW(e){return typeof e=="object"&&"length"in e}UE.exports=mI({http:GV,https:zV});UE.exports.wrap=mI});var Hu=B((Voe,vI)=>{"use strict";var gI=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);vI.exports=e=>e?Object.keys(e).map(t=>[gI.has(t)?gI.get(t):t,e[t]]).reduce((t,r)=>(t[r[0]]=r[1],t),Object.create(null)):{}});var Bu=B((Woe,PI)=>{"use strict";var yI=typeof process=="object"&&process?process:{stdout:null,stderr:null},tW=require("events"),wI=require("stream"),EI=require("string_decoder").StringDecoder,Gi=Symbol("EOF"),zi=Symbol("maybeEmitEnd"),Ms=Symbol("emittedEnd"),Sh=Symbol("emittingEnd"),Ef=Symbol("emittedError"),bh=Symbol("closed"),CI=Symbol("read"),xh=Symbol("flush"),_I=Symbol("flushChunk"),an=Symbol("encoding"),Yi=Symbol("decoder"),Ph=Symbol("flowing"),Cf=Symbol("paused"),qu=Symbol("resume"),gr=Symbol("bufferLength"),jE=Symbol("bufferPush"),HE=Symbol("bufferShift"),Nr=Symbol("objectMode"),Lr=Symbol("destroyed"),qE=Symbol("emitData"),SI=Symbol("emitEnd"),BE=Symbol("emitEnd2"),Ki=Symbol("async"),_f=e=>Promise.resolve().then(e),bI=global._MP_NO_ITERATOR_SYMBOLS_!=="1",rW=bI&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),nW=bI&&Symbol.iterator||Symbol("iterator not implemented"),oW=e=>e==="end"||e==="finish"||e==="prefinish",iW=e=>e instanceof ArrayBuffer||typeof e=="object"&&e.constructor&&e.constructor.name==="ArrayBuffer"&&e.byteLength>=0,sW=e=>!Buffer.isBuffer(e)&&ArrayBuffer.isView(e),Th=class{constructor(t,r,n){this.src=t,this.dest=r,this.opts=n,this.ondrain=()=>t[qu](),r.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},VE=class extends Th{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(t,r,n){super(t,r,n),this.proxyErrors=o=>r.emit("error",o),t.on("error",this.proxyErrors)}};PI.exports=class xI extends wI{constructor(t){super(),this[Ph]=!1,this[Cf]=!1,this.pipes=[],this.buffer=[],this[Nr]=t&&t.objectMode||!1,this[Nr]?this[an]=null:this[an]=t&&t.encoding||null,this[an]==="buffer"&&(this[an]=null),this[Ki]=t&&!!t.async||!1,this[Yi]=this[an]?new EI(this[an]):null,this[Gi]=!1,this[Ms]=!1,this[Sh]=!1,this[bh]=!1,this[Ef]=null,this.writable=!0,this.readable=!0,this[gr]=0,this[Lr]=!1}get bufferLength(){return this[gr]}get encoding(){return this[an]}set encoding(t){if(this[Nr])throw new Error("cannot set encoding in objectMode");if(this[an]&&t!==this[an]&&(this[Yi]&&this[Yi].lastNeed||this[gr]))throw new Error("cannot change encoding");this[an]!==t&&(this[Yi]=t?new EI(t):null,this.buffer.length&&(this.buffer=this.buffer.map(r=>this[Yi].write(r)))),this[an]=t}setEncoding(t){this.encoding=t}get objectMode(){return this[Nr]}set objectMode(t){this[Nr]=this[Nr]||!!t}get async(){return this[Ki]}set async(t){this[Ki]=this[Ki]||!!t}write(t,r,n){if(this[Gi])throw new Error("write after end");if(this[Lr])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let o=this[Ki]?_f:i=>i();return!this[Nr]&&!Buffer.isBuffer(t)&&(sW(t)?t=Buffer.from(t.buffer,t.byteOffset,t.byteLength):iW(t)?t=Buffer.from(t):typeof t!="string"&&(this.objectMode=!0)),this[Nr]?(this.flowing&&this[gr]!==0&&this[xh](!0),this.flowing?this.emit("data",t):this[jE](t),this[gr]!==0&&this.emit("readable"),n&&o(n),this.flowing):t.length?(typeof t=="string"&&!(r===this[an]&&!this[Yi].lastNeed)&&(t=Buffer.from(t,r)),Buffer.isBuffer(t)&&this[an]&&(t=this[Yi].write(t)),this.flowing&&this[gr]!==0&&this[xh](!0),this.flowing?this.emit("data",t):this[jE](t),this[gr]!==0&&this.emit("readable"),n&&o(n),this.flowing):(this[gr]!==0&&this.emit("readable"),n&&o(n),this.flowing)}read(t){if(this[Lr])return null;if(this[gr]===0||t===0||t>this[gr])return this[zi](),null;this[Nr]&&(t=null),this.buffer.length>1&&!this[Nr]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[gr])]);let r=this[CI](t||null,this.buffer[0]);return this[zi](),r}[CI](t,r){return t===r.length||t===null?this[HE]():(this.buffer[0]=r.slice(t),r=r.slice(0,t),this[gr]-=t),this.emit("data",r),!this.buffer.length&&!this[Gi]&&this.emit("drain"),r}end(t,r,n){return typeof t=="function"&&(n=t,t=null),typeof r=="function"&&(n=r,r="utf8"),t&&this.write(t,r),n&&this.once("end",n),this[Gi]=!0,this.writable=!1,(this.flowing||!this[Cf])&&this[zi](),this}[qu](){this[Lr]||(this[Cf]=!1,this[Ph]=!0,this.emit("resume"),this.buffer.length?this[xh]():this[Gi]?this[zi]():this.emit("drain"))}resume(){return this[qu]()}pause(){this[Ph]=!1,this[Cf]=!0}get destroyed(){return this[Lr]}get flowing(){return this[Ph]}get paused(){return this[Cf]}[jE](t){this[Nr]?this[gr]+=1:this[gr]+=t.length,this.buffer.push(t)}[HE](){return this.buffer.length&&(this[Nr]?this[gr]-=1:this[gr]-=this.buffer[0].length),this.buffer.shift()}[xh](t){do;while(this[_I](this[HE]()));!t&&!this.buffer.length&&!this[Gi]&&this.emit("drain")}[_I](t){return t?(this.emit("data",t),this.flowing):!1}pipe(t,r){if(this[Lr])return;let n=this[Ms];return r=r||{},t===yI.stdout||t===yI.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&t.end():(this.pipes.push(r.proxyErrors?new VE(this,t,r):new Th(this,t,r)),this[Ki]?_f(()=>this[qu]()):this[qu]()),t}unpipe(t){let r=this.pipes.find(n=>n.dest===t);r&&(this.pipes.splice(this.pipes.indexOf(r),1),r.unpipe())}addListener(t,r){return this.on(t,r)}on(t,r){let n=super.on(t,r);return t==="data"&&!this.pipes.length&&!this.flowing?this[qu]():t==="readable"&&this[gr]!==0?super.emit("readable"):oW(t)&&this[Ms]?(super.emit(t),this.removeAllListeners(t)):t==="error"&&this[Ef]&&(this[Ki]?_f(()=>r.call(this,this[Ef])):r.call(this,this[Ef])),n}get emittedEnd(){return this[Ms]}[zi](){!this[Sh]&&!this[Ms]&&!this[Lr]&&this.buffer.length===0&&this[Gi]&&(this[Sh]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[bh]&&this.emit("close"),this[Sh]=!1)}emit(t,r,...n){if(t!=="error"&&t!=="close"&&t!==Lr&&this[Lr])return;if(t==="data")return r?this[Ki]?_f(()=>this[qE](r)):this[qE](r):!1;if(t==="end")return this[SI]();if(t==="close"){if(this[bh]=!0,!this[Ms]&&!this[Lr])return;let i=super.emit("close");return this.removeAllListeners("close"),i}else if(t==="error"){this[Ef]=r;let i=super.emit("error",r);return this[zi](),i}else if(t==="resume"){let i=super.emit("resume");return this[zi](),i}else if(t==="finish"||t==="prefinish"){let i=super.emit(t);return this.removeAllListeners(t),i}let o=super.emit(t,r,...n);return this[zi](),o}[qE](t){for(let n of this.pipes)n.dest.write(t)===!1&&this.pause();let r=super.emit("data",t);return this[zi](),r}[SI](){this[Ms]||(this[Ms]=!0,this.readable=!1,this[Ki]?_f(()=>this[BE]()):this[BE]())}[BE](){if(this[Yi]){let r=this[Yi].end();if(r){for(let n of this.pipes)n.dest.write(r);super.emit("data",r)}}for(let r of this.pipes)r.end();let t=super.emit("end");return this.removeAllListeners("end"),t}collect(){let t=[];this[Nr]||(t.dataLength=0);let r=this.promise();return this.on("data",n=>{t.push(n),this[Nr]||(t.dataLength+=n.length)}),r.then(()=>t)}concat(){return this[Nr]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(t=>this[Nr]?Promise.reject(new Error("cannot concat in objectMode")):this[an]?t.join(""):Buffer.concat(t,t.dataLength))}promise(){return new Promise((t,r)=>{this.on(Lr,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>t())})}[rW](){return{next:()=>{let r=this.read();if(r!==null)return Promise.resolve({done:!1,value:r});if(this[Gi])return Promise.resolve({done:!0});let n=null,o=null,i=u=>{this.removeListener("data",s),this.removeListener("end",a),o(u)},s=u=>{this.removeListener("error",i),this.removeListener("end",a),this.pause(),n({value:u,done:!!this[Gi]})},a=()=>{this.removeListener("error",i),this.removeListener("data",s),n({done:!0})},c=()=>i(new Error("stream destroyed"));return new Promise((u,l)=>{o=l,n=u,this.once(Lr,c),this.once("error",i),this.once("end",a),this.once("data",s)})}}}[nW](){return{next:()=>{let r=this.read();return{value:r,done:r===null}}}}destroy(t){return this[Lr]?(t?this.emit("error",t):this.emit(Lr),this):(this[Lr]=!0,this.buffer.length=0,this[gr]=0,typeof this.close=="function"&&!this[bh]&&this.close(),t?this.emit("error",t):this.emit(Lr),this)}static isStream(t){return!!t&&(t instanceof xI||t instanceof wI||t instanceof tW&&(typeof t.pipe=="function"||typeof t.write=="function"&&typeof t.end=="function"))}}});var II=B((Goe,TI)=>{var aW=require("zlib").constants||{ZLIB_VERNUM:4736};TI.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},aW))});var sC=B(Nn=>{"use strict";var KE=require("assert"),$s=require("buffer").Buffer,kI=require("zlib"),sc=Nn.constants=II(),cW=Bu(),DI=$s.concat,ac=Symbol("_superWrite"),Wu=class extends Error{constructor(t){super("zlib: "+t.message),this.code=t.code,this.errno=t.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+t.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},uW=Symbol("opts"),Sf=Symbol("flushFlag"),RI=Symbol("finishFlushFlag"),iC=Symbol("fullFlushFlag"),Tt=Symbol("handle"),Ih=Symbol("onError"),Vu=Symbol("sawError"),WE=Symbol("level"),GE=Symbol("strategy"),zE=Symbol("ended"),zoe=Symbol("_defaultFullFlush"),Dh=class extends cW{constructor(t,r){if(!t||typeof t!="object")throw new TypeError("invalid options for ZlibBase constructor");super(t),this[Vu]=!1,this[zE]=!1,this[uW]=t,this[Sf]=t.flush,this[RI]=t.finishFlush;try{this[Tt]=new kI[r](t)}catch(n){throw new Wu(n)}this[Ih]=n=>{this[Vu]||(this[Vu]=!0,this.close(),this.emit("error",n))},this[Tt].on("error",n=>this[Ih](new Wu(n))),this.once("end",()=>this.close)}close(){this[Tt]&&(this[Tt].close(),this[Tt]=null,this.emit("close"))}reset(){if(!this[Vu])return KE(this[Tt],"zlib binding closed"),this[Tt].reset()}flush(t){this.ended||(typeof t!="number"&&(t=this[iC]),this.write(Object.assign($s.alloc(0),{[Sf]:t})))}end(t,r,n){return t&&this.write(t,r),this.flush(this[RI]),this[zE]=!0,super.end(null,null,n)}get ended(){return this[zE]}write(t,r,n){if(typeof r=="function"&&(n=r,r="utf8"),typeof t=="string"&&(t=$s.from(t,r)),this[Vu])return;KE(this[Tt],"zlib binding closed");let o=this[Tt]._handle,i=o.close;o.close=()=>{};let s=this[Tt].close;this[Tt].close=()=>{},$s.concat=u=>u;let a;try{let u=typeof t[Sf]=="number"?t[Sf]:this[Sf];a=this[Tt]._processChunk(t,u),$s.concat=DI}catch(u){$s.concat=DI,this[Ih](new Wu(u))}finally{this[Tt]&&(this[Tt]._handle=o,o.close=i,this[Tt].close=s,this[Tt].removeAllListeners("error"))}this[Tt]&&this[Tt].on("error",u=>this[Ih](new Wu(u)));let c;if(a)if(Array.isArray(a)&&a.length>0){c=this[ac]($s.from(a[0]));for(let u=1;u<a.length;u++)c=this[ac](a[u])}else c=this[ac]($s.from(a));return n&&n(),c}[ac](t){return super.write(t)}},Xi=class extends Dh{constructor(t,r){t=t||{},t.flush=t.flush||sc.Z_NO_FLUSH,t.finishFlush=t.finishFlush||sc.Z_FINISH,super(t,r),this[iC]=sc.Z_FULL_FLUSH,this[WE]=t.level,this[GE]=t.strategy}params(t,r){if(!this[Vu]){if(!this[Tt])throw new Error("cannot switch params when binding is closed");if(!this[Tt].params)throw new Error("not supported in this implementation");if(this[WE]!==t||this[GE]!==r){this.flush(sc.Z_SYNC_FLUSH),KE(this[Tt],"zlib binding closed");let n=this[Tt].flush;this[Tt].flush=(o,i)=>{this.flush(o),i()};try{this[Tt].params(t,r)}finally{this[Tt].flush=n}this[Tt]&&(this[WE]=t,this[GE]=r)}}}},XE=class extends Xi{constructor(t){super(t,"Deflate")}},QE=class extends Xi{constructor(t){super(t,"Inflate")}},YE=Symbol("_portable"),JE=class extends Xi{constructor(t){super(t,"Gzip"),this[YE]=t&&!!t.portable}[ac](t){return this[YE]?(this[YE]=!1,t[9]=255,super[ac](t)):super[ac](t)}},ZE=class extends Xi{constructor(t){super(t,"Gunzip")}},eC=class extends Xi{constructor(t){super(t,"DeflateRaw")}},tC=class extends Xi{constructor(t){super(t,"InflateRaw")}},rC=class extends Xi{constructor(t){super(t,"Unzip")}},Rh=class extends Dh{constructor(t,r){t=t||{},t.flush=t.flush||sc.BROTLI_OPERATION_PROCESS,t.finishFlush=t.finishFlush||sc.BROTLI_OPERATION_FINISH,super(t,r),this[iC]=sc.BROTLI_OPERATION_FLUSH}},nC=class extends Rh{constructor(t){super(t,"BrotliCompress")}},oC=class extends Rh{constructor(t){super(t,"BrotliDecompress")}};Nn.Deflate=XE;Nn.Inflate=QE;Nn.Gzip=JE;Nn.Gunzip=ZE;Nn.DeflateRaw=eC;Nn.InflateRaw=tC;Nn.Unzip=rC;typeof kI.BrotliCompress=="function"?(Nn.BrotliCompress=nC,Nn.BrotliDecompress=oC):Nn.BrotliCompress=Nn.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var Gu=B((Xoe,AI)=>{var lW=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;AI.exports=lW!=="win32"?e=>e:e=>e&&e.replace(/\\/g,"/")});var kh=B((Joe,OI)=>{"use strict";var dW=Bu(),aC=Gu(),cC=Symbol("slurp");OI.exports=class extends dW{constructor(t,r,n){switch(super(),this.pause(),this.extended=r,this.globalExtended=n,this.header=t,this.startBlockSize=512*Math.ceil(t.size/512),this.blockRemain=this.startBlockSize,this.remain=t.size,this.type=t.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=aC(t.path),this.mode=t.mode,this.mode&&(this.mode=this.mode&4095),this.uid=t.uid,this.gid=t.gid,this.uname=t.uname,this.gname=t.gname,this.size=t.size,this.mtime=t.mtime,this.atime=t.atime,this.ctime=t.ctime,this.linkpath=aC(t.linkpath),this.uname=t.uname,this.gname=t.gname,r&&this[cC](r),n&&this[cC](n,!0)}write(t){let r=t.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");let n=this.remain,o=this.blockRemain;return this.remain=Math.max(0,n-r),this.blockRemain=Math.max(0,o-r),this.ignore?!0:n>=r?super.write(t):super.write(t.slice(0,n))}[cC](t,r){for(let n in t)t[n]!==null&&t[n]!==void 0&&!(r&&n==="path")&&(this[n]=n==="path"||n==="linkpath"?aC(t[n]):t[n])}}});var uC=B(Ah=>{"use strict";Ah.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);Ah.code=new Map(Array.from(Ah.name).map(e=>[e[1],e[0]]))});var MI=B((eie,FI)=>{"use strict";var fW=(e,t)=>{if(Number.isSafeInteger(e))e<0?mW(e,t):pW(e,t);else throw Error("cannot encode number outside of javascript safe integer range");return t},pW=(e,t)=>{t[0]=128;for(var r=t.length;r>1;r--)t[r-1]=e&255,e=Math.floor(e/256)},mW=(e,t)=>{t[0]=255;var r=!1;e=e*-1;for(var n=t.length;n>1;n--){var o=e&255;e=Math.floor(e/256),r?t[n-1]=NI(o):o===0?t[n-1]=0:(r=!0,t[n-1]=LI(o))}},hW=e=>{let t=e[0],r=t===128?vW(e.slice(1,e.length)):t===255?gW(e):null;if(r===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(r))throw Error("parsed number outside of javascript safe integer range");return r},gW=e=>{for(var t=e.length,r=0,n=!1,o=t-1;o>-1;o--){var i=e[o],s;n?s=NI(i):i===0?s=i:(n=!0,s=LI(i)),s!==0&&(r-=s*Math.pow(256,t-o-1))}return r},vW=e=>{for(var t=e.length,r=0,n=t-1;n>-1;n--){var o=e[n];o!==0&&(r+=o*Math.pow(256,t-n-1))}return r},NI=e=>(255^e)&255,LI=e=>(255^e)+1&255;FI.exports={encode:fW,parse:hW}});var Yu=B((tie,UI)=>{"use strict";var lC=uC(),zu=require("path").posix,$I=MI(),dC=Symbol("slurp"),Ln=Symbol("type"),mC=class{constructor(t,r,n,o){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[Ln]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(t)?this.decode(t,r||0,n,o):t&&this.set(t)}decode(t,r,n,o){if(r||(r=0),!t||!(t.length>=r+512))throw new Error("need 512 bytes for header");if(this.path=cc(t,r,100),this.mode=Us(t,r+100,8),this.uid=Us(t,r+108,8),this.gid=Us(t,r+116,8),this.size=Us(t,r+124,12),this.mtime=fC(t,r+136,12),this.cksum=Us(t,r+148,12),this[dC](n),this[dC](o,!0),this[Ln]=cc(t,r+156,1),this[Ln]===""&&(this[Ln]="0"),this[Ln]==="0"&&this.path.slice(-1)==="/"&&(this[Ln]="5"),this[Ln]==="5"&&(this.size=0),this.linkpath=cc(t,r+157,100),t.slice(r+257,r+265).toString()==="ustar\x0000")if(this.uname=cc(t,r+265,32),this.gname=cc(t,r+297,32),this.devmaj=Us(t,r+329,8),this.devmin=Us(t,r+337,8),t[r+475]!==0){let s=cc(t,r+345,155);this.path=s+"/"+this.path}else{let s=cc(t,r+345,130);s&&(this.path=s+"/"+this.path),this.atime=fC(t,r+476,12),this.ctime=fC(t,r+488,12)}let i=8*32;for(let s=r;s<r+148;s++)i+=t[s];for(let s=r+156;s<r+512;s++)i+=t[s];this.cksumValid=i===this.cksum,this.cksum===null&&i===8*32&&(this.nullBlock=!0)}[dC](t,r){for(let n in t)t[n]!==null&&t[n]!==void 0&&!(r&&n==="path")&&(this[n]=t[n])}encode(t,r){if(t||(t=this.block=Buffer.alloc(512),r=0),r||(r=0),!(t.length>=r+512))throw new Error("need 512 bytes for header");let n=this.ctime||this.atime?130:155,o=yW(this.path||"",n),i=o[0],s=o[1];this.needPax=o[2],this.needPax=uc(t,r,100,i)||this.needPax,this.needPax=js(t,r+100,8,this.mode)||this.needPax,this.needPax=js(t,r+108,8,this.uid)||this.needPax,this.needPax=js(t,r+116,8,this.gid)||this.needPax,this.needPax=js(t,r+124,12,this.size)||this.needPax,this.needPax=pC(t,r+136,12,this.mtime)||this.needPax,t[r+156]=this[Ln].charCodeAt(0),this.needPax=uc(t,r+157,100,this.linkpath)||this.needPax,t.write("ustar\x0000",r+257,8),this.needPax=uc(t,r+265,32,this.uname)||this.needPax,this.needPax=uc(t,r+297,32,this.gname)||this.needPax,this.needPax=js(t,r+329,8,this.devmaj)||this.needPax,this.needPax=js(t,r+337,8,this.devmin)||this.needPax,this.needPax=uc(t,r+345,n,s)||this.needPax,t[r+475]!==0?this.needPax=uc(t,r+345,155,s)||this.needPax:(this.needPax=uc(t,r+345,130,s)||this.needPax,this.needPax=pC(t,r+476,12,this.atime)||this.needPax,this.needPax=pC(t,r+488,12,this.ctime)||this.needPax);let a=8*32;for(let c=r;c<r+148;c++)a+=t[c];for(let c=r+156;c<r+512;c++)a+=t[c];return this.cksum=a,js(t,r+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(t){for(let r in t)t[r]!==null&&t[r]!==void 0&&(this[r]=t[r])}get type(){return lC.name.get(this[Ln])||this[Ln]}get typeKey(){return this[Ln]}set type(t){lC.code.has(t)?this[Ln]=lC.code.get(t):this[Ln]=t}},yW=(e,t)=>{let n=e,o="",i,s=zu.parse(e).root||".";if(Buffer.byteLength(n)<100)i=[n,o,!1];else{o=zu.dirname(n),n=zu.basename(n);do Buffer.byteLength(n)<=100&&Buffer.byteLength(o)<=t?i=[n,o,!1]:Buffer.byteLength(n)>100&&Buffer.byteLength(o)<=t?i=[n.slice(0,100-1),o,!0]:(n=zu.join(zu.basename(o),n),o=zu.dirname(o));while(o!==s&&!i);i||(i=[e.slice(0,100-1),"",!0])}return i},cc=(e,t,r)=>e.slice(t,t+r).toString("utf8").replace(/\0.*/,""),fC=(e,t,r)=>wW(Us(e,t,r)),wW=e=>e===null?null:new Date(e*1e3),Us=(e,t,r)=>e[t]&128?$I.parse(e.slice(t,t+r)):CW(e,t,r),EW=e=>isNaN(e)?null:e,CW=(e,t,r)=>EW(parseInt(e.slice(t,t+r).toString("utf8").replace(/\0.*$/,"").trim(),8)),_W={12:8589934591,8:2097151},js=(e,t,r,n)=>n===null?!1:n>_W[r]||n<0?($I.encode(n,e.slice(t,t+r)),!0):(SW(e,t,r,n),!1),SW=(e,t,r,n)=>e.write(bW(n,r),t,r,"ascii"),bW=(e,t)=>xW(Math.floor(e).toString(8),t),xW=(e,t)=>(e.length===t-1?e:new Array(t-e.length-1).join("0")+e+" ")+"\0",pC=(e,t,r,n)=>n===null?!1:js(e,t,r,n.getTime()/1e3),PW=new Array(156).join("\0"),uc=(e,t,r,n)=>n===null?!1:(e.write(n+PW,t,r,"utf8"),n.length!==Buffer.byteLength(n)||n.length>r);UI.exports=mC});var Oh=B((rie,jI)=>{"use strict";var TW=Yu(),IW=require("path"),bf=class{constructor(t,r){this.atime=t.atime||null,this.charset=t.charset||null,this.comment=t.comment||null,this.ctime=t.ctime||null,this.gid=t.gid||null,this.gname=t.gname||null,this.linkpath=t.linkpath||null,this.mtime=t.mtime||null,this.path=t.path||null,this.size=t.size||null,this.uid=t.uid||null,this.uname=t.uname||null,this.dev=t.dev||null,this.ino=t.ino||null,this.nlink=t.nlink||null,this.global=r||!1}encode(){let t=this.encodeBody();if(t==="")return null;let r=Buffer.byteLength(t),n=512*Math.ceil(1+r/512),o=Buffer.allocUnsafe(n);for(let i=0;i<512;i++)o[i]=0;new TW({path:("PaxHeader/"+IW.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:r,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(o),o.write(t,512,r,"utf8");for(let i=r+512;i<o.length;i++)o[i]=0;return o}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(t){if(this[t]===null||this[t]===void 0)return"";let r=this[t]instanceof Date?this[t].getTime()/1e3:this[t],n=" "+(t==="dev"||t==="ino"||t==="nlink"?"SCHILY.":"")+t+"="+r+`
`,o=Buffer.byteLength(n),i=Math.floor(Math.log(o)/Math.log(10))+1;return o+i>=Math.pow(10,i)&&(i+=1),i+o+n}};bf.parse=(e,t,r)=>new bf(DW(RW(e),t),r);var DW=(e,t)=>t?Object.keys(e).reduce((r,n)=>(r[n]=e[n],r),t):e,RW=e=>e.replace(/\n$/,"").split(`
`).reduce(kW,Object.create(null)),kW=(e,t)=>{let r=parseInt(t,10);if(r!==Buffer.byteLength(t)+1)return e;t=t.slice((r+" ").length);let n=t.split("="),o=n.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!o)return e;let i=n.join("=");return e[o]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(o)?new Date(i*1e3):/^[0-9]+$/.test(i)?+i:i,e};jI.exports=bf});var Ku=B((nie,HI)=>{HI.exports=e=>{let t=e.length-1,r=-1;for(;t>-1&&e.charAt(t)==="/";)r=t,t--;return r===-1?e:e.slice(0,r)}});var Nh=B((oie,qI)=>{"use strict";qI.exports=e=>class extends e{warn(t,r,n={}){this.file&&(n.file=this.file),this.cwd&&(n.cwd=this.cwd),n.code=r instanceof Error&&r.code||t,n.tarCode=t,!this.strict&&n.recoverable!==!1?(r instanceof Error&&(n=Object.assign(r,n),r=r.message),this.emit("warn",n.tarCode,r,n)):r instanceof Error?this.emit("error",Object.assign(r,n)):this.emit("error",Object.assign(new Error(`${t}: ${r}`),n))}}});var gC=B((sie,BI)=>{"use strict";var Lh=["|","<",">","?",":"],hC=Lh.map(e=>String.fromCharCode(61440+e.charCodeAt(0))),AW=new Map(Lh.map((e,t)=>[e,hC[t]])),OW=new Map(hC.map((e,t)=>[e,Lh[t]]));BI.exports={encode:e=>Lh.reduce((t,r)=>t.split(r).join(AW.get(r)),e),decode:e=>hC.reduce((t,r)=>t.split(r).join(OW.get(r)),e)}});var vC=B((aie,WI)=>{var{isAbsolute:NW,parse:VI}=require("path").win32;WI.exports=e=>{let t="",r=VI(e);for(;NW(e)||r.root;){let n=e.charAt(0)==="/"&&e.slice(0,4)!=="//?/"?"/":r.root;e=e.slice(n.length),t+=n,r=VI(e)}return[t,e]}});var zI=B((cie,GI)=>{"use strict";GI.exports=(e,t,r)=>(e&=4095,r&&(e=(e|384)&-19),t&&(e&256&&(e|=64),e&32&&(e|=8),e&4&&(e|=1)),e)});var TC=B((die,aD)=>{"use strict";var eD=Bu(),tD=Oh(),rD=Yu(),_i=require("fs"),YI=require("path"),Ci=Gu(),LW=Ku(),nD=(e,t)=>t?(e=Ci(e).replace(/^\.(\/|$)/,""),LW(t)+"/"+e):Ci(e),FW=16*1024*1024,KI=Symbol("process"),XI=Symbol("file"),QI=Symbol("directory"),wC=Symbol("symlink"),JI=Symbol("hardlink"),xf=Symbol("header"),Fh=Symbol("read"),EC=Symbol("lstat"),Mh=Symbol("onlstat"),CC=Symbol("onread"),_C=Symbol("onreadlink"),SC=Symbol("openfile"),bC=Symbol("onopenfile"),Hs=Symbol("close"),$h=Symbol("mode"),xC=Symbol("awaitDrain"),yC=Symbol("ondrain"),Si=Symbol("prefix"),ZI=Symbol("hadError"),oD=Nh(),MW=gC(),iD=vC(),sD=zI(),Uh=oD(class extends eD{constructor(t,r){if(r=r||{},super(r),typeof t!="string")throw new TypeError("path is required");this.path=Ci(t),this.portable=!!r.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=r.maxReadSize||FW,this.linkCache=r.linkCache||new Map,this.statCache=r.statCache||new Map,this.preservePaths=!!r.preservePaths,this.cwd=Ci(r.cwd||process.cwd()),this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.mtime=r.mtime||null,this.prefix=r.prefix?Ci(r.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[o,i]=iD(this.path);o&&(this.path=i,n=o)}this.win32=!!r.win32||process.platform==="win32",this.win32&&(this.path=MW.decode(this.path.replace(/\\/g,"/")),t=t.replace(/\\/g,"/")),this.absolute=Ci(r.absolute||YI.resolve(this.cwd,t)),this.path===""&&(this.path="./"),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.statCache.has(this.absolute)?this[Mh](this.statCache.get(this.absolute)):this[EC]()}emit(t,...r){return t==="error"&&(this[ZI]=!0),super.emit(t,...r)}[EC](){_i.lstat(this.absolute,(t,r)=>{if(t)return this.emit("error",t);this[Mh](r)})}[Mh](t){this.statCache.set(this.absolute,t),this.stat=t,t.isFile()||(t.size=0),this.type=UW(t),this.emit("stat",t),this[KI]()}[KI](){switch(this.type){case"File":return this[XI]();case"Directory":return this[QI]();case"SymbolicLink":return this[wC]();default:return this.end()}}[$h](t){return sD(t,this.type==="Directory",this.portable)}[Si](t){return nD(t,this.prefix)}[xf](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new rD({path:this[Si](this.path),linkpath:this.type==="Link"?this[Si](this.linkpath):this.linkpath,mode:this[$h](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new tD({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[Si](this.path),linkpath:this.type==="Link"?this[Si](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[QI](){this.path.slice(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[xf](),this.end()}[wC](){_i.readlink(this.absolute,(t,r)=>{if(t)return this.emit("error",t);this[_C](r)})}[_C](t){this.linkpath=Ci(t),this[xf](),this.end()}[JI](t){this.type="Link",this.linkpath=Ci(YI.relative(this.cwd,t)),this.stat.size=0,this[xf](),this.end()}[XI](){if(this.stat.nlink>1){let t=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(t)){let r=this.linkCache.get(t);if(r.indexOf(this.cwd)===0)return this[JI](r)}this.linkCache.set(t,this.absolute)}if(this[xf](),this.stat.size===0)return this.end();this[SC]()}[SC](){_i.open(this.absolute,"r",(t,r)=>{if(t)return this.emit("error",t);this[bC](r)})}[bC](t){if(this.fd=t,this[ZI])return this[Hs]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let r=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(r),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[Fh]()}[Fh](){let{fd:t,buf:r,offset:n,length:o,pos:i}=this;_i.read(t,r,n,o,i,(s,a)=>{if(s)return this[Hs](()=>this.emit("error",s));this[CC](a)})}[Hs](t){_i.close(this.fd,t)}[CC](t){if(t<=0&&this.remain>0){let o=new Error("encountered unexpected EOF");return o.path=this.absolute,o.syscall="read",o.code="EOF",this[Hs](()=>this.emit("error",o))}if(t>this.remain){let o=new Error("did not encounter expected EOF");return o.path=this.absolute,o.syscall="read",o.code="EOF",this[Hs](()=>this.emit("error",o))}if(t===this.remain)for(let o=t;o<this.length&&t<this.blockRemain;o++)this.buf[o+this.offset]=0,t++,this.remain++;let r=this.offset===0&&t===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+t);this.write(r)?this[yC]():this[xC](()=>this[yC]())}[xC](t){this.once("drain",t)}write(t){if(this.blockRemain<t.length){let r=new Error("writing more data than expected");return r.path=this.absolute,this.emit("error",r)}return this.remain-=t.length,this.blockRemain-=t.length,this.pos+=t.length,this.offset+=t.length,super.write(t)}[yC](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[Hs](t=>t?this.emit("error",t):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[Fh]()}}),PC=class extends Uh{[EC](){this[Mh](_i.lstatSync(this.absolute))}[wC](){this[_C](_i.readlinkSync(this.absolute))}[SC](){this[bC](_i.openSync(this.absolute,"r"))}[Fh](){let t=!0;try{let{fd:r,buf:n,offset:o,length:i,pos:s}=this,a=_i.readSync(r,n,o,i,s);this[CC](a),t=!1}finally{if(t)try{this[Hs](()=>{})}catch{}}}[xC](t){t()}[Hs](t){_i.closeSync(this.fd),t()}},$W=oD(class extends eD{constructor(t,r){r=r||{},super(r),this.preservePaths=!!r.preservePaths,this.portable=!!r.portable,this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.readEntry=t,this.type=t.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=r.prefix||null,this.path=Ci(t.path),this.mode=this[$h](t.mode),this.uid=this.portable?null:t.uid,this.gid=this.portable?null:t.gid,this.uname=this.portable?null:t.uname,this.gname=this.portable?null:t.gname,this.size=t.size,this.mtime=this.noMtime?null:r.mtime||t.mtime,this.atime=this.portable?null:t.atime,this.ctime=this.portable?null:t.ctime,this.linkpath=Ci(t.linkpath),typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[o,i]=iD(this.path);o&&(this.path=i,n=o)}this.remain=t.size,this.blockRemain=t.startBlockSize,this.header=new rD({path:this[Si](this.path),linkpath:this.type==="Link"?this[Si](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.header.encode()&&!this.noPax&&super.write(new tD({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[Si](this.path),linkpath:this.type==="Link"?this[Si](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),t.pipe(this)}[Si](t){return nD(t,this.prefix)}[$h](t){return sD(t,this.type==="Directory",this.portable)}write(t){let r=t.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=r,super.write(t)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});Uh.Sync=PC;Uh.Tar=$W;var UW=e=>e.isFile()?"File":e.isDirectory()?"Directory":e.isSymbolicLink()?"SymbolicLink":"Unsupported";aD.exports=Uh});var uD=B((fie,cD)=>{"use strict";cD.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}});var jh=B((pie,lD)=>{"use strict";lD.exports=mt;mt.Node=lc;mt.create=mt;function mt(e){var t=this;if(t instanceof mt||(t=new mt),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(o){t.push(o)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}mt.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t};mt.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};mt.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};mt.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)HW(this,arguments[e]);return this.length};mt.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)qW(this,arguments[e]);return this.length};mt.prototype.pop=function(){if(!!this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};mt.prototype.shift=function(){if(!!this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};mt.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;r!==null;n++)e.call(t,r.value,n,this),r=r.next};mt.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;r!==null;n--)e.call(t,r.value,n,this),r=r.prev};mt.prototype.get=function(e){for(var t=0,r=this.head;r!==null&&t<e;t++)r=r.next;if(t===e&&r!==null)return r.value};mt.prototype.getReverse=function(e){for(var t=0,r=this.tail;r!==null&&t<e;t++)r=r.prev;if(t===e&&r!==null)return r.value};mt.prototype.map=function(e,t){t=t||this;for(var r=new mt,n=this.head;n!==null;)r.push(e.call(t,n.value,this)),n=n.next;return r};mt.prototype.mapReverse=function(e,t){t=t||this;for(var r=new mt,n=this.tail;n!==null;)r.push(e.call(t,n.value,this)),n=n.prev;return r};mt.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=0;n!==null;o++)r=e(r,n.value,o),n=n.next;return r};mt.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=this.length-1;n!==null;o--)r=e(r,n.value,o),n=n.prev;return r};mt.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;r!==null;t++)e[t]=r.value,r=r.next;return e};mt.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;r!==null;t++)e[t]=r.value,r=r.prev;return e};mt.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new mt;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,o=this.head;o!==null&&n<e;n++)o=o.next;for(;o!==null&&n<t;n++,o=o.next)r.push(o.value);return r};mt.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new mt;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,o=this.tail;o!==null&&n>t;n--)o=o.prev;for(;o!==null&&n>e;n--,o=o.prev)r.push(o.value);return r};mt.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,o=this.head;o!==null&&n<e;n++)o=o.next;for(var i=[],n=0;o&&n<t;n++)i.push(o.value),o=this.removeNode(o);o===null&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev);for(var n=0;n<r.length;n++)o=jW(this,o,r[n]);return i};mt.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};function jW(e,t,r){var n=t===e.head?new lc(r,null,t,e):new lc(r,t,t.next,e);return n.next===null&&(e.tail=n),n.prev===null&&(e.head=n),e.length++,n}function HW(e,t){e.tail=new lc(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function qW(e,t){e.head=new lc(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function lc(e,t,r,n){if(!(this instanceof lc))return new lc(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{uD()(mt)}catch{}});var Kh=B((hie,vD)=>{"use strict";var zh=class{constructor(t,r){this.path=t||"./",this.absolute=r,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},BW=Bu(),VW=sC(),WW=kh(),FC=TC(),GW=FC.Sync,zW=FC.Tar,YW=jh(),dD=Buffer.alloc(1024),Bh=Symbol("onStat"),Hh=Symbol("ended"),bi=Symbol("queue"),Xu=Symbol("current"),dc=Symbol("process"),qh=Symbol("processing"),fD=Symbol("processJob"),xi=Symbol("jobs"),IC=Symbol("jobDone"),Vh=Symbol("addFSEntry"),pD=Symbol("addTarEntry"),AC=Symbol("stat"),OC=Symbol("readdir"),Wh=Symbol("onreaddir"),Gh=Symbol("pipe"),mD=Symbol("entry"),DC=Symbol("entryOpt"),NC=Symbol("writeEntryClass"),gD=Symbol("write"),RC=Symbol("ondrain"),Yh=require("fs"),hD=require("path"),KW=Nh(),kC=Gu(),MC=KW(class extends BW{constructor(t){super(t),t=t||Object.create(null),this.opt=t,this.file=t.file||"",this.cwd=t.cwd||process.cwd(),this.maxReadSize=t.maxReadSize,this.preservePaths=!!t.preservePaths,this.strict=!!t.strict,this.noPax=!!t.noPax,this.prefix=kC(t.prefix||""),this.linkCache=t.linkCache||new Map,this.statCache=t.statCache||new Map,this.readdirCache=t.readdirCache||new Map,this[NC]=FC,typeof t.onwarn=="function"&&this.on("warn",t.onwarn),this.portable=!!t.portable,this.zip=null,t.gzip?(typeof t.gzip!="object"&&(t.gzip={}),this.portable&&(t.gzip.portable=!0),this.zip=new VW.Gzip(t.gzip),this.zip.on("data",r=>super.write(r)),this.zip.on("end",r=>super.end()),this.zip.on("drain",r=>this[RC]()),this.on("resume",r=>this.zip.resume())):this.on("drain",this[RC]),this.noDirRecurse=!!t.noDirRecurse,this.follow=!!t.follow,this.noMtime=!!t.noMtime,this.mtime=t.mtime||null,this.filter=typeof t.filter=="function"?t.filter:r=>!0,this[bi]=new YW,this[xi]=0,this.jobs=+t.jobs||4,this[qh]=!1,this[Hh]=!1}[gD](t){return super.write(t)}add(t){return this.write(t),this}end(t){return t&&this.write(t),this[Hh]=!0,this[dc](),this}write(t){if(this[Hh])throw new Error("write after end");return t instanceof WW?this[pD](t):this[Vh](t),this.flowing}[pD](t){let r=kC(hD.resolve(this.cwd,t.path));if(!this.filter(t.path,t))t.resume();else{let n=new zh(t.path,r,!1);n.entry=new zW(t,this[DC](n)),n.entry.on("end",o=>this[IC](n)),this[xi]+=1,this[bi].push(n)}this[dc]()}[Vh](t){let r=kC(hD.resolve(this.cwd,t));this[bi].push(new zh(t,r)),this[dc]()}[AC](t){t.pending=!0,this[xi]+=1;let r=this.follow?"stat":"lstat";Yh[r](t.absolute,(n,o)=>{t.pending=!1,this[xi]-=1,n?this.emit("error",n):this[Bh](t,o)})}[Bh](t,r){this.statCache.set(t.absolute,r),t.stat=r,this.filter(t.path,r)||(t.ignore=!0),this[dc]()}[OC](t){t.pending=!0,this[xi]+=1,Yh.readdir(t.absolute,(r,n)=>{if(t.pending=!1,this[xi]-=1,r)return this.emit("error",r);this[Wh](t,n)})}[Wh](t,r){this.readdirCache.set(t.absolute,r),t.readdir=r,this[dc]()}[dc](){if(!this[qh]){this[qh]=!0;for(let t=this[bi].head;t!==null&&this[xi]<this.jobs;t=t.next)if(this[fD](t.value),t.value.ignore){let r=t.next;this[bi].removeNode(t),t.next=r}this[qh]=!1,this[Hh]&&!this[bi].length&&this[xi]===0&&(this.zip?this.zip.end(dD):(super.write(dD),super.end()))}}get[Xu](){return this[bi]&&this[bi].head&&this[bi].head.value}[IC](t){this[bi].shift(),this[xi]-=1,this[dc]()}[fD](t){if(!t.pending){if(t.entry){t===this[Xu]&&!t.piped&&this[Gh](t);return}if(t.stat||(this.statCache.has(t.absolute)?this[Bh](t,this.statCache.get(t.absolute)):this[AC](t)),!!t.stat&&!t.ignore&&!(!this.noDirRecurse&&t.stat.isDirectory()&&!t.readdir&&(this.readdirCache.has(t.absolute)?this[Wh](t,this.readdirCache.get(t.absolute)):this[OC](t),!t.readdir))){if(t.entry=this[mD](t),!t.entry){t.ignore=!0;return}t===this[Xu]&&!t.piped&&this[Gh](t)}}}[DC](t){return{onwarn:(r,n,o)=>this.warn(r,n,o),noPax:this.noPax,cwd:this.cwd,absolute:t.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[mD](t){this[xi]+=1;try{return new this[NC](t.path,this[DC](t)).on("end",()=>this[IC](t)).on("error",r=>this.emit("error",r))}catch(r){this.emit("error",r)}}[RC](){this[Xu]&&this[Xu].entry&&this[Xu].entry.resume()}[Gh](t){t.piped=!0,t.readdir&&t.readdir.forEach(o=>{let i=t.path,s=i==="./"?"":i.replace(/\/*$/,"/");this[Vh](s+o)});let r=t.entry,n=this.zip;n?r.on("data",o=>{n.write(o)||r.pause()}):r.on("data",o=>{super.write(o)||r.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),LC=class extends MC{constructor(t){super(t),this[NC]=GW}pause(){}resume(){}[AC](t){let r=this.follow?"statSync":"lstatSync";this[Bh](t,Yh[r](t.absolute))}[OC](t,r){this[Wh](t,Yh.readdirSync(t.absolute))}[Gh](t){let r=t.entry,n=this.zip;t.readdir&&t.readdir.forEach(o=>{let i=t.path,s=i==="./"?"":i.replace(/\/*$/,"/");this[Vh](s+o)}),n?r.on("data",o=>{n.write(o)}):r.on("data",o=>{super[gD](o)})}};MC.Sync=LC;vD.exports=MC});var ol=B(Tf=>{"use strict";var XW=Bu(),QW=require("events").EventEmitter,cn=require("fs"),jC=cn.writev;if(!jC){let e=process.binding("fs"),t=e.FSReqWrap||e.FSReqCallback;jC=(r,n,o,i)=>{let s=(c,u)=>i(c,u,n),a=new t;a.oncomplete=s,e.writeBuffers(r,n,o,a)}}var rl=Symbol("_autoClose"),Mo=Symbol("_close"),Pf=Symbol("_ended"),Ct=Symbol("_fd"),yD=Symbol("_finished"),Bs=Symbol("_flags"),$C=Symbol("_flush"),HC=Symbol("_handleChunk"),qC=Symbol("_makeBuf"),eg=Symbol("_mode"),Xh=Symbol("_needDrain"),el=Symbol("_onerror"),nl=Symbol("_onopen"),UC=Symbol("_onread"),Ju=Symbol("_onwrite"),Vs=Symbol("_open"),Qi=Symbol("_path"),fc=Symbol("_pos"),Pi=Symbol("_queue"),Zu=Symbol("_read"),wD=Symbol("_readSize"),qs=Symbol("_reading"),Qh=Symbol("_remain"),ED=Symbol("_size"),Jh=Symbol("_write"),Qu=Symbol("_writing"),Zh=Symbol("_defaultFlag"),tl=Symbol("_errored"),tg=class extends XW{constructor(t,r){if(r=r||{},super(r),this.readable=!0,this.writable=!1,typeof t!="string")throw new TypeError("path must be a string");this[tl]=!1,this[Ct]=typeof r.fd=="number"?r.fd:null,this[Qi]=t,this[wD]=r.readSize||16*1024*1024,this[qs]=!1,this[ED]=typeof r.size=="number"?r.size:1/0,this[Qh]=this[ED],this[rl]=typeof r.autoClose=="boolean"?r.autoClose:!0,typeof this[Ct]=="number"?this[Zu]():this[Vs]()}get fd(){return this[Ct]}get path(){return this[Qi]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[Vs](){cn.open(this[Qi],"r",(t,r)=>this[nl](t,r))}[nl](t,r){t?this[el](t):(this[Ct]=r,this.emit("open",r),this[Zu]())}[qC](){return Buffer.allocUnsafe(Math.min(this[wD],this[Qh]))}[Zu](){if(!this[qs]){this[qs]=!0;let t=this[qC]();if(t.length===0)return process.nextTick(()=>this[UC](null,0,t));cn.read(this[Ct],t,0,t.length,null,(r,n,o)=>this[UC](r,n,o))}}[UC](t,r,n){this[qs]=!1,t?this[el](t):this[HC](r,n)&&this[Zu]()}[Mo](){if(this[rl]&&typeof this[Ct]=="number"){let t=this[Ct];this[Ct]=null,cn.close(t,r=>r?this.emit("error",r):this.emit("close"))}}[el](t){this[qs]=!0,this[Mo](),this.emit("error",t)}[HC](t,r){let n=!1;return this[Qh]-=t,t>0&&(n=super.write(t<r.length?r.slice(0,t):r)),(t===0||this[Qh]<=0)&&(n=!1,this[Mo](),super.end()),n}emit(t,r){switch(t){case"prefinish":case"finish":break;case"drain":typeof this[Ct]=="number"&&this[Zu]();break;case"error":return this[tl]?void 0:(this[tl]=!0,super.emit(t,r));default:return super.emit(t,r)}}},BC=class extends tg{[Vs](){let t=!0;try{this[nl](null,cn.openSync(this[Qi],"r")),t=!1}finally{t&&this[Mo]()}}[Zu](){let t=!0;try{if(!this[qs]){this[qs]=!0;do{let r=this[qC](),n=r.length===0?0:cn.readSync(this[Ct],r,0,r.length,null);if(!this[HC](n,r))break}while(!0);this[qs]=!1}t=!1}finally{t&&this[Mo]()}}[Mo](){if(this[rl]&&typeof this[Ct]=="number"){let t=this[Ct];this[Ct]=null,cn.closeSync(t),this.emit("close")}}},rg=class extends QW{constructor(t,r){r=r||{},super(r),this.readable=!1,this.writable=!0,this[tl]=!1,this[Qu]=!1,this[Pf]=!1,this[Xh]=!1,this[Pi]=[],this[Qi]=t,this[Ct]=typeof r.fd=="number"?r.fd:null,this[eg]=r.mode===void 0?438:r.mode,this[fc]=typeof r.start=="number"?r.start:null,this[rl]=typeof r.autoClose=="boolean"?r.autoClose:!0;let n=this[fc]!==null?"r+":"w";this[Zh]=r.flags===void 0,this[Bs]=this[Zh]?n:r.flags,this[Ct]===null&&this[Vs]()}emit(t,r){if(t==="error"){if(this[tl])return;this[tl]=!0}return super.emit(t,r)}get fd(){return this[Ct]}get path(){return this[Qi]}[el](t){this[Mo](),this[Qu]=!0,this.emit("error",t)}[Vs](){cn.open(this[Qi],this[Bs],this[eg],(t,r)=>this[nl](t,r))}[nl](t,r){this[Zh]&&this[Bs]==="r+"&&t&&t.code==="ENOENT"?(this[Bs]="w",this[Vs]()):t?this[el](t):(this[Ct]=r,this.emit("open",r),this[$C]())}end(t,r){return t&&this.write(t,r),this[Pf]=!0,!this[Qu]&&!this[Pi].length&&typeof this[Ct]=="number"&&this[Ju](null,0),this}write(t,r){return typeof t=="string"&&(t=Buffer.from(t,r)),this[Pf]?(this.emit("error",new Error("write() after end()")),!1):this[Ct]===null||this[Qu]||this[Pi].length?(this[Pi].push(t),this[Xh]=!0,!1):(this[Qu]=!0,this[Jh](t),!0)}[Jh](t){cn.write(this[Ct],t,0,t.length,this[fc],(r,n)=>this[Ju](r,n))}[Ju](t,r){t?this[el](t):(this[fc]!==null&&(this[fc]+=r),this[Pi].length?this[$C]():(this[Qu]=!1,this[Pf]&&!this[yD]?(this[yD]=!0,this[Mo](),this.emit("finish")):this[Xh]&&(this[Xh]=!1,this.emit("drain"))))}[$C](){if(this[Pi].length===0)this[Pf]&&this[Ju](null,0);else if(this[Pi].length===1)this[Jh](this[Pi].pop());else{let t=this[Pi];this[Pi]=[],jC(this[Ct],t,this[fc],(r,n)=>this[Ju](r,n))}}[Mo](){if(this[rl]&&typeof this[Ct]=="number"){let t=this[Ct];this[Ct]=null,cn.close(t,r=>r?this.emit("error",r):this.emit("close"))}}},VC=class extends rg{[Vs](){let t;if(this[Zh]&&this[Bs]==="r+")try{t=cn.openSync(this[Qi],this[Bs],this[eg])}catch(r){if(r.code==="ENOENT")return this[Bs]="w",this[Vs]();throw r}else t=cn.openSync(this[Qi],this[Bs],this[eg]);this[nl](null,t)}[Mo](){if(this[rl]&&typeof this[Ct]=="number"){let t=this[Ct];this[Ct]=null,cn.closeSync(t),this.emit("close")}}[Jh](t){let r=!0;try{this[Ju](null,cn.writeSync(this[Ct],t,0,t.length,this[fc])),r=!1}finally{if(r)try{this[Mo]()}catch{}}}};Tf.ReadStream=tg;Tf.ReadStreamSync=BC;Tf.WriteStream=rg;Tf.WriteStreamSync=VC});var ug=B((yie,ID)=>{"use strict";var JW=Nh(),ZW=Yu(),eG=require("events"),tG=jh(),rG=1024*1024,nG=kh(),CD=Oh(),oG=sC(),{nextTick:iG}=require("process"),WC=Buffer.from([31,139]),co=Symbol("state"),pc=Symbol("writeEntry"),Ji=Symbol("readEntry"),GC=Symbol("nextEntry"),_D=Symbol("processEntry"),uo=Symbol("extendedHeader"),If=Symbol("globalExtendedHeader"),Ws=Symbol("meta"),SD=Symbol("emitMeta"),At=Symbol("buffer"),Zi=Symbol("queue"),mc=Symbol("ended"),bD=Symbol("emittedEnd"),hc=Symbol("emit"),un=Symbol("unzip"),ng=Symbol("consumeChunk"),og=Symbol("consumeChunkSub"),zC=Symbol("consumeBody"),xD=Symbol("consumeMeta"),PD=Symbol("consumeHeader"),ig=Symbol("consuming"),YC=Symbol("bufferConcat"),KC=Symbol("maybeEnd"),Df=Symbol("writing"),Gs=Symbol("aborted"),sg=Symbol("onDone"),gc=Symbol("sawValidEntry"),ag=Symbol("sawNullBlock"),cg=Symbol("sawEOF"),TD=Symbol("closeStream"),sG=e=>!0;ID.exports=JW(class extends eG{constructor(t){t=t||{},super(t),this.file=t.file||"",this[gc]=null,this.on(sg,r=>{(this[co]==="begin"||this[gc]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),t.ondone?this.on(sg,t.ondone):this.on(sg,r=>{this.emit("prefinish"),this.emit("finish"),this.emit("end")}),this.strict=!!t.strict,this.maxMetaEntrySize=t.maxMetaEntrySize||rG,this.filter=typeof t.filter=="function"?t.filter:sG,this.writable=!0,this.readable=!1,this[Zi]=new tG,this[At]=null,this[Ji]=null,this[pc]=null,this[co]="begin",this[Ws]="",this[uo]=null,this[If]=null,this[mc]=!1,this[un]=null,this[Gs]=!1,this[ag]=!1,this[cg]=!1,this.on("end",()=>this[TD]()),typeof t.onwarn=="function"&&this.on("warn",t.onwarn),typeof t.onentry=="function"&&this.on("entry",t.onentry)}[PD](t,r){this[gc]===null&&(this[gc]=!1);let n;try{n=new ZW(t,r,this[uo],this[If])}catch(o){return this.warn("TAR_ENTRY_INVALID",o)}if(n.nullBlock)this[ag]?(this[cg]=!0,this[co]==="begin"&&(this[co]="header"),this[hc]("eof")):(this[ag]=!0,this[hc]("nullBlock"));else if(this[ag]=!1,!n.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:n});else if(!n.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:n});else{let o=n.type;if(/^(Symbolic)?Link$/.test(o)&&!n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:n});else if(!/^(Symbolic)?Link$/.test(o)&&n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:n});else{let i=this[pc]=new nG(n,this[uo],this[If]);if(!this[gc])if(i.remain){let s=()=>{i.invalid||(this[gc]=!0)};i.on("end",s)}else this[gc]=!0;i.meta?i.size>this.maxMetaEntrySize?(i.ignore=!0,this[hc]("ignoredEntry",i),this[co]="ignore",i.resume()):i.size>0&&(this[Ws]="",i.on("data",s=>this[Ws]+=s),this[co]="meta"):(this[uo]=null,i.ignore=i.ignore||!this.filter(i.path,i),i.ignore?(this[hc]("ignoredEntry",i),this[co]=i.remain?"ignore":"header",i.resume()):(i.remain?this[co]="body":(this[co]="header",i.end()),this[Ji]?this[Zi].push(i):(this[Zi].push(i),this[GC]())))}}}[TD](){iG(()=>this.emit("close"))}[_D](t){let r=!0;return t?Array.isArray(t)?this.emit.apply(this,t):(this[Ji]=t,this.emit("entry",t),t.emittedEnd||(t.on("end",n=>this[GC]()),r=!1)):(this[Ji]=null,r=!1),r}[GC](){do;while(this[_D](this[Zi].shift()));if(!this[Zi].length){let t=this[Ji];!t||t.flowing||t.size===t.remain?this[Df]||this.emit("drain"):t.once("drain",n=>this.emit("drain"))}}[zC](t,r){let n=this[pc],o=n.blockRemain,i=o>=t.length&&r===0?t:t.slice(r,r+o);return n.write(i),n.blockRemain||(this[co]="header",this[pc]=null,n.end()),i.length}[xD](t,r){let n=this[pc],o=this[zC](t,r);return this[pc]||this[SD](n),o}[hc](t,r,n){!this[Zi].length&&!this[Ji]?this.emit(t,r,n):this[Zi].push([t,r,n])}[SD](t){switch(this[hc]("meta",this[Ws]),t.type){case"ExtendedHeader":case"OldExtendedHeader":this[uo]=CD.parse(this[Ws],this[uo],!1);break;case"GlobalExtendedHeader":this[If]=CD.parse(this[Ws],this[If],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[uo]=this[uo]||Object.create(null),this[uo].path=this[Ws].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[uo]=this[uo]||Object.create(null),this[uo].linkpath=this[Ws].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+t.type)}}abort(t){this[Gs]=!0,this.emit("abort",t),this.warn("TAR_ABORT",t,{recoverable:!1})}write(t){if(this[Gs])return;if(this[un]===null&&t){if(this[At]&&(t=Buffer.concat([this[At],t]),this[At]=null),t.length<WC.length)return this[At]=t,!0;for(let n=0;this[un]===null&&n<WC.length;n++)t[n]!==WC[n]&&(this[un]=!1);if(this[un]===null){let n=this[mc];this[mc]=!1,this[un]=new oG.Unzip,this[un].on("data",i=>this[ng](i)),this[un].on("error",i=>this.abort(i)),this[un].on("end",i=>{this[mc]=!0,this[ng]()}),this[Df]=!0;let o=this[un][n?"end":"write"](t);return this[Df]=!1,o}}this[Df]=!0,this[un]?this[un].write(t):this[ng](t),this[Df]=!1;let r=this[Zi].length?!1:this[Ji]?this[Ji].flowing:!0;return!r&&!this[Zi].length&&this[Ji].once("drain",n=>this.emit("drain")),r}[YC](t){t&&!this[Gs]&&(this[At]=this[At]?Buffer.concat([this[At],t]):t)}[KC](){if(this[mc]&&!this[bD]&&!this[Gs]&&!this[ig]){this[bD]=!0;let t=this[pc];if(t&&t.blockRemain){let r=this[At]?this[At].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${t.blockRemain} more bytes, only ${r} available)`,{entry:t}),this[At]&&t.write(this[At]),t.end()}this[hc](sg)}}[ng](t){if(this[ig])this[YC](t);else if(!t&&!this[At])this[KC]();else{if(this[ig]=!0,this[At]){this[YC](t);let r=this[At];this[At]=null,this[og](r)}else this[og](t);for(;this[At]&&this[At].length>=512&&!this[Gs]&&!this[cg];){let r=this[At];this[At]=null,this[og](r)}this[ig]=!1}(!this[At]||this[mc])&&this[KC]()}[og](t){let r=0,n=t.length;for(;r+512<=n&&!this[Gs]&&!this[cg];)switch(this[co]){case"begin":case"header":this[PD](t,r),r+=512;break;case"ignore":case"body":r+=this[zC](t,r);break;case"meta":r+=this[xD](t,r);break;default:throw new Error("invalid state: "+this[co])}r<n&&(this[At]?this[At]=Buffer.concat([t.slice(r),this[At]]):this[At]=t.slice(r))}end(t){this[Gs]||(this[un]?this[un].end(t):(this[mc]=!0,this.write(t)))}})});var lg=B((wie,AD)=>{"use strict";var aG=Hu(),RD=ug(),il=require("fs"),cG=ol(),DD=require("path"),XC=Ku();AD.exports=(e,t,r)=>{typeof e=="function"?(r=e,t=null,e={}):Array.isArray(e)&&(t=e,e={}),typeof t=="function"&&(r=t,t=null),t?t=Array.from(t):t=[];let n=aG(e);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return t.length&&lG(n,t),n.noResume||uG(n),n.file&&n.sync?dG(n):n.file?fG(n,r):kD(n)};var uG=e=>{let t=e.onentry;e.onentry=t?r=>{t(r),r.resume()}:r=>r.resume()},lG=(e,t)=>{let r=new Map(t.map(i=>[XC(i),!0])),n=e.filter,o=(i,s)=>{let a=s||DD.parse(i).root||".",c=i===a?!1:r.has(i)?r.get(i):o(DD.dirname(i),a);return r.set(i,c),c};e.filter=n?(i,s)=>n(i,s)&&o(XC(i)):i=>o(XC(i))},dG=e=>{let t=kD(e),r=e.file,n=!0,o;try{let i=il.statSync(r),s=e.maxReadSize||16*1024*1024;if(i.size<s)t.end(il.readFileSync(r));else{let a=0,c=Buffer.allocUnsafe(s);for(o=il.openSync(r,"r");a<i.size;){let u=il.readSync(o,c,0,s,a);a+=u,t.write(c.slice(0,u))}t.end()}n=!1}finally{if(n&&o)try{il.closeSync(o)}catch{}}},fG=(e,t)=>{let r=new RD(e),n=e.maxReadSize||16*1024*1024,o=e.file,i=new Promise((s,a)=>{r.on("error",a),r.on("end",s),il.stat(o,(c,u)=>{if(c)a(c);else{let l=new cG.ReadStream(o,{readSize:n,size:u.size});l.on("error",a),l.pipe(r)}})});return t?i.then(t,t):i},kD=e=>new RD(e)});var $D=B((Eie,MD)=>{"use strict";var pG=Hu(),dg=Kh(),OD=ol(),ND=lg(),LD=require("path");MD.exports=(e,t,r)=>{if(typeof t=="function"&&(r=t),Array.isArray(e)&&(t=e,e={}),!t||!Array.isArray(t)||!t.length)throw new TypeError("no files or directories specified");t=Array.from(t);let n=pG(e);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return n.file&&n.sync?mG(n,t):n.file?hG(n,t,r):n.sync?gG(n,t):vG(n,t)};var mG=(e,t)=>{let r=new dg.Sync(e),n=new OD.WriteStreamSync(e.file,{mode:e.mode||438});r.pipe(n),FD(r,t)},hG=(e,t,r)=>{let n=new dg(e),o=new OD.WriteStream(e.file,{mode:e.mode||438});n.pipe(o);let i=new Promise((s,a)=>{o.on("error",a),o.on("close",s),n.on("error",a)});return QC(n,t),r?i.then(r,r):i},FD=(e,t)=>{t.forEach(r=>{r.charAt(0)==="@"?ND({file:LD.resolve(e.cwd,r.slice(1)),sync:!0,noResume:!0,onentry:n=>e.add(n)}):e.add(r)}),e.end()},QC=(e,t)=>{for(;t.length;){let r=t.shift();if(r.charAt(0)==="@")return ND({file:LD.resolve(e.cwd,r.slice(1)),noResume:!0,onentry:n=>e.add(n)}).then(n=>QC(e,t));e.add(r)}e.end()},gG=(e,t)=>{let r=new dg.Sync(e);return FD(r,t),r},vG=(e,t)=>{let r=new dg(e);return QC(r,t),r}});var JC=B((Cie,WD)=>{"use strict";var yG=Hu(),UD=Kh(),Fn=require("fs"),jD=ol(),HD=lg(),qD=require("path"),BD=Yu();WD.exports=(e,t,r)=>{let n=yG(e);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!t||!Array.isArray(t)||!t.length)throw new TypeError("no files or directories specified");return t=Array.from(t),n.sync?wG(n,t):CG(n,t,r)};var wG=(e,t)=>{let r=new UD.Sync(e),n=!0,o,i;try{try{o=Fn.openSync(e.file,"r+")}catch(c){if(c.code==="ENOENT")o=Fn.openSync(e.file,"w+");else throw c}let s=Fn.fstatSync(o),a=Buffer.alloc(512);e:for(i=0;i<s.size;i+=512){for(let l=0,d=0;l<512;l+=d){if(d=Fn.readSync(o,a,l,a.length-l,i+l),i===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!d)break e}let c=new BD(a);if(!c.cksumValid)break;let u=512*Math.ceil(c.size/512);if(i+u+512>s.size)break;i+=u,e.mtimeCache&&e.mtimeCache.set(c.path,c.mtime)}n=!1,EG(e,r,i,o,t)}finally{if(n)try{Fn.closeSync(o)}catch{}}},EG=(e,t,r,n,o)=>{let i=new jD.WriteStreamSync(e.file,{fd:n,start:r});t.pipe(i),_G(t,o)},CG=(e,t,r)=>{t=Array.from(t);let n=new UD(e),o=(s,a,c)=>{let u=(m,h)=>{m?Fn.close(s,g=>c(m)):c(null,h)},l=0;if(a===0)return u(null,0);let d=0,f=Buffer.alloc(512),p=(m,h)=>{if(m)return u(m);if(d+=h,d<512&&h)return Fn.read(s,f,d,f.length-d,l+d,p);if(l===0&&f[0]===31&&f[1]===139)return u(new Error("cannot append to compressed archives"));if(d<512)return u(null,l);let g=new BD(f);if(!g.cksumValid)return u(null,l);let v=512*Math.ceil(g.size/512);if(l+v+512>a||(l+=v+512,l>=a))return u(null,l);e.mtimeCache&&e.mtimeCache.set(g.path,g.mtime),d=0,Fn.read(s,f,0,512,l,p)};Fn.read(s,f,0,512,l,p)},i=new Promise((s,a)=>{n.on("error",a);let c="r+",u=(l,d)=>{if(l&&l.code==="ENOENT"&&c==="r+")return c="w+",Fn.open(e.file,c,u);if(l)return a(l);Fn.fstat(d,(f,p)=>{if(f)return Fn.close(d,()=>a(f));o(d,p.size,(m,h)=>{if(m)return a(m);let g=new jD.WriteStream(e.file,{fd:d,start:h});n.pipe(g),g.on("error",a),g.on("close",s),VD(n,t)})})};Fn.open(e.file,c,u)});return r?i.then(r,r):i},_G=(e,t)=>{t.forEach(r=>{r.charAt(0)==="@"?HD({file:qD.resolve(e.cwd,r.slice(1)),sync:!0,noResume:!0,onentry:n=>e.add(n)}):e.add(r)}),e.end()},VD=(e,t)=>{for(;t.length;){let r=t.shift();if(r.charAt(0)==="@")return HD({file:qD.resolve(e.cwd,r.slice(1)),noResume:!0,onentry:n=>e.add(n)}).then(n=>VD(e,t));e.add(r)}e.end()}});var zD=B((_ie,GD)=>{"use strict";var SG=Hu(),bG=JC();GD.exports=(e,t,r)=>{let n=SG(e);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!t||!Array.isArray(t)||!t.length)throw new TypeError("no files or directories specified");return t=Array.from(t),xG(n),bG(n,t,r)};var xG=e=>{let t=e.filter;e.mtimeCache||(e.mtimeCache=new Map),e.filter=t?(r,n)=>t(r,n)&&!(e.mtimeCache.get(r)>n.mtime):(r,n)=>!(e.mtimeCache.get(r)>n.mtime)}});var XD=B((Sie,KD)=>{var{promisify:YD}=require("util"),zs=require("fs"),PG=e=>{if(!e)e={mode:511,fs:zs};else if(typeof e=="object")e={mode:511,fs:zs,...e};else if(typeof e=="number")e={mode:e,fs:zs};else if(typeof e=="string")e={mode:parseInt(e,8),fs:zs};else throw new TypeError("invalid options argument");return e.mkdir=e.mkdir||e.fs.mkdir||zs.mkdir,e.mkdirAsync=YD(e.mkdir),e.stat=e.stat||e.fs.stat||zs.stat,e.statAsync=YD(e.stat),e.statSync=e.statSync||e.fs.statSync||zs.statSync,e.mkdirSync=e.mkdirSync||e.fs.mkdirSync||zs.mkdirSync,e};KD.exports=PG});var JD=B((bie,QD)=>{var TG=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:IG,parse:DG}=require("path"),RG=e=>{if(/\0/.test(e))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:e,code:"ERR_INVALID_ARG_VALUE"});if(e=IG(e),TG==="win32"){let t=/[*|"<>?:]/,{root:r}=DG(e);if(t.test(e.substr(r.length)))throw Object.assign(new Error("Illegal characters in path."),{path:e,code:"EINVAL"})}return e};QD.exports=RG});var nR=B((xie,rR)=>{var{dirname:ZD}=require("path"),eR=(e,t,r=void 0)=>r===t?Promise.resolve():e.statAsync(t).then(n=>n.isDirectory()?r:void 0,n=>n.code==="ENOENT"?eR(e,ZD(t),t):void 0),tR=(e,t,r=void 0)=>{if(r!==t)try{return e.statSync(t).isDirectory()?r:void 0}catch(n){return n.code==="ENOENT"?tR(e,ZD(t),t):void 0}};rR.exports={findMade:eR,findMadeSync:tR}});var t_=B((Pie,iR)=>{var{dirname:oR}=require("path"),ZC=(e,t,r)=>{t.recursive=!1;let n=oR(e);return n===e?t.mkdirAsync(e,t).catch(o=>{if(o.code!=="EISDIR")throw o}):t.mkdirAsync(e,t).then(()=>r||e,o=>{if(o.code==="ENOENT")return ZC(n,t).then(i=>ZC(e,t,i));if(o.code!=="EEXIST"&&o.code!=="EROFS")throw o;return t.statAsync(e).then(i=>{if(i.isDirectory())return r;throw o},()=>{throw o})})},e_=(e,t,r)=>{let n=oR(e);if(t.recursive=!1,n===e)try{return t.mkdirSync(e,t)}catch(o){if(o.code!=="EISDIR")throw o;return}try{return t.mkdirSync(e,t),r||e}catch(o){if(o.code==="ENOENT")return e_(e,t,e_(n,t,r));if(o.code!=="EEXIST"&&o.code!=="EROFS")throw o;try{if(!t.statSync(e).isDirectory())throw o}catch{throw o}}};iR.exports={mkdirpManual:ZC,mkdirpManualSync:e_}});var cR=B((Tie,aR)=>{var{dirname:sR}=require("path"),{findMade:kG,findMadeSync:AG}=nR(),{mkdirpManual:OG,mkdirpManualSync:NG}=t_(),LG=(e,t)=>(t.recursive=!0,sR(e)===e?t.mkdirAsync(e,t):kG(t,e).then(n=>t.mkdirAsync(e,t).then(()=>n).catch(o=>{if(o.code==="ENOENT")return OG(e,t);throw o}))),FG=(e,t)=>{if(t.recursive=!0,sR(e)===e)return t.mkdirSync(e,t);let n=AG(t,e);try{return t.mkdirSync(e,t),n}catch(o){if(o.code==="ENOENT")return NG(e,t);throw o}};aR.exports={mkdirpNative:LG,mkdirpNativeSync:FG}});var fR=B((Iie,dR)=>{var uR=require("fs"),MG=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,r_=MG.replace(/^v/,"").split("."),lR=+r_[0]>10||+r_[0]==10&&+r_[1]>=12,$G=lR?e=>e.mkdir===uR.mkdir:()=>!1,UG=lR?e=>e.mkdirSync===uR.mkdirSync:()=>!1;dR.exports={useNative:$G,useNativeSync:UG}});var yR=B((Die,vR)=>{var sl=XD(),al=JD(),{mkdirpNative:pR,mkdirpNativeSync:mR}=cR(),{mkdirpManual:hR,mkdirpManualSync:gR}=t_(),{useNative:jG,useNativeSync:HG}=fR(),cl=(e,t)=>(e=al(e),t=sl(t),jG(t)?pR(e,t):hR(e,t)),qG=(e,t)=>(e=al(e),t=sl(t),HG(t)?mR(e,t):gR(e,t));cl.sync=qG;cl.native=(e,t)=>pR(al(e),sl(t));cl.manual=(e,t)=>hR(al(e),sl(t));cl.nativeSync=(e,t)=>mR(al(e),sl(t));cl.manualSync=(e,t)=>gR(al(e),sl(t));vR.exports=cl});var xR=B((Rie,bR)=>{"use strict";var lo=require("fs"),vc=require("path"),BG=lo.lchown?"lchown":"chown",VG=lo.lchownSync?"lchownSync":"chownSync",ER=lo.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),wR=(e,t,r)=>{try{return lo[VG](e,t,r)}catch(n){if(n.code!=="ENOENT")throw n}},WG=(e,t,r)=>{try{return lo.chownSync(e,t,r)}catch(n){if(n.code!=="ENOENT")throw n}},GG=ER?(e,t,r,n)=>o=>{!o||o.code!=="EISDIR"?n(o):lo.chown(e,t,r,n)}:(e,t,r,n)=>n,n_=ER?(e,t,r)=>{try{return wR(e,t,r)}catch(n){if(n.code!=="EISDIR")throw n;WG(e,t,r)}}:(e,t,r)=>wR(e,t,r),zG=process.version,CR=(e,t,r)=>lo.readdir(e,t,r),YG=(e,t)=>lo.readdirSync(e,t);/^v4\./.test(zG)&&(CR=(e,t,r)=>lo.readdir(e,r));var fg=(e,t,r,n)=>{lo[BG](e,t,r,GG(e,t,r,o=>{n(o&&o.code!=="ENOENT"?o:null)}))},_R=(e,t,r,n,o)=>{if(typeof t=="string")return lo.lstat(vc.resolve(e,t),(i,s)=>{if(i)return o(i.code!=="ENOENT"?i:null);s.name=t,_R(e,s,r,n,o)});if(t.isDirectory())o_(vc.resolve(e,t.name),r,n,i=>{if(i)return o(i);let s=vc.resolve(e,t.name);fg(s,r,n,o)});else{let i=vc.resolve(e,t.name);fg(i,r,n,o)}},o_=(e,t,r,n)=>{CR(e,{withFileTypes:!0},(o,i)=>{if(o){if(o.code==="ENOENT")return n();if(o.code!=="ENOTDIR"&&o.code!=="ENOTSUP")return n(o)}if(o||!i.length)return fg(e,t,r,n);let s=i.length,a=null,c=u=>{if(!a){if(u)return n(a=u);if(--s===0)return fg(e,t,r,n)}};i.forEach(u=>_R(e,u,t,r,c))})},KG=(e,t,r,n)=>{if(typeof t=="string")try{let o=lo.lstatSync(vc.resolve(e,t));o.name=t,t=o}catch(o){if(o.code==="ENOENT")return;throw o}t.isDirectory()&&SR(vc.resolve(e,t.name),r,n),n_(vc.resolve(e,t.name),r,n)},SR=(e,t,r)=>{let n;try{n=YG(e,{withFileTypes:!0})}catch(o){if(o.code==="ENOENT")return;if(o.code==="ENOTDIR"||o.code==="ENOTSUP")return n_(e,t,r);throw o}return n&&n.length&&n.forEach(o=>KG(e,o,t,r)),n_(e,t,r)};bR.exports=o_;o_.sync=SR});var DR=B((kie,i_)=>{"use strict";var PR=yR(),fo=require("fs"),pg=require("path"),TR=xR(),$o=Gu(),mg=class extends Error{constructor(t,r){super("Cannot extract through symbolic link"),this.path=r,this.symlink=t}get name(){return"SylinkError"}},hg=class extends Error{constructor(t,r){super(r+": Cannot cd into '"+t+"'"),this.path=t,this.code=r}get name(){return"CwdError"}},gg=(e,t)=>e.get($o(t)),Rf=(e,t,r)=>e.set($o(t),r),XG=(e,t)=>{fo.stat(e,(r,n)=>{(r||!n.isDirectory())&&(r=new hg(e,r&&r.code||"ENOTDIR")),t(r)})};i_.exports=(e,t,r)=>{e=$o(e);let n=t.umask,o=t.mode|448,i=(o&n)!==0,s=t.uid,a=t.gid,c=typeof s=="number"&&typeof a=="number"&&(s!==t.processUid||a!==t.processGid),u=t.preserve,l=t.unlink,d=t.cache,f=$o(t.cwd),p=(g,v)=>{g?r(g):(Rf(d,e,!0),v&&c?TR(v,s,a,w=>p(w)):i?fo.chmod(e,o,r):r())};if(d&&gg(d,e)===!0)return p();if(e===f)return XG(e,p);if(u)return PR(e,{mode:o}).then(g=>p(null,g),p);let h=$o(pg.relative(f,e)).split("/");vg(f,h,o,d,l,f,null,p)};var vg=(e,t,r,n,o,i,s,a)=>{if(!t.length)return a(null,s);let c=t.shift(),u=$o(pg.resolve(e+"/"+c));if(gg(n,u))return vg(u,t,r,n,o,i,s,a);fo.mkdir(u,r,IR(u,t,r,n,o,i,s,a))},IR=(e,t,r,n,o,i,s,a)=>c=>{c?fo.lstat(e,(u,l)=>{if(u)u.path=u.path&&$o(u.path),a(u);else if(l.isDirectory())vg(e,t,r,n,o,i,s,a);else if(o)fo.unlink(e,d=>{if(d)return a(d);fo.mkdir(e,r,IR(e,t,r,n,o,i,s,a))});else{if(l.isSymbolicLink())return a(new mg(e,e+"/"+t.join("/")));a(c)}}):(s=s||e,vg(e,t,r,n,o,i,s,a))},QG=e=>{let t=!1,r="ENOTDIR";try{t=fo.statSync(e).isDirectory()}catch(n){r=n.code}finally{if(!t)throw new hg(e,r)}};i_.exports.sync=(e,t)=>{e=$o(e);let r=t.umask,n=t.mode|448,o=(n&r)!==0,i=t.uid,s=t.gid,a=typeof i=="number"&&typeof s=="number"&&(i!==t.processUid||s!==t.processGid),c=t.preserve,u=t.unlink,l=t.cache,d=$o(t.cwd),f=g=>{Rf(l,e,!0),g&&a&&TR.sync(g,i,s),o&&fo.chmodSync(e,n)};if(l&&gg(l,e)===!0)return f();if(e===d)return QG(d),f();if(c)return f(PR.sync(e,n));let m=$o(pg.relative(d,e)).split("/"),h=null;for(let g=m.shift(),v=d;g&&(v+="/"+g);g=m.shift())if(v=$o(pg.resolve(v)),!gg(l,v))try{fo.mkdirSync(v,n),h=h||v,Rf(l,v,!0)}catch{let E=fo.lstatSync(v);if(E.isDirectory()){Rf(l,v,!0);continue}else if(u){fo.unlinkSync(v),fo.mkdirSync(v,n),h=h||v,Rf(l,v,!0);continue}else if(E.isSymbolicLink())return new mg(v,v+"/"+m.join("/"))}return f(h)}});var a_=B((Aie,RR)=>{var s_=Object.create(null),{hasOwnProperty:JG}=Object.prototype;RR.exports=e=>(JG.call(s_,e)||(s_[e]=e.normalize("NFKD")),s_[e])});var NR=B((Oie,OR)=>{var kR=require("assert"),ZG=a_(),e3=Ku(),{join:AR}=require("path"),t3=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,r3=t3==="win32";OR.exports=()=>{let e=new Map,t=new Map,r=u=>u.split("/").slice(0,-1).reduce((d,f)=>(d.length&&(f=AR(d[d.length-1],f)),d.push(f||"/"),d),[]),n=new Set,o=u=>{let l=t.get(u);if(!l)throw new Error("function does not have any path reservations");return{paths:l.paths.map(d=>e.get(d)),dirs:[...l.dirs].map(d=>e.get(d))}},i=u=>{let{paths:l,dirs:d}=o(u);return l.every(f=>f[0]===u)&&d.every(f=>f[0]instanceof Set&&f[0].has(u))},s=u=>n.has(u)||!i(u)?!1:(n.add(u),u(()=>a(u)),!0),a=u=>{if(!n.has(u))return!1;let{paths:l,dirs:d}=t.get(u),f=new Set;return l.forEach(p=>{let m=e.get(p);kR.equal(m[0],u),m.length===1?e.delete(p):(m.shift(),typeof m[0]=="function"?f.add(m[0]):m[0].forEach(h=>f.add(h)))}),d.forEach(p=>{let m=e.get(p);kR(m[0]instanceof Set),m[0].size===1&&m.length===1?e.delete(p):m[0].size===1?(m.shift(),f.add(m[0])):m[0].delete(u)}),n.delete(u),f.forEach(p=>s(p)),!0};return{check:i,reserve:(u,l)=>{u=r3?["win32 parallelization disabled"]:u.map(f=>ZG(e3(AR(f))).toLowerCase());let d=new Set(u.map(f=>r(f)).reduce((f,p)=>f.concat(p)));return t.set(l,{dirs:d,paths:u}),u.forEach(f=>{let p=e.get(f);p?p.push(l):e.set(f,[l])}),d.forEach(f=>{let p=e.get(f);p?p[p.length-1]instanceof Set?p[p.length-1].add(l):p.push(new Set([l])):e.set(f,[new Set([l])])}),s(l)}}}});var MR=B((Nie,FR)=>{var n3=process.env.__FAKE_PLATFORM__||process.platform,o3=n3==="win32",i3=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:s3,O_TRUNC:a3,O_WRONLY:c3,UV_FS_O_FILEMAP:LR=0}=i3.constants,u3=o3&&!!LR,l3=512*1024,d3=LR|a3|s3|c3;FR.exports=u3?e=>e<l3?d3:"w":()=>"w"});var g_=B((Lie,QR)=>{"use strict";var f3=require("assert"),p3=ug(),ht=require("fs"),m3=ol(),es=require("path"),YR=DR(),$R=gC(),h3=NR(),g3=vC(),Mn=Gu(),v3=Ku(),y3=a_(),UR=Symbol("onEntry"),l_=Symbol("checkFs"),jR=Symbol("checkFs2"),Eg=Symbol("pruneCache"),d_=Symbol("isReusable"),po=Symbol("makeFs"),f_=Symbol("file"),p_=Symbol("directory"),Cg=Symbol("link"),HR=Symbol("symlink"),qR=Symbol("hardlink"),BR=Symbol("unsupported"),VR=Symbol("checkPath"),Ys=Symbol("mkdir"),Fr=Symbol("onError"),yg=Symbol("pending"),WR=Symbol("pend"),ul=Symbol("unpend"),c_=Symbol("ended"),u_=Symbol("maybeClose"),m_=Symbol("skip"),kf=Symbol("doChown"),Af=Symbol("uid"),Of=Symbol("gid"),Nf=Symbol("checkedCwd"),KR=require("crypto"),XR=MR(),w3=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,Lf=w3==="win32",E3=(e,t)=>{if(!Lf)return ht.unlink(e,t);let r=e+".DELETE."+KR.randomBytes(16).toString("hex");ht.rename(e,r,n=>{if(n)return t(n);ht.unlink(r,t)})},C3=e=>{if(!Lf)return ht.unlinkSync(e);let t=e+".DELETE."+KR.randomBytes(16).toString("hex");ht.renameSync(e,t),ht.unlinkSync(t)},GR=(e,t,r)=>e===e>>>0?e:t===t>>>0?t:r,zR=e=>y3(v3(Mn(e))).toLowerCase(),_3=(e,t)=>{t=zR(t);for(let r of e.keys()){let n=zR(r);(n===t||n.indexOf(t+"/")===0)&&e.delete(r)}},S3=e=>{for(let t of e.keys())e.delete(t)},Ff=class extends p3{constructor(t){if(t||(t={}),t.ondone=r=>{this[c_]=!0,this[u_]()},super(t),this[Nf]=!1,this.reservations=h3(),this.transform=typeof t.transform=="function"?t.transform:null,this.writable=!0,this.readable=!1,this[yg]=0,this[c_]=!1,this.dirCache=t.dirCache||new Map,typeof t.uid=="number"||typeof t.gid=="number"){if(typeof t.uid!="number"||typeof t.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(t.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=t.uid,this.gid=t.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;t.preserveOwner===void 0&&typeof t.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!t.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.forceChown=t.forceChown===!0,this.win32=!!t.win32||Lf,this.newer=!!t.newer,this.keep=!!t.keep,this.noMtime=!!t.noMtime,this.preservePaths=!!t.preservePaths,this.unlink=!!t.unlink,this.cwd=Mn(es.resolve(t.cwd||process.cwd())),this.strip=+t.strip||0,this.processUmask=t.noChmod?0:process.umask(),this.umask=typeof t.umask=="number"?t.umask:this.processUmask,this.dmode=t.dmode||511&~this.umask,this.fmode=t.fmode||438&~this.umask,this.on("entry",r=>this[UR](r))}warn(t,r,n={}){return(t==="TAR_BAD_ARCHIVE"||t==="TAR_ABORT")&&(n.recoverable=!1),super.warn(t,r,n)}[u_](){this[c_]&&this[yg]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"))}[VR](t){if(this.strip){let r=Mn(t.path).split("/");if(r.length<this.strip)return!1;if(t.path=r.slice(this.strip).join("/"),t.type==="Link"){let n=Mn(t.linkpath).split("/");if(n.length>=this.strip)t.linkpath=n.slice(this.strip).join("/");else return!1}}if(!this.preservePaths){let r=Mn(t.path),n=r.split("/");if(n.includes("..")||Lf&&/^[a-z]:\.\.$/i.test(n[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:t,path:r}),!1;let[o,i]=g3(r);o&&(t.path=i,this.warn("TAR_ENTRY_INFO",`stripping ${o} from absolute path`,{entry:t,path:r}))}if(es.isAbsolute(t.path)?t.absolute=Mn(es.resolve(t.path)):t.absolute=Mn(es.resolve(this.cwd,t.path)),!this.preservePaths&&t.absolute.indexOf(this.cwd+"/")!==0&&t.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:t,path:Mn(t.path),resolvedPath:t.absolute,cwd:this.cwd}),!1;if(t.absolute===this.cwd&&t.type!=="Directory"&&t.type!=="GNUDumpDir")return!1;if(this.win32){let{root:r}=es.win32.parse(t.absolute);t.absolute=r+$R.encode(t.absolute.slice(r.length));let{root:n}=es.win32.parse(t.path);t.path=n+$R.encode(t.path.slice(n.length))}return!0}[UR](t){if(!this[VR](t))return t.resume();switch(f3.equal(typeof t.absolute,"string"),t.type){case"Directory":case"GNUDumpDir":t.mode&&(t.mode=t.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[l_](t);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[BR](t)}}[Fr](t,r){t.name==="CwdError"?this.emit("error",t):(this.warn("TAR_ENTRY_ERROR",t,{entry:r}),this[ul](),r.resume())}[Ys](t,r,n){YR(Mn(t),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r,noChmod:this.noChmod},n)}[kf](t){return this.forceChown||this.preserveOwner&&(typeof t.uid=="number"&&t.uid!==this.processUid||typeof t.gid=="number"&&t.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[Af](t){return GR(this.uid,t.uid,this.processUid)}[Of](t){return GR(this.gid,t.gid,this.processGid)}[f_](t,r){let n=t.mode&4095||this.fmode,o=new m3.WriteStream(t.absolute,{flags:XR(t.size),mode:n,autoClose:!1});o.on("error",c=>{o.fd&&ht.close(o.fd,()=>{}),o.write=()=>!0,this[Fr](c,t),r()});let i=1,s=c=>{if(c){o.fd&&ht.close(o.fd,()=>{}),this[Fr](c,t),r();return}--i===0&&ht.close(o.fd,u=>{u?this[Fr](u,t):this[ul](),r()})};o.on("finish",c=>{let u=t.absolute,l=o.fd;if(t.mtime&&!this.noMtime){i++;let d=t.atime||new Date,f=t.mtime;ht.futimes(l,d,f,p=>p?ht.utimes(u,d,f,m=>s(m&&p)):s())}if(this[kf](t)){i++;let d=this[Af](t),f=this[Of](t);ht.fchown(l,d,f,p=>p?ht.chown(u,d,f,m=>s(m&&p)):s())}s()});let a=this.transform&&this.transform(t)||t;a!==t&&(a.on("error",c=>{this[Fr](c,t),r()}),t.pipe(a)),a.pipe(o)}[p_](t,r){let n=t.mode&4095||this.dmode;this[Ys](t.absolute,n,o=>{if(o){this[Fr](o,t),r();return}let i=1,s=a=>{--i===0&&(r(),this[ul](),t.resume())};t.mtime&&!this.noMtime&&(i++,ht.utimes(t.absolute,t.atime||new Date,t.mtime,s)),this[kf](t)&&(i++,ht.chown(t.absolute,this[Af](t),this[Of](t),s)),s()})}[BR](t){t.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${t.type}`,{entry:t}),t.resume()}[HR](t,r){this[Cg](t,t.linkpath,"symlink",r)}[qR](t,r){let n=Mn(es.resolve(this.cwd,t.linkpath));this[Cg](t,n,"link",r)}[WR](){this[yg]++}[ul](){this[yg]--,this[u_]()}[m_](t){this[ul](),t.resume()}[d_](t,r){return t.type==="File"&&!this.unlink&&r.isFile()&&r.nlink<=1&&!Lf}[l_](t){this[WR]();let r=[t.path];t.linkpath&&r.push(t.linkpath),this.reservations.reserve(r,n=>this[jR](t,n))}[Eg](t){t.type==="SymbolicLink"?S3(this.dirCache):t.type!=="Directory"&&_3(this.dirCache,t.absolute)}[jR](t,r){this[Eg](t);let n=a=>{this[Eg](t),r(a)},o=()=>{this[Ys](this.cwd,this.dmode,a=>{if(a){this[Fr](a,t),n();return}this[Nf]=!0,i()})},i=()=>{if(t.absolute!==this.cwd){let a=Mn(es.dirname(t.absolute));if(a!==this.cwd)return this[Ys](a,this.dmode,c=>{if(c){this[Fr](c,t),n();return}s()})}s()},s=()=>{ht.lstat(t.absolute,(a,c)=>{if(c&&(this.keep||this.newer&&c.mtime>t.mtime)){this[m_](t),n();return}if(a||this[d_](t,c))return this[po](null,t,n);if(c.isDirectory()){if(t.type==="Directory"){let u=!this.noChmod&&t.mode&&(c.mode&4095)!==t.mode,l=d=>this[po](d,t,n);return u?ht.chmod(t.absolute,t.mode,l):l()}if(t.absolute!==this.cwd)return ht.rmdir(t.absolute,u=>this[po](u,t,n))}if(t.absolute===this.cwd)return this[po](null,t,n);E3(t.absolute,u=>this[po](u,t,n))})};this[Nf]?i():o()}[po](t,r,n){if(t){this[Fr](t,r),n();return}switch(r.type){case"File":case"OldFile":case"ContiguousFile":return this[f_](r,n);case"Link":return this[qR](r,n);case"SymbolicLink":return this[HR](r,n);case"Directory":case"GNUDumpDir":return this[p_](r,n)}}[Cg](t,r,n,o){ht[n](r,t.absolute,i=>{i?this[Fr](i,t):(this[ul](),t.resume()),o()})}},wg=e=>{try{return[null,e()]}catch(t){return[t,null]}},h_=class extends Ff{[po](t,r){return super[po](t,r,()=>{})}[l_](t){if(this[Eg](t),!this[Nf]){let i=this[Ys](this.cwd,this.dmode);if(i)return this[Fr](i,t);this[Nf]=!0}if(t.absolute!==this.cwd){let i=Mn(es.dirname(t.absolute));if(i!==this.cwd){let s=this[Ys](i,this.dmode);if(s)return this[Fr](s,t)}}let[r,n]=wg(()=>ht.lstatSync(t.absolute));if(n&&(this.keep||this.newer&&n.mtime>t.mtime))return this[m_](t);if(r||this[d_](t,n))return this[po](null,t);if(n.isDirectory()){if(t.type==="Directory"){let s=!this.noChmod&&t.mode&&(n.mode&4095)!==t.mode,[a]=s?wg(()=>{ht.chmodSync(t.absolute,t.mode)}):[];return this[po](a,t)}let[i]=wg(()=>ht.rmdirSync(t.absolute));this[po](i,t)}let[o]=t.absolute===this.cwd?[]:wg(()=>C3(t.absolute));this[po](o,t)}[f_](t,r){let n=t.mode&4095||this.fmode,o=a=>{let c;try{ht.closeSync(i)}catch(u){c=u}(a||c)&&this[Fr](a||c,t),r()},i;try{i=ht.openSync(t.absolute,XR(t.size),n)}catch(a){return o(a)}let s=this.transform&&this.transform(t)||t;s!==t&&(s.on("error",a=>this[Fr](a,t)),t.pipe(s)),s.on("data",a=>{try{ht.writeSync(i,a,0,a.length)}catch(c){o(c)}}),s.on("end",a=>{let c=null;if(t.mtime&&!this.noMtime){let u=t.atime||new Date,l=t.mtime;try{ht.futimesSync(i,u,l)}catch(d){try{ht.utimesSync(t.absolute,u,l)}catch{c=d}}}if(this[kf](t)){let u=this[Af](t),l=this[Of](t);try{ht.fchownSync(i,u,l)}catch(d){try{ht.chownSync(t.absolute,u,l)}catch{c=c||d}}}o(c)})}[p_](t,r){let n=t.mode&4095||this.dmode,o=this[Ys](t.absolute,n);if(o){this[Fr](o,t),r();return}if(t.mtime&&!this.noMtime)try{ht.utimesSync(t.absolute,t.atime||new Date,t.mtime)}catch{}if(this[kf](t))try{ht.chownSync(t.absolute,this[Af](t),this[Of](t))}catch{}r(),t.resume()}[Ys](t,r){try{return YR.sync(Mn(t),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r})}catch(n){return n}}[Cg](t,r,n,o){try{ht[n+"Sync"](r,t.absolute),o(),t.resume()}catch(i){return this[Fr](i,t)}}};Ff.Sync=h_;QR.exports=Ff});var rk=B((Fie,tk)=>{"use strict";var b3=Hu(),_g=g_(),ZR=require("fs"),ek=ol(),JR=require("path"),v_=Ku();tk.exports=(e,t,r)=>{typeof e=="function"?(r=e,t=null,e={}):Array.isArray(e)&&(t=e,e={}),typeof t=="function"&&(r=t,t=null),t?t=Array.from(t):t=[];let n=b3(e);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return t.length&&x3(n,t),n.file&&n.sync?P3(n):n.file?T3(n,r):n.sync?I3(n):D3(n)};var x3=(e,t)=>{let r=new Map(t.map(i=>[v_(i),!0])),n=e.filter,o=(i,s)=>{let a=s||JR.parse(i).root||".",c=i===a?!1:r.has(i)?r.get(i):o(JR.dirname(i),a);return r.set(i,c),c};e.filter=n?(i,s)=>n(i,s)&&o(v_(i)):i=>o(v_(i))},P3=e=>{let t=new _g.Sync(e),r=e.file,n=ZR.statSync(r),o=e.maxReadSize||16*1024*1024;new ek.ReadStreamSync(r,{readSize:o,size:n.size}).pipe(t)},T3=(e,t)=>{let r=new _g(e),n=e.maxReadSize||16*1024*1024,o=e.file,i=new Promise((s,a)=>{r.on("error",a),r.on("close",s),ZR.stat(o,(c,u)=>{if(c)a(c);else{let l=new ek.ReadStream(o,{readSize:n,size:u.size});l.on("error",a),l.pipe(r)}})});return t?i.then(t,t):i},I3=e=>new _g.Sync(e),D3=e=>new _g(e)});var Sg=B(dr=>{"use strict";dr.c=dr.create=$D();dr.r=dr.replace=JC();dr.t=dr.list=lg();dr.u=dr.update=zD();dr.x=dr.extract=rk();dr.Pack=Kh();dr.Unpack=g_();dr.Parse=ug();dr.ReadEntry=kh();dr.WriteEntry=TC();dr.Header=Yu();dr.Pax=Oh();dr.types=uC()});var E_=B((Xie,ck)=>{ck.exports=function(t,r,n){t(r),n&&n(r===!0?null:r)}});var Tg=B((Qie,lk)=>{"use strict";var uk=E_();lk.exports=function(t,r){if(!t)return function(o,i){return o?uk(i,o,r):i(!0)};Array.isArray(t)||(t=Object.keys(t).map(function(o){return t[o]}));var n=0;return function(o,i){if(o)return uk(i,o,r);n>=t.length?i(!0):i(null,t[n++])}}});var fk=B((Jie,dk)=>{"use strict";var O3=Tg();dk.exports=function(e){return O3(Object.keys(e))}});var C_=B((Zie,pk)=>{"use strict";var N3=E_();pk.exports=function(t,r){return function(n,o){if(n)return N3(o,n,r);if(t!=null){var i=t;t=null,o(null,i)}else o(!0)}}});var hk=B((ese,mk)=>{"use strict";mk.exports=function(t){var r=0;return t=t||1/0,function(n,o){if(n)return o&&o(n);if(r>t)return o(!0);o(null,r++)}}});var vk=B((tse,gk)=>{"use strict";gk.exports=function(t){return t=t||Math.random,function(r,n){return r?n&&n(r):n(null,t())}}});var wk=B((rse,yk)=>{"use strict";yk.exports=function(){return function(t,r){r(!0)}}});var Ck=B((nse,Ek)=>{"use strict";Ek.exports=function(t){return function(r,n){n(t)}}});var Sk=B((ose,_k)=>{"use strict";_k.exports={keys:fk(),once:C_(),values:Tg(),count:hk(),infinite:vk(),empty:wk(),error:Ck()}});var ll=B((ise,bk)=>{"use strict";bk.exports=function(t,r){var n,o,i;r||(i=new Error("no done callback supplied"));function s(a){if(n=a,o)return s.abort();(function c(){for(var u=!0,l=!1;u;)if(l=!1,n(null,function(d,f){if(l=!0,d=d||o){if(u=!1,r)r(d===!0?null:d);else if(d&&d!==!0)throw console.warn(i),d}else t&&t(f)===!1||o?(u=!1,n(o||!0,r||function(){})):u||c()}),!l){u=!1;return}})()}return s.abort=function(a,c){if(typeof a=="function"&&(c=a,a=!0),o=a||!0,n)return n(o,c||function(){})},s}});var Pk=B((sse,xk)=>{"use strict";var L3=ll();xk.exports=function(t){return L3(null,t)}});var Ik=B((ase,Tk)=>{"use strict";var F3=ll();Tk.exports=function(t){return F3(function(r){console.log(r)},t)}});var dl=B((cse,Dk)=>{Dk.exports=function(t){return t&&(typeof t=="string"?function(r){return r[t]}:typeof t=="object"&&typeof t.exec=="function"?function(r){var n=t.exec(r);return n&&n[0]}:t)}});var Ak=B((use,kk)=>{"use strict";function Rk(e){return e}var M3=dl(),$3=ll();kk.exports=function(t,r){var n=!1;return r?t=M3(t)||Rk:(r=t,t=Rk),$3(function(o){if(t(o))return n=!0,r(null,o),!1},function(o){n||r(o===!0?null:o,null)})}});var Ig=B((lse,Ok)=>{"use strict";var U3=ll();Ok.exports=function(t,r,n){n||(n=r,r=null);var o=U3(function(i){r=t(r,i)},function(i){n(i,r)});return arguments.length===2?function(i){i(null,function(s,a){if(s)return n(s===!0?null:s);r=a,o(i)})}:o}});var __=B((dse,Nk)=>{"use strict";var j3=Ig();Nk.exports=function(t){return j3(function(r,n){return r.push(n),r},[],t)}});var Fk=B((fse,Lk)=>{"use strict";var H3=__();Lk.exports=function(){return t=>{let r,n,o=new Promise((i,s)=>{r=i,n=s});return H3((i,s)=>{i?n(i):r(s)})(t),o}}});var $k=B((pse,Mk)=>{"use strict";var q3=Ig();Mk.exports=function(t){return q3(function(r,n){return r+n},"",t)}});var jk=B((mse,Uk)=>{"use strict";Uk.exports={drain:ll(),onEnd:Pk(),log:Ik(),find:Ak(),reduce:Ig(),collect:__(),collectAsPromise:Fk(),concat:$k()}});var qk=B((hse,Hk)=>{"use strict";function B3(e){return e}var V3=dl();Hk.exports=function(t){return t?(t=V3(t),function(r){return function(n,o){r(n,function(i,s){try{s=i?null:t(s)}catch(a){return r(a,function(){return o(a)})}o(i,s)})}}):B3}});var Vk=B((gse,Bk)=>{"use strict";function W3(e){return e}var G3=dl();Bk.exports=function(t){if(!t)return W3;t=G3(t);var r=!1,n,o;return function(i){return function s(a,c){if(o)return c(o);a?(o=a,r?i(a,function(u){r?n=c:c(a)}):i(a,function(u){c(a)})):i(null,function(u,l){u?c(u):o?c(o):(r=!0,t(l,function(d,f){r=!1,o?(c(o),n&&n(o)):d?s(d,c):c(null,f)}))})}}}});var S_=B((vse,Wk)=>{var z3=dl();function Y3(e){return e}Wk.exports=function(t){return typeof t=="object"&&typeof t.test=="function"?function(r){return t.test(r)}:z3(t)||Y3}});var Dg=B((yse,Gk)=>{"use strict";var K3=S_();Gk.exports=function(t){return t=K3(t),function(r){return function n(o,i){for(var s,a=!0;a;)a=!1,s=!0,r(o,function(c,u){if(!c&&!t(u))return s?a=!0:n(c,i);i(c,u)}),s=!1}}}});var Yk=B((wse,zk)=>{"use strict";var X3=S_(),Q3=Dg();zk.exports=function(t){return t=X3(t),Q3(function(r){return!t(r)})}});var Xk=B((Ese,Kk)=>{"use strict";Kk.exports=function(t,r){var n=!1;function o(i){n||!r||(n=!0,r(i===!0?null:i))}return function(i){return function(s,a){return s&&o(s),i(s,function(c,u){c?o(c):t&&t(u),a(c,u)})}}}});var Jk=B((Cse,Qk)=>{"use strict";Qk.exports=function(t,r){r=r||{};var n=r.last||!1,o=!1;if(typeof t=="number"){n=!0;var i=t;t=function(){return--i}}return function(s){function a(c){s(!0,function(u){n=!1,c(u||!0)})}return function(c,u){o&&!c?n?a(u):u(o):(o=c)?s(o,u):s(null,function(l,d){(o=o||l)?u(o):t(d)?u(null,d):(o=!0,n?u(null,d):a(u))})}}}});var b_=B((_se,Zk)=>{"use strict";function J3(e){return e}var Z3=dl(),ez=Dg();Zk.exports=function(t,r){t=Z3(t)||J3;var n={};return ez(function(o){var i=t(o);return n[i]?!!r:(n[i]=!0,!r)})}});var tA=B((Sse,eA)=>{"use strict";var tz=b_();eA.exports=function(t){return tz(t,!0)}});var nA=B((bse,rA)=>{"use strict";var rz=Tg(),nz=C_();rA.exports=function(){return function(t){var r;return function(n,o){n?r?r(n,function(a){t(a||n,o)}):t(n,o):r?i():s();function i(){r(null,function(a,c){a?a===!0?s():t(!0,function(u){o(a)}):o(null,c)})}function s(){r=null,t(null,function(a,c){if(a)return o(a);c&&typeof c=="object"?c=rz(c):typeof c!="function"&&(c=nz(c)),r=c,i()})}}}}});var iA=B((xse,oA)=>{"use strict";oA.exports={map:qk(),asyncMap:Vk(),filter:Dg(),filterNot:Yk(),through:Xk(),take:Jk(),unique:b_(),nonUnique:tA(),flatten:nA()}});var x_=B((Pse,sA)=>{"use strict";sA.exports=function e(t){var r=arguments.length;if(typeof t=="function"&&t.length===1){for(var n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return function(a){if(n==null)throw new TypeError("partial sink should only be called once!");var c=n;switch(n=null,r){case 1:return e(a,c[0]);case 2:return e(a,c[0],c[1]);case 3:return e(a,c[0],c[1],c[2]);case 4:return e(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),e.apply(null,c)}}}var i=t;i&&typeof i.source=="function"&&(i=i.source);for(var o=1;o<r;o++){var s=arguments[o];typeof s=="function"?i=s(i):s&&typeof s=="object"&&(s.sink(i),i=s.source)}return i}});var Uf=B((yc,lA)=>{"use strict";var aA=Sk(),cA=jk(),uA=iA();yc=lA.exports=x_();yc.pull=yc;for(Uo in aA)yc[Uo]=aA[Uo];var Uo;for(Uo in uA)yc[Uo]=uA[Uo];var Uo;for(Uo in cA)yc[Uo]=cA[Uo];var Uo});var A_=B((Vse,_A)=>{var Bse=_A.exports=function(e){(function t(){var r=!0,n=!1,o=!1;do o=!0,r=!1,e.call(this,function(){o?r=!0:t()}),o=!1;while(r)})()}});var bA=B((Wse,SA)=>{var lz=A_();SA.exports=function(e,t){return function(r){var n=[],o,i;function s(u){n.push(u)}e=e||function(u){this.queue(u)},t=t||function(){this.queue(null)};var a={emit:function(u,l){u=="data"&&s(l),u=="end"&&(o=!0,s(null)),u=="error"&&(i=l)},queue:s},c;return function(u,l){if(o=o||u,u)return r(u,function(){if(c){var d=c;c=null,d(u)}l(u)});c=l,lz(function d(f){if(!!c)if(l=c,i)c=null,l(i);else if(n.length){var p=n.shift();c=null,l(p===null,p)}else r(o,function(m,h){if(m&&m!==!0)return i=m,f();if(o=o||m)t.call(a);else if(h!==null&&(e.call(a,h),i||o))return r(i||o,function(){c=null,l(i||o)});f(d)})})}}}});var PA=B((Gse,xA)=>{xA.exports=function(){var e=[],t=0;function r(){return e.reduce(function(n,o){return n+o.length},0)}return{length:t,data:this,add:function(n){if(!Buffer.isBuffer(n))throw new Error("data must be a buffer, was: "+JSON.stringify(n));return this.length=t=t+n.length,e.push(n),this},has:function(n){return n==null?t>0:t>=n},get:function(n){var o;if(n==null||n===t){t=0;var i=e;return e=[],i.length==1?i[0]:Buffer.concat(i)}else if(e.length>1&&n<=(o=e[0].length)){var s=e[0].slice(0,n);return n===o?e.shift():e[0]=e[0].slice(n,o),t-=n,s}else if(n<t){for(var a=[],c=0;c+e[0].length<n;){var u=e.shift();c+=u.length,a.push(u)}return c<n&&(a.push(e[0].slice(0,n-c)),e[0]=e[0].slice(n-c,e[0].length),this.length=t=t-n),Buffer.concat(a)}else throw new Error("could not get "+n+" bytes")}}}});var RA=B((zse,DA)=>{"use strict";var dz=PA();function fz(e){return Number.isFinite(e)}function TA(e){return typeof e=="function"}function IA(e,t){return t?function(r,n){var o=setTimeout(function(){e(new Error("pull-reader: read exceeded timeout"),n)},t);e(r,function(i,s){clearTimeout(o),n(i,s)})}:e}DA.exports=function(e){var t=[],r,n,o=!1,i=dz(),s,a,c;function u(){for(;t.length;)if(t[0].length==null&&i.has(1))t.shift().cb(null,i.get());else if(i.has(t[0].length)){var f=t.shift();f.cb(null,i.get(f.length))}else if(s==!0&&t[0].length&&i.length<t[0].length){var p="stream ended with:"+i.length+" but wanted:"+t[0].length;t.shift().cb(new Error(p))}else if(s)t.shift().cb(s);else return!!t.length;return t.length||!i.has(1)||c}function l(){var f=u();f&&!o&&r&&!o&&!a&&(o=!0,n(null,function(p,m){if(o=!1,p)return s=p,u();i.add(m),l()}))}function d(f){if(c){for(;t.length;)t.shift().cb(c);return cb&&cb(c)}n=IA(f,e),r=f,l()}return d.abort=function(f,p){c=f||!0,r?(o=!0,r(c,function(){for(;t.length;)t.shift().cb(c);p&&p(c)})):p()},d.read=function(f,p,m){if(TA(p)&&(m=p,p=e),TA(m))t.push({length:fz(f)?f:null,cb:m}),l();else return a=!0,function(h,g){if(o||i.has(1)){if(h)return r(h,g);t.push({length:null,cb:g}),l()}else IA(r,p)(h,function(v,w){g(v,w)})}},d}});var qA=B((wc,HA)=>{var pz=bA(),mz=RA(),kA=_h(),AA=0,OA=1,NA=2,LA="GOODBYE";function FA(e){let t=Buffer.alloc(9),r=0,n=e.value!==void 0?e.value:e.end;return typeof e=="string"&&e===LA?(t.fill(0),[t,null]):(typeof n=="string"?(r=OA,n=Buffer.from(n,"utf-8")):Buffer.isBuffer(n)?r=AA:(r=NA,n=Buffer.from(JSON.stringify(n),"utf-8")),r=e.stream<<3|e.end<<2|r,t[0]=r,t.writeUInt32BE(n.length,1),t.writeInt32BE(e.req||0,5),[t,n])}function MA(e){if(e.length!==9)throw new Error("expected header to be 9 bytes long");let t=e[0],r=e.readUInt32BE(1);return{req:e.readInt32BE(5),stream:!!(t&8),end:!!(t&4),value:null,length:r,type:t&3}}function $A(e,t){if(e.length!==t.length)throw new Error("incorrect length, expected:"+t.length+" found:"+e.length);if(t.type===AA)t.value=e;else if(t.type===OA)t.value=e.toString();else if(t.type===NA)t.value=JSON.parse(e.toString());else throw new Error("unknown message type");return t}function UA(e){return pz(function(r){e&&e("encoded: %o",r);let[n,o]=FA(r);this.queue(n),o!==null&&this.queue(o)})}function jA(e){let t=mz(),r=!1;return function(o){return t(o),function(s,a){if(r)return a(!0);if(s)return t.abort(s,a);t.read(9,function(u,l){if(u)return a(u);let d=MA(l);if(d.length===0)return r=!0,a(null,LA);t.read(d.length,function(p,m){if(p)return a(p);try{$A(m,d)}catch(h){return a(h)}e&&e("decoded: %o",d),a(null,d)})})}}}wc=HA.exports=function(t,r){let n=r===!0?kA("packet-stream-codec"):typeof r=="string"?kA(r):null;return{source:UA(n)(t.source),sink(o){return t.sink(jA(n)(o))}}};wc.encodePair=FA;wc.decodeHead=MA;wc.decodeBody=$A;wc.encode=UA;wc.decode=jA});var O_=B((Yse,BA)=>{function hz(e){return e&&(e===!0?!0:{message:e.message,name:e.name,stack:e.stack})}function gz(e){console.error("packet-stream asked to read after closed",e)}BA.exports={flat:hz,closedread:gz}});var GA=B((Kse,WA)=>{var{flat:VA,closedread:vz}=O_();function kg(e,t,r){this.id=e,this.read=null,this.writeEnd=null,this.readEnd=null,this._ps=t,this._remove=r}kg.prototype.write=function(e,t){let r=this._ps;t?(this.writeEnd=t,r&&(r.read({req:this.id,stream:!0,end:!0,value:VA(t)}),this.readEnd&&this.destroy(t),r._maybedone(t))):r&&r.read({req:this.id,stream:!0,end:!1,value:e})};kg.prototype.end=function(e){this.write(null,VA(e||!0))};kg.prototype.destroy=function(e){if(this.writeEnd){if(!this.readEnd){this.readEnd=!0;try{this.read&&this.read(null,e)}catch(t){console.error("Exception thrown by PacketStream substream end handler",t),console.error(t.stack)}}}else{if(this.writeEnd=!0,!this.readEnd){this.readEnd=!0;try{this.read(null,e)}catch(t){console.error("Exception thrown by PacketStream substream end handler",t),console.error(t.stack)}}this.write(null,e)}this._ps&&(this._remove(),this._remove=null,this.read=vz,this._ps=null)};WA.exports=kg});var KA=B((Xse,YA)=>{var zA=GA(),{flat:N_,closedread:yz}=O_();function mo(e){this.ended=!1,this.opts=e,this._req_counter=1,this._requests=new Map,this._instreams=new Map,this._outstreams=new Map,this._closecbs=[],this._closing=!1,this._closed=!1,e.close&&this._closecbs.push(e.close)}mo.prototype.message=function(e){this.read({req:0,stream:!1,end:!1,value:e})};mo.prototype.request=function(e,t){if(this._closing)return t(new Error("parent stream is closing"));let r=this._req_counter++;this._requests.set(r,(n,o)=>{this._requests.delete(r),t(n,o),this._maybedone(n)}),this.read({req:r,stream:!1,end:!1,value:e})};mo.prototype.stream=function(){if(this._closing)throw new Error("parent stream is closing");let e=this._req_counter++,t=new zA(e,this,()=>{this._outstreams.delete(e)});return this._outstreams.set(e,t),t};mo.prototype.close=function(e){if(!e)throw new Error("packet-stream.close *must* have callback");if(this._closed)return e();this._closecbs.push(e),this._closing=!0,this._maybedone()};mo.prototype.destroy=function(e){e=e||N_(e),this.ended=e,this._closing=!0;let t=e===!0?new Error("unexpected end of parent stream"):e,r=0;this._requests.forEach(n=>{r++,n(t)}),this._instreams.forEach(n=>{r++,n.writeEnd=!0,n.destroy(t)}),this._outstreams.forEach(n=>{r++,n.writeEnd=!0,n.destroy(t)}),r===0&&e===!0&&(t=null),this._maybedone(t)};mo.prototype._maybedone=function(e){this._closed||!this._closing||this._requests.size!==0||this._instreams.size!==0||this._outstreams.size!==0||(this.read(null,e||!0),this._closed=!0,this._closecbs.forEach(t=>{t(e)}),this.opts=null,this._closecbs.length=0,this.read=yz,this._requests.clear(),this._instreams.clear(),this._outstreams.clear())};mo.prototype.read=function(e){console.error("please overwrite read method to do IO",e)};mo.prototype.write=function(e,t){this.ended||(t?this.destroy(t):e.req&&!e.stream?this._onrequest(e):e.req&&e.stream?this._onstream(e):this._onmessage(e))};mo.prototype._onmessage=function(e){this.opts&&typeof this.opts.message=="function"&&this.opts.message(e.value)};mo.prototype._onrequest=function(e){let t=e.req*-1;if(e.req<0)this._requests.has(t)&&this._requests.get(t)(e.end?e.value:null,e.end?null:e.value);else if(this.opts&&typeof this.opts.request=="function"){let r=!1;this.opts.request(e.value,(n,o)=>{if(r)throw new Error("cb called twice from local api");r=!0,n?this.read({value:N_(n),end:!0,req:t}):this.read({value:o,end:!1,req:t}),this._maybedone()})}else{if(this.ended){let r=this.ended===!0?new Error("unexpected end of parent stream"):this.ended;this.read({value:N_(r),end:!0,stream:!1,req:t})}else this.read({value:{message:"Unable to handle requests",name:"NO_REQUEST_HANDLER",stack:null},end:!0,stream:!1,req:t});this._maybedone()}};mo.prototype._onstream=function(e){if(e.req<0){let t=e.req*-1,r=this._outstreams.get(t);if(!r)return console.error("no stream for incoming msg",e);e.end?(r.writeEnd&&this._outstreams.delete(t),r.readEnd=!0,r.read(null,e.value),this._maybedone()):r.read(e.value)}else{let t=e.req,r=this._instreams.get(t);r||(r=new zA(t*-1,this,()=>{this._instreams.delete(t)}),this._instreams.set(t,r),this.opts&&typeof this.opts.stream=="function"&&this.opts.stream(r)),e.end?(r.writeEnd&&this._instreams.delete(t),r.readEnd=!0,r.read&&r.read(null,e.value),this._maybedone()):r.read?r.read(e.value):console.error("no .read for stream:",r.id,"dropped:",e)}};YA.exports=e=>new mo(e)});var QA=B((Qse,qf)=>{"use strict";var wz=Uf();function Ez(e){let t=!1;return(r,n)=>{t||(t=!0,e(r,n))}}function L_(e,t){let r=[],n=!1,o=!1,i,s,a=Ez((c,u)=>{t&&t(c,u),e=null,t=null,i=null,s&&s(c||!0,()=>{})});return e.read=function(c,u){if(n=n||u,i){let l=i;i=null,l(n,c)}else!n&&!o&&r.push(c);n&&a(n!==!0?n:null)},{source(c,u){c?(e&&e.write(null,c),u(c),r.length=0,o=!0,a(c!==!0?c:null)):r.length?u(null,r.shift()):n?u(n):i=u},sink(c){if(n)return s=null,c(n,()=>{});s=c,wz.drain(u=>{if(n)return!1;e.write(u)},u=>{e&&!e.writeEnd&&e.write(null,u||!0),a&&a(u)})(c)}}}function XA(e,t){return L_(e,r=>{e.writeEnd||e.write(null,r||!0),t&&t(r)})}function Cz(e){return XA(e).source}function _z(e,t){return XA(e,t).sink}qf.exports=L_;qf.exports.source=Cz;qf.exports.sink=_z;qf.exports.duplex=L_});var ZA=B((Jse,JA)=>{JA.exports=function(t){var r,n,o;function i(s){return function(a,c){s(a,function(u,l){if(u&&!o)return o=!0,c(null,t);u&&r?c(u):u?n=c:c(null,l)})}}return i.end=function(){return r=!0,n&&n(r),i},i}});var tO=B((Zse,eO)=>{var Sz=ZA(),F_=Uf();eO.exports=function(e,t){t=t||"GOODBYE";var r=Sz(t);return{source:F_(e.source,r),sink:F_(F_.filter(function(n){if(n!==t)return!0;r.end()}),e.sink)}}});var Bf=B(jo=>{"use strict";var Ag=Uf();function bz(e){return e?Object.keys(e).length===0:!0}jo.set=function(t,r,n){let o,i;for(let s=0;s<r.length;s++){let a=r[s];t[a]=t[a]||{},o=t,i=a,t=t[a]}o[i]=n};jo.get=function(t,r){if(typeof r=="string")return t[r];let n;for(let o=0;o<r.length;o++){let i=r[o];if(n=t=t[i],t==null)return t}return n};jo.prefix=function(t,r){let n;for(let o=0;o<r.length;o++){let i=r[o];if(n=t=t[i],typeof t!="object")return t}return typeof n!="object"?!!n:!1};function xz(e,t){for(let r in t){let n=t[r];e[n]||(e[n]={}),e=e[n]}return e}function Pz(e,t){(function r(n,o){let i=t[o];if(n)t.length-1===o?delete n[i]:o<t.length&&r(n[i],o+1);else return;bz(n[i])&&delete n[i]})(e,0)}function Tz(e,t){for(let r in t)e[r]=t[r];return e}jo.mount=function(t,r,n){if(!Array.isArray(r))throw new Error("path must be array of strings");return Tz(xz(t,r),n)};jo.unmount=function(t,r){return Pz(t,r)};var Og=e=>e==="source",Ng=e=>e==="sink",M_=e=>e==="duplex",Iz=e=>e==="sync",Dz=e=>e==="async",rO=e=>Iz(e)||Dz(e),Rz=e=>Og(e)||Ng(e)||M_(e);jo.isRequest=rO;jo.isStream=Rz;function $_(e){return function(t){t(e||!0,()=>{})}}function nO(e){return{source:Ag.error(e),sink:$_(e)}}jo.errorAsStream=function(t,r){return Og(t)?Ag.error(r):Ng(t)?$_(r):nO(r)};jo.errorAsStreamOrCb=function(t,r,n){return rO(t)?n(r):M_(t)?nO(r):Og(t)?Ag.error(r):Ng(t)?$_(r):n(r)};jo.pipeToStream=function(t,r,n){Og(t)?r(n):Ng(t)?n(r):M_(t)&&Ag(r,n,r)}});var U_=B((tae,oO)=>{"use strict";function kz(e){return typeof e=="string"?[`Error: ${e}`]:e.stack?e.stack.split(`
`):[`${e.name}: ${e.message}`]}oO.exports=function(t,r){let n=new Error(r),o=n.stack.split(`
`);o.splice(1,1);let i=kz(t);i[0]="  "+i[0];for(let s=1;s<o.length;s++)if(i.includes(o[s])){o.splice(s);break}return n.stack=o.concat(i).join(`
`),n}});var cO=B((rae,aO)=>{"use strict";var Az=KA(),j_=QA(),Oz=tO(),ml=Bf(),iO=U_(),sO=_h()("muxrpc:psc");aO.exports=function(t,r,n){let o=Az({message(){},request(s,a){if(!Array.isArray(s.args))return a(new Error(`invalid request, args should be array, was: ${JSON.stringify(s)}`));let c=s.name,u=s.args,l=!1,d=!1;u.push((f,p)=>{d=!0,l=!0,a(f,p)});try{t("async",c,u)}catch(f){if(l||d)throw iO(f,"no callback provided to muxrpc async funtion");a(f)}},stream(s){s.read=function(c,u){if(u)return s.write(null,u);let{name:l,type:d,args:f}=c,p,m;if(s.read=null,!ml.isStream(d))return s.write(null,new Error(`unsupported stream type: ${d}`));try{m=t(d,l,f)}catch(v){p=v}let g=j_[d==="source"?"sink":d==="sink"?"source":"duplex"](s);return ml.pipeToStream(d,g,p?ml.errorAsStream(d,p):m)}},close(s){if(o=null,i.ended=!0,!i.closed&&(i.closed=!0,n)){let a=n;n=null,a(s)}}}),i=Oz(j_(o,()=>{}));return i=r?r(i,sO.enabled?sO.namespace:!1):i,i.remoteCall=function(s,a,c,u){if(a==="emit")return o.message(c);if(!(ml.isRequest(s)||ml.isStream(s)))throw new Error(`unsupported type: ${JSON.stringify(s)}`);if(ml.isRequest(s))return o.request({name:a,args:c},u);let l=o.stream(),d=j_[s](l,u);return l.write({name:a,args:c,type:s}),d},i.isOpen=function(){return!o.ended},i.close=function(s,a){if(typeof s=="function"&&(a=s,s=!1),!o){a&&a();return}if(s){o.destroy(s),a&&a();return}return o.close(c=>{if(a)a(c);else if(c)throw iO(c,"no callback provided for muxrpc close")}),this},i.closed=!1,i}});var lO=B((nae,uO)=>{"use strict";var Nz=U_(),Lz=Bf();function H_(e,t,r,n){for(let o in t){let i=t[o],s=r?r.concat(o):[o];if(i&&typeof i=="object"){let a=i;e[o]=H_({},a,s,n)}else{let a=i;e[o]=(...c)=>n(a,s,c)}}return e}function Fz(e){if(e)throw Nz(e,"callback not provided")}function Mz(e,t,r,n){e=e||{};function o(i,s,a){let c=typeof a[a.length-1]=="function"?a.pop():i==="sync"||i==="async"?null:Fz;if(typeof c=="function"){let u;try{u=r(i,s,a,c)}catch(l){return Lz.errorAsStreamOrCb(i,l,c)}return u}else return new Promise((u,l)=>{r(i,s,a,(d,f)=>{d?l(d):u(f)})})}return n?o("async","manifest",[function(i,s){if(i)return n(i);H_(e,s,null,o),n(null,s,e)}]):H_(e,t,null,o),e}uO.exports=Mz});var pO=B((oae,fO)=>{"use strict";var Lg=Bf();function dO(e){return Array.isArray(e)?e:e.split(".")}function $z(e){return e&&typeof e.pre=="function"&&typeof e.test=="function"&&typeof e.post=="function"}fO.exports=function(t){if($z(t))return t;if(typeof t=="function")return{pre:t};let r=null,n={};function o(i){if(i.allow){r={};for(let s of i.allow)Lg.set(r,dO(s),!0)}else r=null;if(i.deny)for(let s of i.deny)Lg.set(n,dO(s),!0);else n={};return this}return t&&o(t),o.pre=i=>{if(i=Array.isArray(i)?i:[i],r&&!Lg.prefix(r,i))return new Error(`method:${i} is not in list of allowed methods`);if(n&&Lg.prefix(n,i))return new Error(`method:${i} is on list of disallowed methods`)},o.post=()=>{},o.test=i=>o.pre(i),o.get=()=>({allow:r,deny:n}),o}});var hO=B((iae,mO)=>{"use strict";var Uz=pO(),q_=Bf();mO.exports=function(t,r,n){n=Uz(n);function o(s,a){return s===q_.get(r,a)}function i(s,a,c){if(a==="emit")throw new Error("emit has been removed");if(s==="async"&&o("sync",a)){let u=c.pop(),l;try{l=q_.get(t,a).apply(this,c)}catch(d){return u(d)}return u(null,l)}if(!o(s,a))throw new Error(`no ${s}:${a}`);return q_.get(t,a).apply(this,c)}return function(a,c,u){let l=n.pre(c,u);if(l)throw l;return i.call(this,a,c,u)}}});var yO=B((sae,vO)=>{"use strict";var jz=qA(),Hz=require("events").EventEmitter,qz=cO(),Bz=lO(),Vz=hO();function gO(e,t,r,n,o,i,s){let a;typeof e=="function"&&(a=e,e={}),t=t||{},e=e||{};let c=new Hz;i||(i=jz);let u,l={_emit(f,p){return c&&c._emit(f,p),l},id:n},d=qz(Vz(r,t,o).bind(l),i,f=>{if(!c.closed&&(c.closed=!0,c.emit("closed"),u)){let p=u;u=null,p(f)}});if(Bz(c,e,(f,p,m,h)=>{if(d.closed)throw new Error("stream is closed");return d.remoteCall(f,p,m,h)},a),c._emit=c.emit,s){Object.__defineGetter__.call(c,"id",()=>l.id),Object.__defineSetter__.call(c,"id",p=>{l.id=p});let f=!0;c.createStream=p=>{if(u=p,f)return f=!1,d;throw new Error("one stream per rpc")}}else c.stream=d;return c.closed=!1,c.close=function(f,p){return d.close(f,p),this},c}vO.exports=function(e,t,r){return arguments.length>3?gO.apply(this,arguments):function(n,o,i){return gO(e,t,n,i,o,r,!0)}}});var B_=B((ts,CO)=>{var aae=x_(),Wz=A_();function wO(e){e.destroy?e.destroy():console.error("warning, stream-to-pull-stream: \nthe wrapped node-stream does not implement `destroy`, \nthis may cause resource leaks.")}function EO(e,t,r){var n,o=!1,i;function s(){i||(i=!0,r&&r(n===!0?null:n))}function a(){o||(o=!0,u(),n?s():e(n=!0,s))}function c(l){u(),n||e(n=l,s)}function u(){t.on("finish",a),t.removeListener("close",a),t.removeListener("error",c)}t.on("close",a),t.on("finish",a),t.on("error",c),process.nextTick(function(){Wz(function(l){e(null,function(d,f){if(n=n||d,d===!0)return t._isStdio?s():t.end();if(n=n||d)return wO(t),s(n);if(t._isStdio)t.write(f,function(){l()});else{var p=t.write(f);p===!1?t.once("drain",l):l()}})})})}function Gz(e){var t=!1,r=!1,n;function o(){var i=e.read();if(i!==null&&n){var s=n;n=null,s(null,i)}}return e.on("readable",function(){r=!0,n&&o()}).on("end",function(){t=!0,n&&n(t)}).on("error",function(i){t=i,n&&n(t)}),function(i,s){n=s,t?s(t):r&&o()}}function Fg(e){var t=[],r=[],n,o=!1,i;function s(){for(;(t.length||n)&&r.length;)r.shift()(t.length?null:n,t.shift());!t.length&&o&&(o=!1,e.resume())}return e.on("data",function(a){t.push(a),s(),t.length&&e.pause&&(o=!0,e.pause())}),e.on("end",function(){n=!0,s()}),e.on("close",function(){n=!0,s()}),e.on("error",function(a){n=a,s()}),function(a,c){if(!c)throw new Error("*must* provide cb");if(a){let l=function(){for(;r.length;)r.shift()(a);c(a)};var u=l;if(n)return l();e.once("close",l),wO(e)}else r.push(c),s()}}var zz=Fg,Mg=function(e,t){return function(r){return EO(r,e,t)}},$g=function(e){return Fg(e)};ts=CO.exports=function(e,t){return e.writable&&e.write?e.readable?function(r){return EO(r,e,t),Fg(e)}:Mg(e,t):$g(e)};ts.sink=Mg;ts.source=$g;ts.read=zz;ts.read1=Fg;ts.read2=Gz;ts.duplex=function(e,t){return{source:$g(e),sink:Mg(e,t)}};ts.transform=function(e){return function(t){var r=$g(e);return Mg(e)(t),r}}});var SO=B((cae,Ug)=>{var Yz=require("stream");Ug.exports=V_;Ug.exports.source=function(e){return V_(null,e)};Ug.exports.sink=function(e){return V_(e,null)};var _O=typeof setImmediate>"u"?process.nextTick:setImmediate;function V_(e,t){e&&typeof e=="object"&&(t=e.source,e=e.sink);var r=[],n=[],o,i,s=new Yz;s.writable=s.readable=!0,s.write=function(g){return r.length?r.shift()(null,g):n.push(g),r.length||(i=!0),!!r.length},s.end=function(){t?n.length?h():t(o=!0,r.length?r.shift():function(){}):r.length&&r.shift()(!0)},s.source=function(g,v){n.length?(v(null,n.shift()),n.length||s.emit("drain")):((o=o||g)?v(o):r.push(v),i&&(i=!1,s.emit("drain")))};var a;e&&(a=e(s.source)),a&&!t&&(t=a);var c=[],u=[],l=!1,d=!1,f=!1;if(s.sink=function(g){t=g,_O(h)},t){s.sink(t),s.paused=!0;var p=s.on.bind(s);s.on=(g,v)=>{var w=p(g,v);return g==="data"&&s.paused&&_O(s.resume.bind(s)),w};var m=s.pipe.bind(s);s.pipe=function(g,v){var w=m(g,v);return s.paused&&s.resume(),w}}function h(){if(d=!1,!(!t||f)){for(;c.length&&!s.paused;)s.emit("data",c.shift());if(!s.paused){if(l)return s.emit("end");f=!0,t(null,function g(v,w){f=!1,s.paused?(v===!0?l=v:v?s.emit("error",v):c.push(w),d=!0):v&&(o=v)!==!0?s.emit("error",v):(o=o||v)?s.emit("end"):(s.emit("data",w),f=!0,t(null,g))})}}}return s.pause=function(){return s.paused=!0,s},s.resume=function(){return s.paused=!1,h(),s},s.destroy=function(){!o&&t&&t(o=!0,function(){}),o=!0,r.length&&r.shift()(!0),s.emit("close")},s}});var xO=B((uae,bO)=>{bO.exports=Kz;function Kz(e,t){typeof e=="function"&&(t=e,e=!1);var r=[],n,o;function i(d,f){d&&(n=d,o&&l(n)),o=f,u()}var s;function a(d){s=s||d||!0,u()}function c(d){if(!s){if(o){l(n,d);return}r.push(d)}}if(e)return{push:c,end:a,source:i,buffer:r};return i.push=c,i.end=a,i.buffer=r,i;function u(){!o||(n?l(n):!r.length&&s?l(s):r.length&&l(null,r.shift()))}function l(d,f){var p=o;if(d&&t){var m=t;t=null,m(d===!0?null:d)}o=null,p(d,f)}}});var fS=B((zce,tN)=>{"use strict";var ZO=require("child_process"),bY=1024*1024,eN={exec(e,t){ZO.exec(e,{maxBuffer:2*bY,windowsHide:!0},t)},spawn(e,t,r){return ZO.spawn(e,t,r)},stripLine(e,t){let r=0;for(;t-- >0;){let n=e.indexOf(`
`,r);n>=0&&(r=n+1)}return r>0?e.substring(r):e},split(e,t){let r=e.trim().split(/\s+/);return r.length>t&&(r[t-1]=r.slice(t-1).join(" ")),r},extractColumns(e,t,r){let n=e.split(/(\r\n|\n|\r)/),o=[];return r||(r=Math.max.apply(null,t)+1),n.forEach(i=>{let s=eN.split(i,r),a=[];t.forEach(c=>{a.push(s[c]||"")}),o.push(a)}),o},parseTable(e){let t=e.split(/(\r\n\r\n|\r\n\n|\n\r\n)|\n\n/).filter(r=>r.trim().length>0).map(r=>r.split(/(\r\n|\n|\r)/).filter(n=>n.trim().length>0));return t.forEach(r=>{for(let n=0;r[n];){let o=r[n];o.startsWith(" ")?(r[n-1]+=o.trimLeft(),r.splice(n,1)):n+=1}}),t.map(r=>{let n={};return r.forEach(o=>{let i=o.indexOf(":"),s=o.slice(0,i).trim();n[s]=o.slice(i+1).trim()}),n})}};tN.exports=eN});var nN=B((Yce,rN)=>{"use strict";var xY=require("os"),tv=require("fs"),vo=fS(),PY=e=>new Promise((t,r)=>{tv.existsSync(e)?t():tv.mkdir(e,n=>{n?r(n):t()})}),pS={darwin(e){return new Promise((t,r)=>{vo.exec("netstat -anv -p TCP && netstat -anv -p UDP",function(n,o,i){if(n)r(n);else{if(n=i.toString().trim(),n){r(n);return}let s=vo.stripLine(o.toString(),2),a=vo.extractColumns(s,[0,3,8],10).filter(c=>!!String(c[0]).match(/^(udp|tcp)/)).find(c=>{let u=String(c[1]).match(/\.(\d+)$/);if(u&&u[1]===String(e))return!0});a&&a[2].length?t(parseInt(a[2],10)):r(new Error(`pid of port (${e}) not found`))}})})},freebsd:"darwin",sunos:"darwin",linux(e){return new Promise((t,r)=>{let n="netstat -tunlp";vo.exec(n,function(o,i,s){if(o)r(o);else{let a=s.toString().trim();a&&console.warn(a);let c=vo.stripLine(i.toString(),2),u=vo.extractColumns(c,[3,6],7).find(l=>{let d=String(l[0]).match(/:(\d+)$/);if(d&&d[1]===String(e))return!0});if(u&&u[1]){let l=u[1].split("/",1)[0];l.length?t(parseInt(l,10)):r(new Error(`pid of port (${e}) not found`))}else r(new Error(`pid of port (${e}) not found`))}})})},win32(e){return new Promise((t,r)=>{vo.exec("netstat -ano",function(n,o,i){if(n)r(n);else{if(n=i.toString().trim(),n){r(n);return}let s=vo.stripLine(o.toString(),4),a=vo.extractColumns(s,[1,4],5).find(c=>{let u=String(c[0]).match(/:(\d+)$/);if(u&&u[1]===String(e))return!0});a&&a[1].length&&parseInt(a[1],10)>0?t(parseInt(a[1],10)):r(new Error(`pid of port (${e}) not found`))}})})},android(e){return new Promise((t,r)=>{let n=xY.tmpdir()+"/.find-process",o=n+"/"+process.pid,i='netstat -tunp >> "'+o+'"';PY(n).then(()=>{vo.exec(i,()=>{tv.readFile(o,"utf8",(s,a)=>{if(tv.unlink(o,()=>{}),s)r(s);else{a=vo.stripLine(a,2);let c=vo.extractColumns(a,[3,6],7).find(u=>{let l=String(u[0]).match(/:(\d+)$/);if(l&&l[1]===String(e))return!0});if(c&&c[1]){let u=c[1].split("/",1)[0];u.length?t(parseInt(u,10)):r(new Error(`pid of port (${e}) not found`))}else r(new Error(`pid of port (${e}) not found`))}})})})})}};function TY(e){let t=process.platform;return new Promise((r,n)=>{if(!(t in pS))return n(new Error(`platform ${t} is unsupported`));let o=pS[t];typeof o=="string"&&(o=pS[o]),o(e).then(r,n)})}rN.exports=TY});var aN=B((Kce,sN)=>{"use strict";var rv=require("path"),Qs=fS();function mS(e,t){return t?e&&e.match?e.match(t):!1:!0}function oN(e){let t=e.split(rv.sep),r=t[t.length-1];r&&(t[t.length-1]=r.split(" ")[0]);let n=[];for(let o of t){let i=o.indexOf(" -");if(i>=0){n.push(o.substring(0,i).trim());break}else if(o.endsWith(" ")){n.push(o.trim());break}n.push(o)}return n.join(rv.sep)}function iN(e){if(process.platform==="darwin"){let t=e.indexOf(".app/");if(t>=0)return rv.basename(e.substring(0,t))}return rv.basename(e)}var hS={darwin(e){return new Promise((t,r)=>{let n;"pid"in e?n=`ps -p ${e.pid} -ww -o pid,ppid,uid,gid,args`:n="ps ax -ww -o pid,ppid,uid,gid,args",Qs.exec(n,function(o,i,s){if(o)"pid"in e?t([]):r(o);else{if(o=s.toString().trim(),o){r(o);return}let a=Qs.stripLine(i.toString(),1),u=Qs.extractColumns(a,[0,1,2,3,4],5).filter(l=>l[0]&&e.pid?l[0]===String(e.pid):l[4]&&e.name?mS(l[4],e.name):!!l[0]).map(l=>{let d=String(l[4]),f=oN(d);return{pid:parseInt(l[0],10),ppid:parseInt(l[1],10),uid:parseInt(l[2],10),gid:parseInt(l[3],10),name:iN(f),bin:f,cmd:l[4]}});e.strict&&e.name&&(u=u.filter(l=>l.name===e.name)),t(u)}})})},linux:"darwin",sunos:"darwin",freebsd:"darwin",win32(e){return new Promise((t,r)=>{let n="Get-CimInstance -className win32_process | select Name,ProcessId,ParentProcessId,CommandLine,ExecutablePath",o=[],i=Qs.spawn("powershell.exe",["/c",n],{detached:!1,windowsHide:!0});i.stdout.on("data",s=>{o.push(s.toString())}),i.on("close",s=>{if(s!==0)return r(new Error("Command '"+n+"' terminated with code: "+s));let a=Qs.parseTable(o.join("")).filter(c=>{if("pid"in e)return c.ProcessId===String(e.pid);if(e.name){let u=c.Name||"";return e.strict?u===e.name||u.endsWith(".exe")&&u.slice(0,-4)===e.name:mS(c.CommandLine||u,e.name)}else return!0}).map(c=>({pid:parseInt(c.ProcessId,10),ppid:parseInt(c.ParentProcessId,10),bin:c.ExecutablePath,name:c.Name||"",cmd:c.CommandLine}));t(a)})})},android(e){return new Promise((t,r)=>{let n="ps";Qs.exec(n,function(o,i,s){if(o)"pid"in e?t([]):r(o);else{if(o=s.toString().trim(),o){r(o);return}let a=Qs.stripLine(i.toString(),1),u=Qs.extractColumns(a,[0,3],4).filter(l=>l[0]&&e.pid?l[0]===String(e.pid):l[1]&&e.name?mS(l[1],e.name):!!l[0]).map(l=>{let d=String(l[1]),f=oN(d);return{pid:parseInt(l[0],10),name:iN(f),bin:f,cmd:d}});e.strict&&e.name&&(u=u.filter(l=>l.name===e.name)),t(u)}})})}};function IY(e){let t=process.platform;return new Promise((r,n)=>{if(!(t in hS))return n(new Error(`platform ${t} is unsupported`));let o=hS[t];typeof o=="string"&&(o=hS[o]),o(e).then(r,n)})}sN.exports=IY});var lN=B((Xce,uN)=>{"use strict";var DY=nN(),cN=aN(),gS={port(e,t){return DY(e,t).then(r=>gS.pid(r,t),()=>[])},pid(e,t){return cN({pid:e,strict:t})},name(e,t){return cN({name:e,strict:t})}};function RY(e,t,r){return new Promise((n,o)=>{if(!(e in gS))o(new Error(`do not support find by "${e}"`));else{let i=/^\d+$/.test(t);e==="pid"&&!i?o(new Error("pid must be a number")):e==="port"&&!i?o(new Error("port must be a number")):gS[e](t,r).then(n,o)}})}uN.exports=RY});var fN=B((Qce,dN)=>{"use strict";dN.exports=lN()});var bo,rr,nr,or,bp,Vn,Gl,zl,Gv,Yl,Wn,zv=Ne(()=>{bo="function",rr="object",nr="undefined",or="prototype",bp="hasOwnProperty",Vn=Object,Gl=Vn[or],zl=Vn.assign,Gv=Vn.create,Yl=Vn.defineProperty,Wn=Gl[bp]});function Go(e){e===void 0&&(e=!0);var t=e===!1?null:$F;return t||(typeof globalThis!==nr&&(t=globalThis),!t&&typeof self!==nr&&(t=self),!t&&typeof window!==nr&&(t=window),!t&&typeof global!==nr&&(t=global),$F=t),t}function Kl(e){throw new TypeError(e)}function Li(e){var t=Gv;if(t)return t(e);if(e==null)return{};var r=typeof e;r!==rr&&r!==bo&&Kl("Object prototype may only be an Object:"+e);function n(){}return n[or]=e,new n}var $F,Eb=Ne(()=>{zv();$F=null});function zo(e,t){typeof t!==bo&&t!==null&&Kl("Class extends value "+String(t)+" is not a constructor or null"),Cb(e,t);function r(){this.constructor=e}e[or]=t===null?Li(t):(r[or]=t[or],new r)}function Kv(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e}var Upe,jpe,S9,Yv,Cb,UF=Ne(()=>{zv();Eb();Upe=(Go()||{}).Symbol,jpe=(Go()||{}).Reflect,S9=function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Gl[bp].call(t,o)&&(e[o]=t[o])}return e},Yv=zl||S9,Cb=function(e,t){return Cb=Vn.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n[bp](o)&&(r[o]=n[o])},Cb(e,t)}});var jF=Ne(()=>{});var hn=Ne(()=>{zv();Eb();UF();jF()});var _b,HF=Ne(()=>{"use strict";_b=100});var Yo,Tr,xp,Ko,tt,Gn,Fi,Xv,gn,Le,kc,It,Qv,Ac,Oc,Sb,Pp,Nc,Xl,Tp,us,zn,Ql,la,Xo,Jl,Lc,Yn,xo,da,ls,Jv,fa,Qo,Zl,pa,Ip,ma,Zv,ed,Jo,bb,xb,ey,ir,vn,Dp,Fc,Rp,Mc,Zo,ty,$c,td,ha,kp,Xt=Ne(()=>{Yo="initialize",Tr="name",xp="getNotifyMgr",Ko="identifier",tt="push",Gn="isInitialized",Fi="config",Xv="instrumentationKey",gn="logger",Le="length",kc="time",It="processNext",Qv="getProcessTelContext",Ac="addNotificationListener",Oc="removeNotificationListener",Sb="stopPollingInternalLogs",Pp="onComplete",Nc="getPlugin",Xl="flush",Tp="_extensions",us="splice",zn="teardown",Ql="messageId",la="message",Xo="isAsync",Jl="_doTeardown",Lc="update",Yn="getNext",xo="diagLog",da="setNextPlugin",ls="createNew",Jv="cookieCfg",fa="indexOf",Qo="substring",Zl="userAgent",pa="split",Ip="setEnabled",ma="substr",Zv="nodeType",ed="apply",Jo="replace",bb="enableDebugExceptions",xb="logInternalMessage",ey="toLowerCase",ir="call",vn="type",Dp="handler",Fc="listeners",Rp="isChildEvt",Mc="getCtx",Zo="setCtx",ty="complete",$c="traceId",td="spanId",ha="traceFlags",kp="version"});var We,Pb,Ht,Tb,Ap,rd,qF,yn,Po,nd,ga,od,va,ry,Op,Uc,Er=Ne(()=>{We="",Pb="channels",Ht="core",Tb="createPerfMgr",Ap="disabled",rd="extensionConfig",qF="extensions",yn="processTelemetry",Po="priority",nd="eventsSent",ga="eventsDiscarded",od="eventsSendRequest",va="perfEvent",ry="errorToConsole",Op="warnToConsole",Uc="getPerfMgr"});function F9(e){if(e){if(oy)return oy(e);var t=e[b9]||e[or]||e[ny];if(t)return t}return null}function id(e,t){return typeof e===t}function gt(e){return e===void 0||typeof e===nr}function Xe(e){return e===null||gt(e)}function Ob(e){return!Xe(e)}function ds(e,t){return!!(e&&Wn[ir](e,t))}function Ir(e){return!!(e&&typeof e===rr)}function it(e){return!!(e&&typeof e===bo)}function jc(e){var t=e;return t&&qt(t)&&(t=t[Jo](O9,function(r,n){return n.toUpperCase()}),t=t[Jo](N9,"_"),t=t[Jo](L9,function(r,n){return"_"+n})),t}function Dt(e,t){if(e)for(var r in e)Wn[ir](e,r)&&t[ir](e,r,e[r])}function Hc(e,t){var r=!1;return e&&t&&!(r=e===t)&&(r=T9?e[QF](t):M9(e,t)),r}function M9(e,t){var r=!1,n=t?t[Le]:0,o=e?e[Le]:0;if(n&&o&&o>=n&&!(r=e===t)){for(var i=o-1,s=n-1;s>=0;s--){if(e[i]!=t[s])return!1;i--}r=!0}return r}function sd(e,t){var r=!1;return e&&t&&!(r=e===t)&&(r=I9?e[JF](t):$9(e,t)),r}function $9(e,t){var r=!1,n=t?t[Le]:0;if(e&&n&&e[Le]>=n&&!(r=e===t)){for(var o=0;o<n;o++)if(e[o]!==t[o])return!1;r=!0}return r}function Qt(e,t){return e&&t?e[fa](t)!==-1:!1}function ad(e){return!!(e&&Ab[ir](e)==="[object Date]")}function U9(e){return!!(e&&Ab[ir](e)==="[object Array]")}function qc(e){return!!(e&&Ab[ir](e)==="[object Error]")}function qt(e){return typeof e=="string"}function wn(e){return typeof e=="number"}function fs(e){return typeof e=="boolean"}function YF(e){var t=!1;if(e&&typeof e=="object"){var r=oy?oy(e):F9(e);r?(r[ny]&&Wn[ir](r,ny)&&(r=r[ny]),t=typeof r===bo&&e1[ir](r)===A9):t=!0}return t}function To(e){if(e)return R9?e[XF]():j9(e)}function j9(e){if(e&&e.getUTCFullYear){var t=function(r){var n=String(r);return n[Le]===1&&(n="0"+n),n};return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}function we(e,t,r){var n=e[Le];try{for(var o=0;o<n&&!(o in e&&t[ir](r||e,e[o],o,e)===-1);o++);}catch{}}function pr(e,t,r){if(e){if(e[BF])return e[BF](t,r);var n=e[Le],o=r||0;try{for(var i=Math.max(o>=0?o:n-Math.abs(o),0);i<n;i++)if(i in e&&e[i]===t)return i}catch{}}return-1}function Bc(e,t,r){var n;if(e){if(e[VF])return e[VF](t,r);var o=e[Le],i=r||e;n=new Array(o);try{for(var s=0;s<o;s++)s in e&&(n[s]=t[ir](i,e[s],e))}catch{}}return n}function Vc(e,t,r){var n;if(e){if(e[WF])return e[WF](t,r);var o=e[Le],i=0;if(arguments[Le]>=3)n=arguments[2];else{for(;i<o&&!(i in e);)i++;n=e[i++]}for(;i<o;)i in e&&(n=t(n,e[i],i,e)),i++}return n}function Rt(e){return e&&(e=P9&&e[Db]?e[Db]():e[Jo]?e[Jo](/^\s+|(?=\s)\s+$/g,We):e),e}function Xr(e){var t=typeof e;if(t!==bo&&(t!==rr||e===null)&&Kl("objKeys called on non-object"),!KF&&zF)return zF(e);var r=[];for(var n in e)e&&Wn[ir](e,n)&&r[tt](n);if(KF)for(var o=Ib[Le],i=0;i<o;i++)e&&Wn[ir](e,Ib[i])&&r[tt](Ib[i]);return r}function Kn(e,t,r,n){if(GF)try{var o={enumerable:!0,configurable:!0};return r&&(o.get=r),n&&(o.set=n),GF(e,t,o),!0}catch{}return!1}function t1(e){return e}function Nb(e){return Rb&&Dt(e,function(t,r){(Ye(r)||Ir(r))&&Rb(r)}),En(e)}function mr(){var e=Date;return e.now?e.now():new e().getTime()}function Wc(e){return qc(e)?e[Tr]:We}function Cn(e,t,r,n,o){var i=r;return e&&(i=e[t],i!==r&&(!o||o(i))&&(!n||n(r))&&(i=r,e[t]=i)),i}function ya(e,t,r){var n;return e?(n=e[t],!n&&Xe(n)&&(n=gt(r)?{}:r,e[t]=n)):n=gt(r)?{}:r,n}function Io(e,t){return Xe(e)?t:e}function Fb(e){return!e}function cd(e){return!!e}function hr(e){throw new Error(e)}function r1(e,t){var r=null,n=null;return it(e)?r=e:n=e,function(){var o=arguments;if(r&&(n=r()),n)return n[t][ed](n,o)}}function Mb(e,t,r){if(e&&t&&Ir(e)&&Ir(t)){var n=function(i){if(qt(i)){var s=t[i];it(s)?(!r||r(i,!0,t,e))&&(e[i]=r1(t,i)):(!r||r(i,!1,t,e))&&(ds(e,i)&&delete e[i],Kn(e,i,function(){return t[i]},function(a){t[i]=a})||(e[i]=s))}};for(var o in t)n(o)}return e}function wa(e,t,r,n,o){e&&t&&r&&(o!==!1||gt(e[t]))&&(e[t]=r1(r,n))}function Gc(e,t,r,n){return e&&t&&Ir(e)&&Ye(r)&&we(r,function(o){qt(o)&&wa(e,o,t,o,n)}),e}function ps(e){return e&&zl&&(e=Vn(zl({},e))),e}function ud(e,t,r,n,o,i){var s=arguments,a=s[0]||{},c=s[Le],u=!1,l=1;for(c>0&&fs(a)&&(u=a,a=s[l]||{},l++),Ir(a)||(a={});l<c;l++){var d=s[l],f=Ye(d),p=Ir(d);for(var m in d){var h=f&&m in d||p&&Wn[ir](d,m);if(!!h){var g=d[m],v=void 0;if(u&&g&&((v=Ye(g))||YF(g))){var w=a[m];v?Ye(w)||(w=[]):YF(w)||(w={}),g=ud(u,w,g)}g!==void 0&&(a[m]=g)}}}return a}var XF,QF,JF,BF,VF,WF,Db,ZF,b9,ny,GF,Rb,x9,zF,kb,P9,T9,I9,D9,R9,k9,Ab,e1,A9,O9,N9,L9,oy,Ye,KF,Ib,En,Lb,Jt=Ne(()=>{hn();Xt();Er();XF="toISOString",QF="endsWith",JF="startsWith",BF="indexOf",VF="map",WF="reduce",Db="trim",ZF="toString",b9="__proto__",ny="constructor",GF=Yl,Rb=Vn.freeze,x9=Vn.seal,zF=Vn.keys,kb=String[or],P9=kb[Db],T9=kb[QF],I9=kb[JF],D9=Date[or],R9=D9[XF],k9=Array.isArray,Ab=Gl[ZF],e1=Wn[ZF],A9=e1[ir](Vn),O9=/-([a-z])/g,N9=/([^\w\d_$])/g,L9=/^(\d+[\w\d_$])/,oy=Object.getPrototypeOf;Ye=k9||U9;KF=!{toString:null}.propertyIsEnumerable("toString"),Ib=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];En=Rb||t1,Lb=x9||t1});function Qr(e){var t={};return Dt(e,function(r,n){t[r]=n,t[n]=r}),Nb(t)}var iy=Ne(()=>{Jt()});var ei,n1=Ne(()=>{iy();ei=Qr({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5})});function q9(){var e;return typeof globalThis!==ay&&(e=globalThis),!e&&typeof self!==ay&&(e=self),!e&&typeof window!==ay&&(e=window),!e&&typeof global!==ay&&(e=global),e||{}}function hs(e,t){return e&&hy[ms].hasOwnProperty.call(e,t)}function l1(e){return e&&(e===hy[ms]||e===Array[ms])}function Vb(e){return l1(e)||e===Function[ms]}function zc(e){var t;if(e){if(Lp)return Lp(e);var r=e[u1]||e[ms]||(e[ly]?e[ly][ms]:null);t=e[cy]||r,hs(e,cy)||(delete e[$b],t=e[cy]=e[$b]||e[cy],e[$b]=r)}return t}function py(e,t){var r=[];if(s1)r=s1(e);else for(var n in e)typeof n=="string"&&hs(e,n)&&r.push(n);if(r&&r.length>0)for(var o=0;o<r.length;o++)t(r[o])}function Wb(e,t,r){return t!==ly&&typeof e[t]===dy&&(r||hs(e,t))}function my(e){throw new TypeError("DynamicProto: "+e)}function B9(e){var t={};return py(e,function(r){!t[r]&&Wb(e,r,!1)&&(t[r]=e[r])}),t}function Gb(e,t){for(var r=e.length-1;r>=0;r--)if(e[r]===t)return!0;return!1}function V9(e,t,r,n){function o(c,u,l){var d=u[l];if(d[jb]&&n){var f=c[fy]||{};f[Np]!==!1&&(d=(f[u[ld]]||{})[l]||d)}return function(){return d.apply(c,arguments)}}var i={};py(r,function(c){i[c]=o(t,r,c)});for(var s=zc(e),a=[];s&&!Vb(s)&&!Gb(a,s);)py(s,function(c){!i[c]&&Wb(s,c,!Lp)&&(i[c]=o(t,s,c))}),a.push(s),s=zc(s);return i}function W9(e,t,r,n){var o=null;if(e&&hs(r,ld)){var i=e[fy]||{};if(o=(i[r[ld]]||{})[t],o||my("Missing ["+t+"] "+dy),!o[Hb]&&i[Np]!==!1){for(var s=!hs(e,t),a=zc(e),c=[];s&&a&&!Vb(a)&&!Gb(c,a);){var u=a[t];if(u){s=u===n;break}c.push(a),a=zc(a)}try{s&&(e[t]=o),o[Hb]=1}catch{i[Np]=!1}}}return o}function G9(e,t,r){var n=t[e];return n===r&&(n=zc(t)[e]),typeof n!==dy&&my("["+e+"] is not a "+dy),n}function z9(e,t,r,n,o){function i(c,u){var l=function(){var d=W9(this,u,c,l)||G9(u,c,l);return d.apply(this,arguments)};return l[jb]=1,l}if(!l1(e)){var s=r[fy]=r[fy]||{},a=s[t]=s[t]||{};s[Np]!==!1&&(s[Np]=!!o),py(r,function(c){Wb(r,c,!1)&&r[c]!==n[c]&&(a[c]=r[c],delete r[c],(!hs(e,c)||e[c]&&!e[c][jb])&&(e[c]=i(e,c)))})}}function Y9(e,t){if(Lp){for(var r=[],n=zc(t);n&&!Vb(n)&&!Gb(r,n);){if(n===e)return!0;r.push(n),n=zc(n)}return!1}return!0}function Ub(e,t){return hs(e,ms)?e.name||t||o1:((e||{})[ly]||{}).name||t||o1}function lt(e,t,r,n){hs(e,ms)||my("theClass is an invalid class definition.");var o=e[ms];Y9(o,t)||my("["+Ub(e)+"] not in hierarchy of ["+Ub(t)+"]");var i=null;hs(o,ld)?i=o[ld]:(i=H9+Ub(e,"_")+"$"+Bb.n,Bb.n++,o[ld]=i);var s=lt[c1],a=!!s[uy];a&&n&&n[uy]!==void 0&&(a=!!n[uy]);var c=B9(t),u=V9(o,t,c,a);r(t,u);var l=!!Lp&&!!s[qb];l&&n&&(l=!!n[qb]),z9(o,i,t,c,l!==!1)}var sy,ay,ly,ms,dy,fy,jb,ld,H9,Hb,Np,c1,o1,u1,cy,i1,$b,uy,qb,hy,Lp,s1,a1,Bb,Dr=Ne(()=>{ay="undefined",ly="constructor",ms="prototype",dy="function",fy="_dynInstFuncs",jb="_isDynProxy",ld="_dynClass",H9="_dynCls$",Hb="_dynInstChk",Np=Hb,c1="_dfOpts",o1="_unknown_",u1="__proto__",cy="_dyn"+u1,i1="__dynProto$Gbl",$b="_dynInstProto",uy="useBaseInst",qb="setInstFuncs",hy=Object,Lp=hy.getPrototypeOf,s1=hy.getOwnPropertyNames;a1=q9(),Bb=a1[i1]||(a1[i1]={o:(sy={},sy[qb]=!0,sy[uy]=!0,sy),n:1e3});lt[c1]=Bb.o});function h1(e,t){var r=!1;if(e){try{if(r=t in e,!r){var n=e[or];n&&(r=t in n)}}catch{}if(!r)try{var o=new e;r=!gt(o[t])}catch{}}return r}function Jb(e){m1=e}function Bt(e){var t=Go();return t&&t[e]?t[e]:e===d1&&Fp()?window:null}function Fp(){return Boolean(typeof window===rr&&window)}function Mi(){return Fp()?window:Bt(d1)}function gy(){return Boolean(typeof document===rr&&document)}function _n(){return gy()?document:Bt(K9)}function Mp(){return Boolean(typeof navigator===rr&&navigator)}function Xn(){return Mp()?navigator:Bt(Q9)}function vy(){return Boolean(typeof history===rr&&history)}function Zb(){return vy()?history:Bt(J9)}function Yc(e){if(e&&m1){var t=Bt("__mockLocation");if(t)return t}return typeof location===rr&&location?location:Bt(Z9)}function $p(){return typeof console!==nr?console:Bt(e5)}function fd(){return Bt(t5)}function Kc(){return Boolean(typeof JSON===rr&&JSON||Bt(f1)!==null)}function pd(){return Kc()?JSON||Bt(f1):null}function Up(){return Bt(r5)}function jp(){return Bt(n5)}function gs(){var e=Xn();return e&&e.product?e.product===o5:!1}function ti(){var e=Xn();if(e&&(e[Zl]!==Yb||zb===null)){Yb=e[Zl];var t=(Yb||We)[ey]();zb=Qt(t,Xb)||Qt(t,Qb)}return zb}function ex(e){if(e===void 0&&(e=null),!e){var t=Xn()||{};e=t?(t[Zl]||We)[ey]():We}var r=(e||We)[ey]();if(Qt(r,Xb)){var n=_n()||{};return Math.max(parseInt(r[pa](Xb)[1]),n[X9]||0)}else if(Qt(r,Qb)){var o=parseInt(r[pa](Qb)[1]);if(o)return o+4}return null}function Ut(e){var t=Object[or].toString[ir](e),r=We;return t==="[object Error]"?r="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e[Tr]+"'":Kc()&&(r=pd().stringify(e)),t+r}function Ea(){return Kb===null&&(Kb=Mp()&&Boolean(Xn().sendBeacon)),Kb}function md(e){var t=!1;try{t=!!Bt("fetch");var r=Bt("Request");t&&e&&r&&(t=h1(r,"keepalive"))}catch{}return t}function Xc(){return dd===null&&(dd=typeof XDomainRequest!==nr,dd&&hd()&&(dd=dd&&!h1(Bt(p1),"withCredentials"))),dd}function hd(){var e=!1;try{var t=Bt(p1);e=!!t}catch{}return e}function g1(e,t){if(e)for(var r=0;r<e[Le];r++){var n=e[r];if(n[Tr]&&n[Tr]===t)return n}return{}}function tx(e){var t=_n();return t&&e?g1(t.querySelectorAll("meta"),e).content:null}function rx(e){var t,r=fd();if(r){var n=r.getEntriesByType("navigation")||[];t=g1((n[Le]>0?n[0]:{}).serverTiming,e).description}return t}var d1,K9,X9,Q9,J9,Z9,e5,t5,f1,r5,n5,o5,Xb,Qb,p1,zb,Yb,m1,dd,Kb,Do=Ne(()=>{"use strict";hn();Xt();Jt();Er();d1="window",K9="document",X9="documentMode",Q9="navigator",J9="history",Z9="location",e5="console",t5="performance",f1="JSON",r5="crypto",n5="msCrypto",o5="ReactNative",Xb="msie",Qb="trident/",p1="XMLHttpRequest",zb=null,Yb=null,m1=!1,dd=null,Kb=null});function i5(e,t){return function(){var r=arguments,n=ox(t);if(n){var o=n.listener;o&&o[e]&&o[e][ed](o,r)}}}function s5(){var e=Bt("Microsoft");return e&&(wy=e.ApplicationInsights),wy}function ox(e){var t=wy;return!t&&e.disableDbgExt!==!0&&(t=wy||s5()),t?t.ChromeDbgExt:null}function v1(e){if(!yy){yy={};for(var t=0;t<nx[Le];t++)yy[nx[t]]=i5(nx[t],e)}return yy}var nx,wy,yy,ix=Ne(()=>{Xt();Do();nx=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],wy=null});function y1(e){return e?'"'+e[Jo](/\"/g,We)+'"':We}function w1(e,t){var r=$p();if(r){var n="log";r[e]&&(n=e),it(r[n])&&r[n](t)}}function Hp(e,t){return(e||{})[gn]||new ri(t)}function sx(e){return e||new ri}function Ot(e,t,r,n,o,i){i===void 0&&(i=!1),sx(e).throwInternal(t,r,n,o,i)}function ni(e,t){sx(e)[Op](t)}function ax(e,t,r){sx(e)[xb](t,r)}var a5,c5,u5,Qc,ri,Ca=Ne(()=>{"use strict";Dr();Xt();ix();Do();Jt();Er();a5="AI (Internal): ",c5="AI: ",u5="AITR_";Qc=function(){function e(t,r,n,o){n===void 0&&(n=!1);var i=this;i[Ql]=t,i[la]=(n?c5:a5)+t;var s=We;Kc()&&(s=pd().stringify(o));var a=(r?" message:"+y1(r):We)+(o?" props:"+y1(s):We);i[la]+=a}return e.dataType="MessageData",e}();ri=function(){function e(t){this.identifier="DiagnosticLogger",this.queue=[];var r=0,n={},o,i,s,a;lt(e,this,function(c){l(t||{}),c.consoleLoggingLevel=function(){return o},c.telemetryLoggingLevel=function(){return i},c.maxInternalMessageLimit=function(){return s},c[bb]=function(){return a},c.throwInternal=function(p,m,h,g,v){v===void 0&&(v=!1);var w=new Qc(m,h,v,g);if(a)throw Ut(w);var E=p===1?ry:Op;if(gt(w[la]))f("throw"+(p===1?"Critical":"Warning"),w);else{if(v){var C=+w[Ql];!n[C]&&o>=p&&(c[E](w[la]),n[C]=!0)}else o>=p&&c[E](w[la]);u(p,w)}},c[Op]=function(p){w1("warn",p),f("warning",p)},c[ry]=function(p){w1("error",p),f("error",p)},c.resetInternalMessageCount=function(){r=0,n={}},c[xb]=u;function u(p,m){if(!d()){var h=!0,g=u5+m[Ql];if(n[g]?h=!1:n[g]=!0,h&&(p<=i&&(c.queue[tt](m),r++,f(p===1?"error":"warn",m)),r===s)){var v="Internal events throttle limit per PageView reached for this app.",w=new Qc(23,v,!1);c.queue[tt](w),p===1?c[ry](v):c[Op](v)}}}function l(p){o=Io(p.loggingLevelConsole,0),i=Io(p.loggingLevelTelemetry,1),s=Io(p.maxMessageLimit,25),a=Io(p[bb],!1)}function d(){return r>=s}function f(p,m){var h=ox(t||{});h&&h[xo]&&h[xo](p,m)}})}return e.__ieDyn=1,e}()});function zt(e,t,r,n,o){if(e){var i=e;if(i[Uc]&&(i=i[Uc]()),i){var s=void 0,a=i[Mc](cx);try{if(s=i.create(t(),n,o),s){if(a&&s[Zo]&&(s[Zo](Jc[ux],a),a[Mc]&&a[Zo])){var c=a[Mc](Jc[qp]);c||(c=[],a[Zo](Jc[qp],c)),c[tt](s)}return i[Zo](cx,s),r(s)}}catch(u){s&&s[Zo]&&s[Zo]("exception",u)}finally{s&&i.fire(s),i[Zo](cx,a)}}}return r()}function lx(){return l5}var gd,ux,qp,l5,Jc,Bp,cx,Vp=Ne(()=>{Dr();Xt();Jt();Er();gd="ctx",ux="ParentContextKey",qp="ChildrenContextKey",l5=null,Jc=function(){function e(t,r,n){var o=this,i=!1;if(o.start=mr(),o[Tr]=t,o[Xo]=n,o[Rp]=function(){return!1},it(r)){var s;i=Kn(o,"payload",function(){return!s&&it(r)&&(s=r(),r=null),s})}o[Mc]=function(a){return a?a===e[ux]||a===e[qp]?o[a]:(o[gd]||{})[a]:null},o[Zo]=function(a,c){if(a)if(a===e[ux])o[a]||(o[Rp]=function(){return!0}),o[a]=c;else if(a===e[qp])o[a]=c;else{var u=o[gd]=o[gd]||{};u[a]=c}},o[ty]=function(){var a=0,c=o[Mc](e[qp]);if(Ye(c))for(var u=0;u<c[Le];u++){var l=c[u];l&&(a+=l[kc])}o[kc]=mr()-o.start,o.exTime=o[kc]-a,o[ty]=function(){},!i&&it(r)&&(o.payload=r())}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}(),Bp=function(){function e(t){this.ctx={},lt(e,this,function(r){r.create=function(n,o,i){return new Jc(n,o,i)},r.fire=function(n){n&&(n[ty](),t&&it(t[va])&&t[va](n))},r[Zo]=function(n,o){if(n){var i=r[gd]=r[gd]||{};i[n]=o}},r[Mc]=function(n){return(r[gd]||{})[n]}})}return e.__ieDyn=1,e}(),cx="CoreUtils.doPerf"});function _1(e){e<0&&(e>>>=0),Wp=123456789+e&_a,Gp=987654321-e&_a,C1=!0}function S1(){try{var e=mr()&2147483647;_1((Math.random()*E1^e)+e)}catch{}}function vd(e){return e>0?Math.floor(oi()/_a*(e+1))>>>0:0}function oi(e){var t=0,r=Up()||jp();return r&&r.getRandomValues&&(t=r.getRandomValues(new Uint32Array(1))[0]&_a),t===0&&ti()&&(C1||S1(),t=zp()&_a),t===0&&(t=Math.floor(E1*Math.random()|0)),e||(t>>>=0),t}function Ey(e){e?_1(e):S1()}function zp(e){Gp=36969*(Gp&65535)+(Gp>>16)&_a,Wp=18e3*(Wp&65535)+(Wp>>16)&_a;var t=(Gp<<16)+(Wp&65535)>>>0&_a|0;return e||(t>>>=0),t}function Sa(e){e===void 0&&(e=22);for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=oi()>>>0,n=0,o=We;o[Le]<e;)n++,o+=t.charAt(r&63),r>>>=6,n===5&&(r=(oi()<<2&4294967295|r&3)>>>0,n=0);return o}var E1,_a,C1,Wp,Gp,Cy=Ne(()=>{Xt();Do();Jt();Er();E1=4294967296,_a=4294967295,C1=!1,Wp=123456789,Gp=987654321});function p5(e,t,r){if(b1)try{return b1(e,t,{value:r,enumerable:!1,configurable:!0}),!0}catch{}return!1}function P1(e){return e[Zv]===1||e[Zv]===9||!+e[Zv]}function m5(e,t){var r=t[e.id];if(!r){r={};try{P1(t)&&(p5(t,e.id,r)||(t[e.id]=r))}catch{}}return r}function ii(e,t){return t===void 0&&(t=!1),jc(e+f5+++(t?"."+x1:We)+d5)}function _y(e){var t={id:ii("_aiData-"+(e||We)+"."+x1),accept:function(r){return P1(r)},get:function(r,n,o,i){var s=r[t.id];return s?s[jc(n)]:(i&&(s=m5(t,r),s[jc(n)]=o),o)},kill:function(r,n){if(r&&r[n])try{delete r[n]}catch{}}};return t}var b1,x1,d5,f5,Yp=Ne(()=>{hn();Xt();Jt();Er();Cy();b1=Yl,x1="2.8.9",d5="."+Sa(6),f5=0});function h5(e,t){var r=vs[ba]||xy[ba];return r||(r=vs[ba]=vs(e,t),xy[ba]=r),r}function by(e){return e?e.isEnabled():!0}function g5(e){var t=e[Jv]=e[Jv]||{};if(Cn(t,"domain",e.cookieDomain,Ob,Xe),Cn(t,"path",e.cookiePath||"/",null,Xe),Xe(t[px])){var r=void 0;gt(e[D1])||(r=!e[D1]),gt(e[R1])||(r=!e[R1]),t[px]=r}return t}function F1(e,t){return t&&e&&Ye(e.ignoreCookies)?e.ignoreCookies[fa](t)!==-1:!1}function v5(e,t){return t&&e&&Ye(e.blockedCookies)&&e.blockedCookies[fa](t)!==-1?!0:F1(e,t)}function xa(e,t){var r;if(e)r=e.getCookieMgr();else if(t){var n=t[Jv];n[ba]?r=n[ba]:r=vs(t)}return r||(r=h5(t,(e||{})[gn])),r}function vs(e,t){var r,n=g5(e||xy),o=n.path||"/",i=n.domain,s=n[px]!==!1,a=(r={isEnabled:function(){var c=s&&si(t),u=xy[ba];return c&&u&&a!==u&&(c=by(u)),c}},r[Ip]=function(c){s=c!==!1},r.set=function(c,u,l,d,f){var p=!1;if(by(a)&&!v5(n,c)){var m={},h=Rt(u||We),g=h[fa](";");if(g!==-1&&(h=Rt(u[Qo](0,g)),m=M1(u[Qo](g+1))),Cn(m,"domain",d||i,cd,gt),!Xe(l)){var v=ti();if(gt(m[dx])){var w=mr(),E=w+l*1e3;if(E>0){var C=new Date;C.setTime(E),Cn(m,dx,O1(C,v?T1:I1)||O1(C,v?T1:I1)||We,cd)}}v||Cn(m,"max-age",We+l,null,gt)}var S=Yc();S&&S.protocol==="https:"&&(Cn(m,"secure",null,null,gt),fx===null&&(fx=!yd((Xn()||{})[Zl])),fx&&Cn(m,"SameSite","None",null,gt)),Cn(m,"path",f||o,null,gt);var x=n.setCookie||L1;x(c,N1(h,m)),p=!0}return p},r.get=function(c){var u=We;return by(a)&&!F1(n,c)&&(u=(n.getCookie||y5)(c)),u},r.del=function(c,u){var l=!1;return by(a)&&(l=a.purge(c,u)),l},r.purge=function(c,u){var l,d=!1;if(si(t)){var f=(l={},l.path=u||"/",l[dx]="Thu, 01 Jan 1970 00:00:01 GMT",l);ti()||(f["max-age"]="0");var p=n.delCookie||L1;p(c,N1(We,f)),d=!0}return d},r);return a[ba]=a,a}function si(e){if(Sy===null){Sy=!1;try{var t=Kp||{};Sy=t[mx]!==void 0}catch(r){Ot(e,2,68,"Cannot access document.cookie - "+Wc(r),{exception:Ut(r)})}}return Sy}function M1(e){var t={};if(e&&e[Le]){var r=Rt(e)[pa](";");we(r,function(n){if(n=Rt(n||We),n){var o=n[fa]("=");o===-1?t[n]=null:t[Rt(n[Qo](0,o))]=Rt(n[Qo](o+1))}})}return t}function O1(e,t){return it(e[t])?e[t]():null}function N1(e,t){var r=e||We;return Dt(t,function(n,o){r+="; "+n+(Xe(o)?We:"="+o)}),r}function y5(e){var t=We;if(Kp){var r=Kp[mx]||We;k1!==r&&(A1=M1(r),k1=r),t=Rt(A1[e]||We)}return t}function L1(e,t){Kp&&(Kp[mx]=e+"="+t)}function yd(e){return qt(e)?!!(Qt(e,"CPU iPhone OS 12")||Qt(e,"iPad; CPU OS 12")||Qt(e,"Macintosh; Intel Mac OS X 10_14")&&Qt(e,"Version/")&&Qt(e,"Safari")||Qt(e,"Macintosh; Intel Mac OS X 10_14")&&Hc(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||Qt(e,"Chrome/5")||Qt(e,"Chrome/6")||Qt(e,"UnrealEngine")&&!Qt(e,"Chrome")||Qt(e,"UCBrowser/12")||Qt(e,"UCBrowser/11")):!1}var T1,I1,mx,dx,px,D1,R1,ba,Sy,fx,k1,Kp,A1,xy,hx=Ne(()=>{Xt();Ca();Do();Jt();Er();T1="toGMTString",I1="toUTCString",mx="cookie",dx="expires",px="enabled",D1="isCookieUseDisabled",R1="disableCookiesUsage",ba="_ckMgr",Sy=null,fx=null,k1=null,Kp=_n(),A1={},xy={}});function q1(e){return e&&e[Jo]?e[Jo](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,We):e}function Iy(e,t){var r;if(t){var n=We;Ye(t)?(n=We,we(t,function(i){i=q1(i),i&&(i[0]!=="."&&(i="."+i),n+=i)})):n=q1(t),n&&(n[0]!=="."&&(n="."+n),e=(e||We)+n)}var o=_5.exec(e||We)||[];return r={},r[vn]=o[1],r.ns=(o[2]||We).replace(w5,".").replace(E5,We)[pa](".").sort().join("."),r}function gx(e,t,r){var n=[],o=Qp.get(e,Py,{},!1),i=Iy(t,r);return Dt(o,function(s,a){we(a,function(c){var u;(!i[vn]||i[vn]===c.evtName[vn])&&(!i.ns||i.ns===i.ns)&&n[tt]((u={},u[Tr]=c.evtName[vn]+(c.evtName.ns?"."+c.evtName.ns:We),u.handler=c[Dp],u))})}),n}function X1(e,t,r){r===void 0&&(r=!0);var n=Qp.get(e,Py,{},r),o=n[t];return o||(o=n[t]=[]),o}function Q1(e,t,r,n){e&&t&&t[vn]&&(e[H1]?e[H1](t[vn],r,n):e[j1]&&e[j1](V1+t[vn],r))}function S5(e,t,r,n){var o=!1;return e&&t&&t[vn]&&r&&(e[U1]?(e[U1](t[vn],r,n),o=!0):e[$1]&&(e[$1](V1+t[vn],r),o=!0)),o}function B1(e,t,r,n){for(var o=t[Le];o--;){var i=t[o];i&&(!r.ns||r.ns===i.evtName.ns)&&(!n||n(i))&&(Q1(e,i.evtName,i[Dp],i.capture),t[us](o,1))}}function b5(e,t,r){if(t[vn])B1(e,X1(e,t[vn]),t,r);else{var n=Qp.get(e,Py,{});Dt(n,function(o,i){B1(e,i,t,r)}),Xr(n)[Le]===0&&Qp.kill(e,Py)}}function ys(e,t){var r;return t?(Ye(t)?r=[e].concat(t):r=[e,t],r=Iy("xx",r).ns[pa](".")):r=e,r}function Zc(e,t,r,n,o){var i;o===void 0&&(o=!1);var s=!1;if(e)try{var a=Iy(t,n);if(s=S5(e,a,r,o),s&&Qp.accept(e)){var c=(i={guid:C5++,evtName:a},i[Dp]=r,i.capture=o,i);X1(e,a.type)[tt](c)}}catch{}return s}function eu(e,t,r,n,o){if(o===void 0&&(o=!1),e)try{var i=Iy(t,n),s=!1;b5(e,i,function(a){return i.ns&&!r||a[Dp]===r?(s=!0,!0):!1}),s||Q1(e,i,r,o)}catch{}}function Ed(e,t,r,n){return n===void 0&&(n=!1),Zc(e,t,r,null,n)}function Cd(e,t,r,n){n===void 0&&(n=!1),eu(e,t,r,null,n)}function Ta(e,t,r){var n=!1,o=Mi();o&&(n=Zc(o,e,t,r),n=Zc(o.body,e,t,r)||n);var i=_n();return i&&(n=Zc(i,e,t,r)||n),n}function Dy(e,t,r){var n=Mi();n&&(eu(n,e,t,r),eu(n.body,e,t,r));var o=_n();o&&eu(o,e,t,r)}function wd(e,t,r,n){var o=!1;return t&&e&&e[Le]>0&&we(e,function(i){i&&(!r||pr(r,i)===-1)&&(o=Ta(i,t,n)||o)}),o}function Ry(e,t,r,n){var o=!1;return t&&e&&Ye(e)&&(o=wd(e,t,r,n),!o&&r&&r[Le]>0&&(o=wd(e,t,null,n))),o}function Pa(e,t,r){e&&Ye(e)&&we(e,function(n){n&&Dy(n,t,r)})}function tu(e,t,r){return Ry([z1,G1,Ty],e,t,r)}function Jp(e,t){Pa([z1,G1,Ty],e,t)}function _d(e,t,r){function n(s){var a=_n();e&&a&&a.visibilityState==="hidden"&&e(s)}var o=ys(Y1,r),i=wd([Ty],e,t,o);return(!t||pr(t,Xp)===-1)&&(i=wd([Xp],n,t,o)||i),!i&&t&&(i=_d(e,null,r)),i}function Zp(e,t){var r=ys(Y1,t);Pa([Ty],e,r),Pa([Xp],null,r)}function Sd(e,t,r){function n(s){var a=_n();e&&a&&a.visibilityState==="visible"&&e(s)}var o=ys(K1,r),i=wd([W1],e,t,o);return i=wd([Xp],n,t,o)||i,!i&&t&&(i=Sd(e,null,r)),i}function em(e,t){var r=ys(K1,t);Pa([W1],e,r),Pa([Xp],null,r)}var V1,$1,U1,j1,H1,Py,Xp,Ty,W1,G1,z1,Y1,K1,w5,E5,C5,Qp,_5,vx=Ne(()=>{Xt();Yp();Do();Jt();Er();V1="on",$1="attachEvent",U1="addEventListener",j1="detachEvent",H1="removeEventListener",Py="events",Xp="visibilitychange",Ty="pagehide",W1="pageshow",G1="unload",z1="beforeunload",Y1=ii("aiEvtPageHide"),K1=ii("aiEvtPageShow"),w5=/\.[\.]+/g,E5=/[\.]+$/,C5=1,Qp=_y("events"),_5=/^([^.]*)(?:\.(.+)|)/});function bd(){var e=ws();return e[Qo](0,8)+"-"+e[Qo](8,12)+"-"+e[Qo](12,16)+"-"+e[Qo](16,20)+"-"+e[Qo](20)}function xd(){var e=fd();return e&&e.now?e.now():mr()}function ws(){for(var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],t=We,r,n=0;n<4;n++)r=oi(),t+=e[r&15]+e[r>>4&15]+e[r>>8&15]+e[r>>12&15]+e[r>>16&15]+e[r>>20&15]+e[r>>24&15]+e[r>>28&15];var o=e[8+(oi()&3)|0];return t[ma](0,8)+t[ma](9,4)+"4"+t[ma](13,3)+o+t[ma](16,3)+t[ma](19,12)}var yx,wx=Ne(()=>{"use strict";Xt();Do();vx();Jt();Er();Cy();yx={Attach:Ed,AttachEvent:Ed,Detach:Cd,DetachEvent:Cd}});function Es(e,t,r){return e&&e[Le]===t&&e!==r?!!e.match(/^[\da-f]*$/):!1}function Z1(e,t,r){return Es(e,t)?e:r}function eM(e){(isNaN(e)||e<0||e>255)&&(e=1);for(var t=e.toString(16);t[Le]<2;)t="0"+t;return t}function _x(e,t,r,n){var o;return o={},o[kp]=Es(n,2,Cx)?n:Ex,o[$c]=Pd(e)?e:ws(),o.spanId=Td(t)?t:ws()[ma](0,16),o.traceFlags=r>=0&&r<=255?r:1,o}function tm(e){var t;if(!e||(Ye(e)&&(e=e[0]||""),!e||!qt(e)||e[Le]>8192))return null;var r=x5.exec(Rt(e));return!r||r[1]===Cx||r[2]===ky||r[3]===Ay?null:(t={},t[kp]=r[1],t[$c]=r[2],t[td]=r[3],t[ha]=parseInt(r[4],16),t)}function Pd(e){return Es(e,32,ky)}function Td(e){return Es(e,16,Ay)}function Oy(e){return!(!e||!Es(e[kp],2,Cx)||!Es(e[$c],32,ky)||!Es(e[td],16,Ay)||!Es(eM(e[ha]),2))}function Sx(e){return Oy(e)?(e[ha]&J1)===J1:!1}function bx(e){if(e){var t=eM(e[ha]);Es(t,2)||(t="01");var r=e[kp]||Ex;return r!=="00"&&r!=="ff"&&(r=Ex),"".concat(r,"-").concat(Z1(e.traceId,32,ky),"-").concat(Z1(e.spanId,16,Ay),"-").concat(t)}return""}function xx(){var e="traceparent",t=tm(tx(e));return t||(t=tm(rx(e))),t}var x5,Ex,Cx,ky,Ay,J1,Px=Ne(()=>{Xt();wx();Do();Jt();x5=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]*)?$/,Ex="00",Cx="ff",ky="00000000000000000000000000000000",Ay="0000000000000000",J1=1});function Cs(e){return P5.get(e,"state",{},!0)}function Ny(e,t){for(var r=[],n=null,o=e[Yn](),i;o;){var s=o[Nc]();if(s){n&&it(n[da])&&it(s[yn])&&n[da](s);var a=!1;it(s[Gn])?a=s[Gn]():(i=Cs(s),a=i[Gn]),a||r[tt](s),n=s,o=o[Yn]()}}we(r,function(c){var u=e[Ht]();c[Yo](e.getCfg(),u,t,e[Yn]()),i=Cs(c),!c[Ht]&&!i[Ht]&&(i[Ht]=u),i[Gn]=!0,delete i[zn]})}function Ly(e){return e.sort(function(t,r){var n=0;if(r){var o=it(r[yn]);it(t[yn])?n=o?t[Po]-r[Po]:1:o&&(n=-1)}else n=t?1:-1;return n})}function tM(e){var t={};return{getName:function(){return t[Tr]},setName:function(r){e&&e.setName(r),t[Tr]=r},getTraceId:function(){return t[$c]},setTraceId:function(r){e&&e.setTraceId(r),Pd(r)&&(t[$c]=r)},getSpanId:function(){return t[td]},setSpanId:function(r){e&&e.setSpanId(r),Td(r)&&(t[td]=r)},getTraceFlags:function(){return t[ha]},setTraceFlags:function(r){e&&e.setTraceFlags(r),t[ha]=r}}}var P5,Fy=Ne(()=>{"use strict";Xt();Yp();Jt();Er();Px();P5=_y("plugin")});function I5(e,t,r){for(;e;){if(e[Nc]()===r)return e;e=e[Yn]()}return $i([r],t[Fi]||{},t)}function Tx(e,t,r,n){var o=null,i=[];n!==null&&(o=n?I5(e,r,n):e);var s={_next:c,ctx:{core:function(){return r},diagLog:function(){return Hp(r,t)},getCfg:function(){return t},getExtCfg:u,getConfig:l,hasNext:function(){return!!o},getNext:function(){return o},setNext:function(f){o=f},iterate:d,onComplete:a}};function a(f,p){for(var m=[],h=2;h<arguments.length;h++)m[h-2]=arguments[h];f&&i[tt]({func:f,self:gt(p)?s.ctx:p,args:m})}function c(){var f=o;if(o=f?f[Yn]():null,!f){var p=i;p&&p[Le]>0&&(we(p,function(m){try{m.func[ir](m.self,m.args)}catch(h){Ot(r[gn],2,73,"Unexpected Exception during onComplete - "+Ut(h))}}),i=[])}return f}function u(f,p,m){p===void 0&&(p={}),m===void 0&&(m=0);var h;if(t){var g=t[rd];g&&f&&(h=g[f])}if(!h)h=p;else if(Ir(p)&&m!==0){var v=ud(!0,p,h);t&&m===2&&Dt(p,function(w){if(Xe(v[w])){var E=t[w];Xe(E)||(v[w]=E)}}),h=v}return h}function l(f,p,m){m===void 0&&(m=!1);var h,g=u(f,null);return g&&!Xe(g[p])?h=g[p]:t&&!Xe(t[p])&&(h=t[p]),Xe(h)?m:h}function d(f){for(var p;p=s._next();){var m=p[Nc]();m&&f(m)}}return s}function Sn(e,t,r,n){var o=Tx(e,t,r,n),i=o.ctx;function s(c){var u=o._next();return u&&u[yn](c,i),!u}function a(c,u){return c===void 0&&(c=null),Ye(c)&&(c=$i(c,t,r,u)),Sn(c||i[Yn](),t,r,u)}return i[It]=s,i[ls]=a,i}function Id(e,t,r){var n=t[Fi]||{},o=Tx(e,n,t,r),i=o.ctx;function s(c){var u=o._next();return u&&u.unload(i,c),!u}function a(c,u){return c===void 0&&(c=null),Ye(c)&&(c=$i(c,n,t,u)),Id(c||i[Yn](),t,u)}return i[It]=s,i[ls]=a,i}function rm(e,t,r){var n=t[Fi]||{},o=Tx(e,n,t,r),i=o.ctx;function s(c){return i.iterate(function(u){it(u[Lc])&&u[Lc](i,c)})}function a(c,u){return c===void 0&&(c=null),Ye(c)&&(c=$i(c,n,t,u)),rm(c||i[Yn](),t,u)}return i[It]=s,i[ls]=a,i}function $i(e,t,r,n){var o=null,i=!n;if(Ye(e)&&e[Le]>0){var s=null;we(e,function(a){if(!i&&n===a&&(i=!0),i&&a&&it(a[yn])){var c=D5(a,t,r);o||(o=c),s&&s._setNext(c),s=c}})}return n&&!o?$i([n],t,r):o}function D5(e,t,r){var n=null,o=it(e[yn]),i=it(e[da]),s;e?s=e[Ko]+"-"+e[Po]+"-"+oM++:s="Unknown-0-"+oM++;var a={getPlugin:function(){return e},getNext:function(){return n},processTelemetry:l,unload:d,update:f,_id:s,_setNext:function(p){n=p}};function c(){var p;return e&&it(e[nM])&&(p=e[nM]()),p||(p=Sn(a,t,r)),p}function u(p,m,h,g,v){var w=!1,E=e?e[Ko]:T5,C=p[rM];return C||(C=p[rM]={}),p.setNext(n),e&&zt(p[Ht](),function(){return E+":"+h},function(){C[s]=!0;try{var S=n?n._id:We;S&&(C[S]=!1),w=m(p)}catch(I){var x=n?C[n._id]:!0;x&&(w=!0),(!n||!x)&&Ot(p[xo](),1,73,"Plugin ["+E+"] failed during "+h+" - "+Ut(I)+", run flags: "+Ut(C))}},g,v),w}function l(p,m){m=m||c();function h(g){if(!e||!o)return!1;var v=Cs(e);return v[zn]||v[Ap]?!1:(i&&e[da](n),e[yn](p,g),!0)}u(m,h,"processTelemetry",function(){return{item:p}},!p.sync)||m[It](p)}function d(p,m){function h(){var g=!1;if(e){var v=Cs(e),w=e[Ht]||v[Ht];e&&(!w||w===p.core())&&!v[zn]&&(v[Ht]=null,v[zn]=!0,v[Gn]=!1,e[zn]&&e[zn](p,m)===!0&&(g=!0))}return g}u(p,h,"unload",function(){},m[Xo])||p[It](m)}function f(p,m){function h(){var g=!1;if(e){var v=Cs(e),w=e[Ht]||v[Ht];e&&(!w||w===p.core())&&!v[zn]&&e[Lc]&&e[Lc](p,m)===!0&&(g=!0)}return g}u(p,h,"update",function(){},!1)||p[It](m)}return En(a)}var T5,rM,nM,oM,Ix,nm=Ne(()=>{"use strict";Xt();Ca();Do();Jt();Er();Vp();Fy();T5="TelemetryPluginChain",rM="_hasRun",nM="_getTelCtx",oM=0;Ix=function(){function e(t,r,n,o){var i=this,s=Sn(t,r,n,o);Gc(i,s,Xr(s))}return e}()});function iM(e,t,r){t&&Ye(t)&&t[Le]>0&&(t=t.sort(function(n,o){return n[Po]-o[Po]}),we(t,function(n){n[Po]<om&&hr(R5+n[Ko])}),e[tt]({queue:En(t),chain:$i(t,r[Fi],r)}))}function sM(e,t){function r(){return Sn(null,t[Fi],t,null)}function n(u,l,d,f){var p=u?u[Le]+1:1;function m(){p--,p===0&&(f&&f(),f=null)}p>0&&we(u,function(h){if(h&&h.queue[Le]>0){var g=h.chain,v=l[ls](g);v[Pp](m),d(v)}else p--}),m()}function o(u,l){var d=l||{reason:0};return n(e,u,function(f){f[It](d)},function(){u[It](d)}),!0}function i(u,l){var d=l||{reason:0,isAsync:!1};return n(e,u,function(f){f[It](d)},function(){u[It](d),a=!1}),!0}function s(u){var l=null;return e&&e[Le]>0&&we(e,function(d){if(d&&d.queue[Le]>0&&(we(d.queue,function(f){if(f[Ko]===u)return l=f,-1}),l))return-1}),l}var a=!1,c={identifier:"ChannelControllerPlugin",priority:om,initialize:function(u,l,d,f){a=!0,we(e,function(p){p&&p.queue[Le]>0&&Ny(Sn(p.chain,u,l),d)})},isInitialized:function(){return a},processTelemetry:function(u,l){n(e,l||r(),function(d){d[It](u)},function(){l[It](u)})},update:o,pause:function(){n(e,r(),function(u){u.iterate(function(l){l.pause&&l.pause()})},null)},resume:function(){n(e,r(),function(u){u.iterate(function(l){l.resume&&l.resume()})},null)},teardown:i,getChannel:s,flush:function(u,l,d,f){var p=1,m=!1,h=null;f=f||5e3;function g(){p--,m&&p===0&&(h&&(clearTimeout(h),h=null),l&&l(m),l=null)}return n(e,r(),function(v){v.iterate(function(w){if(w[Xl]){p++;var E=!1;w[Xl](u,function(){E=!0,g()},d)||E||(u&&h==null?h=setTimeout(function(){h=null,g()},f):g())}})},function(){m=!0,g()}),!0},_setQueue:function(u){e=u}};return c}function aM(e,t,r){var n=[];if(e&&we(e,function(i){return iM(n,i,r)}),t){var o=[];we(t,function(i){i[Po]>om&&o[tt](i)}),iM(n,o,r)}return n}var om,R5,cM=Ne(()=>{Xt();Jt();Er();nm();Fy();om=500,R5="Channel has invalid priority - "});function ru(){var e=[];function t(n){n&&e[tt](n)}function r(n,o){we(e,function(i){try{i(n,o)}catch(s){Ot(n[xo](),2,73,"Unexpected error calling unload handler - "+Ut(s))}}),e=[]}return{add:t,run:r}}var My=Ne(()=>{Xt();Ca();Do();Jt()});var Ia,nu,Dx=Ne(()=>{"use strict";Dr();Xt();Jt();Er();nm();My();Ia="getPlugin",nu=function(){function e(){var t=this,r,n,o,i,s;u(),lt(e,t,function(l){l[Yo]=function(d,f,p,m){c(d,f,m),r=!0},l[zn]=function(d,f){var p,m=l[Ht];if(!m||d&&m!==d[Ht]())return;var h,g=!1,v=d||Id(null,m,o&&o[Ia]?o[Ia]():o),w=f||(p={reason:0},p[Xo]=!1,p);function E(){if(!g){g=!0,i.run(v,f);var C=s;s=[],we(C,function(S){S.rm()}),h===!0&&v[It](w),u()}}return!l[Jl]||l[Jl](v,w,E)!==!0?E():h=!0,h},l[Lc]=function(d,f){var p=l[Ht];if(!p||d&&p!==d[Ht]())return;var m,h=!1,g=d||rm(null,p,o&&o[Ia]?o[Ia]():o),v=f||{reason:0};function w(){h||(h=!0,c(g.getCfg(),g.core(),g[Yn]()))}return!l._doUpdate||l._doUpdate(g,v,w)!==!0?w():m=!0,m},l._addHook=function(d){d&&(Ye(d)?s=s.concat(d):s[tt](d))},wa(l,"_addUnloadCb",function(){return i},"add")}),t[xo]=function(l){return a(l)[xo]()},t[Gn]=function(){return r},t.setInitialized=function(l){r=l},t[da]=function(l){o=l},t[It]=function(l,d){d?d[It](l):o&&it(o[yn])&&o[yn](l,null)},t._getTelCtx=a;function a(l){l===void 0&&(l=null);var d=l;if(!d){var f=n||Sn(null,{},t[Ht]);o&&o[Ia]?d=f[ls](null,o[Ia]):d=f[ls](null,o)}return d}function c(l,d,f){l&&Cn(l,rd,[],null,Xe),!f&&d&&(f=d[Qv]()[Yn]());var p=o;o&&o[Ia]&&(p=o[Ia]()),t[Ht]=d,n=Sn(f,l,d,p)}function u(){r=!1,t[Ht]=null,n=null,o=null,s=[],i=ru()}}return e.__ieDyn=1,e}()});var uM,lM=Ne(()=>{hn();Dr();Xt();Dx();Ca();Do();Jt();Er();uM=function(e){zo(t,e);function t(){var r=e.call(this)||this;r.identifier="TelemetryInitializerPlugin",r.priority=199;var n,o;i(),lt(t,r,function(s,a){s.addTelemetryInitializer=function(c){var u={id:n++,fn:c};o[tt](u);var l={remove:function(){we(o,function(d,f){if(d.id===u.id)return o[us](f,1),-1})}};return l},s[yn]=function(c,u){for(var l=!1,d=o[Le],f=0;f<d;++f){var p=o[f];if(p)try{if(p.fn[ed](null,[c])===!1){l=!0;break}}catch(m){Ot(u[xo](),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+Wc(m),{exception:Ut(m)},!0)}}l||s[It](c,u)},s[Jl]=function(){i()}});function i(){n=0,o=[]}return r}return t.__ieDyn=1,t}(nu)});function O5(e,t){return new Bp(t)}function N5(e,t,r){var n,o=[],i={};return we(r,function(s){(Xe(s)||Xe(s[Yo]))&&hr(mM);var a=s[Po],c=s[Ko];s&&a&&(Xe(i[a])?i[a]=c:ni(e,"Two extensions have same priority #"+a+" - "+i[a]+", "+c)),(!a||a<t)&&o[tt](s)}),n={all:r},n[Ht]=o,n}function pM(e,t){var r=!1;return we(t,function(n){if(n===e)return r=!0,-1}),r}function L5(){var e;return Li((e={},e[Ac]=function(t){},e[Oc]=function(t){},e[nd]=function(t){},e[ga]=function(t,r){},e[od]=function(t,r){},e))}var mM,dM,fM,k5,A5,ou,Rx=Ne(()=>{"use strict";hn();Dr();hn();Xt();cM();hx();Yp();ix();Ca();Jt();Er();Vp();nm();Fy();lM();My();mM="Plugins must provide initialize method",dM="_notificationManager",fM="SDK is still unloading...",k5="SDK is not initialized",A5={loggingLevelConsole:1};ou=function(){function e(){var t,r,n,o,i,s,a,c,u,l,d,f,p,m,h,g,v,w,E,C,S=0;lt(e,this,function(x){I(),x[Gn]=function(){return r},x[Yo]=function(M,Z,re,K){m&&hr(fM),x[Gn]()&&hr("Core should not be initialized more than once"),t=M||{},x[Fi]=t,Xe(M[Xv])&&hr("Please provide instrumentation key"),o=K,x[dM]=K,j(),$(),O(),re&&(x[gn]=re);var fe=ya(t,qF,[]);u=[],u[tt].apply(u,Kv(Kv([],Z,!1),fe,!1)),f=ya(t,Pb,[]),T(null),(!p||p[Le]===0)&&hr("No "+Pb+" available"),r=!0,x.releaseQueue()},x.getTransmissionControls=function(){var M=[];return p&&we(p,function(Z){M[tt](Z.queue)}),En(M)},x.track=function(M){M.iKey=M.iKey||t[Xv],M[kc]=M[kc]||To(new Date),M.ver=M.ver||"4.0",!m&&x[Gn]()?P()[It](M):n[tt](M)},x[Qv]=P,x[xp]=function(){return o||(o=L5(),x[dM]=o),o},x[Ac]=function(M){o&&o[Ac](M)},x[Oc]=function(M){o&&o[Oc](M)},x.getCookieMgr=function(){return a||(a=vs(t,x[gn])),a},x.setCookieMgr=function(M){a=M},x[Uc]=function(){if(!i&&!s&&Io(t.enablePerfMgr)){var M=Io(t[Tb]);it(M)&&(s=M(x,x[xp]()))}return i||s||lx()},x.setPerfMgr=function(M){i=M},x.eventCnt=function(){return n[Le]},x.releaseQueue=function(){if(r&&n[Le]>0){var M=n;n=[],we(M,function(Z){P()[It](Z)})}},x.pollInternalLogs=function(M){g=M||null;var Z=Io(t.diagnosticLogInterval);return(!Z||!(Z>0))&&(Z=1e4),S&&clearInterval(S),S=setInterval(function(){U()},Z),S},x[Sb]=function(){S&&(clearInterval(S),S=0,U())},Gc(x,function(){return h},["addTelemetryInitializer"]),x.unload=function(M,Z,re){var K;M===void 0&&(M=!0),r||hr(k5),m&&hr(fM);var fe=(K={reason:50},K[Xo]=M,K.flushComplete=!1,K),_e=Id(R(),x);_e[Pp](function(){I(),Z&&Z(fe)},x);function ye(Ee){fe.flushComplete=Ee,m=!0,w.run(_e,fe),x[Sb](),_e[It](fe)}W(M,ye,6,re)||ye(!1)},x[Nc]=D,x.addPlugin=function(M,Z,re,K){if(!M){K&&K(!1),Q(mM);return}var fe=D(M[Ko]);if(fe&&!Z){K&&K(!1),Q("Plugin ["+M[Ko]+"] is already loaded!");return}var _e={reason:16};function ye(Je){u[tt](M),_e.added=[M],T(_e),K&&K(!0)}if(fe){var Ee=[fe.plugin],Te={reason:2,isAsync:!!re};k(Ee,Te,function(Je){Je?(_e.removed=Ee,_e.reason|=32,ye(!0)):K&&K(!1)})}else ye(!1)},x.evtNamespace=function(){return v},x[Xl]=W,x.getTraceCtx=function(M){return C||(C=tM()),C},x.setTraceCtx=function(M){C=M||null},wa(x,"addUnloadCb",function(){return w},"add");function I(){r=!1,t=ud(!0,{},A5),x[Fi]=t,x[gn]=new ri(t),x[Tp]=[],h=new uM,n=[],o=null,i=null,s=null,a=null,c=null,l=null,u=[],d=null,f=null,p=null,m=!1,g=null,v=ii("AIBaseCore",!0),w=ru(),C=null}function P(){return Sn(R(),t,x)}function T(M){var Z=N5(x[gn],om,u);l=Z[Ht],c=null;var re=Z.all;if(p=En(aM(f,re,x)),d){var K=pr(re,d);K!==-1&&re[us](K,1),K=pr(l,d),K!==-1&&l[us](K,1),d._setQueue(p)}else d=sM(p,x);re[tt](d),l[tt](d),x[Tp]=Ly(re),d[Yo](t,x,re),Ny(P(),re),x[Tp]=En(Ly(l||[])).slice(),M&&H(M)}function D(M){var Z,re=null,K=null;return we(x[Tp],function(fe){if(fe[Ko]===M&&fe!==d&&fe!==h)return K=fe,-1}),!K&&d&&(K=d.getChannel(M)),K&&(re=(Z={plugin:K},Z[Ip]=function(fe){Cs(K)[Ap]=!fe},Z.isEnabled=function(){var fe=Cs(K);return!fe[zn]&&!fe[Ap]},Z.remove=function(fe,_e){var ye;fe===void 0&&(fe=!0);var Ee=[K],Te=(ye={reason:1},ye[Xo]=fe,ye);k(Ee,Te,function(Je){Je&&T({reason:32,removed:Ee}),_e&&_e(Je)})},Z)),re}function R(){if(!c){var M=(l||[]).slice();pr(M,h)===-1&&M[tt](h),c=$i(Ly(M),t,x)}return c}function k(M,Z,re){if(M&&M[Le]>0){var K=$i(M,t,x),fe=Id(K,x);fe[Pp](function(){var _e=!1,ye=[];we(u,function(Te,Je){pM(Te,M)?_e=!0:ye[tt](Te)}),u=ye;var Ee=[];f&&(we(f,function(Te,Je){var Ge=[];we(Te,function(Se){pM(Se,M)?_e=!0:Ge[tt](Se)}),Ee[tt](Ge)}),f=Ee),re&&re(_e)}),fe[It](Z)}else re(!1)}function U(){var M=x[gn]?x[gn].queue:[];M&&(we(M,function(Z){var re,K=(re={},re[Tr]=g||"InternalMessageId: "+Z[Ql],re.iKey=Io(t[Xv]),re.time=To(new Date),re.baseType=Qc.dataType,re.baseData={message:Z[la]},re);x.track(K)}),M[Le]=0)}function W(M,Z,re,K){return d?d[Xl](M,Z,re||6,K):(Z&&Z(!1),!0)}function j(){var M=Io(t.disableDbgExt);M===!0&&E&&(o[Oc](E),E=null),o&&!E&&M!==!0&&(E=v1(t),o[Ac](E))}function $(){var M=Io(t.enablePerfMgr);!M&&s&&(s=null),M&&ya(t,Tb,O5)}function O(){var M=ya(t,rd,{});M.NotificationManager=o}function H(M){var Z=rm(R(),x);(!x._updateHook||x._updateHook(Z,M)!==!0)&&Z[It](M)}function Q(M){var Z=x[gn];Z?Ot(Z,2,73,M):hr(M)}})}return e.__ieDyn=1,e}()});function $y(e,t,r,n){we(e,function(o){if(o&&o[t])if(r)setTimeout(function(){return n(o)},0);else try{n(o)}catch{}})}var im,kx=Ne(()=>{Dr();Xt();Jt();Er();im=function(){function e(t){this.listeners=[];var r=!!(t||{}).perfEvtsSendAll;lt(e,this,function(n){n[Ac]=function(o){n.listeners[tt](o)},n[Oc]=function(o){for(var i=pr(n[Fc],o);i>-1;)n.listeners[us](i,1),i=pr(n[Fc],o)},n[nd]=function(o){$y(n[Fc],nd,!0,function(i){i[nd](o)})},n[ga]=function(o,i){$y(n[Fc],ga,!0,function(s){s[ga](o,i)})},n[od]=function(o,i){$y(n[Fc],od,i,function(s){s[od](o,i)})},n[va]=function(o){o&&(r||!o[Rp]())&&$y(n[Fc],va,!1,function(i){o[Xo]?setTimeout(function(){return i[va](o)},0):i[va](o)})}})}return e.__ieDyn=1,e}()});var sm,hM=Ne(()=>{hn();Dr();Xt();Rx();Ca();Jt();Er();kx();Vp();sm=function(e){zo(t,e);function t(){var r=e.call(this)||this;return lt(t,r,function(n,o){n[Yo]=function(a,c,u,l){o[Yo](a,c,u||new ri(a),l||new im(a))},n.track=function(a){zt(n[Uc](),function(){return"AppInsightsCore:track"},function(){a===null&&(s(a),hr("Invalid telemetry item")),i(a),o.track(a)},function(){return{item:a}},!a.sync)};function i(a){Xe(a[Tr])&&(s(a),hr("telemetry name required"))}function s(a){var c=n[xp]();c&&c[ga]([a],2)}}),r}return t.__ieDyn=1,t}(ou)});var he,_t,iu,ai,gM,vM,Uy,Ax,am,jy,Dd,ci,Da,_s,cm,yM,Ox,um,wM=Ne(()=>{iy();_t="Failed",iu=_t+"MonitorAjax",ai="Track",gM="Start",vM="Stop",Uy="Event",Ax="AuthContext",am="Exception",jy="Local",Dd="Session",ci="Storage",Da="Browser",_s="Cannot",cm="Buffer",yM="InstrumentationKey",Ox=Qr({CRITICAL:1,WARNING:2}),um=Qr((he={},he[Da+"DoesNotSupport"+jy+ci]=0,he[Da+_s+"Read"+jy+ci]=1,he[Da+_s+"Read"+Dd+ci]=2,he[Da+_s+"Write"+jy+ci]=3,he[Da+_s+"Write"+Dd+ci]=4,he[Da+_t+"RemovalFrom"+jy+ci]=5,he[Da+_t+"RemovalFrom"+Dd+ci]=6,he[_s+"SendEmptyTelemetry"]=7,he.ClientPerformanceMathError=8,he["ErrorParsingAI"+Dd+"Cookie"]=9,he.ErrorPVCalc=10,he[am+"WhileLoggingError"]=11,he[_t+"AddingTelemetryTo"+cm]=12,he[iu+"Abort"]=13,he[iu+"Dur"]=14,he[iu+"Open"]=15,he[iu+"RSC"]=16,he[iu+"Send"]=17,he[iu+"GetCorrelationHeader"]=18,he[_t+"ToAddHandlerForOnBeforeUnload"]=19,he[_t+"ToSendQueuedTelemetry"]=20,he[_t+"ToReportDataLoss"]=21,he["Flush"+_t]=22,he.MessageLimitPerPVExceeded=23,he.MissingRequiredFieldSpecification=24,he.NavigationTimingNotSupported=25,he.OnError=26,he[Dd+"RenewalDateIsZero"]=27,he.SenderNotInitialized=28,he[gM+ai+Uy+_t]=29,he[vM+ai+Uy+_t]=30,he[gM+ai+_t]=31,he[vM+ai+_t]=32,he.TelemetrySampledAndNotSent=33,he[ai+Uy+_t]=34,he[ai+am+_t]=35,he[ai+"Metric"+_t]=36,he[ai+"PV"+_t]=37,he[ai+"PV"+_t+"Calc"]=38,he[ai+"Trace"+_t]=39,he["Transmission"+_t]=40,he[_t+"ToSet"+ci+cm]=41,he[_t+"ToRestore"+ci+cm]=42,he.InvalidBackendResponse=43,he[_t+"ToFixDepricatedValues"]=44,he.InvalidDurationValue=45,he.TelemetryEnvelopeInvalid=46,he.CreateEnvelopeError=47,he[_s+"SerializeObject"]=48,he[_s+"SerializeObjectNonSerializable"]=49,he.CircularReferenceDetected=50,he["Clear"+Ax+_t]=51,he[am+"Truncated"]=52,he.IllegalCharsInName=53,he.ItemNotInArray=54,he.MaxAjaxPerPVExceeded=55,he.MessageTruncated=56,he.NameTooLong=57,he.SampleRateOutOfRange=58,he["Set"+Ax+_t]=59,he["Set"+Ax+_t+"AccountName"]=60,he.StringValueTooLong=61,he.StartCalledMoreThanOnce=62,he.StopCalledWithoutStart=63,he["TelemetryInitializer"+_t]=64,he.TrackArgumentsNotSpecified=65,he.UrlTooLong=66,he[Dd+ci+cm+"Full"]=67,he[_s+"AccessCookie"]=68,he.IdTooLong=69,he.InvalidEvent=70,he[iu+"SetRequestHeader"]=71,he["Send"+Da+"InfoOnUserInit"]=72,he["Plugin"+am]=73,he["Notification"+am]=74,he.SnippetScriptLoadFailure=99,he["Invalid"+yM]=100,he[_s+"ParseAiBlobValue"]=101,he.InvalidContentBlob=102,he[ai+"PageAction"+Uy+_t]=103,he[_t+"AddingCustomDefinedRequestContext"]=104,he["InMemory"+ci+cm+"Full"]=105,he[yM+"Deprecation"]=106,he))});var Ss=Ne(()=>{HF();n1();hM();Rx();Dx();Cy();wx();Jt();iy();vx();Do();hn();kx();Vp();Ca();nm();wM();hx();Yp();My();Px()});var EM,CM,_M,SM,bM,xM,PM=Ne(()=>{hn();Ss();EM=Qr({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),CM=Qr({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),_M=Qr({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),SM=Qr({Normal:1,Critical:2}),bM=Qr({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),xM=En(Yv(Yv({},um),Qr({AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520})))});var ui,Hy,F5,Ive,Nx,qy,lm=Ne(()=>{ui="",Hy="https://browser.events.data.microsoft.com/OneCollector/1.0/",F5="pluginVersionString",Ive=F5+"Arr",Nx="version",qy="properties"});function sr(e){return!(e===ui||Xe(e))}function fm(e){if(e){var t=e.indexOf("-");if(t>-1)return e.substring(0,t)}return ui}function Mx(){return Lx===null&&(Lx=!gt(Uint8Array)&&!H5()&&!gs()),Lx}function pm(e){return!!(e&&wn(e)&&e>=1&&e<=4)}function mm(e,t,r){if(!t&&!sr(t)||typeof e!="string")return null;var n=typeof t;if(n==="string"||n==="number"||n==="boolean"||Ye(t))t={value:t};else if(n==="object"&&!Wn.call(t,"value"))t={value:r?JSON.stringify(t):t};else if(Xe(t.value)||t.value===ui||!qt(t.value)&&!wn(t.value)&&!fs(t.value)&&!Ye(t.value))return null;if(Ye(t.value)&&!Vy(t.value))return null;if(!Xe(t.kind)){if(Ye(t.value)||!Rd(t.kind))return null;t.value=t.value.toString()}return t}function hm(e,t,r){var n=-1;if(!gt(e))if(t>0&&(t===32?n=1<<13:t<=13&&(n=t<<5)),j5(r))n===-1&&(n=0),n|=r;else{var o=U5[li(e)]||-1;n!==-1&&o!==-1?n|=o:o===6&&(n=o)}return n}function $x(){xa(null).setEnabled(!1)}function Ux(e,t,r){si(null)&&xa(null).set(e,t,r*86400,null,"/")}function jx(e){si(null)&&xa(null).del(e)}function Hx(e){return si(null)?qx(xa(null),e):ui}function qx(e,t,r){r===void 0&&(r=!0);var n;return e&&(n=e.get(t),r&&n&&decodeURIComponent&&(n=decodeURIComponent(n))),n||ui}function Bx(e){e===void 0&&(e="D");var t=bd();return e==="B"?t="{"+t+"}":e==="P"?t="("+t+")":e==="N"&&(t=t.replace(/-/g,ui)),t}function Ra(e,t,r,n,o){var i={},s=!1,a=0,c=arguments.length,u=Object[or],l=arguments;for(u.toString.call(l[0])==="[object Boolean]"&&(s=l[0],a++);a<c;a++){var e=l[a];Dt(e,function(f,p){s&&p&&Ir(p)?Ye(p)?(i[f]=i[f]||[],we(p,function(m,h){m&&Ir(m)?i[f][h]=Ra(!0,i[f][h],m):i[f][h]=m})):i[f]=Ra(!0,i[f],p):i[f]=p})}return i}function Rd(e){return e===0||e>0&&e<=13||e===32}function j5(e){return e>=0&&e<=9}function H5(){var e=Xn();if(!gt(e)&&e.userAgent){var t=e.userAgent.toLowerCase();if((t.indexOf("safari")>=0||t.indexOf("firefox")>=0)&&t.indexOf("chrome")<0)return!0}return!1}function Vy(e){return e.length>0}function su(e,t){var r=e;r.timings=r.timings||{},r.timings.processTelemetryStart=r.timings.processTelemetryStart||{},r.timings.processTelemetryStart[t]=Jr()}function li(e){var t=0;if(e!=null){var r=typeof e;r==="string"?t=1:r==="number"?t=2:r==="boolean"?t=3:r===rr&&(t=4,Ye(e)?(t=4096,e.length>0&&(t|=li(e[0]))):Wn.call(e,"value")&&(t=8192|li(e.value)))}return t}function Wy(){return!!Bt("chrome")}function Gy(e,t,r,n,o,i){n===void 0&&(n=!1),o===void 0&&(o=!1);function s(c,u,l){try{c[u]=l}catch{}}var a=new XMLHttpRequest;return n&&s(a,M5,n),r&&s(a,TM,r),a.open(e,t,!o),r&&s(a,TM,r),!o&&i&&s(a,$5,i),a}var bs,By,xs,M5,TM,$5,U5,Lx,dm,Fx,Jr,IM,DM,gm=Ne(()=>{Ss();hn();lm();By="3.2.8",xs="1DS-Web-JS-"+By,M5="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",TM="withCredentials",$5="timeout",U5=(bs={},bs[0]=0,bs[2]=6,bs[1]=1,bs[3]=7,bs[4098]=6,bs[4097]=1,bs[4099]=7,bs),Lx=null,dm=Boolean(_n()),Fx=Boolean(Mi());Jr=xd;IM={Version:By,FullVersionString:xs,strUndefined:nr,strObject:rr,Undefined:nr,arrForEach:we,arrIndexOf:pr,arrMap:Bc,arrReduce:Vc,objKeys:Xr,toISOString:To,isReactNative:gs,isString:qt,isNumber:wn,isBoolean:fs,isFunction:it,isArray:Ye,isObject:Ir,strTrim:Rt,isDocumentObjectAvailable:dm,isWindowObjectAvailable:Fx,isValueAssigned:sr,getTenantId:fm,isBeaconsSupported:Ea,isUint8ArrayAvailable:Mx,isLatency:pm,sanitizeProperty:mm,getISOString:To,useXDomainRequest:Xc,getCommonSchemaMetaData:hm,cookieAvailable:si,disallowsSameSiteNone:yd,setCookie:Ux,deleteCookie:jx,getCookie:Hx,createGuid:Bx,extend:Ra,getTime:Jr,isValueKind:Rd,isArrayValid:Vy,objDefineAccessors:Kn,addPageUnloadEventListener:tu,setProcessTelemetryTimings:su,addEventHandler:Ta,getFieldValueType:li,strEndsWith:Hc,objForEachKey:Dt},DM={_canUseCookies:void 0,isTypeof:id,isUndefined:gt,isNullOrUndefined:Xe,hasOwnProperty:ds,isFunction:it,isObject:Ir,isDate:ad,isArray:Ye,isError:qc,isString:qt,isNumber:wn,isBoolean:fs,toISOString:To,arrForEach:we,arrIndexOf:pr,arrMap:Bc,arrReduce:Vc,strTrim:Rt,objCreate:Li,objKeys:Xr,objDefineAccessors:Kn,addEventHandler:Ta,dateNow:mr,isIE:ti,disableCookies:$x,newGuid:bd,perfNow:xd,newId:Sa,randomValue:vd,random32:oi,mwcRandomSeed:Ey,mwcRandom32:zp,generateW3CId:ws}});var q5,RM,kM=Ne(()=>{hn();Dr();Ss();lm();gm();q5=function(e){zo(t,e);function t(){var r=e.call(this)||this;return r.pluginVersionStringArr=[],lt(t,r,function(n,o){(!n.logger||!n.logger.queue)&&(n.logger=new ri({loggingLevelConsole:1})),n.initialize=function(i,s,a,c){zt(n,function(){return"AppInsightsCore.initialize"},function(){var u=n.pluginVersionStringArr;if(i){i.endpointUrl||(i.endpointUrl=Hy);var l=i.propertyStorageOverride;l&&(!l.getProperty||!l.setProperty)&&hr("Invalid property storage override passed."),i.channels&&we(i.channels,function(p){p&&we(p,function(m){if(m.identifier&&m.version){var h=m.identifier+"="+m.version;u.push(h)}})})}n.getWParam=function(){return typeof document<"u"||!!i.enableWParam?0:-1},s&&we(s,function(p){if(p&&p.identifier&&p.version){var m=p.identifier+"="+p.version;u.push(m)}}),n.pluginVersionString=u.join(";"),n.pluginVersionStringArr=u;try{o.initialize(i,s,a,c),n.pollInternalLogs("InternalLog")}catch(p){var d=n.logger,f=Ut(p);f.indexOf("channels")!==-1&&(f+=`
 - Channels must be provided through config.channels only!`),Ot(d,1,514,"SDK Initialization Failed - no telemetry will be sent: "+f)}},function(){return{config:i,extensions:s,logger:a,notificationManager:c}})},n.track=function(i){zt(n,function(){return"AppInsightsCore.track"},function(){var s=i;if(s){s.timings=s.timings||{},s.timings.trackStart=Jr(),pm(s.latency)||(s.latency=1);var a=s.ext=s.ext||{};a.sdk=a.sdk||{},a.sdk.ver=xs;var c=s.baseData=s.baseData||{};c[qy]=c[qy]||{};var u=c[qy];u[Nx]=u[Nx]||n.pluginVersionString||ui}o.track(s)},function(){return{item:i}},!i.sync)}}),r}return t.__ieDyn=1,t}(sm),RM=q5});var B5,AM,OM=Ne(()=>{hn();Dr();Ss();lm();gm();B5=function(e){zo(t,e);function t(){var r=e.call(this)||this;return lt(t,r,function(n,o){n.initialize=function(i,s,a,c){i&&!i.endpointUrl&&(i.endpointUrl=Hy),n.getWParam=function(){return dm||!!i.enableWParam?0:-1};try{o.initialize(i,s,a,c)}catch(u){Ot(n.logger,1,514,"Initialization Failed: "+Ut(u)+`
 - Note: Channels must be provided through config.channels only`)}},n.track=function(i){var s=i;if(s){var a=s.ext=s.ext||{};a.sdk=a.sdk||{},a.sdk.ver=xs}o.track(s)}}),r}return t.__ieDyn=1,t}(ou),AM=B5});function V5(e,t,r){return function(n){e[t]=n,r()}}var au,W5,ka,Vx=Ne(()=>{Dr();Ss();au=it;W5=function(){function e(t){var r=0,n=null,o=[];lt(e,this,function(u){u.then=function(l,d){return new e(function(f,p){i(l,d,f,p)})},u.catch=function(l){return u.then(null,l)}});function i(u,l,d,f){o.push(function(){var p;try{r===1?p=au(u)?u(n):n:p=au(l)?l(n):n,p instanceof e?p.then(d,f):r===2&&!au(l)?f(p):d(p)}catch(m){f(m);return}}),r!==0&&s()}function s(){if(o.length>0){var u=o.slice();o=[],setTimeout(function(){for(var l=0,d=u.length;l<d;++l)try{u[l]()}catch{}},0)}}function a(u){r===0&&(n=u,r=1,s())}function c(u){r===0&&(n=u,r=2,s())}(function(){if(!au(t))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{t(a,c)}catch(l){c(l)}})()}return e.resolve=function(t){return t instanceof e?t:t&&au(t.then)?new e(function(r,n){try{t.then(r,n)}catch(o){n(o)}}):new e(function(r){r(t)})},e.reject=function(t){return new e(function(r,n){n(t)})},e.all=function(t){if(!(!t||!t.length))return new e(function(r,n){try{for(var o=[],i=0,s=0;s<t.length;s++){var a=t[s];a&&au(a.then)?(i++,a.then(V5(o,s,function(){--i===0&&r(o)}),n)):o[s]=a}i===0&&setTimeout(function(){r(o)},0)}catch(c){n(c)}})},e.race=function(t){return new e(function(r,n){if(!(!t||!t.length))try{for(var o=function(s){var a=t[s];a&&au(a.then)?a.then(r,n):setTimeout(function(){r(a)},0)},i=0;i<t.length;i++)o(i)}catch(s){n(s)}})},e}(),ka=W5});function kd(){return new Date().getTime()}var G5,NM,vm,cu,Wx,z5,LM,FM=Ne(()=>{Dr();Vx();Ss();G5=6e5,NM=0,vm=[],cu=[],Wx=[];z5=function(){function e(t,r){var n=0,o=(t||"<unnamed>")+"."+NM;NM++,lt(e,this,function(a){var c=null,u=0;a.scheduleEvent=function(d,f,p){var m=o+"."+u;u++,f&&(m+="-("+f+")");var h=m+"{"+n+"}";n++;var g={evt:null,tm:kd(),id:h,isRunning:!1,isAborted:!1};return c?g.evt=I(g,c):g.evt=x(g),c=g,c.evt._schId=h,g.evt;function v(P){for(var T=kd(),D=T-G5,R=P.length,k=0;k<R;){var U=P[k];if(U&&U.tm<D){var W=null;U.abort?(W="Aborting ["+U.id+"] due to Excessive runtime ("+(T-U.tm)+" ms)",U.abort(W)):W="Removing ["+U.id+"] due to Excessive runtime ("+(T-U.tm)+" ms)",s(W),P.splice(k,1),R--}else k++}}function w(P,T){var D=!1,R=l(vm,P);if(R||(R=l(Wx,P),D=!0),R){R.to&&(clearTimeout(R.to),R.to=null);var k=kd()-R.tm;T?D?s("Timed out event ["+P+"] finally complete -- "+k+" ms"):i("Promise ["+P+"] Complete -- "+k+" ms"):(Wx.push(R),s("Event ["+P+"] Timed out and removed -- "+k+" ms"))}else i("Failed to remove ["+P+"] from running queue");c&&c.id===P&&(c=null),v(vm),v(cu),v(Wx)}function E(P,T){return function(D){return w(P,!0),T&&T(D),D}}function C(P,T,D,R){T.then(function(k){return k instanceof ka?(i("Event ["+P+"] returned a promise -- waiting"),C(P,k,D,R),k):E(P,D)(k)},E(P,R))}function S(P,T){var D=P.id;return new ka(function(R,k){i("Event ["+D+"] Starting -- waited for "+(P.wTm||"--")+" ms"),P.isRunning=!0,P.abort=function(W){P.abort=null,P.isAborted=!0,w(D,!1),k(new Error(W))};var U=T(D);U instanceof ka?(p&&(P.to=setTimeout(function(){w(D,!1),k(new Error("Timed out after ["+p+"] ms"))},p)),C(D,U,function(W){i("Event ["+D+"] Resolving after "+(kd()-P.tm)+" ms"),R(W)},k)):(i("Promise ["+D+"] Auto completed as the start action did not return a promise"),R())})}function x(P){var T=kd();return P.wTm=T-P.tm,P.tm=T,P.isAborted?ka.reject(new Error("["+m+"] was aborted")):(vm.push(P),S(P,d))}function I(P,T){var D=new ka(function(R,k){var U=kd()-T.tm,W=T.id;i("["+m+"] is waiting for ["+W+":"+U+" ms] to complete before starting -- ["+cu.length+"] waiting and ["+vm.length+"] running"),P.abort=function(j){P.abort=null,l(cu,m),P.isAborted=!0,k(new Error(j))},T.evt.then(function(j){l(cu,m),x(P).then(R,k)},function(j){l(cu,m),x(P).then(R,k)})});return cu.push(P),D}};function l(d,f){for(var p=0;p<d.length;p++)if(d[p].id===f)return d.splice(p,1)[0];return null}});function i(a){var c=Go();c&&c.QUnit&&console&&console.log("ESPromiseScheduler["+o+"] "+a)}function s(a){ni(r,"ESPromiseScheduler["+o+"] "+a)}}return e.incomplete=function(){return vm},e.waitingToStart=function(){return cu},e}(),LM=z5});var MM,$M=Ne(()=>{Ss();lm();gm();MM=function(){function e(t){var r=this,n={},o=[],i=[];t&&i.push(t);function s(l,d){var f,p=n[l];if(p&&(f=p[d]),!f&&f!==null){if(qt(l)&&qt(d))if(i.length>0){for(var m=0;m<i.length;m++)if(i[m].handleField(l,d)){f={canHandle:!0,fieldHandler:i[m]};break}}else o.length===0&&(f={canHandle:!0});if(!f&&f!==null){f=null;for(var m=0;m<o.length;m++)if(o[m].handleField(l,d)){f={canHandle:!0,handler:o[m],fieldHandler:null};break}}p||(p=n[l]={}),p[d]=f}return f}r.addSanitizer=function(l){l&&(o.push(l),n={})},r.addFieldSanitizer=function(l){l&&(i.push(l),n={})},r.handleField=function(l,d){var f=s(l,d);return f?f.canHandle:!1},r.value=function(l,d,f,p){var m=s(l,d);if(m&&m.canHandle){if(!m||!m.canHandle)return null;if(m.handler)return m.handler.value(l,d,f,p);if(!qt(d)||Xe(f)||f===ui)return null;var h=null,g=li(f);if((g&8192)===8192){var v=g&-8193;if(h=f,!sr(h.value)||v!==1&&v!==2&&v!==3&&(v&4096)!==4096)return null}else g===1||g===2||g===3||(g&4096)===4096?h=c(l,d,f):g===4&&(h=c(l,d,p?JSON.stringify(f):f));if(h)return a(m,l,d,g,h,p)}return null},r.property=function(l,d,f,p){var m=s(l,d);if(!m||!m.canHandle||!qt(d)||Xe(f)||!sr(f.value))return null;var h=li(f.value);return h===0?null:a(m,l,d,h,f,p)};function a(l,d,f,p,m,h){if(l.handler)return l.handler.property(d,f,m,h);if(!Xe(m.kind)){if((p&4096)===4096||!Rd(m.kind))return null;m.value=m.value.toString()}return u(l.fieldHandler,d,f,p,m)}function c(l,d,f){return sr(f)?{value:f}:null}function u(l,d,f,p,m){if(m&&l){var h=l.getSanitizer(d,f,p,m.kind,m.propertyType);if(h)if(p===4){var g={},v=m.value;Dt(v,function(E,C){var S=d+"."+f;if(sr(C)){var x=c(S,E,C);x=u(l,S,E,li(C),x),x&&(g[E]=x.value)}}),m.value=g}else{var w={path:d,name:f,type:p,prop:m,sanitizer:r};m=h.call(r,w)}}return m}}return e.getFieldType=li,e}()});var UM={};xE(UM,{AppInsightsCore:()=>RM,BaseCore:()=>AM,BaseTelemetryPlugin:()=>nu,CoreUtils:()=>DM,DiagnosticLogger:()=>ri,ESPromise:()=>ka,ESPromiseScheduler:()=>LM,EventHelper:()=>yx,EventLatency:()=>CM,EventPersistence:()=>SM,EventPropertyType:()=>_M,EventsDiscardedReason:()=>ei,FullVersionString:()=>xs,InternalAppInsightsCore:()=>sm,InternalBaseCore:()=>ou,LoggingSeverity:()=>Ox,MinChannelPriorty:()=>_b,NotificationManager:()=>im,PerfEvent:()=>Jc,PerfManager:()=>Bp,ProcessTelemetryContext:()=>Ix,TraceLevel:()=>bM,Undefined:()=>nr,Utils:()=>IM,ValueKind:()=>EM,ValueSanitizer:()=>MM,Version:()=>By,_ExtendedInternalMessageId:()=>xM,_InternalLogMessage:()=>Qc,_InternalMessageId:()=>um,__getRegisteredEvents:()=>gx,_logInternalMessage:()=>ax,_throwInternal:()=>Ot,_warnToConsole:()=>ni,addEventHandler:()=>Ta,addEventListeners:()=>Ry,addPageHideEventListener:()=>_d,addPageShowEventListener:()=>Sd,addPageUnloadEventListener:()=>tu,areCookiesSupported:()=>si,arrForEach:()=>we,arrIndexOf:()=>pr,arrMap:()=>Bc,arrReduce:()=>Vc,attachEvent:()=>Ed,cookieAvailable:()=>si,createCookieMgr:()=>vs,createEnumStyle:()=>Qr,createGuid:()=>Bx,createProcessTelemetryContext:()=>Sn,createTraceParent:()=>_x,createUniqueNamespace:()=>ii,createUnloadHandlerContainer:()=>ru,dateNow:()=>mr,deleteCookie:()=>jx,detachEvent:()=>Cd,disableCookies:()=>$x,disallowsSameSiteNone:()=>yd,doPerf:()=>zt,dumpObj:()=>Ut,eventOff:()=>eu,eventOn:()=>Zc,extend:()=>Ra,findW3cTraceParent:()=>xx,formatTraceParent:()=>bx,generateW3CId:()=>ws,getCommonSchemaMetaData:()=>hm,getConsole:()=>$p,getCookie:()=>Hx,getCookieValue:()=>qx,getCrypto:()=>Up,getDocument:()=>_n,getExceptionName:()=>Wc,getFieldValueType:()=>li,getGlobal:()=>Go,getGlobalInst:()=>Bt,getHistory:()=>Zb,getIEVersion:()=>ex,getISOString:()=>To,getJSON:()=>pd,getLocation:()=>Yc,getMsCrypto:()=>jp,getNavigator:()=>Xn,getPerformance:()=>fd,getSetValue:()=>ya,getTenantId:()=>fm,getTime:()=>Jr,getWindow:()=>Mi,hasDocument:()=>gy,hasHistory:()=>vy,hasJSON:()=>Kc,hasNavigator:()=>Mp,hasOwnProperty:()=>ds,hasWindow:()=>Fp,isArray:()=>Ye,isArrayValid:()=>Vy,isBeaconsSupported:()=>Ea,isBoolean:()=>fs,isChromium:()=>Wy,isDate:()=>ad,isDocumentObjectAvailable:()=>dm,isError:()=>qc,isFetchSupported:()=>md,isFunction:()=>it,isIE:()=>ti,isLatency:()=>pm,isNotTruthy:()=>Fb,isNullOrUndefined:()=>Xe,isNumber:()=>wn,isObject:()=>Ir,isReactNative:()=>gs,isSampledFlag:()=>Sx,isString:()=>qt,isTruthy:()=>cd,isTypeof:()=>id,isUint8ArrayAvailable:()=>Mx,isUndefined:()=>gt,isValidSpanId:()=>Td,isValidTraceId:()=>Pd,isValidTraceParent:()=>Oy,isValueAssigned:()=>sr,isValueKind:()=>Rd,isWindowObjectAvailable:()=>Fx,isXhrSupported:()=>hd,mergeEvtNamespace:()=>ys,newGuid:()=>bd,newId:()=>Sa,normalizeJsName:()=>jc,objCreate:()=>Li,objDefineAccessors:()=>Kn,objForEachKey:()=>Dt,objFreeze:()=>En,objKeys:()=>Xr,objSeal:()=>Lb,openXhr:()=>Gy,optimizeObject:()=>ps,parseTraceParent:()=>tm,perfNow:()=>xd,proxyAssign:()=>Mb,proxyFunctionAs:()=>wa,proxyFunctions:()=>Gc,random32:()=>oi,randomValue:()=>vd,removeEventHandler:()=>Dy,removeEventListeners:()=>Pa,removePageHideEventListener:()=>Zp,removePageShowEventListener:()=>em,removePageUnloadEventListener:()=>Jp,safeGetCookieMgr:()=>xa,safeGetLogger:()=>Hp,sanitizeProperty:()=>mm,setCookie:()=>Ux,setEnableEnvMocks:()=>Jb,setProcessTelemetryTimings:()=>su,setValue:()=>Cn,strContains:()=>Qt,strEndsWith:()=>Hc,strFunction:()=>bo,strObject:()=>rr,strPrototype:()=>or,strStartsWith:()=>sd,strTrim:()=>Rt,strUndefined:()=>nr,throwError:()=>hr,toISOString:()=>To,useXDomainRequest:()=>Xc});var uu=Ne(()=>{PM();kM();OM();Vx();FM();$M();Ss();gm()});var lu,zy,Yy,Gx=Ne(()=>{lu="REAL_TIME",zy="NEAR_REAL_TIME",Yy="BEST_EFFORT"});var di,Ky,jM,Xy,HM,zx,qM,BM,VM,Yx,Kx,Qy,WM,Xx,GM,Qx,Jy,Jx,Zy,ew,tw,ym,Zx,zM,Ad,e0,rw,wm=Ne(()=>{di="",Ky="POST",jM="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Xy="drop",HM="send",zx="requeue",qM="rspFail",BM="oth",VM="no-cache, no-store",Yx="application/x-json-stream",Kx="cache-control",Qy="content-type",WM="kill-tokens",Xx="kill-duration",GM="kill-duration-seconds",Qx="time-delta-millis",Jy="client-version",Jx="client-id",Zy="time-delta-to-apply-millis",ew="upload-time",tw="apikey",ym="AuthMsaDeviceTicket",Zx="AuthXToken",zM="NoResponseBody",Ad="msfpc",e0="trace",rw="user"});function KM(e){var t=(e.ext||{}).intweb;return t&&sr(t[Ad])?t[Ad]:null}function YM(e){for(var t=null,r=0;t===null&&r<e.length;r++)t=KM(e[r]);return t}var Od,t0=Ne(()=>{uu();wm();Od=function(){function e(t,r){var n=r?[].concat(r):[],o=this,i=YM(n);o.iKey=function(){return t},o.Msfpc=function(){return i||di},o.count=function(){return n.length},o.events=function(){return n},o.addEvent=function(s){return s?(n.push(s),i||(i=KM(s)),!0):!1},o.split=function(s,a){var c;if(s<n.length){var u=n.length-s;Xe(a)||(u=a<u?a:u),c=n.splice(s,u),i=YM(n)}return new e(t,c)}}return e.create=function(t,r){return new e(t,r)},e}()});var Y5,XM,QM=Ne(()=>{Dr();Y5=function(){function e(){var t=!0,r=!0,n=!0,o="use-collector-delta",i=!1;lt(e,this,function(s){s.allowRequestSending=function(){return t},s.firstRequestSent=function(){n&&(n=!1,i||(t=!1))},s.shouldAddClockSkewHeaders=function(){return r},s.getClockSkewHeaderValue=function(){return o},s.setClockSkew=function(a){i||(a?(o=a,r=!0,i=!0):r=!1,t=!0)}})}return e.__ieDyn=1,e}(),XM=Y5});var K5,X5,JM,ZM=Ne(()=>{Dr();uu();K5=1e3,X5=function(){function e(){var t={};function r(n){var o=[];return n&&we(n,function(i){o.push(Rt(i))}),o}lt(e,this,function(n){n.setKillSwitchTenants=function(o,i){if(o&&i)try{var s=r(o.split(","));if(i==="this-request-only")return s;for(var a=parseInt(i,10)*K5,c=0;c<s.length;++c)t[s[c]]=mr()+a}catch{return[]}return[]},n.isTenantKilled=function(o){var i=t,s=Rt(o);return i[s]!==void 0&&i[s]>mr()?!0:(delete i[s],!1)}})}return e.__ieDyn=1,e}(),JM=X5});function t$(e){return!(e>=300&&e<500&&e!=408&&e!=429||e==501||e==505)}function nw(e){var t=0,r=e$*Q5,n=e$*J5,o=Math.floor(Math.random()*(n-r))+r;return t=Math.pow(2,e)*o,Math.min(t,Z5)}var Q5,J5,e$,Z5,r0=Ne(()=>{Q5=.8,J5=1.2,e$=3e3,Z5=6e5});function n$(e,t,r,n){if(n&&e){var o=hm(n.value,n.kind,n.propertyType);if(o>-1){var i=e[r$];i||(i=e[r$]={f:{}});var s=i[ow];if(s||(s=i[ow]={}),t)for(var a=0;a<t.length;a++){var c=t[a];s[c]||(s[c]={f:{}});var u=s[c][ow];u||(u=s[c][ow]={}),s=u}s=s[r]={},Ye(n.value)?s.a={t:o}:s.t=o}}}var e8,t8,o$,i$,r8,r$,ow,n8,s$,a$=Ne(()=>{Dr();uu();t0();wm();e8=20,t8=3984588,o$=65e3,i$=2e6,r8=Math.min(i$,o$),r$="metadata",ow="f",n8=/\./,s$=function(){function e(t,r,n,o){var i="data",s="baseData",a="ext",c=!!o,u=!0,l=r,d={};lt(e,this,function(f){f.createPayload=function(h,g,v,w,E,C){return{apiKeys:[],payloadBlob:di,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:h,isTeardown:g,isSync:v,isBeacon:w,sendType:C,sendReason:E}},f.appendPayload=function(h,g,v){var w=h&&g&&!h.overflow;return w&&zt(t,function(){return"Serializer:appendPayload"},function(){for(var E=g.events(),C=h.payloadBlob,S=h.numEvents,x=!1,I=[],P=[],T=h.isBeacon,D=T?o$:t8,R=T?r8:i$,k=0,U=0;k<E.length;){var W=E[k];if(W){if(S>=v){h.overflow=g.split(k);break}var j=f.getEventBlob(W);if(j&&j.length<=R){var $=j.length,O=C.length;if(O+$>D){h.overflow=g.split(k);break}C&&(C+=`
`),C+=j,U++,U>e8&&(C.substr(0,1),U=0),x=!0,S++}else j?I.push(W):P.push(W),E.splice(k,1),k--}k++}if(I&&I.length>0&&h.sizeExceed.push(Od.create(g.iKey(),I)),P&&P.length>0&&h.failedEvts.push(Od.create(g.iKey(),P)),x){h.batches.push(g),h.payloadBlob=C,h.numEvents=S;var H=g.iKey();pr(h.apiKeys,H)===-1&&h.apiKeys.push(H)}},function(){return{payload:h,theBatch:{iKey:g.iKey(),evts:g.events()},max:v}}),w},f.getEventBlob=function(h){try{return zt(t,function(){return"Serializer.getEventBlob"},function(){var g={};g.name=h.name,g.time=h.time,g.ver=h.ver,g.iKey="o:"+fm(h.iKey);var v={},w=h[a];w&&(g[a]=v,Dt(w,function(S,x){var I=v[S]={};m(x,I,"ext."+S,!0,null,null,!0)}));var E=g[i]={};E.baseType=h.baseType;var C=E[s]={};return m(h.baseData,C,s,!1,[s],function(S,x,I){n$(v,S,x,I)},u),m(h.data,E,i,!1,[],function(S,x,I){n$(v,S,x,I)},u),JSON.stringify(g)},function(){return{item:h}})}catch{return null}};function p(h,g){var v=d[h];return v===void 0&&(h.length>=7&&(v=sd(h,"ext.metadata")||sd(h,"ext.web")),d[h]=v),v}function m(h,g,v,w,E,C,S){Dt(h,function(x,I){var P=null;if(I||sr(I)){var T=v,D=x,R=E,k=g;if(c&&!w&&n8.test(x)){var U=x.split("."),W=U.length;if(W>1){R&&(R=R.slice());for(var j=0;j<W-1;j++){var $=U[j];k=k[$]=k[$]||{},T+="."+$,R&&R.push($)}D=U[W-1]}}var O=w&&p(T,D);if(!O&&l&&l.handleField(T,D)?P=l.value(T,D,I,n):P=mm(D,I,n),P){var H=P.value;if(k[D]=H,C&&C(R,D,P),S&&typeof H=="object"&&!Ye(H)){var Q=R;Q&&(Q=Q.slice(),Q.push(D)),m(I,H,T+"."+D,w,Q,C,S)}}}})}})}return e.__ieDyn=1,e}()});function fu(e,t,r){o0[e]=t,r!==!1&&(i0[t]=e)}function u$(e){try{return e.responseText}catch{}return di}function l$(e,t){var r=!1;if(e&&t){var n=Xr(e);if(n&&n.length>0)for(var o=t.toLowerCase(),i=0;i<n.length;i++){var s=n[i];if(s&&ds(t,s)&&s.toLowerCase()===o){r=!0;break}}}return r}function Nd(e,t,r,n){t&&r&&r.length>0&&(n&&o0[t]?(e.hdrs[o0[t]]=r,e.useHdrs=!0):e.url+="&"+t+"="+r)}function d$(e,t){return t&&(wn(t)?e=[t].concat(e):Ye(t)&&(e=t.concat(e))),e}var du,n0,c$,o8,o0,i0,f$,p$=Ne(()=>{Dr();QM();ZM();uu();wm();r0();a$();n0="sendAttempt",c$="&"+zM+"=true",o8=(du={},du[1]=zx,du[100]=zx,du[200]="sent",du[8004]=Xy,du[8003]=Xy,du),o0={},i0={};fu(ym,ym,!1);fu(Jy,Jy);fu(Jx,"Client-Id");fu(tw,tw);fu(Zy,Zy);fu(ew,ew);fu(Zx,Zx);f$=function(){function e(t,r,n,o,i){this._responseHandlers=[];var s="?cors=true&"+Qy.toLowerCase()+"="+Yx,a=new JM,c=!1,u=new XM,l=!1,d=0,f,p,m,h,g=!0,v=[],w={},E=[],C=null,S=!1,x,I=!1,P=!1,T,D,R,k,U;lt(e,this,function(W){var j=!0;W.initialize=function(G,ne,ae,pe,de){var He;de||(de={}),s=G+s,P=gt(de.avoidOptions)?!0:!de.avoidOptions,h=ne,x=ne.getCookieMgr(),S=!h.config.disableEventTimings;var ke=!!h.config.enableCompoundKey;f=ae,p=f.diagLog();var Y=de.valueSanitizer,te=de.stringifyObjects;gt(de.enableCompoundKey)||(ke=!!de.enableCompoundKey),T=de.xhrTimeout,D=!!de.disableXhrSync,R=!!de.disableFetchKeepAlive,U=de.addNoResponse!==!1,l=!gs(),C=new s$(h,Y,te,ke),Xe(de.useSendBeacon)||(l=!!de.useSendBeacon);var J=pe,ue=de.alwaysUseXhrOverride?pe:null,ge=de.alwaysUseXhrOverride?pe:null,De=[3,2];if(!pe){g=!1;var Be=Yc();Be&&Be.protocol&&Be.protocol.toLowerCase()==="file:"&&(j=!1);var je=[];gs()?(je=[2,1],De=[2,1,3]):je=[1,2,3],je=d$(je,de.transports),pe=$(je,!1),pe||ni(p,"No available transport to send events"),J=$(je,!0)}ue||(De=d$(De,de.unloadTransports),ue=$(De,!0)),k=!g&&(l&&Ea()||!R&&md(!0)),m=(He={},He[0]=pe,He[1]=J||$([1,2,3],!0),He[2]=ue||J||$([1],!0),He[3]=ge||$([2,3],!0)||J||$([1],!0),He)};function $(G,ne){for(var ae=0,pe=null,de=0;pe==null&&de<G.length;)ae=G[de],ae===1?Xc()?pe=O:hd()&&(pe=Q):ae===2&&md(ne)&&(!ne||ne&&!R)?pe=H:l&&ae===3&&Ea()&&(pe=Z),de++;return pe?{_transport:ae,_isSync:ne,sendPOST:pe}:null}W._getDbgPlgTargets=function(){return[m[0],a,C,m]};function O(G,ne,ae){var pe=new XDomainRequest;pe.open(Ky,G.urlString),G.timeout&&(pe.timeout=G.timeout),pe.onload=function(){var de=u$(pe);M(ne,200,{},de),Tn(de)},pe.onerror=function(){M(ne,400,{})},pe.ontimeout=function(){M(ne,500,{})},pe.onprogress=function(){},ae?pe.send(G.data):i.set(function(){pe.send(G.data)},0)}function H(G,ne,ae){var pe,de=G.urlString,He=!1,ke=!1,Y=(pe={body:G.data,method:Ky},pe[jM]=!0,pe);ae&&(Y.keepalive=!0,G._sendReason===2&&(He=!0,U&&(de+=c$))),j&&(Y.credentials="include"),G.headers&&Xr(G.headers).length>0&&(Y.headers=G.headers),fetch(de,Y).then(function(te){var J={},ue=di,ge=te.headers;ge&&ge.forEach(function(De,Be){J[Be]=De}),te.body&&te.text().then(function(De){ue=De}),ke||(ke=!0,M(ne,te.status,J,ue),Tn(ue))}).catch(function(te){ke||(ke=!0,M(ne,0,{}))}),He&&!ke&&(ke=!0,M(ne,200,{})),!ke&&G.timeout>0&&i.set(function(){ke||(ke=!0,M(ne,500,{}))},G.timeout)}function Q(G,ne,ae){var pe=G.urlString;function de(te,J,ue){if(!te[ue]&&J&&J.getResponseHeader){var ge=J.getResponseHeader(ue);ge&&(te[ue]=Rt(ge))}return te}function He(te){var J={};return te.getAllResponseHeaders?J=oe(te.getAllResponseHeaders()):(J=de(J,te,Qx),J=de(J,te,Xx),J=de(J,te,GM)),J}function ke(te,J){M(ne,te.status,He(te),J)}ae&&G.disableXhrSync&&(ae=!1);var Y=Gy(Ky,pe,j,!0,ae,G.timeout);Dt(G.headers,function(te,J){Y.setRequestHeader(te,J)}),Y.onload=function(){var te=u$(Y);ke(Y,te),Tn(te)},Y.onerror=function(){ke(Y)},Y.ontimeout=function(){ke(Y)},Y.send(G.data)}function M(G,ne,ae,pe){try{G(ne,ae,pe)}catch(de){Ot(p,2,518,Ut(de))}}function Z(G,ne,ae){var pe=G,de=200,He=pe._thePayload,ke=G.urlString+(U?c$:di);try{var Y=Xn();if(!Y.sendBeacon(ke,G.data))if(He){var te=[];we(He.batches,function(J){if(te&&J&&J.count()>0){for(var ue=J.events(),ge=0;ge<ue.length;ge++)if(!Y.sendBeacon(ke,C.getEventBlob(ue[ge]))){te.push(J.split(ge));break}}else te.push(J.split(0))}),xt(te,8003,He.sendType,!0)}else de=0}catch(J){ni(p,"Failed to send telemetry using sendBeacon API. Ex:"+Ut(J)),de=0}finally{M(ne,de,{},di)}}function re(G){return G===2||G===3}function K(G){return I&&re(G)&&(G=2),G}W.addQueryStringParameter=function(G,ne){for(var ae=0;ae<v.length;ae++)if(v[ae].name===G){v[ae].value=ne;return}v.push({name:G,value:ne})},W.addHeader=function(G,ne){w[G]=ne},W.canSendRequest=function(){return fe()&&u.allowRequestSending()},W.sendQueuedRequests=function(G,ne){gt(G)&&(G=0),I&&(G=K(G),ne=2),ye(E,G,0)&&Te(_e(),0,!1,G,ne||0)},W.isCompletelyIdle=function(){return!c&&d===0&&E.length===0},W.setUnloading=function(G){I=G},W.addBatch=function(G){if(G&&G.count()>0){if(a.isTenantKilled(G.iKey()))return!1;E.push(G)}return!0},W.teardown=function(){E.length>0&&Te(_e(),0,!0,2,2)},W.pause=function(){c=!0},W.resume=function(){c=!1,W.sendQueuedRequests(0,4)},W.sendSynchronousBatch=function(G,ne,ae){G&&G.count()>0&&(Xe(ne)&&(ne=1),I&&(ne=K(ne),ae=2),Te([G],0,!1,ne,ae||0))};function fe(){return!c&&d<r}function _e(){var G=E;return E=[],G}function ye(G,ne,ae){var pe=!1;return G&&G.length>0&&!c&&m[ne]&&C&&(pe=ne!==0||fe()&&(ae>0||u.allowRequestSending())),pe}function Ee(G){var ne={};return G&&we(G,function(ae,pe){ne[pe]={iKey:ae.iKey(),evts:ae.events()}}),ne}function Te(G,ne,ae,pe,de){if(!(!G||G.length===0)){if(c){xt(G,1,pe);return}pe=K(pe);try{var He=G,ke=pe!==0;zt(h,function(){return"HttpManager:_sendBatches"},function(Y){Y&&(G=G.slice(0));for(var te=[],J=null,ue=Jr(),ge=m[pe]||(ke?m[1]:m[0]),De=ge&&ge._transport,Be=k&&(I||re(pe)||De===3||ge._isSync&&De===2);ye(G,pe,ne);){var je=G.shift();je&&je.count()>0&&(a.isTenantKilled(je.iKey())?te.push(je):(J=J||C.createPayload(ne,ae,ke,Be,de,pe),C.appendPayload(J,je,t)?J.overflow!==null&&(G=[J.overflow].concat(G),J.overflow=null,Se(J,ue,Jr(),de),ue=Jr(),J=null):(Se(J,ue,Jr(),de),ue=Jr(),G=[je].concat(G),J=null)))}J&&Se(J,ue,Jr(),de),G.length>0&&(E=G.concat(E)),xt(te,8004,pe)},function(){return{batches:Ee(He),retryCount:ne,isTeardown:ae,isSynchronous:ke,sendReason:de,useSendBeacon:re(pe),sendType:pe}},!ke)}catch(Y){Ot(p,2,48,"Unexpected Exception sending batch: "+Ut(Y))}}}function Je(G,ne){var ae={url:s,hdrs:{},useHdrs:!1};ne?(ae.hdrs=Ra(ae.hdrs,w),ae.useHdrs=Xr(ae.hdrs).length>0):Dt(w,function(Y,te){i0[Y]?Nd(ae,i0[Y],te,!1):(ae.hdrs[Y]=te,ae.useHdrs=!0)}),Nd(ae,Jx,"NO_AUTH",ne),Nd(ae,Jy,xs,ne);var pe=di;we(G.apiKeys,function(Y){pe.length>0&&(pe+=","),pe+=Y}),Nd(ae,tw,pe,ne),Nd(ae,ew,mr().toString(),ne);var de=no(G);if(sr(de)&&(ae.url+="&ext.intweb.msfpc="+de),u.shouldAddClockSkewHeaders()&&Nd(ae,Zy,u.getClockSkewHeaderValue(),ne),h.getWParam){var He=h.getWParam();He>=0&&(ae.url+="&w="+He)}for(var ke=0;ke<v.length;ke++)ae.url+="&"+v[ke].name+"="+v[ke].value;return ae}function Ge(G,ne,ae){G[ne]=G[ne]||{},G[ne][f.identifier]=ae}function Se(G,ne,ae,pe){if(G&&G.payloadBlob&&G.payloadBlob.length>0){var de=!!W.sendHook,He=m[G.sendType];!re(G.sendType)&&G.isBeacon&&G.sendReason===2&&(He=m[2]||m[3]||He);var ke=P;(G.isBeacon||He._transport===3)&&(ke=!1);var Y=Je(G,ke);ke=ke||Y.useHdrs;var te=Jr();zt(h,function(){return"HttpManager:_doPayloadSend"},function(){for(var J=0;J<G.batches.length;J++)for(var ue=G.batches[J],ge=ue.events(),De=0;De<ge.length;De++){var Be=ge[De];if(S){var je=Be.timings=Be.timings||{};Ge(je,"sendEventStart",te),Ge(je,"serializationStart",ne),Ge(je,"serializationCompleted",ae)}Be[n0]>0?Be[n0]++:Be[n0]=1}xt(G.batches,1e3+(pe||0),G.sendType,!0);var ze={data:G.payloadBlob,urlString:Y.url,headers:Y.hdrs,_thePayload:G,_sendReason:pe,timeout:T,disableXhrSync:D,disableFetchKeepAlive:R};ke&&(l$(ze.headers,Kx)||(ze.headers[Kx]=VM),l$(ze.headers,Qy)||(ze.headers[Qy]=Yx));var Ve=null;He&&(Ve=function(kt){u.firstRequestSent();var ve=function(Vr,$e){Fe(Vr,$e,G,pe)},ur=G.isTeardown||G.isSync;try{He.sendPOST(kt,ve,ur),W.sendListener&&W.sendListener(ze,kt,ur,G.isBeacon)}catch(Vr){ni(p,"Unexpected exception sending payload. Ex:"+Ut(Vr)),M(ve,0,{})}}),zt(h,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(Ve)if(G.sendType===0&&d++,de&&!G.isBeacon&&He._transport!==3){var kt={data:ze.data,urlString:ze.urlString,headers:Ra({},ze.headers),timeout:ze.timeout,disableXhrSync:ze.disableXhrSync,disableFetchKeepAlive:ze.disableFetchKeepAlive},ve=!1;zt(h,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{W.sendHook(kt,function(ur){ve=!0,!g&&!ur._thePayload&&(ur._thePayload=ur._thePayload||ze._thePayload,ur._sendReason=ur._sendReason||ze._sendReason),Ve(ur)},G.isSync||G.isTeardown)}catch{ve||Ve(ze)}})}else Ve(ze)})},function(){return{thePayload:G,serializationStart:ne,serializationCompleted:ae,sendReason:pe}},G.isSync)}G.sizeExceed&&G.sizeExceed.length>0&&xt(G.sizeExceed,8003,G.sendType),G.failedEvts&&G.failedEvts.length>0&&xt(G.failedEvts,8002,G.sendType)}function Ie(G,ne){S&&we(G,function(ae){var pe=ae.timings=ae.timings||{};Ge(pe,"sendEventCompleted",ne)})}function Fe(G,ne,ae,pe){var de=9e3,He=null,ke=!1,Y=!1;try{var te=!0;if(typeof G!==nr){if(ne){u.setClockSkew(ne[Qx]);var J=ne[Xx]||ne["kill-duration-seconds"];we(a.setKillSwitchTenants(ne[WM],J),function(ge){we(ae.batches,function(De){if(De.iKey()===ge){He=He||[];var Be=De.split(0);ae.numEvents-=Be.count(),He.push(Be)}})})}if(G==200||G==204){de=200;return}(!t$(G)||ae.numEvents<=0)&&(te=!1),de=9e3+G%1e3}if(te){de=100;var ue=ae.retryCnt;ae.sendType===0&&(ue<n?(ke=!0,Pn(function(){ae.sendType===0&&d--,Te(ae.batches,ue+1,ae.isTeardown,I?2:ae.sendType,5)},I,nw(ue))):(Y=!0,I&&(de=8001)))}}finally{ke||(u.setClockSkew(),et(ae,de,pe,Y)),xt(He,8004,ae.sendType)}}function et(G,ne,ae,pe){try{pe&&f._backOffTransmission(),ne===200&&(!pe&&!G.isSync&&f._clearBackOff(),ro(G.batches)),xt(G.batches,ne,G.sendType,!0)}finally{G.sendType===0&&(d--,ae!==5&&W.sendQueuedRequests(G.sendType,ae))}}function ro(G){if(S){var ne=Jr();we(G,function(ae){ae&&ae.count()>0&&Ie(ae.events(),ne)})}}function Pn(G,ne,ae){ne?G():i.set(G,ae)}function oe(G){var ne={};if(qt(G)){var ae=Rt(G).split(/[\r\n]+/);we(ae,function(pe){if(pe){var de=pe.indexOf(": ");if(de!==-1){var He=Rt(pe.substring(0,de)).toLowerCase(),ke=Rt(pe.substring(de+1));ne[He]=ke}else ne[Rt(pe)]=1}})}return ne}function no(G){for(var ne=0;ne<G.batches.length;ne++){var ae=G.batches[ne].Msfpc();if(ae)return encodeURIComponent(ae)}return di}function Tn(G){var ne=W._responseHandlers;try{for(var ae=0;ae<ne.length;ae++)try{ne[ae](G)}catch(de){Ot(p,1,519,"Response handler failed: "+de)}if(G){var pe=JSON.parse(G);sr(pe.webResult)&&sr(pe.webResult[Ad])&&x.set("MSFPC",pe.webResult[Ad],365*86400)}}catch{}}function xt(G,ne,ae,pe){if(G&&G.length>0&&o){var de=o[vt(ne)];if(de){var He=ae!==0;zt(h,function(){return"HttpManager:_sendBatchesNotification"},function(){Pn(function(){try{de.call(o,G,ne,He,ae)}catch(ke){Ot(p,1,74,"send request notification failed: "+ke)}},pe||He,0)},function(){return{batches:Ee(G),reason:ne,isSync:He,sendSync:pe,sendType:ae}},!He)}}}function vt(G){var ne=o8[G];return sr(ne)||(ne=BM,G>=9e3&&G<=9999?ne=qM:G>=8e3&&G<=8999?ne=Xy:G>=1e3&&G<=1999&&(ne=HM)),ne}})}return e.__ieDyn=1,e}()});function i8(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setTimeout(e,t,r)}function s8(e){clearTimeout(e)}function Em(e,t){return{set:e||i8,clear:t||s8}}var m$=Ne(()=>{});var a8,h$,c8,g$,v$,u8,y$,l8,pu,iw,w$,E$,d8,f8,C$,_$=Ne(()=>{hn();Dr();uu();Gx();t0();p$();wm();r0();m$();a8=.25,h$=500,c8=20,g$=6,v$=2,u8=4,y$=2,l8=1,pu="eventsDiscarded",iw="overrideInstrumentationKey",w$="maxEventRetryAttempts",E$="maxUnloadEventRetryAttempts",d8="addUnloadCb",f8=function(e){zo(t,e);function t(){var r=e.call(this)||this;r.identifier="PostChannel",r.priority=1011,r.version="3.2.8";var n,o=!1,i=[],s=null,a=!1,c=0,u=500,l=0,d=1e4,f={},p=lu,m=null,h=null,g=0,v=0,w,E,C={},S,x,I=-1,P,T=!0,D=!1,R=g$,k=v$,U,W;return lt(t,r,function(j,$){fe(),j._getDbgPlgTargets=function(){return[E]},j.initialize=function(Y,te,J){zt(te,function(){return"PostChannel:initialize"},function(){var ue=te;$.initialize(Y,te,J);try{var ge=!!te[d8];U=ys(ii(j.identifier),te.evtNamespace&&te.evtNamespace());var De=j._getTelCtx();Y.extensionConfig[j.identifier]=Y.extensionConfig[j.identifier]||{},n=De.getExtCfg(j.identifier),W=Em(n.setTimeoutOverride,n.clearTimeoutOverride),T=!n.disableOptimizeObj&&Wy(),O(ue),n.eventsLimitInMem>0&&(d=n.eventsLimitInMem),n.immediateEventLimit>0&&(u=n.immediateEventLimit),n.autoFlushEventsLimit>0&&(S=n.autoFlushEventsLimit),wn(n[w$])&&(R=n[w$]),wn(n[E$])&&(k=n[E$]),ke(),n.httpXHROverride&&n.httpXHROverride.sendPOST&&(w=n.httpXHROverride),sr(Y.anonCookieName)&&E.addQueryStringParameter("anoncknm",Y.anonCookieName),E.sendHook=n.payloadPreprocessor,E.sendListener=n.payloadListener;var Be=n.overrideEndpointUrl?n.overrideEndpointUrl:Y.endpointUrl;j._notificationManager=te.getNotifyMgr(),E.initialize(Be,j.core,j,w,n);var je=Y.disablePageUnloadEvents||[];tu(H,je,U),_d(H,je,U),Sd(Q,Y.disablePageShowEvents,U)}catch(ze){throw j.setInitialized(!1),ze}},function(){return{coreConfig:Y,core:te,extensions:J}})},j.processTelemetry=function(Y,te){su(Y,j.identifier),te=j._getTelCtx(te);var J=te.getExtCfg(j.identifier),ue=!!n.disableTelemetry;J&&(ue=ue||!!J.disableTelemetry);var ge=Y;!ue&&!o&&(n[iw]&&(ge.iKey=n[iw]),J&&J[iw]&&(ge.iKey=J[iw]),M(ge,!0),D?Ee(2,2):K()),j.processNext(ge,te)},j._doTeardown=function(Y,te){Ee(2,2),o=!0,E.teardown(),Jp(null,U),Zp(null,U),em(null,U),fe()};function O(Y){var te=Y.getWParam;Y.getWParam=function(){var J=0;return n.ignoreMc1Ms0CookieProcessing&&(J=J|2),J|te()}}function H(Y){var te=Y||Mi().event;te.type!=="beforeunload"&&(D=!0,E.setUnloading(D)),Ee(2,2)}function Q(Y){D=!1,E.setUnloading(D)}function M(Y,te){if(Y.sendAttempt||(Y.sendAttempt=0),Y.latency||(Y.latency=1),Y.ext&&Y.ext[e0]&&delete Y.ext[e0],Y.ext&&Y.ext[rw]&&Y.ext[rw].id&&delete Y.ext[rw].id,T&&(su,Y.ext=ps(Y.ext),Y.baseData&&(Y.baseData=ps(Y.baseData)),Y.data&&(Y.data=ps(Y.data))),Y.sync){if(g||a)Y.latency=3,Y.sync=!1;else if(E){T&&(Y=ps(Y)),E.sendSynchronousBatch(Od.create(Y.iKey,[Y]),Y.sync===!0?1:Y.sync,3);return}}var J=Y.latency,ue=l,ge=d;J===4&&(ue=c,ge=u);var De=!1;if(ue<ge)De=!Se(Y,te);else{var Be=1,je=c8;J===4&&(Be=4,je=1),De=!0,Ie(Y.iKey,Y.latency,Be,je)&&(De=!Se(Y,te))}De&&vt(pu,[Y],ei.QueueFull)}j.setEventQueueLimits=function(Y,te){d=Y>0?Y:1e4,S=te>0?te:0,ke();var J=l>Y;if(!J&&x>0)for(var ue=1;!J&&ue<=3;ue++){var ge=C[ue];ge&&ge.batches&&we(ge.batches,function(De){De&&De.count()>=x&&(J=!0)})}Ge(!0,J)},j.pause=function(){ye(),a=!0,E.pause()},j.resume=function(){a=!1,E.resume(),K()},j.addResponseHandler=function(Y){E._responseHandlers.push(Y)},j._loadTransmitProfiles=function(Y){oe(),Dt(Y,function(te,J){var ue=J.length;if(ue>=2){var ge=ue>2?J[2]:0;if(J.splice(0,ue-2),J[1]<0&&(J[0]=-1),J[1]>0&&J[0]>0){var De=J[0]/J[1];J[0]=Math.ceil(De)*J[1]}ge>=0&&J[1]>=0&&ge>J[1]&&(ge=J[1]),J.push(ge),f[te]=J}})},j.flush=function(Y,te,J){if(Y===void 0&&(Y=!0),!a)if(J=J||1,Y)s==null?(ye(),et(1,0,J),s=_e(function(){s=null,ro(te,J)},0)):i.push(te);else{var ue=ye();Z(1,1,J),te!=null&&te(),ue&&K()}},j.setMsaAuthTicket=function(Y){E.addHeader(ym,Y)},j.hasEvents=re,j._setTransmitProfile=function(Y){p!==Y&&f[Y]!==void 0&&(ye(),p=Y,K())};function Z(Y,te,J){var ue=et(Y,te,J);return E.sendQueuedRequests(te,J),ue}function re(){return l>0}function K(){if(I>=0&&et(I,0,P)&&E.sendQueuedRequests(0,P),c>0&&!h&&!a){var Y=f[p][2];Y>=0&&(h=_e(function(){h=null,Z(4,0,1),K()},Y))}var te=f[p][1];!m&&!s&&te>=0&&!a&&(re()?m=_e(function(){m=null,Z(v===0?3:1,0,1),v++,v%=2,K()},te):v=0)}j._backOffTransmission=function(){g<u8&&(g++,ye(),K())},j._clearBackOff=function(){g&&(g=0,ye(),K())};function fe(){n=null,o=!1,i=[],s=null,a=!1,c=0,u=500,l=0,d=1e4,f={},p=lu,m=null,h=null,g=0,v=0,w=null,C={},S=void 0,x=0,I=-1,P=null,T=!0,D=!1,R=g$,k=v$,U=null,W=Em(),E=new f$(h$,y$,l8,{requeue:Tn,send:ne,sent:ae,drop:pe,rspFail:de,oth:He},W),no(),Te(),ke()}function _e(Y,te){te===0&&g&&(te=1);var J=1e3;return g&&(J=nw(g-1)),W.set(Y,te*J)}function ye(){return m!==null?(W.clear(m),m=null,v=0,!0):!1}function Ee(Y,te){ye(),s&&(W.clear(s),s=null),a||Z(1,Y,te)}function Te(){C[4]={batches:[],iKeyMap:{}},C[3]={batches:[],iKeyMap:{}},C[2]={batches:[],iKeyMap:{}},C[1]={batches:[],iKeyMap:{}}}function Je(Y,te,J){var ue=C[te];ue||(te=1,ue=C[te]);var ge=ue.iKeyMap[Y];return!ge&&J&&(ge=Od.create(Y),ue.batches.push(ge),ue.iKeyMap[Y]=ge),ge}function Ge(Y,te){E.canSendRequest()&&!g&&(S>0&&l>S&&(te=!0),te&&s==null&&j.flush(Y,null,20))}function Se(Y,te){T&&(Y=ps(Y));var J=Y.latency,ue=Je(Y.iKey,J,!0);return ue.addEvent(Y)?(J!==4?(l++,te&&Y.sendAttempt===0&&Ge(!Y.sync,x>0&&ue.count()>=x)):c++,!0):!1}function Ie(Y,te,J,ue){for(;J<=te;){var ge=Je(Y,te,!0);if(ge&&ge.count()>0){var De=ge.split(0,ue),Be=De.count();if(Be>0)return J===4?c-=Be:l-=Be,G(pu,[De],ei.QueueFull),!0}J++}return Fe(),!1}function Fe(){for(var Y=0,te=0,J=function(ge){var De=C[ge];De&&De.batches&&we(De.batches,function(Be){ge===4?Y+=Be.count():te+=Be.count()})},ue=1;ue<=4;ue++)J(ue);l=te,c=Y}function et(Y,te,J){var ue=!1,ge=te===0;return!ge||E.canSendRequest()?zt(j.core,function(){return"PostChannel._queueBatches"},function(){for(var De=[],Be=4;Be>=Y;){var je=C[Be];je&&je.batches&&je.batches.length>0&&(we(je.batches,function(ze){E.addBatch(ze)?ue=ue||ze&&ze.count()>0:De=De.concat(ze.events()),Be===4?c-=ze.count():l-=ze.count()}),je.batches=[],je.iKeyMap={}),Be--}De.length>0&&vt(pu,De,ei.KillSwitch),ue&&I>=Y&&(I=-1,P=0)},function(){return{latency:Y,sendType:te,sendReason:J}},!ge):(I=I>=0?Math.min(I,Y):Y,P=Math.max(P,J)),ue}function ro(Y,te){Z(1,0,te),Fe(),Pn(function(){Y&&Y(),i.length>0?s=_e(function(){s=null,ro(i.shift(),te)},0):(s=null,K())})}function Pn(Y){E.isCompletelyIdle()?Y():s=_e(function(){s=null,Pn(Y)},a8)}function oe(){ye(),no(),p=lu,K()}function no(){f={},f[lu]=[2,1,0],f[zy]=[6,3,0],f[Yy]=[18,9,0]}function Tn(Y,te){var J=[],ue=R;D&&(ue=k),we(Y,function(ge){ge&&ge.count()>0&&we(ge.events(),function(De){De&&(De.sync&&(De.latency=4,De.sync=!1),De.sendAttempt<ue?(su(De,j.identifier),M(De,!1)):J.push(De))})}),J.length>0&&vt(pu,J,ei.NonRetryableStatus),D&&Ee(2,2)}function xt(Y,te){var J=j._notificationManager||{},ue=J[Y];if(ue)try{ue.apply(J,te)}catch(ge){Ot(j.diagLog(),1,74,Y+" notification failed: "+ge)}}function vt(Y,te){for(var J=[],ue=2;ue<arguments.length;ue++)J[ue-2]=arguments[ue];te&&te.length>0&&xt(Y,[te].concat(J))}function G(Y,te){for(var J=[],ue=2;ue<arguments.length;ue++)J[ue-2]=arguments[ue];te&&te.length>0&&we(te,function(ge){ge&&ge.count()>0&&xt(Y,[ge.events()].concat(J))})}function ne(Y,te,J){Y&&Y.length>0&&xt("eventsSendRequest",[te>=1e3&&te<=1999?te-1e3:0,J!==!0])}function ae(Y,te){G("eventsSent",Y,te),K()}function pe(Y,te){G(pu,Y,te>=8e3&&te<=8999?te-8e3:ei.Unknown)}function de(Y){G(pu,Y,ei.NonRetryableStatus),K()}function He(Y,te){G(pu,Y,ei.Unknown),K()}function ke(){!n||!n.disableAutoBatchFlushLimit?x=Math.max(h$*(y$+1),d/6):x=0}Kn(j,"_setTimeoutOverride",function(){return W.set},function(Y){W=Em(Y,W.clear)}),Kn(j,"_clearTimeoutOverride",function(){return W.clear},function(Y){W=Em(W.set,Y)})}),r}return t.__ieDyn=1,t}(nu),C$=f8});var S$={};xE(S$,{BE_PROFILE:()=>Yy,NRT_PROFILE:()=>zy,PostChannel:()=>C$,RT_PROFILE:()=>lu});var b$=Ne(()=>{_$();Gx()});var yU=B((Yye,vU)=>{var p8=Object.create,Cm=Object.defineProperty,m8=Object.defineProperties,h8=Object.getOwnPropertyDescriptor,g8=Object.getOwnPropertyDescriptors,v8=Object.getOwnPropertyNames,x$=Object.getOwnPropertySymbols,y8=Object.getPrototypeOf,I$=Object.prototype.hasOwnProperty,w8=Object.prototype.propertyIsEnumerable,P$=(e,t,r)=>t in e?Cm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,mu=(e,t)=>{for(var r in t||(t={}))I$.call(t,r)&&P$(e,r,t[r]);if(x$)for(var r of x$(t))w8.call(t,r)&&P$(e,r,t[r]);return e},E8=(e,t)=>m8(e,g8(t)),L=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),C8=(e,t)=>{for(var r in t)Cm(e,r,{get:t[r],enumerable:!0})},D$=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of v8(t))!I$.call(e,o)&&o!==r&&Cm(e,o,{get:()=>t[o],enumerable:!(n=h8(t,o))||n.enumerable});return e},sw=(e,t,r)=>(r=e!=null?p8(y8(e)):{},D$(t||!e||!e.__esModule?Cm(r,"default",{value:e,enumerable:!0}):r,e)),_8=e=>D$(Cm({},"__esModule",{value:!0}),e),Rr=L((e,t)=>{"use strict";var r=function(){function n(){}return n.info=function(o){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];n.enableDebug&&console.info(n.TAG+o,i)},n.warn=function(o){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];n.disableWarnings||console.warn(n.TAG+o,i)},n.enableDebug=!1,n.disableWarnings=!1,n.disableErrors=!1,n.TAG="ApplicationInsights:",n}();t.exports=r}),R$=L(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(i){for(var s,a=1,c=arguments.length;a<c;a++){s=arguments[a];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(i[u]=s[u])}return i},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncScopeManager=e.OpenTelemetryScopeManagerWrapper=void 0;var r=Fd(),n=require("events"),o=function(){function i(){}return i.prototype.active=function(){var s=this,a=r.CorrelationContextManager.getCurrentContext();return t(t({},a),{getValue:function(c){return s._activeSymbol?c===s._activeSymbol?a:!1:(s._activeSymbol=c,a)},setValue:function(){}})},i.prototype.with=function(s,a){var c=s.parentSpanId,u=s.name,l=i._spanToContext(s,c,u);return r.CorrelationContextManager.runWithContext(l,a)()},i.prototype.bind=function(s){return typeof s=="function"?r.CorrelationContextManager.wrapCallback(s):(s instanceof n.EventEmitter&&r.CorrelationContextManager.wrapEmitter(s),s)},i.prototype.enable=function(){return r.CorrelationContextManager.enable(),this},i.prototype.disable=function(){return r.CorrelationContextManager.disable(),this},i._spanToContext=function(s,a,c){var u=a?"|"+s.spanContext().traceId+"."+a+".":s.spanContext().traceId,l=t(t({},s.spanContext()),{traceFlags:s.spanContext().traceFlags}),d=r.CorrelationContextManager.spanToContextObject(l,u,c);return d},i}();e.OpenTelemetryScopeManagerWrapper=o,e.AsyncScopeManager=new o}),S8=L((e,t)=>{e=t.exports=oe;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var y=Array.prototype.slice.call(arguments,0);y.unshift("SEMVER"),console.log.apply(console,y)}:r=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,s=e.re=[],a=e.src=[],c=0,u=c++;a[u]="0|[1-9]\\d*";var l=c++;a[l]="[0-9]+";var d=c++;a[d]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=c++;a[f]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var p=c++;a[p]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var m=c++;a[m]="(?:"+a[u]+"|"+a[d]+")";var h=c++;a[h]="(?:"+a[l]+"|"+a[d]+")";var g=c++;a[g]="(?:-("+a[m]+"(?:\\."+a[m]+")*))";var v=c++;a[v]="(?:-?("+a[h]+"(?:\\."+a[h]+")*))";var w=c++;a[w]="[0-9A-Za-z-]+";var E=c++;a[E]="(?:\\+("+a[w]+"(?:\\."+a[w]+")*))";var C=c++,S="v?"+a[f]+a[g]+"?"+a[E]+"?";a[C]="^"+S+"$";var x="[v=\\s]*"+a[p]+a[v]+"?"+a[E]+"?",I=c++;a[I]="^"+x+"$";var P=c++;a[P]="((?:<|>)?=?)";var T=c++;a[T]=a[l]+"|x|X|\\*";var D=c++;a[D]=a[u]+"|x|X|\\*";var R=c++;a[R]="[v=\\s]*("+a[D]+")(?:\\.("+a[D]+")(?:\\.("+a[D]+")(?:"+a[g]+")?"+a[E]+"?)?)?";var k=c++;a[k]="[v=\\s]*("+a[T]+")(?:\\.("+a[T]+")(?:\\.("+a[T]+")(?:"+a[v]+")?"+a[E]+"?)?)?";var U=c++;a[U]="^"+a[P]+"\\s*"+a[R]+"$";var W=c++;a[W]="^"+a[P]+"\\s*"+a[k]+"$";var j=c++;a[j]="(?:^|[^\\d])(\\d{1,"+i+"})(?:\\.(\\d{1,"+i+"}))?(?:\\.(\\d{1,"+i+"}))?(?:$|[^\\d])";var $=c++;a[$]="(?:~>?)";var O=c++;a[O]="(\\s*)"+a[$]+"\\s+",s[O]=new RegExp(a[O],"g");var H="$1~",Q=c++;a[Q]="^"+a[$]+a[R]+"$";var M=c++;a[M]="^"+a[$]+a[k]+"$";var Z=c++;a[Z]="(?:\\^)";var re=c++;a[re]="(\\s*)"+a[Z]+"\\s+",s[re]=new RegExp(a[re],"g");var K="$1^",fe=c++;a[fe]="^"+a[Z]+a[R]+"$";var _e=c++;a[_e]="^"+a[Z]+a[k]+"$";var ye=c++;a[ye]="^"+a[P]+"\\s*("+x+")$|^$";var Ee=c++;a[Ee]="^"+a[P]+"\\s*("+S+")$|^$";var Te=c++;a[Te]="(\\s*)"+a[P]+"\\s*("+x+"|"+a[R]+")",s[Te]=new RegExp(a[Te],"g");var Je="$1$2$3",Ge=c++;a[Ge]="^\\s*("+a[R]+")\\s+-\\s+("+a[R]+")\\s*$";var Se=c++;a[Se]="^\\s*("+a[k]+")\\s+-\\s+("+a[k]+")\\s*$";var Ie=c++;for(a[Ie]="(<|>)?=?\\s*\\*",Fe=0;Fe<c;Fe++)r(Fe,a[Fe]),s[Fe]||(s[Fe]=new RegExp(a[Fe]));var Fe;e.parse=et;function et(y,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),y instanceof oe)return y;if(typeof y!="string"||y.length>n)return null;var b=_.loose?s[I]:s[C];if(!b.test(y))return null;try{return new oe(y,_)}catch{return null}}e.valid=ro;function ro(y,_){var b=et(y,_);return b?b.version:null}e.clean=Pn;function Pn(y,_){var b=et(y.trim().replace(/^[=v]+/,""),_);return b?b.version:null}e.SemVer=oe;function oe(y,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),y instanceof oe){if(y.loose===_.loose)return y;y=y.version}else if(typeof y!="string")throw new TypeError("Invalid Version: "+y);if(y.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof oe))return new oe(y,_);r("SemVer",y,_),this.options=_,this.loose=!!_.loose;var b=y.trim().match(_.loose?s[I]:s[C]);if(!b)throw new TypeError("Invalid Version: "+y);if(this.raw=y,this.major=+b[1],this.minor=+b[2],this.patch=+b[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");b[4]?this.prerelease=b[4].split(".").map(function(N){if(/^[0-9]+$/.test(N)){var F=+N;if(F>=0&&F<o)return F}return N}):this.prerelease=[],this.build=b[5]?b[5].split("."):[],this.format()}oe.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},oe.prototype.toString=function(){return this.version},oe.prototype.compare=function(y){return r("SemVer.compare",this.version,this.options,y),y instanceof oe||(y=new oe(y,this.options)),this.compareMain(y)||this.comparePre(y)},oe.prototype.compareMain=function(y){return y instanceof oe||(y=new oe(y,this.options)),vt(this.major,y.major)||vt(this.minor,y.minor)||vt(this.patch,y.patch)},oe.prototype.comparePre=function(y){if(y instanceof oe||(y=new oe(y,this.options)),this.prerelease.length&&!y.prerelease.length)return-1;if(!this.prerelease.length&&y.prerelease.length)return 1;if(!this.prerelease.length&&!y.prerelease.length)return 0;var _=0;do{var b=this.prerelease[_],N=y.prerelease[_];if(r("prerelease compare",_,b,N),b===void 0&&N===void 0)return 0;if(N===void 0)return 1;if(b===void 0)return-1;if(b!==N)return vt(b,N)}while(++_)},oe.prototype.inc=function(y,_){switch(y){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",_);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",_);break;case"prepatch":this.prerelease.length=0,this.inc("patch",_),this.inc("pre",_);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",_),this.inc("pre",_);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var b=this.prerelease.length;--b>=0;)typeof this.prerelease[b]=="number"&&(this.prerelease[b]++,b=-2);b===-1&&this.prerelease.push(0)}_&&(this.prerelease[0]===_?isNaN(this.prerelease[1])&&(this.prerelease=[_,0]):this.prerelease=[_,0]);break;default:throw new Error("invalid increment argument: "+y)}return this.format(),this.raw=this.version,this},e.inc=no;function no(y,_,b,N){typeof b=="string"&&(N=b,b=void 0);try{return new oe(y,b).inc(_,N).version}catch{return null}}e.diff=Tn;function Tn(y,_){if(ge(y,_))return null;var b=et(y),N=et(_),F="";if(b.prerelease.length||N.prerelease.length){F="pre";var V="prerelease"}for(var X in b)if((X==="major"||X==="minor"||X==="patch")&&b[X]!==N[X])return F+X;return V}e.compareIdentifiers=vt;var xt=/^[0-9]+$/;function vt(y,_){var b=xt.test(y),N=xt.test(_);return b&&N&&(y=+y,_=+_),y===_?0:b&&!N?-1:N&&!b?1:y<_?-1:1}e.rcompareIdentifiers=G;function G(y,_){return vt(_,y)}e.major=ne;function ne(y,_){return new oe(y,_).major}e.minor=ae;function ae(y,_){return new oe(y,_).minor}e.patch=pe;function pe(y,_){return new oe(y,_).patch}e.compare=de;function de(y,_,b){return new oe(y,b).compare(new oe(_,b))}e.compareLoose=He;function He(y,_){return de(y,_,!0)}e.rcompare=ke;function ke(y,_,b){return de(_,y,b)}e.sort=Y;function Y(y,_){return y.sort(function(b,N){return e.compare(b,N,_)})}e.rsort=te;function te(y,_){return y.sort(function(b,N){return e.rcompare(b,N,_)})}e.gt=J;function J(y,_,b){return de(y,_,b)>0}e.lt=ue;function ue(y,_,b){return de(y,_,b)<0}e.eq=ge;function ge(y,_,b){return de(y,_,b)===0}e.neq=De;function De(y,_,b){return de(y,_,b)!==0}e.gte=Be;function Be(y,_,b){return de(y,_,b)>=0}e.lte=je;function je(y,_,b){return de(y,_,b)<=0}e.cmp=ze;function ze(y,_,b,N){switch(_){case"===":return typeof y=="object"&&(y=y.version),typeof b=="object"&&(b=b.version),y===b;case"!==":return typeof y=="object"&&(y=y.version),typeof b=="object"&&(b=b.version),y!==b;case"":case"=":case"==":return ge(y,b,N);case"!=":return De(y,b,N);case">":return J(y,b,N);case">=":return Be(y,b,N);case"<":return ue(y,b,N);case"<=":return je(y,b,N);default:throw new TypeError("Invalid operator: "+_)}}e.Comparator=Ve;function Ve(y,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),y instanceof Ve){if(y.loose===!!_.loose)return y;y=y.value}if(!(this instanceof Ve))return new Ve(y,_);r("comparator",y,_),this.options=_,this.loose=!!_.loose,this.parse(y),this.semver===kt?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var kt={};Ve.prototype.parse=function(y){var _=this.options.loose?s[ye]:s[Ee],b=y.match(_);if(!b)throw new TypeError("Invalid comparator: "+y);this.operator=b[1],this.operator==="="&&(this.operator=""),b[2]?this.semver=new oe(b[2],this.options.loose):this.semver=kt},Ve.prototype.toString=function(){return this.value},Ve.prototype.test=function(y){return r("Comparator.test",y,this.options.loose),this.semver===kt?!0:(typeof y=="string"&&(y=new oe(y,this.options)),ze(y,this.operator,this.semver,this.options))},Ve.prototype.intersects=function(y,_){if(!(y instanceof Ve))throw new TypeError("a Comparator is required");(!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1});var b;if(this.operator==="")return b=new ve(y.value,_),Ar(this.value,b,_);if(y.operator==="")return b=new ve(this.value,_),Ar(y.semver,b,_);var N=(this.operator===">="||this.operator===">")&&(y.operator===">="||y.operator===">"),F=(this.operator==="<="||this.operator==="<")&&(y.operator==="<="||y.operator==="<"),V=this.semver.version===y.semver.version,X=(this.operator===">="||this.operator==="<=")&&(y.operator===">="||y.operator==="<="),se=ze(this.semver,"<",y.semver,_)&&(this.operator===">="||this.operator===">")&&(y.operator==="<="||y.operator==="<"),ie=ze(this.semver,">",y.semver,_)&&(this.operator==="<="||this.operator==="<")&&(y.operator===">="||y.operator===">");return N||F||V&&X||se||ie},e.Range=ve;function ve(y,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),y instanceof ve)return y.loose===!!_.loose&&y.includePrerelease===!!_.includePrerelease?y:new ve(y.raw,_);if(y instanceof Ve)return new ve(y.value,_);if(!(this instanceof ve))return new ve(y,_);if(this.options=_,this.loose=!!_.loose,this.includePrerelease=!!_.includePrerelease,this.raw=y,this.set=y.split(/\s*\|\|\s*/).map(function(b){return this.parseRange(b.trim())},this).filter(function(b){return b.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+y);this.format()}ve.prototype.format=function(){return this.range=this.set.map(function(y){return y.join(" ").trim()}).join("||").trim(),this.range},ve.prototype.toString=function(){return this.range},ve.prototype.parseRange=function(y){var _=this.options.loose;y=y.trim();var b=_?s[Se]:s[Ge];y=y.replace(b,Ga),r("hyphen replace",y),y=y.replace(s[Te],Je),r("comparator trim",y,s[Te]),y=y.replace(s[O],H),y=y.replace(s[re],K),y=y.split(/\s+/).join(" ");var N=_?s[ye]:s[Ee],F=y.split(" ").map(function(V){return Vr(V,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(F=F.filter(function(V){return!!V.match(N)})),F=F.map(function(V){return new Ve(V,this.options)},this),F},ve.prototype.intersects=function(y,_){if(!(y instanceof ve))throw new TypeError("a Range is required");return this.set.some(function(b){return b.every(function(N){return y.set.some(function(F){return F.every(function(V){return N.intersects(V,_)})})})})},e.toComparators=ur;function ur(y,_){return new ve(y,_).set.map(function(b){return b.map(function(N){return N.value}).join(" ").trim().split(" ")})}function Vr(y,_){return r("comp",y,_),y=qa(y,_),r("caret",y),y=In(y,_),r("tildes",y),y=Va(y,_),r("xrange",y),y=Wr(y,_),r("stars",y),y}function $e(y){return!y||y.toLowerCase()==="x"||y==="*"}function In(y,_){return y.trim().split(/\s+/).map(function(b){return Ha(b,_)}).join(" ")}function Ha(y,_){var b=_.loose?s[M]:s[Q];return y.replace(b,function(N,F,V,X,se){r("tilde",y,N,F,V,X,se);var ie;return $e(F)?ie="":$e(V)?ie=">="+F+".0.0 <"+(+F+1)+".0.0":$e(X)?ie=">="+F+"."+V+".0 <"+F+"."+(+V+1)+".0":se?(r("replaceTilde pr",se),ie=">="+F+"."+V+"."+X+"-"+se+" <"+F+"."+(+V+1)+".0"):ie=">="+F+"."+V+"."+X+" <"+F+"."+(+V+1)+".0",r("tilde return",ie),ie})}function qa(y,_){return y.trim().split(/\s+/).map(function(b){return Ba(b,_)}).join(" ")}function Ba(y,_){r("caret",y,_);var b=_.loose?s[_e]:s[fe];return y.replace(b,function(N,F,V,X,se){r("caret",y,N,F,V,X,se);var ie;return $e(F)?ie="":$e(V)?ie=">="+F+".0.0 <"+(+F+1)+".0.0":$e(X)?F==="0"?ie=">="+F+"."+V+".0 <"+F+"."+(+V+1)+".0":ie=">="+F+"."+V+".0 <"+(+F+1)+".0.0":se?(r("replaceCaret pr",se),F==="0"?V==="0"?ie=">="+F+"."+V+"."+X+"-"+se+" <"+F+"."+V+"."+(+X+1):ie=">="+F+"."+V+"."+X+"-"+se+" <"+F+"."+(+V+1)+".0":ie=">="+F+"."+V+"."+X+"-"+se+" <"+(+F+1)+".0.0"):(r("no pr"),F==="0"?V==="0"?ie=">="+F+"."+V+"."+X+" <"+F+"."+V+"."+(+X+1):ie=">="+F+"."+V+"."+X+" <"+F+"."+(+V+1)+".0":ie=">="+F+"."+V+"."+X+" <"+(+F+1)+".0.0"),r("caret return",ie),ie})}function Va(y,_){return r("replaceXRanges",y,_),y.split(/\s+/).map(function(b){return Wa(b,_)}).join(" ")}function Wa(y,_){y=y.trim();var b=_.loose?s[W]:s[U];return y.replace(b,function(N,F,V,X,se,ie){r("xRange",y,N,F,V,X,se,ie);var at=$e(V),nt=at||$e(X),Qe=nt||$e(se),Ke=Qe;return F==="="&&Ke&&(F=""),at?F===">"||F==="<"?N="<0.0.0":N="*":F&&Ke?(nt&&(X=0),se=0,F===">"?(F=">=",nt?(V=+V+1,X=0,se=0):(X=+X+1,se=0)):F==="<="&&(F="<",nt?V=+V+1:X=+X+1),N=F+V+"."+X+"."+se):nt?N=">="+V+".0.0 <"+(+V+1)+".0.0":Qe&&(N=">="+V+"."+X+".0 <"+V+"."+(+X+1)+".0"),r("xRange return",N),N})}function Wr(y,_){return r("replaceStars",y,_),y.trim().replace(s[Ie],"")}function Ga(y,_,b,N,F,V,X,se,ie,at,nt,Qe,Ke){return $e(b)?_="":$e(N)?_=">="+b+".0.0":$e(F)?_=">="+b+"."+N+".0":_=">="+_,$e(ie)?se="":$e(at)?se="<"+(+ie+1)+".0.0":$e(nt)?se="<"+ie+"."+(+at+1)+".0":Qe?se="<="+ie+"."+at+"."+nt+"-"+Qe:se="<="+se,(_+" "+se).trim()}ve.prototype.test=function(y){if(!y)return!1;typeof y=="string"&&(y=new oe(y,this.options));for(var _=0;_<this.set.length;_++)if(za(this.set[_],y,this.options))return!0;return!1};function za(y,_,b){for(var N=0;N<y.length;N++)if(!y[N].test(_))return!1;if(_.prerelease.length&&!b.includePrerelease){for(N=0;N<y.length;N++)if(r(y[N].semver),y[N].semver!==kt&&y[N].semver.prerelease.length>0){var F=y[N].semver;if(F.major===_.major&&F.minor===_.minor&&F.patch===_.patch)return!0}return!1}return!0}e.satisfies=Ar;function Ar(y,_,b){try{_=new ve(_,b)}catch{return!1}return _.test(y)}e.maxSatisfying=Ya;function Ya(y,_,b){var N=null,F=null;try{var V=new ve(_,b)}catch{return null}return y.forEach(function(X){V.test(X)&&(!N||F.compare(X)===-1)&&(N=X,F=new oe(N,b))}),N}e.minSatisfying=Ka;function Ka(y,_,b){var N=null,F=null;try{var V=new ve(_,b)}catch{return null}return y.forEach(function(X){V.test(X)&&(!N||F.compare(X)===1)&&(N=X,F=new oe(N,b))}),N}e.minVersion=oo;function oo(y,_){y=new ve(y,_);var b=new oe("0.0.0");if(y.test(b)||(b=new oe("0.0.0-0"),y.test(b)))return b;b=null;for(var N=0;N<y.set.length;++N){var F=y.set[N];F.forEach(function(V){var X=new oe(V.semver.version);switch(V.operator){case">":X.prerelease.length===0?X.patch++:X.prerelease.push(0),X.raw=X.format();case"":case">=":(!b||J(b,X))&&(b=X);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+V.operator)}})}return b&&y.test(b)?b:null}e.validRange=Xa;function Xa(y,_){try{return new ve(y,_).range||"*"}catch{return null}}e.ltr=Qa;function Qa(y,_,b){return Dn(y,_,"<",b)}e.gtr=Ja;function Ja(y,_,b){return Dn(y,_,">",b)}e.outside=Dn;function Dn(y,_,b,N){y=new oe(y,N),_=new ve(_,N);var F,V,X,se,ie;switch(b){case">":F=J,V=je,X=ue,se=">",ie=">=";break;case"<":F=ue,V=Be,X=J,se="<",ie="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Ar(y,_,N))return!1;for(var at=0;at<_.set.length;++at){var nt=_.set[at],Qe=null,Ke=null;if(nt.forEach(function(Et){Et.semver===kt&&(Et=new Ve(">=0.0.0")),Qe=Qe||Et,Ke=Ke||Et,F(Et.semver,Qe.semver,N)?Qe=Et:X(Et.semver,Ke.semver,N)&&(Ke=Et)}),Qe.operator===se||Qe.operator===ie||(!Ke.operator||Ke.operator===se)&&V(y,Ke.semver)||Ke.operator===ie&&X(y,Ke.semver))return!1}return!0}e.prerelease=Za;function Za(y,_){var b=et(y,_);return b&&b.prerelease.length?b.prerelease:null}e.intersects=io;function io(y,_,b){return y=new ve(y,b),_=new ve(_,b),y.intersects(_)}e.coerce=ec;function ec(y){if(y instanceof oe)return y;if(typeof y!="string")return null;var _=y.match(s[j]);return _==null?null:et(_[1]+"."+(_[2]||"0")+"."+(_[3]||"0"))}}),T$=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.makePatchingRequire=void 0;var t=require("path"),r=S8(),n=require("module"),o=Object.keys(process.binding("natives")),i=n.prototype.require;function s(a){var c={};return function(u){var l=i.apply(this,arguments);if(a[u]){var d=n._resolveFilename(u,this);if(c.hasOwnProperty(d))return c[d];var f=void 0;if(o.indexOf(u)<0)try{f=i.call(this,t.join(u,"package.json")).version}catch{return l}else f=process.version.substring(1);var p=f.indexOf("-");p>=0&&(f=f.substring(0,p));for(var m=l,h=0,g=a[u];h<g.length;h++){var v=g[h];r.satisfies(f,v.versionSpecifier)&&(m=v.patch(m,d))}return c[d]=m}return l}}e.makePatchingRequire=s}),b8=L((e,t)=>{t.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}}),ar=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.channel=e.makePatchingRequire=void 0;var t=T$(),r=T$();Object.defineProperty(e,"makePatchingRequire",{enumerable:!0,get:function(){return r.makePatchingRequire}});var n=function(s){return!0},o=function(){function s(){this.version=b8().version,this.subscribers={},this.contextPreservationFunction=function(a){return a},this.knownPatches={},this.currentlyPublishing=!1}return s.prototype.shouldPublish=function(a){var c=this.subscribers[a];return c?c.some(function(u){var l=u.filter;return!l||l(!1)}):!1},s.prototype.publish=function(a,c){if(!this.currentlyPublishing){var u=this.subscribers[a];if(u){var l={timestamp:Date.now(),data:c};this.currentlyPublishing=!0,u.forEach(function(d){var f=d.listener,p=d.filter;try{p&&p(!0)&&f(l)}catch{}}),this.currentlyPublishing=!1}}},s.prototype.subscribe=function(a,c,u){u===void 0&&(u=n),this.subscribers[a]||(this.subscribers[a]=[]),this.subscribers[a].push({listener:c,filter:u})},s.prototype.unsubscribe=function(a,c,u){u===void 0&&(u=n);var l=this.subscribers[a];if(l){for(var d=0;d<l.length;++d)if(l[d].listener===c&&l[d].filter===u)return l.splice(d,1),!0}return!1},s.prototype.reset=function(){var a=this;this.subscribers={},this.contextPreservationFunction=function(c){return c},Object.getOwnPropertyNames(this.knownPatches).forEach(function(c){return delete a.knownPatches[c]})},s.prototype.bindToContext=function(a){return this.contextPreservationFunction(a)},s.prototype.addContextPreservation=function(a){var c=this.contextPreservationFunction;this.contextPreservationFunction=function(u){return a(c(u))}},s.prototype.registerMonkeyPatch=function(a,c){this.knownPatches[a]||(this.knownPatches[a]=[]),this.knownPatches[a].push(c)},s.prototype.getPatchesObject=function(){return this.knownPatches},s}();global.diagnosticsSource||(global.diagnosticsSource=new o,i=require("module"),i.prototype.require=t.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var i;e.channel=global.diagnosticsSource}),x8=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),P8=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._globalThis=void 0,e._globalThis=typeof globalThis=="object"?globalThis:global}),T8=L(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(P8(),e)}),I8=L(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(T8(),e)}),k$=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="1.0.3"}),D8=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isCompatible=e._makeCompatibilityCheck=void 0;var t=k$(),r=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function n(o){var i=new Set([o]),s=new Set,a=o.match(r);if(!a)return function(){return!1};var c={major:+a[1],minor:+a[2],patch:+a[3],prerelease:a[4]};if(c.prerelease!=null)return function(d){return d===o};function u(d){return s.add(d),!1}function l(d){return i.add(d),!0}return function(d){if(i.has(d))return!0;if(s.has(d))return!1;var f=d.match(r);if(!f)return u(d);var p={major:+f[1],minor:+f[2],patch:+f[3],prerelease:f[4]};return p.prerelease!=null||c.major!==p.major?u(d):c.major===0?c.minor===p.minor&&c.patch<=p.patch?l(d):u(d):c.minor<=p.minor?l(d):u(d)}}e._makeCompatibilityCheck=n,e.isCompatible=n(t.VERSION)}),_m=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unregisterGlobal=e.getGlobal=e.registerGlobal=void 0;var t=I8(),r=k$(),n=D8(),o=r.VERSION.split(".")[0],i=Symbol.for("opentelemetry.js.api."+o),s=t._globalThis;function a(l,d,f,p){var m;p===void 0&&(p=!1);var h=s[i]=(m=s[i])!==null&&m!==void 0?m:{version:r.VERSION};if(!p&&h[l]){var g=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+l);return f.error(g.stack||g.message),!1}if(h.version!==r.VERSION){var g=new Error("@opentelemetry/api: All API registration versions must match");return f.error(g.stack||g.message),!1}return h[l]=d,f.debug("@opentelemetry/api: Registered a global for "+l+" v"+r.VERSION+"."),!0}e.registerGlobal=a;function c(l){var d,f,p=(d=s[i])===null||d===void 0?void 0:d.version;if(!(!p||!n.isCompatible(p)))return(f=s[i])===null||f===void 0?void 0:f[l]}e.getGlobal=c;function u(l,d){d.debug("@opentelemetry/api: Unregistering a global for "+l+" v"+r.VERSION+".");var f=s[i];f&&delete f[l]}e.unregisterGlobal=u}),R8=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagComponentLogger=void 0;var t=_m(),r=function(){function o(i){this._namespace=i.namespace||"DiagComponentLogger"}return o.prototype.debug=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return n("debug",this._namespace,i)},o.prototype.error=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return n("error",this._namespace,i)},o.prototype.info=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return n("info",this._namespace,i)},o.prototype.warn=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return n("warn",this._namespace,i)},o.prototype.verbose=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return n("verbose",this._namespace,i)},o}();e.DiagComponentLogger=r;function n(o,i,s){var a=t.getGlobal("diag");if(a)return s.unshift(i),a[o].apply(a,s)}}),c0=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagLogLevel=void 0;var t;(function(r){r[r.NONE=0]="NONE",r[r.ERROR=30]="ERROR",r[r.WARN=50]="WARN",r[r.INFO=60]="INFO",r[r.DEBUG=70]="DEBUG",r[r.VERBOSE=80]="VERBOSE",r[r.ALL=9999]="ALL"})(t=e.DiagLogLevel||(e.DiagLogLevel={}))}),k8=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createLogLevelDiagLogger=void 0;var t=c0();function r(n,o){n<t.DiagLogLevel.NONE?n=t.DiagLogLevel.NONE:n>t.DiagLogLevel.ALL&&(n=t.DiagLogLevel.ALL),o=o||{};function i(s,a){var c=o[s];return typeof c=="function"&&n>=a?c.bind(o):function(){}}return{error:i("error",t.DiagLogLevel.ERROR),warn:i("warn",t.DiagLogLevel.WARN),info:i("info",t.DiagLogLevel.INFO),debug:i("debug",t.DiagLogLevel.DEBUG),verbose:i("verbose",t.DiagLogLevel.VERBOSE)}}e.createLogLevelDiagLogger=r}),Sm=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagAPI=void 0;var t=R8(),r=k8(),n=c0(),o=_m(),i="diag",s=function(){function a(){function c(l){return function(){var d=o.getGlobal("diag");if(d)return d[l].apply(d,arguments)}}var u=this;u.setLogger=function(l,d){var f,p;if(d===void 0&&(d=n.DiagLogLevel.INFO),l===u){var m=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return u.error((f=m.stack)!==null&&f!==void 0?f:m.message),!1}var h=o.getGlobal("diag"),g=r.createLogLevelDiagLogger(d,l);if(h){var v=(p=new Error().stack)!==null&&p!==void 0?p:"<failed to generate stacktrace>";h.warn("Current logger will be overwritten from "+v),g.warn("Current logger will overwrite one already registered from "+v)}return o.registerGlobal("diag",g,u,!0)},u.disable=function(){o.unregisterGlobal(i,u)},u.createComponentLogger=function(l){return new t.DiagComponentLogger(l)},u.verbose=c("verbose"),u.debug=c("debug"),u.info=c("info"),u.warn=c("warn"),u.error=c("error")}return a.instance=function(){return this._instance||(this._instance=new a),this._instance},a}();e.DiagAPI=s}),A8=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaggageImpl=void 0;var t=function(){function r(n){this._entries=n?new Map(n):new Map}return r.prototype.getEntry=function(n){var o=this._entries.get(n);if(o)return Object.assign({},o)},r.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(n){var o=n[0],i=n[1];return[o,i]})},r.prototype.setEntry=function(n,o){var i=new r(this._entries);return i._entries.set(n,o),i},r.prototype.removeEntry=function(n){var o=new r(this._entries);return o._entries.delete(n),o},r.prototype.removeEntries=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];for(var i=new r(this._entries),s=0,a=n;s<a.length;s++){var c=a[s];i._entries.delete(c)}return i},r.prototype.clear=function(){return new r},r}();e.BaggageImpl=t}),O8=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataSymbol=void 0,e.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")}),A$=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataFromString=e.createBaggage=void 0;var t=Sm(),r=A8(),n=O8(),o=t.DiagAPI.instance();function i(a){return a===void 0&&(a={}),new r.BaggageImpl(new Map(Object.entries(a)))}e.createBaggage=i;function s(a){return typeof a!="string"&&(o.error("Cannot create baggage metadata from unknown type: "+typeof a),a=""),{__TYPE__:n.baggageEntryMetadataSymbol,toString:function(){return a}}}e.baggageEntryMetadataFromString=s}),N8=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),L8=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),F8=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagConsoleLogger=void 0;var t=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],r=function(){function n(){function o(s){return function(){var a=arguments;if(console){var c=console[s];if(typeof c!="function"&&(c=console.log),typeof c=="function")return c.apply(console,a)}}}for(var i=0;i<t.length;i++)this[t[i].n]=o(t[i].c)}return n}();e.DiagConsoleLogger=r}),M8=L(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(F8(),e),r(c0(),e)}),O$=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultTextMapSetter=e.defaultTextMapGetter=void 0,e.defaultTextMapGetter={get:function(t,r){if(t!=null)return t[r]},keys:function(t){return t==null?[]:Object.keys(t)}},e.defaultTextMapSetter={set:function(t,r,n){t!=null&&(t[r]=n)}}}),$8=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),U8=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),aw=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ROOT_CONTEXT=e.createContextKey=void 0;function t(n){return Symbol.for(n)}e.createContextKey=t;var r=function(){function n(o){var i=this;i._currentContext=o?new Map(o):new Map,i.getValue=function(s){return i._currentContext.get(s)},i.setValue=function(s,a){var c=new n(i._currentContext);return c._currentContext.set(s,a),c},i.deleteValue=function(s){var a=new n(i._currentContext);return a._currentContext.delete(s),a}}return n}();e.ROOT_CONTEXT=new r}),j8=L(e=>{"use strict";var t=e&&e.__spreadArray||function(o,i){for(var s=0,a=i.length,c=o.length;s<a;s++,c++)o[c]=i[s];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.NoopContextManager=void 0;var r=aw(),n=function(){function o(){}return o.prototype.active=function(){return r.ROOT_CONTEXT},o.prototype.with=function(i,s,a){for(var c=[],u=3;u<arguments.length;u++)c[u-3]=arguments[u];return s.call.apply(s,t([a],c))},o.prototype.bind=function(i,s){return s},o.prototype.enable=function(){return this},o.prototype.disable=function(){return this},o}();e.NoopContextManager=n}),N$=L(e=>{"use strict";var t=e&&e.__spreadArray||function(c,u){for(var l=0,d=u.length,f=c.length;l<d;l++,f++)c[f]=u[l];return c};Object.defineProperty(e,"__esModule",{value:!0}),e.ContextAPI=void 0;var r=j8(),n=_m(),o=Sm(),i="context",s=new r.NoopContextManager,a=function(){function c(){}return c.getInstance=function(){return this._instance||(this._instance=new c),this._instance},c.prototype.setGlobalContextManager=function(u){return n.registerGlobal(i,u,o.DiagAPI.instance())},c.prototype.active=function(){return this._getContextManager().active()},c.prototype.with=function(u,l,d){for(var f,p=[],m=3;m<arguments.length;m++)p[m-3]=arguments[m];return(f=this._getContextManager()).with.apply(f,t([u,l,d],p))},c.prototype.bind=function(u,l){return this._getContextManager().bind(u,l)},c.prototype._getContextManager=function(){return n.getGlobal(i)||s},c.prototype.disable=function(){this._getContextManager().disable(),n.unregisterGlobal(i,o.DiagAPI.instance())},c}();e.ContextAPI=a}),L$=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceFlags=void 0;var t;(function(r){r[r.NONE=0]="NONE",r[r.SAMPLED=1]="SAMPLED"})(t=e.TraceFlags||(e.TraceFlags={}))}),u0=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=void 0;var t=L$();e.INVALID_SPANID="0000000000000000",e.INVALID_TRACEID="00000000000000000000000000000000",e.INVALID_SPAN_CONTEXT={traceId:e.INVALID_TRACEID,spanId:e.INVALID_SPANID,traceFlags:t.TraceFlags.NONE}}),l0=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NonRecordingSpan=void 0;var t=u0(),r=function(){function n(o){o===void 0&&(o=t.INVALID_SPAN_CONTEXT),this._spanContext=o}return n.prototype.spanContext=function(){return this._spanContext},n.prototype.setAttribute=function(o,i){return this},n.prototype.setAttributes=function(o){return this},n.prototype.addEvent=function(o,i){return this},n.prototype.setStatus=function(o){return this},n.prototype.updateName=function(o){return this},n.prototype.end=function(o){},n.prototype.isRecording=function(){return!1},n.prototype.recordException=function(o,i){},n}();e.NonRecordingSpan=r}),F$=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSpanContext=e.setSpanContext=e.deleteSpan=e.setSpan=e.getSpan=void 0;var t=aw(),r=l0(),n=t.createContextKey("OpenTelemetry Context Key SPAN");function o(u){return u.getValue(n)||void 0}e.getSpan=o;function i(u,l){return u.setValue(n,l)}e.setSpan=i;function s(u){return u.deleteValue(n)}e.deleteSpan=s;function a(u,l){return i(u,new r.NonRecordingSpan(l))}e.setSpanContext=a;function c(u){var l;return(l=o(u))===null||l===void 0?void 0:l.spanContext()}e.getSpanContext=c}),d0=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wrapSpanContext=e.isSpanContextValid=e.isValidSpanId=e.isValidTraceId=void 0;var t=u0(),r=l0(),n=/^([0-9a-f]{32})$/i,o=/^[0-9a-f]{16}$/i;function i(u){return n.test(u)&&u!==t.INVALID_TRACEID}e.isValidTraceId=i;function s(u){return o.test(u)&&u!==t.INVALID_SPANID}e.isValidSpanId=s;function a(u){return i(u.traceId)&&s(u.spanId)}e.isSpanContextValid=a;function c(u){return new r.NonRecordingSpan(u)}e.wrapSpanContext=c}),M$=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracer=void 0;var t=N$(),r=F$(),n=l0(),o=d0(),i=t.ContextAPI.getInstance(),s=function(){function c(){}return c.prototype.startSpan=function(u,l,d){var f=Boolean(l==null?void 0:l.root);if(f)return new n.NonRecordingSpan;var p=d&&r.getSpanContext(d);return a(p)&&o.isSpanContextValid(p)?new n.NonRecordingSpan(p):new n.NonRecordingSpan},c.prototype.startActiveSpan=function(u,l,d,f){var p,m,h;if(!(arguments.length<2)){arguments.length===2?h=l:arguments.length===3?(p=l,h=d):(p=l,m=d,h=f);var g=m??i.active(),v=this.startSpan(u,p,g),w=r.setSpan(g,v);return i.with(w,h,void 0,v)}},c}();e.NoopTracer=s;function a(c){return typeof c=="object"&&typeof c.spanId=="string"&&typeof c.traceId=="string"&&typeof c.traceFlags=="number"}}),$$=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracer=void 0;var t=M$(),r=new t.NoopTracer,n=function(){function o(i,s,a){this._provider=i,this.name=s,this.version=a}return o.prototype.startSpan=function(i,s,a){return this._getTracer().startSpan(i,s,a)},o.prototype.startActiveSpan=function(i,s,a,c){var u=this._getTracer();return Reflect.apply(u.startActiveSpan,u,arguments)},o.prototype._getTracer=function(){if(this._delegate)return this._delegate;var i=this._provider.getDelegateTracer(this.name,this.version);return i?(this._delegate=i,this._delegate):r},o}();e.ProxyTracer=n}),H8=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracerProvider=void 0;var t=M$(),r=function(){function n(){}return n.prototype.getTracer=function(o,i){return new t.NoopTracer},n}();e.NoopTracerProvider=r}),U$=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracerProvider=void 0;var t=$$(),r=H8(),n=new r.NoopTracerProvider,o=function(){function i(){}return i.prototype.getTracer=function(s,a){var c;return(c=this.getDelegateTracer(s,a))!==null&&c!==void 0?c:new t.ProxyTracer(this,s,a)},i.prototype.getDelegate=function(){var s;return(s=this._delegate)!==null&&s!==void 0?s:n},i.prototype.setDelegate=function(s){this._delegate=s},i.prototype.getDelegateTracer=function(s,a){var c;return(c=this._delegate)===null||c===void 0?void 0:c.getTracer(s,a)},i}();e.ProxyTracerProvider=o}),q8=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),B8=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SamplingDecision=void 0;var t;(function(r){r[r.NOT_RECORD=0]="NOT_RECORD",r[r.RECORD=1]="RECORD",r[r.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(t=e.SamplingDecision||(e.SamplingDecision={}))}),V8=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),W8=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpanKind=void 0;var t;(function(r){r[r.INTERNAL=0]="INTERNAL",r[r.SERVER=1]="SERVER",r[r.CLIENT=2]="CLIENT",r[r.PRODUCER=3]="PRODUCER",r[r.CONSUMER=4]="CONSUMER"})(t=e.SpanKind||(e.SpanKind={}))}),G8=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),z8=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Y8=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpanStatusCode=void 0;var t;(function(r){r[r.UNSET=0]="UNSET",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR"})(t=e.SpanStatusCode||(e.SpanStatusCode={}))}),K8=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),X8=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Q8=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),J8=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Z8=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceAPI=void 0;var t=_m(),r=U$(),n=d0(),o=F$(),i=Sm(),s="trace",a=function(){function c(){this._proxyTracerProvider=new r.ProxyTracerProvider,this.wrapSpanContext=n.wrapSpanContext,this.isSpanContextValid=n.isSpanContextValid,this.deleteSpan=o.deleteSpan,this.getSpan=o.getSpan,this.getSpanContext=o.getSpanContext,this.setSpan=o.setSpan,this.setSpanContext=o.setSpanContext}return c.getInstance=function(){return this._instance||(this._instance=new c),this._instance},c.prototype.setGlobalTracerProvider=function(u){var l=t.registerGlobal(s,this._proxyTracerProvider,i.DiagAPI.instance());return l&&this._proxyTracerProvider.setDelegate(u),l},c.prototype.getTracerProvider=function(){return t.getGlobal(s)||this._proxyTracerProvider},c.prototype.getTracer=function(u,l){return this.getTracerProvider().getTracer(u,l)},c.prototype.disable=function(){t.unregisterGlobal(s,i.DiagAPI.instance()),this._proxyTracerProvider=new r.ProxyTracerProvider},c}();e.TraceAPI=a}),eX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTextMapPropagator=void 0;var t=function(){function r(){}return r.prototype.inject=function(n,o){},r.prototype.extract=function(n,o){return n},r.prototype.fields=function(){return[]},r}();e.NoopTextMapPropagator=t}),tX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deleteBaggage=e.setBaggage=e.getBaggage=void 0;var t=aw(),r=t.createContextKey("OpenTelemetry Baggage Key");function n(s){return s.getValue(r)||void 0}e.getBaggage=n;function o(s,a){return s.setValue(r,a)}e.setBaggage=o;function i(s){return s.deleteValue(r)}e.deleteBaggage=i}),rX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PropagationAPI=void 0;var t=_m(),r=eX(),n=O$(),o=tX(),i=A$(),s=Sm(),a="propagation",c=new r.NoopTextMapPropagator,u=function(){function l(){this.createBaggage=i.createBaggage,this.getBaggage=o.getBaggage,this.setBaggage=o.setBaggage,this.deleteBaggage=o.deleteBaggage}return l.getInstance=function(){return this._instance||(this._instance=new l),this._instance},l.prototype.setGlobalPropagator=function(d){return t.registerGlobal(a,d,s.DiagAPI.instance())},l.prototype.inject=function(d,f,p){return p===void 0&&(p=n.defaultTextMapSetter),this._getGlobalPropagator().inject(d,f,p)},l.prototype.extract=function(d,f,p){return p===void 0&&(p=n.defaultTextMapGetter),this._getGlobalPropagator().extract(d,f,p)},l.prototype.fields=function(){return this._getGlobalPropagator().fields()},l.prototype.disable=function(){t.unregisterGlobal(a,s.DiagAPI.instance())},l.prototype._getGlobalPropagator=function(){return t.getGlobal(a)||c},l}();e.PropagationAPI=u}),jt=L(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(l,d,f,p){p===void 0&&(p=f),Object.defineProperty(l,p,{enumerable:!0,get:function(){return d[f]}})}:function(l,d,f,p){p===void 0&&(p=f),l[p]=d[f]}),r=e&&e.__exportStar||function(l,d){for(var f in l)f!=="default"&&!Object.prototype.hasOwnProperty.call(d,f)&&t(d,l,f)};Object.defineProperty(e,"__esModule",{value:!0}),e.diag=e.propagation=e.trace=e.context=e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=e.isValidSpanId=e.isValidTraceId=e.isSpanContextValid=e.baggageEntryMetadataFromString=void 0,r(x8(),e);var n=A$();Object.defineProperty(e,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return n.baggageEntryMetadataFromString}}),r(N8(),e),r(L8(),e),r(M8(),e),r(O$(),e),r($8(),e),r(U8(),e),r($$(),e),r(U$(),e),r(q8(),e),r(B8(),e),r(V8(),e),r(W8(),e),r(G8(),e),r(z8(),e),r(Y8(),e),r(L$(),e),r(K8(),e),r(X8(),e),r(Q8(),e);var o=d0();Object.defineProperty(e,"isSpanContextValid",{enumerable:!0,get:function(){return o.isSpanContextValid}}),Object.defineProperty(e,"isValidTraceId",{enumerable:!0,get:function(){return o.isValidTraceId}}),Object.defineProperty(e,"isValidSpanId",{enumerable:!0,get:function(){return o.isValidSpanId}});var i=u0();Object.defineProperty(e,"INVALID_SPANID",{enumerable:!0,get:function(){return i.INVALID_SPANID}}),Object.defineProperty(e,"INVALID_TRACEID",{enumerable:!0,get:function(){return i.INVALID_TRACEID}}),Object.defineProperty(e,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return i.INVALID_SPAN_CONTEXT}}),r(aw(),e),r(J8(),e);var s=N$();e.context=s.ContextAPI.getInstance();var a=Z8();e.trace=a.TraceAPI.getInstance();var c=rX();e.propagation=c.PropagationAPI.getInstance();var u=Sm();e.diag=u.DiagAPI.instance(),e.default={trace:e.trace,context:e.context,propagation:e.propagation,diag:e.diag}}),f0=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTracingSuppressed=e.unsuppressTracing=e.suppressTracing=void 0;var t=jt(),r=t.createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function n(s){return s.setValue(r,!0)}e.suppressTracing=n;function o(s){return s.deleteValue(r)}e.unsuppressTracing=o;function i(s){return s.getValue(r)===!0}e.isTracingSuppressed=i}),j$=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BAGGAGE_MAX_TOTAL_LENGTH=e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=e.BAGGAGE_MAX_NAME_VALUE_PAIRS=e.BAGGAGE_HEADER=e.BAGGAGE_ITEMS_SEPARATOR=e.BAGGAGE_PROPERTIES_SEPARATOR=e.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,e.BAGGAGE_KEY_PAIR_SEPARATOR="=",e.BAGGAGE_PROPERTIES_SEPARATOR=";",e.BAGGAGE_ITEMS_SEPARATOR=",",e.BAGGAGE_HEADER="baggage",e.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,e.BAGGAGE_MAX_TOTAL_LENGTH=8192}),H$=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseKeyPairsIntoRecord=e.parsePairKeyValue=e.getKeyPairs=e.serializeKeyPairs=void 0;var t=jt(),r=j$(),n=a=>a.reduce((c,u)=>{let l=`${c}${c!==""?r.BAGGAGE_ITEMS_SEPARATOR:""}${u}`;return l.length>r.BAGGAGE_MAX_TOTAL_LENGTH?c:l},"");e.serializeKeyPairs=n;var o=a=>a.getAllEntries().map(([c,u])=>`${encodeURIComponent(c)}=${encodeURIComponent(u.value)}`);e.getKeyPairs=o;var i=a=>{let c=a.split(r.BAGGAGE_PROPERTIES_SEPARATOR);if(c.length<=0)return;let u=c.shift();if(!u)return;let l=u.split(r.BAGGAGE_KEY_PAIR_SEPARATOR);if(l.length!==2)return;let d=decodeURIComponent(l[0].trim()),f=decodeURIComponent(l[1].trim()),p;return c.length>0&&(p=t.baggageEntryMetadataFromString(c.join(r.BAGGAGE_PROPERTIES_SEPARATOR))),{key:d,value:f,metadata:p}};e.parsePairKeyValue=i;var s=a=>typeof a!="string"||a.length===0?{}:a.split(r.BAGGAGE_ITEMS_SEPARATOR).map(c=>e.parsePairKeyValue(c)).filter(c=>c!==void 0&&c.value.length>0).reduce((c,u)=>(c[u.key]=u.value,c),{});e.parseKeyPairsIntoRecord=s}),nX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpBaggagePropagator=void 0;var t=jt(),r=f0(),n=j$(),o=H$(),i=class{inject(s,a,c){let u=t.propagation.getBaggage(s);if(!u||r.isTracingSuppressed(s))return;let l=o.getKeyPairs(u).filter(f=>f.length<=n.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,n.BAGGAGE_MAX_NAME_VALUE_PAIRS),d=o.serializeKeyPairs(l);d.length>0&&c.set(a,n.BAGGAGE_HEADER,d)}extract(s,a,c){let u=c.get(a,n.BAGGAGE_HEADER);if(!u)return s;let l={};return u.length===0||(u.split(n.BAGGAGE_ITEMS_SEPARATOR).forEach(d=>{let f=o.parsePairKeyValue(d);if(f){let p={value:f.value};f.metadata&&(p.metadata=f.metadata),l[f.key]=p}}),Object.entries(l).length===0)?s:t.propagation.setBaggage(s,t.propagation.createBaggage(l))}fields(){return[n.BAGGAGE_HEADER]}};e.HttpBaggagePropagator=i}),oX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isAttributeValue=e.sanitizeAttributes=void 0;function t(i){let s={};if(i==null||typeof i!="object")return s;for(let[a,c]of Object.entries(i))r(c)&&(Array.isArray(c)?s[a]=c.slice():s[a]=c);return s}e.sanitizeAttributes=t;function r(i){return i==null?!0:Array.isArray(i)?n(i):o(i)}e.isAttributeValue=r;function n(i){let s;for(let a of i)if(a!=null){if(!s){if(o(a)){s=typeof a;continue}return!1}if(typeof a!==s)return!1}return!0}function o(i){switch(typeof i){case"number":return!0;case"boolean":return!0;case"string":return!0}return!1}}),q$=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loggingErrorHandler=void 0;var t=jt();function r(){return i=>{t.diag.error(n(i))}}e.loggingErrorHandler=r;function n(i){return typeof i=="string"?i:JSON.stringify(o(i))}function o(i){let s={},a=i;for(;a!==null;)Object.getOwnPropertyNames(a).forEach(c=>{if(s[c])return;let u=a[c];u&&(s[c]=String(u))}),a=Object.getPrototypeOf(a);return s}}),B$=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.globalErrorHandler=e.setGlobalErrorHandler=void 0;var t=q$(),r=t.loggingErrorHandler();function n(i){r=i}e.setGlobalErrorHandler=n;var o=i=>{try{r(i)}catch{}};e.globalErrorHandler=o}),V$=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TracesSamplerValues=void 0;var t;(function(r){r.AlwaysOff="always_off",r.AlwaysOn="always_on",r.ParentBasedAlwaysOff="parentbased_always_off",r.ParentBasedAlwaysOn="parentbased_always_on",r.ParentBasedTraceIdRatio="parentbased_traceidratio",r.TraceIdRatio="traceidratio"})(t=e.TracesSamplerValues||(e.TracesSamplerValues={}))}),W$=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseEnvironment=e.DEFAULT_ENVIRONMENT=void 0;var t=jt(),r=V$(),n=",",o=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function i(p){return o.indexOf(p)>-1}var s=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function a(p){return s.indexOf(p)>-1}e.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:t.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:r.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};function c(p,m,h,g=-1/0,v=1/0){if(typeof h[p]<"u"){let w=Number(h[p]);isNaN(w)||(w<g?m[p]=g:w>v?m[p]=v:m[p]=w)}}function u(p,m,h,g=n){let v=h[p];typeof v=="string"&&(m[p]=v.split(g).map(w=>w.trim()))}var l={ALL:t.DiagLogLevel.ALL,VERBOSE:t.DiagLogLevel.VERBOSE,DEBUG:t.DiagLogLevel.DEBUG,INFO:t.DiagLogLevel.INFO,WARN:t.DiagLogLevel.WARN,ERROR:t.DiagLogLevel.ERROR,NONE:t.DiagLogLevel.NONE};function d(p,m,h){let g=h[p];if(typeof g=="string"){let v=l[g.toUpperCase()];v!=null&&(m[p]=v)}}function f(p){let m={};for(let h in e.DEFAULT_ENVIRONMENT){let g=h;switch(g){case"OTEL_LOG_LEVEL":d(g,m,p);break;default:if(i(g))c(g,m,p);else if(a(g))u(g,m,p);else{let v=p[g];typeof v<"u"&&v!==null&&(m[g]=String(v))}}}return m}e.parseEnvironment=f}),iX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEnv=void 0;var t=require("os"),r=W$();function n(){let o=r.parseEnvironment(process.env);return Object.assign({HOSTNAME:t.hostname()},r.DEFAULT_ENVIRONMENT,o)}e.getEnv=n}),sX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hexToBase64=void 0;function t(r){let n=r.length,o="";for(let i=0;i<n;i+=2){let s=r.substring(i,i+2),a=parseInt(s,16);o+=String.fromCharCode(a)}return Buffer.from(o,"ascii").toString("base64")}e.hexToBase64=t}),aX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RandomIdGenerator=void 0;var t=8,r=16,n=class{constructor(){this.generateTraceId=i(r),this.generateSpanId=i(t)}};e.RandomIdGenerator=n;var o=Buffer.allocUnsafe(r);function i(s){return function(){for(let a=0;a<s/4;a++)o.writeUInt32BE(Math.random()*2**32>>>0,a*4);for(let a=0;a<s&&!(o[a]>0);a++)a===s-1&&(o[s-1]=1);return o.toString("hex",0,s)}}}),cX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.otperformance=void 0;var t=require("perf_hooks");e.otperformance=t.performance}),a0=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="0.23.0"}),uX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RpcGrpcStatusCodeValues=e.MessagingOperationValues=e.MessagingDestinationKindValues=e.HttpFlavorValues=e.NetTransportValues=e.FaasInvokedProviderValues=e.FaasDocumentOperationValues=e.FaasTriggerValues=e.DbCassandraConsistencyLevelValues=e.DbSystemValues=e.SemanticAttributes=void 0,e.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"};var t;(function(d){d.OTHER_SQL="other_sql",d.MSSQL="mssql",d.MYSQL="mysql",d.ORACLE="oracle",d.DB2="db2",d.POSTGRESQL="postgresql",d.REDSHIFT="redshift",d.HIVE="hive",d.CLOUDSCAPE="cloudscape",d.HSQLDB="hsqldb",d.PROGRESS="progress",d.MAXDB="maxdb",d.HANADB="hanadb",d.INGRES="ingres",d.FIRSTSQL="firstsql",d.EDB="edb",d.CACHE="cache",d.ADABAS="adabas",d.FIREBIRD="firebird",d.DERBY="derby",d.FILEMAKER="filemaker",d.INFORMIX="informix",d.INSTANTDB="instantdb",d.INTERBASE="interbase",d.MARIADB="mariadb",d.NETEZZA="netezza",d.PERVASIVE="pervasive",d.POINTBASE="pointbase",d.SQLITE="sqlite",d.SYBASE="sybase",d.TERADATA="teradata",d.VERTICA="vertica",d.H2="h2",d.COLDFUSION="coldfusion",d.CASSANDRA="cassandra",d.HBASE="hbase",d.MONGODB="mongodb",d.REDIS="redis",d.COUCHBASE="couchbase",d.COUCHDB="couchdb",d.COSMOSDB="cosmosdb",d.DYNAMODB="dynamodb",d.NEO4J="neo4j",d.GEODE="geode",d.ELASTICSEARCH="elasticsearch",d.MEMCACHED="memcached",d.COCKROACHDB="cockroachdb"})(t=e.DbSystemValues||(e.DbSystemValues={}));var r;(function(d){d.ALL="all",d.EACH_QUORUM="each_quorum",d.QUORUM="quorum",d.LOCAL_QUORUM="local_quorum",d.ONE="one",d.TWO="two",d.THREE="three",d.LOCAL_ONE="local_one",d.ANY="any",d.SERIAL="serial",d.LOCAL_SERIAL="local_serial"})(r=e.DbCassandraConsistencyLevelValues||(e.DbCassandraConsistencyLevelValues={}));var n;(function(d){d.DATASOURCE="datasource",d.HTTP="http",d.PUBSUB="pubsub",d.TIMER="timer",d.OTHER="other"})(n=e.FaasTriggerValues||(e.FaasTriggerValues={}));var o;(function(d){d.INSERT="insert",d.EDIT="edit",d.DELETE="delete"})(o=e.FaasDocumentOperationValues||(e.FaasDocumentOperationValues={}));var i;(function(d){d.AWS="aws",d.AZURE="azure",d.GCP="gcp"})(i=e.FaasInvokedProviderValues||(e.FaasInvokedProviderValues={}));var s;(function(d){d.IP_TCP="ip_tcp",d.IP_UDP="ip_udp",d.IP="ip",d.UNIX="unix",d.PIPE="pipe",d.INPROC="inproc",d.OTHER="other"})(s=e.NetTransportValues||(e.NetTransportValues={}));var a;(function(d){d.HTTP_1_0="1.0",d.HTTP_1_1="1.1",d.HTTP_2_0="2.0",d.SPDY="SPDY",d.QUIC="QUIC"})(a=e.HttpFlavorValues||(e.HttpFlavorValues={}));var c;(function(d){d.QUEUE="queue",d.TOPIC="topic"})(c=e.MessagingDestinationKindValues||(e.MessagingDestinationKindValues={}));var u;(function(d){d.RECEIVE="receive",d.PROCESS="process"})(u=e.MessagingOperationValues||(e.MessagingOperationValues={}));var l;(function(d){d[d.OK=0]="OK",d[d.CANCELLED=1]="CANCELLED",d[d.UNKNOWN=2]="UNKNOWN",d[d.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",d[d.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",d[d.NOT_FOUND=5]="NOT_FOUND",d[d.ALREADY_EXISTS=6]="ALREADY_EXISTS",d[d.PERMISSION_DENIED=7]="PERMISSION_DENIED",d[d.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",d[d.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",d[d.ABORTED=10]="ABORTED",d[d.OUT_OF_RANGE=11]="OUT_OF_RANGE",d[d.UNIMPLEMENTED=12]="UNIMPLEMENTED",d[d.INTERNAL=13]="INTERNAL",d[d.UNAVAILABLE=14]="UNAVAILABLE",d[d.DATA_LOSS=15]="DATA_LOSS",d[d.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(l=e.RpcGrpcStatusCodeValues||(e.RpcGrpcStatusCodeValues={}))}),lX=L(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(uX(),e)}),dX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetrySdkLanguageValues=e.OsTypeValues=e.HostArchValues=e.AwsEcsLaunchtypeValues=e.CloudPlatformValues=e.CloudProviderValues=e.ResourceAttributes=void 0,e.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};var t;(function(a){a.AWS="aws",a.AZURE="azure",a.GCP="gcp"})(t=e.CloudProviderValues||(e.CloudProviderValues={}));var r;(function(a){a.AWS_EC2="aws_ec2",a.AWS_ECS="aws_ecs",a.AWS_EKS="aws_eks",a.AWS_LAMBDA="aws_lambda",a.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",a.AZURE_VM="azure_vm",a.AZURE_CONTAINER_INSTANCES="azure_container_instances",a.AZURE_AKS="azure_aks",a.AZURE_FUNCTIONS="azure_functions",a.AZURE_APP_SERVICE="azure_app_service",a.GCP_COMPUTE_ENGINE="gcp_compute_engine",a.GCP_CLOUD_RUN="gcp_cloud_run",a.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",a.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",a.GCP_APP_ENGINE="gcp_app_engine"})(r=e.CloudPlatformValues||(e.CloudPlatformValues={}));var n;(function(a){a.EC2="ec2",a.FARGATE="fargate"})(n=e.AwsEcsLaunchtypeValues||(e.AwsEcsLaunchtypeValues={}));var o;(function(a){a.AMD64="amd64",a.ARM32="arm32",a.ARM64="arm64",a.IA64="ia64",a.PPC32="ppc32",a.PPC64="ppc64",a.X86="x86"})(o=e.HostArchValues||(e.HostArchValues={}));var i;(function(a){a.WINDOWS="windows",a.LINUX="linux",a.DARWIN="darwin",a.FREEBSD="freebsd",a.NETBSD="netbsd",a.OPENBSD="openbsd",a.DRAGONFLYBSD="dragonflybsd",a.HPUX="hpux",a.AIX="aix",a.SOLARIS="solaris",a.Z_OS="z_os"})(i=e.OsTypeValues||(e.OsTypeValues={}));var s;(function(a){a.CPP="cpp",a.DOTNET="dotnet",a.ERLANG="erlang",a.GO="go",a.JAVA="java",a.NODEJS="nodejs",a.PHP="php",a.PYTHON="python",a.RUBY="ruby",a.WEBJS="webjs"})(s=e.TelemetrySdkLanguageValues||(e.TelemetrySdkLanguageValues={}))}),fX=L(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(dX(),e)}),bm=L(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(lX(),e),r(fX(),e)}),pX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SDK_INFO=void 0;var t=a0(),r=bm();e.SDK_INFO={[r.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[r.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[r.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.TelemetrySdkLanguageValues.NODEJS,[r.ResourceAttributes.TELEMETRY_SDK_VERSION]:t.VERSION}}),mX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unrefTimer=void 0;function t(r){r.unref()}e.unrefTimer=t}),hX=L(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(iX(),e),r(sX(),e),r(aX(),e),r(cX(),e),r(pX(),e),r(mX(),e)}),G$=L(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(hX(),e)}),gX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTimeInput=e.isTimeInputHrTime=e.hrTimeToMicroseconds=e.hrTimeToMilliseconds=e.hrTimeToNanoseconds=e.hrTimeToTimeStamp=e.hrTimeDuration=e.timeInputToHrTime=e.hrTime=void 0;var t=G$(),r=9,n=Math.pow(10,r);function o(h){let g=h/1e3,v=Math.trunc(g),w=Number((g-v).toFixed(r))*n;return[v,w]}function i(){let h=t.otperformance.timeOrigin;if(typeof h!="number"){let g=t.otperformance;h=g.timing&&g.timing.fetchStart}return h}function s(h){let g=o(i()),v=o(typeof h=="number"?h:t.otperformance.now()),w=g[0]+v[0],E=g[1]+v[1];return E>n&&(E-=n,w+=1),[w,E]}e.hrTime=s;function a(h){if(p(h))return h;if(typeof h=="number")return h<i()?s(h):o(h);if(h instanceof Date)return o(h.getTime());throw TypeError("Invalid input type")}e.timeInputToHrTime=a;function c(h,g){let v=g[0]-h[0],w=g[1]-h[1];return w<0&&(v-=1,w+=n),[v,w]}e.hrTimeDuration=c;function u(h){let g=r,v=`${"0".repeat(g)}${h[1]}Z`,w=v.substr(v.length-g-1);return new Date(h[0]*1e3).toISOString().replace("000Z",w)}e.hrTimeToTimeStamp=u;function l(h){return h[0]*n+h[1]}e.hrTimeToNanoseconds=l;function d(h){return Math.round(h[0]*1e3+h[1]/1e6)}e.hrTimeToMilliseconds=d;function f(h){return Math.round(h[0]*1e6+h[1]/1e3)}e.hrTimeToMicroseconds=f;function p(h){return Array.isArray(h)&&h.length===2&&typeof h[0]=="number"&&typeof h[1]=="number"}e.isTimeInputHrTime=p;function m(h){return p(h)||typeof h=="number"||h instanceof Date}e.isTimeInput=m}),vX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),yX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExportResultCode=void 0;var t;(function(r){r[r.SUCCESS=0]="SUCCESS",r[r.FAILED=1]="FAILED"})(t=e.ExportResultCode||(e.ExportResultCode={}))}),wX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompositePropagator=void 0;var t=jt(),r=class{constructor(n={}){var o;this._propagators=(o=n.propagators)!==null&&o!==void 0?o:[],this._fields=Array.from(new Set(this._propagators.map(i=>typeof i.fields=="function"?i.fields():[]).reduce((i,s)=>i.concat(s),[])))}inject(n,o,i){for(let s of this._propagators)try{s.inject(n,o,i)}catch(a){t.diag.warn(`Failed to inject with ${s.constructor.name}. Err: ${a.message}`)}}extract(n,o,i){return this._propagators.reduce((s,a)=>{try{return a.extract(s,o,i)}catch(c){t.diag.warn(`Failed to inject with ${a.constructor.name}. Err: ${c.message}`)}return s},n)}fields(){return this._fields.slice()}};e.CompositePropagator=r}),EX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateValue=e.validateKey=void 0;var t="[_0-9a-z-*/]",r=`[a-z]${t}{0,255}`,n=`[a-z0-9]${t}{0,240}@[a-z]${t}{0,13}`,o=new RegExp(`^(?:${r}|${n})$`),i=/^[ -~]{0,255}[!-~]$/,s=/,|=/;function a(u){return o.test(u)}e.validateKey=a;function c(u){return i.test(u)&&!s.test(u)}e.validateValue=c}),z$=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceState=void 0;var t=EX(),r=32,n=512,o=",",i="=",s=class{constructor(a){this._internalState=new Map,a&&this._parse(a)}set(a,c){let u=this._clone();return u._internalState.has(a)&&u._internalState.delete(a),u._internalState.set(a,c),u}unset(a){let c=this._clone();return c._internalState.delete(a),c}get(a){return this._internalState.get(a)}serialize(){return this._keys().reduce((a,c)=>(a.push(c+i+this.get(c)),a),[]).join(o)}_parse(a){a.length>n||(this._internalState=a.split(o).reverse().reduce((c,u)=>{let l=u.trim(),d=l.indexOf(i);if(d!==-1){let f=l.slice(0,d),p=l.slice(d+1,u.length);t.validateKey(f)&&t.validateValue(p)&&c.set(f,p)}return c},new Map),this._internalState.size>r&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,r))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let a=new s;return a._internalState=new Map(this._internalState),a}};e.TraceState=s}),CX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpTraceContextPropagator=e.parseTraceParent=e.TRACE_STATE_HEADER=e.TRACE_PARENT_HEADER=void 0;var t=jt(),r=f0(),n=z$();e.TRACE_PARENT_HEADER="traceparent",e.TRACE_STATE_HEADER="tracestate";var o="00",i="(?!ff)[\\da-f]{2}",s="(?![0]{32})[\\da-f]{32}",a="(?![0]{16})[\\da-f]{16}",c="[\\da-f]{2}",u=new RegExp(`^\\s?(${i})-(${s})-(${a})-(${c})(-.*)?\\s?$`);function l(f){let p=u.exec(f);return!p||p[1]==="00"&&p[5]?null:{traceId:p[2],spanId:p[3],traceFlags:parseInt(p[4],16)}}e.parseTraceParent=l;var d=class{inject(f,p,m){let h=t.trace.getSpanContext(f);if(!h||r.isTracingSuppressed(f)||!t.isSpanContextValid(h))return;let g=`${o}-${h.traceId}-${h.spanId}-0${Number(h.traceFlags||t.TraceFlags.NONE).toString(16)}`;m.set(p,e.TRACE_PARENT_HEADER,g),h.traceState&&m.set(p,e.TRACE_STATE_HEADER,h.traceState.serialize())}extract(f,p,m){let h=m.get(p,e.TRACE_PARENT_HEADER);if(!h)return f;let g=Array.isArray(h)?h[0]:h;if(typeof g!="string")return f;let v=l(g);if(!v)return f;v.isRemote=!0;let w=m.get(p,e.TRACE_STATE_HEADER);if(w){let E=Array.isArray(w)?w.join(","):w;v.traceState=new n.TraceState(typeof E=="string"?E:void 0)}return t.trace.setSpanContext(f,v)}fields(){return[e.TRACE_PARENT_HEADER,e.TRACE_STATE_HEADER]}};e.HttpTraceContextPropagator=d}),_X=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),SX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRPCMetadata=e.deleteRPCMetadata=e.setRPCMetadata=e.RPCType=void 0;var t=jt(),r=t.createContextKey("OpenTelemetry SDK Context Key RPC_METADATA"),n;(function(a){a.HTTP="http"})(n=e.RPCType||(e.RPCType={}));function o(a,c){return a.setValue(r,c)}e.setRPCMetadata=o;function i(a){return a.deleteValue(r)}e.deleteRPCMetadata=i;function s(a){return a.getValue(r)}e.getRPCMetadata=s}),Y$=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOffSampler=void 0;var t=jt(),r=class{shouldSample(){return{decision:t.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};e.AlwaysOffSampler=r}),K$=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOnSampler=void 0;var t=jt(),r=class{shouldSample(){return{decision:t.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};e.AlwaysOnSampler=r}),bX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParentBasedSampler=void 0;var t=jt(),r=B$(),n=Y$(),o=K$(),i=class{constructor(s){var a,c,u,l;this._root=s.root,this._root||(r.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new o.AlwaysOnSampler),this._remoteParentSampled=(a=s.remoteParentSampled)!==null&&a!==void 0?a:new o.AlwaysOnSampler,this._remoteParentNotSampled=(c=s.remoteParentNotSampled)!==null&&c!==void 0?c:new n.AlwaysOffSampler,this._localParentSampled=(u=s.localParentSampled)!==null&&u!==void 0?u:new o.AlwaysOnSampler,this._localParentNotSampled=(l=s.localParentNotSampled)!==null&&l!==void 0?l:new n.AlwaysOffSampler}shouldSample(s,a,c,u,l,d){let f=t.trace.getSpanContext(s);return!f||!t.isSpanContextValid(f)?this._root.shouldSample(s,a,c,u,l,d):f.isRemote?f.traceFlags&t.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(s,a,c,u,l,d):this._remoteParentNotSampled.shouldSample(s,a,c,u,l,d):f.traceFlags&t.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(s,a,c,u,l,d):this._localParentNotSampled.shouldSample(s,a,c,u,l,d)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};e.ParentBasedSampler=i}),xX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceIdRatioBasedSampler=void 0;var t=jt(),r=class{constructor(n=0){this._ratio=n,this._ratio=this._normalize(n),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(n,o){return{decision:t.isValidTraceId(o)&&this._accumulate(o)<this._upperBound?t.SamplingDecision.RECORD_AND_SAMPLED:t.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(n){return typeof n!="number"||isNaN(n)?0:n>=1?1:n<=0?0:n}_accumulate(n){let o=0;for(let i=0;i<n.length/8;i++){let s=i*8,a=parseInt(n.slice(s,s+8),16);o=(o^a)>>>0}return o}};e.TraceIdRatioBasedSampler=r}),PX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isUrlIgnored=e.urlMatches=void 0;function t(n,o){return typeof o=="string"?n===o:o.test(n)}e.urlMatches=t;function r(n,o){if(!o)return!1;for(let i of o)if(t(n,i))return!0;return!1}e.isUrlIgnored=r}),TX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isWrapped=void 0;function t(r){return typeof r=="function"&&typeof r.__original=="function"&&typeof r.__unwrap=="function"&&r.__wrapped===!0}e.isWrapped=t}),pi=L(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.baggageUtils=void 0,r(nX(),e),r(oX(),e),r(B$(),e),r(q$(),e),r(gX(),e),r(vX(),e),r(yX(),e),r(a0(),e),e.baggageUtils=H$(),r(G$(),e),r(wX(),e),r(CX(),e),r(_X(),e),r(SX(),e),r(Y$(),e),r(K$(),e),r(bX(),e),r(xX(),e),r(f0(),e),r(z$(),e),r(W$(),e),r(V$(),e),r(PX(),e),r(TX(),e),r(a0(),e)}),IX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExceptionEventName=void 0,e.ExceptionEventName="exception"}),X$=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Span=void 0;var t=jt(),r=pi(),n=bm(),o=IX(),i=class{constructor(s,a,c,u,l,d,f=[],p=r.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:t.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=c,this._spanContext=u,this.parentSpanId=d,this.kind=l,this.links=f,this.startTime=r.timeInputToHrTime(p),this.resource=s.resource,this.instrumentationLibrary=s.instrumentationLibrary,this._spanLimits=s.getSpanLimits(),this._spanProcessor=s.getActiveSpanProcessor(),this._spanProcessor.onStart(this,a)}spanContext(){return this._spanContext}setAttribute(s,a){return a==null||this._isSpanEnded()?this:s.length===0?(t.diag.warn(`Invalid attribute key: ${s}`),this):r.isAttributeValue(a)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,s)?this:(this.attributes[s]=a,this):(t.diag.warn(`Invalid attribute value set for key: ${s}`),this)}setAttributes(s){for(let[a,c]of Object.entries(s))this.setAttribute(a,c);return this}addEvent(s,a,c){return this._isSpanEnded()?this:(this.events.length>=this._spanLimits.eventCountLimit&&(t.diag.warn("Dropping extra events."),this.events.shift()),r.isTimeInput(a)&&(typeof c>"u"&&(c=a),a=void 0),typeof c>"u"&&(c=r.hrTime()),this.events.push({name:s,attributes:a,time:r.timeInputToHrTime(c)}),this)}setStatus(s){return this._isSpanEnded()?this:(this.status=s,this)}updateName(s){return this._isSpanEnded()?this:(this.name=s,this)}end(s=r.hrTime()){if(this._isSpanEnded()){t.diag.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=r.timeInputToHrTime(s),this._duration=r.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&t.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this)}isRecording(){return this._ended===!1}recordException(s,a=r.hrTime()){let c={};typeof s=="string"?c[n.SemanticAttributes.EXCEPTION_MESSAGE]=s:s&&(s.code?c[n.SemanticAttributes.EXCEPTION_TYPE]=s.code.toString():s.name&&(c[n.SemanticAttributes.EXCEPTION_TYPE]=s.name),s.message&&(c[n.SemanticAttributes.EXCEPTION_MESSAGE]=s.message),s.stack&&(c[n.SemanticAttributes.EXCEPTION_STACKTRACE]=s.stack)),c[n.SemanticAttributes.EXCEPTION_TYPE]||c[n.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(o.ExceptionEventName,c,a):t.diag.warn(`Failed to record an exception ${s}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&t.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}};e.Span=i}),Q$=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildSamplerFromEnv=e.DEFAULT_CONFIG=void 0;var t=jt(),r=pi(),n=r.getEnv(),o=r.TracesSamplerValues.AlwaysOn;e.DEFAULT_CONFIG={sampler:i(n),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:r.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:r.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:r.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}};function i(c=r.getEnv()){switch(c.OTEL_TRACES_SAMPLER){case r.TracesSamplerValues.AlwaysOn:return new r.AlwaysOnSampler;case r.TracesSamplerValues.AlwaysOff:return new r.AlwaysOffSampler;case r.TracesSamplerValues.ParentBasedAlwaysOn:return new r.ParentBasedSampler({root:new r.AlwaysOnSampler});case r.TracesSamplerValues.ParentBasedAlwaysOff:return new r.ParentBasedSampler({root:new r.AlwaysOffSampler});case r.TracesSamplerValues.TraceIdRatio:return new r.TraceIdRatioBasedSampler(a(c));case r.TracesSamplerValues.ParentBasedTraceIdRatio:return new r.ParentBasedSampler({root:new r.TraceIdRatioBasedSampler(a(c))});default:return t.diag.error(`OTEL_TRACES_SAMPLER value "${c.OTEL_TRACES_SAMPLER} invalid, defaulting to ${o}".`),new r.AlwaysOnSampler}}e.buildSamplerFromEnv=i;var s=1;function a(c){if(c.OTEL_TRACES_SAMPLER_ARG===void 0||c.OTEL_TRACES_SAMPLER_ARG==="")return t.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${s}.`),s;let u=Number(c.OTEL_TRACES_SAMPLER_ARG);return isNaN(u)?(t.diag.error(`OTEL_TRACES_SAMPLER_ARG=${c.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${s}.`),s):u<0||u>1?(t.diag.error(`OTEL_TRACES_SAMPLER_ARG=${c.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${s}.`),s):u}}),DX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeConfig=void 0;var t=Q$();function r(n){let o={sampler:t.buildSamplerFromEnv()},i=Object.assign({},t.DEFAULT_CONFIG,o,n);return i.spanLimits=Object.assign({},t.DEFAULT_CONFIG.spanLimits,n.spanLimits||{}),i}e.mergeConfig=r}),RX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tracer=void 0;var t=jt(),r=pi(),n=X$(),o=DX(),i=class{constructor(a,c,u){this._tracerProvider=u;let l=o.mergeConfig(c);this._sampler=l.sampler,this._spanLimits=l.spanLimits,this._idGenerator=c.idGenerator||new r.RandomIdGenerator,this.resource=u.resource,this.instrumentationLibrary=a}startSpan(a,c={},u=t.context.active()){var l,d;if(r.isTracingSuppressed(u))return t.diag.debug("Instrumentation suppressed, returning Noop Span"),t.trace.wrapSpanContext(t.INVALID_SPAN_CONTEXT);let f=s(c,u),p=this._idGenerator.generateSpanId(),m,h,g;!f||!t.trace.isSpanContextValid(f)?m=this._idGenerator.generateTraceId():(m=f.traceId,h=f.traceState,g=f.spanId);let v=(l=c.kind)!==null&&l!==void 0?l:t.SpanKind.INTERNAL,w=(d=c.links)!==null&&d!==void 0?d:[],E=r.sanitizeAttributes(c.attributes),C=this._sampler.shouldSample(c.root?t.trace.setSpanContext(u,t.INVALID_SPAN_CONTEXT):u,m,a,v,E,w),S=C.decision===t.SamplingDecision.RECORD_AND_SAMPLED?t.TraceFlags.SAMPLED:t.TraceFlags.NONE,x={traceId:m,spanId:p,traceFlags:S,traceState:h};if(C.decision===t.SamplingDecision.NOT_RECORD)return t.diag.debug("Recording is off, propagating context in a non-recording span"),t.trace.wrapSpanContext(x);let I=new n.Span(this,u,a,x,v,g,w,c.startTime);return I.setAttributes(Object.assign(E,C.attributes)),I}startActiveSpan(a,c,u,l){let d,f,p;if(arguments.length<2)return;arguments.length===2?p=c:arguments.length===3?(d=c,p=u):(d=c,f=u,p=l);let m=f??t.context.active(),h=this.startSpan(a,d,m),g=t.trace.setSpan(m,h);return t.context.with(g,p,void 0,h)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}};e.Tracer=i;function s(a,c){if(!a.root)return t.trace.getSpanContext(c)}}),kX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultServiceName=void 0;function t(){return`unknown_service:${process.argv0}`}e.defaultServiceName=t}),AX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.detectResources=void 0;var t=Z$(),r=jt(),n=require("util"),o=async(s={})=>{let a=Object.assign(s),c=await Promise.all((a.detectors||[]).map(async u=>{try{let l=await u.detect(a);return r.diag.debug(`${u.constructor.name} found resource.`,l),l}catch(l){return r.diag.debug(`${u.constructor.name} failed: ${l.message}`),t.Resource.empty()}}));return i(c),c.reduce((u,l)=>u.merge(l),t.Resource.empty())};e.detectResources=o;var i=s=>{s.forEach(a=>{if(Object.keys(a.attributes).length>0){let c=n.inspect(a.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});r.diag.verbose(c)}})}}),OX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.envDetector=void 0;var t=jt(),r=pi(),n=bm(),o=p0(),i=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(s){let a={},c=r.getEnv(),u=c.OTEL_RESOURCE_ATTRIBUTES,l=c.OTEL_SERVICE_NAME;if(u)try{let d=this._parseResourceAttributes(u);Object.assign(a,d)}catch(d){t.diag.debug(`EnvDetector failed: ${d.message}`)}return l&&(a[n.ResourceAttributes.SERVICE_NAME]=l),new o.Resource(a)}_parseResourceAttributes(s){if(!s)return{};let a={},c=s.split(this._COMMA_SEPARATOR,-1);for(let u of c){let l=u.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(l.length!==2)continue;let[d,f]=l;if(d=d.trim(),f=f.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(d))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(f))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);a[d]=f}return a}_isValid(s){return s.length<=this._MAX_LENGTH&&this._isPrintableString(s)}_isPrintableString(s){for(let a=0;a<s.length;a++){let c=s.charAt(a);if(c<=" "||c>="~")return!1}return!0}_isValidAndNotEmpty(s){return s.length>0&&this._isValid(s)}};e.envDetector=new i}),NX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.processDetector=void 0;var t=jt(),r=bm(),n=p0(),o=class{async detect(i){let s={[r.ResourceAttributes.PROCESS_PID]:process.pid,[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[r.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[r.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(s,i)}_getResourceAttributes(i,s){return i[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]===""||i[r.ResourceAttributes.PROCESS_EXECUTABLE_PATH]===""||i[r.ResourceAttributes.PROCESS_COMMAND]===""||i[r.ResourceAttributes.PROCESS_COMMAND_LINE]===""?(t.diag.debug("ProcessDetector failed: Unable to find required process resources. "),n.Resource.empty()):new n.Resource(Object.assign({},i))}};e.processDetector=new o}),LX=L(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(OX(),e),r(NX(),e)}),FX=L(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(kX(),e),r(AX(),e),r(LX(),e)}),J$=L(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(FX(),e)}),Z$=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Resource=void 0;var t=bm(),r=pi(),n=J$(),o=class{constructor(i){this.attributes=i}static empty(){return o.EMPTY}static default(){return new o({[t.ResourceAttributes.SERVICE_NAME]:n.defaultServiceName(),[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[t.ResourceAttributes.TELEMETRY_SDK_NAME]:r.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_NAME],[t.ResourceAttributes.TELEMETRY_SDK_VERSION]:r.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(i){if(!i||!Object.keys(i.attributes).length)return this;let s=Object.assign({},this.attributes,i.attributes);return new o(s)}};e.Resource=o,o.EMPTY=new o({})}),MX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),$X=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),p0=L(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(Z$(),e),r(J$(),e),r(MX(),e),r($X(),e)}),UX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiSpanProcessor=void 0;var t=pi(),r=class{constructor(n){this._spanProcessors=n}forceFlush(){let n=[];for(let o of this._spanProcessors)n.push(o.forceFlush());return new Promise(o=>{Promise.all(n).then(()=>{o()}).catch(i=>{t.globalErrorHandler(i||new Error("MultiSpanProcessor: forceFlush failed")),o()})})}onStart(n,o){for(let i of this._spanProcessors)i.onStart(n,o)}onEnd(n){for(let o of this._spanProcessors)o.onEnd(n)}shutdown(){let n=[];for(let o of this._spanProcessors)n.push(o.shutdown());return new Promise((o,i)=>{Promise.all(n).then(()=>{o()},i)})}};e.MultiSpanProcessor=r}),eU=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopSpanProcessor=void 0;var t=class{onStart(r,n){}onEnd(r){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};e.NoopSpanProcessor=t}),jX=L((e,t)=>{var r=200,n="__lodash_hash_undefined__",o=800,i=16,s=9007199254740991,a="[object Arguments]",c="[object Array]",u="[object AsyncFunction]",l="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Function]",m="[object GeneratorFunction]",h="[object Map]",g="[object Number]",v="[object Null]",w="[object Object]",E="[object Proxy]",C="[object RegExp]",S="[object Set]",x="[object String]",I="[object Undefined]",P="[object WeakMap]",T="[object ArrayBuffer]",D="[object DataView]",R="[object Float32Array]",k="[object Float64Array]",U="[object Int8Array]",W="[object Int16Array]",j="[object Int32Array]",$="[object Uint8Array]",O="[object Uint8ClampedArray]",H="[object Uint16Array]",Q="[object Uint32Array]",M=/[\\^$.*+?()[\]{}|]/g,Z=/^\[object .+?Constructor\]$/,re=/^(?:0|[1-9]\d*)$/,K={};K[R]=K[k]=K[U]=K[W]=K[j]=K[$]=K[O]=K[H]=K[Q]=!0,K[a]=K[c]=K[T]=K[l]=K[D]=K[d]=K[f]=K[p]=K[h]=K[g]=K[w]=K[C]=K[S]=K[x]=K[P]=!1;var fe=typeof global=="object"&&global&&global.Object===Object&&global,_e=typeof self=="object"&&self&&self.Object===Object&&self,ye=fe||_e||Function("return this")(),Ee=typeof e=="object"&&e&&!e.nodeType&&e,Te=Ee&&typeof t=="object"&&t&&!t.nodeType&&t,Je=Te&&Te.exports===Ee,Ge=Je&&fe.process,Se=function(){try{var A=Te&&Te.require&&Te.require("util").types;return A||Ge&&Ge.binding&&Ge.binding("util")}catch{}}(),Ie=Se&&Se.isTypedArray;function Fe(A,z,ee){switch(ee.length){case 0:return A.call(z);case 1:return A.call(z,ee[0]);case 2:return A.call(z,ee[0],ee[1]);case 3:return A.call(z,ee[0],ee[1],ee[2])}return A.apply(z,ee)}function et(A,z){for(var ee=-1,be=Array(A);++ee<A;)be[ee]=z(ee);return be}function ro(A){return function(z){return A(z)}}function Pn(A,z){return A==null?void 0:A[z]}function oe(A,z){return function(ee){return A(z(ee))}}var no=Array.prototype,Tn=Function.prototype,xt=Object.prototype,vt=ye["__core-js_shared__"],G=Tn.toString,ne=xt.hasOwnProperty,ae=function(){var A=/[^.]+$/.exec(vt&&vt.keys&&vt.keys.IE_PROTO||"");return A?"Symbol(src)_1."+A:""}(),pe=xt.toString,de=G.call(Object),He=RegExp("^"+G.call(ne).replace(M,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ke=Je?ye.Buffer:void 0,Y=ye.Symbol,te=ye.Uint8Array,J=ke?ke.allocUnsafe:void 0,ue=oe(Object.getPrototypeOf,Object),ge=Object.create,De=xt.propertyIsEnumerable,Be=no.splice,je=Y?Y.toStringTag:void 0,ze=function(){try{var A=vE(Object,"defineProperty");return A({},"",{}),A}catch{}}(),Ve=ke?ke.isBuffer:void 0,kt=Math.max,ve=Date.now,ur=vE(ye,"Map"),Vr=vE(Object,"create"),$e=function(){function A(){}return function(z){if(!tc(z))return{};if(ge)return ge(z);A.prototype=z;var ee=new A;return A.prototype=void 0,ee}}();function In(A){var z=-1,ee=A==null?0:A.length;for(this.clear();++z<ee;){var be=A[z];this.set(be[0],be[1])}}function Ha(){this.__data__=Vr?Vr(null):{},this.size=0}function qa(A){var z=this.has(A)&&delete this.__data__[A];return this.size-=z?1:0,z}function Ba(A){var z=this.__data__;if(Vr){var ee=z[A];return ee===n?void 0:ee}return ne.call(z,A)?z[A]:void 0}function Va(A){var z=this.__data__;return Vr?z[A]!==void 0:ne.call(z,A)}function Wa(A,z){var ee=this.__data__;return this.size+=this.has(A)?0:1,ee[A]=Vr&&z===void 0?n:z,this}In.prototype.clear=Ha,In.prototype.delete=qa,In.prototype.get=Ba,In.prototype.has=Va,In.prototype.set=Wa;function Wr(A){var z=-1,ee=A==null?0:A.length;for(this.clear();++z<ee;){var be=A[z];this.set(be[0],be[1])}}function Ga(){this.__data__=[],this.size=0}function za(A){var z=this.__data__,ee=se(z,A);if(ee<0)return!1;var be=z.length-1;return ee==be?z.pop():Be.call(z,ee,1),--this.size,!0}function Ar(A){var z=this.__data__,ee=se(z,A);return ee<0?void 0:z[ee][1]}function Ya(A){return se(this.__data__,A)>-1}function Ka(A,z){var ee=this.__data__,be=se(ee,A);return be<0?(++this.size,ee.push([A,z])):ee[be][1]=z,this}Wr.prototype.clear=Ga,Wr.prototype.delete=za,Wr.prototype.get=Ar,Wr.prototype.has=Ya,Wr.prototype.set=Ka;function oo(A){var z=-1,ee=A==null?0:A.length;for(this.clear();++z<ee;){var be=A[z];this.set(be[0],be[1])}}function Xa(){this.size=0,this.__data__={hash:new In,map:new(ur||Wr),string:new In}}function Qa(A){var z=ah(this,A).delete(A);return this.size-=z?1:0,z}function Ja(A){return ah(this,A).get(A)}function Dn(A){return ah(this,A).has(A)}function Za(A,z){var ee=ah(this,A),be=ee.size;return ee.set(A,z),this.size+=ee.size==be?0:1,this}oo.prototype.clear=Xa,oo.prototype.delete=Qa,oo.prototype.get=Ja,oo.prototype.has=Dn,oo.prototype.set=Za;function io(A){var z=this.__data__=new Wr(A);this.size=z.size}function ec(){this.__data__=new Wr,this.size=0}function y(A){var z=this.__data__,ee=z.delete(A);return this.size=z.size,ee}function _(A){return this.__data__.get(A)}function b(A){return this.__data__.has(A)}function N(A,z){var ee=this.__data__;if(ee instanceof Wr){var be=ee.__data__;if(!ur||be.length<r-1)return be.push([A,z]),this.size=++ee.size,this;ee=this.__data__=new oo(be)}return ee.set(A,z),this.size=ee.size,this}io.prototype.clear=ec,io.prototype.delete=y,io.prototype.get=_,io.prototype.has=b,io.prototype.set=N;function F(A,z){var ee=EE(A),be=!ee&&wE(A),ct=!ee&&!be&&ET(A),Pt=!ee&&!be&&!ct&&_T(A),Lt=ee||be||ct||Pt,st=Lt?et(A.length,String):[],Ft=st.length;for(var so in A)(z||ne.call(A,so))&&!(Lt&&(so=="length"||ct&&(so=="offset"||so=="parent")||Pt&&(so=="buffer"||so=="byteLength"||so=="byteOffset")||yT(so,Ft)))&&st.push(so);return st}function V(A,z,ee){(ee!==void 0&&!ch(A[z],ee)||ee===void 0&&!(z in A))&&ie(A,z,ee)}function X(A,z,ee){var be=A[z];(!(ne.call(A,z)&&ch(be,ee))||ee===void 0&&!(z in A))&&ie(A,z,ee)}function se(A,z){for(var ee=A.length;ee--;)if(ch(A[ee][0],z))return ee;return-1}function ie(A,z,ee){z=="__proto__"&&ze?ze(A,z,{configurable:!0,enumerable:!0,value:ee,writable:!0}):A[z]=ee}var at=M2();function nt(A){return A==null?A===void 0?I:v:je&&je in Object(A)?$2(A):V2(A)}function Qe(A){return sf(A)&&nt(A)==a}function Ke(A){if(!tc(A)||q2(A))return!1;var z=_E(A)?He:Z;return z.test(Y2(A))}function Et(A){return sf(A)&&CT(A.length)&&!!K[nt(A)]}function T2(A){if(!tc(A))return B2(A);var z=wT(A),ee=[];for(var be in A)be=="constructor"&&(z||!ne.call(A,be))||ee.push(be);return ee}function vT(A,z,ee,be,ct){A!==z&&at(z,function(Pt,Lt){if(ct||(ct=new io),tc(Pt))I2(A,z,Lt,ee,vT,be,ct);else{var st=be?be(yE(A,Lt),Pt,Lt+"",A,z,ct):void 0;st===void 0&&(st=Pt),V(A,Lt,st)}},ST)}function I2(A,z,ee,be,ct,Pt,Lt){var st=yE(A,ee),Ft=yE(z,ee),so=Lt.get(Ft);if(so){V(A,ee,so);return}var Rn=Pt?Pt(st,Ft,ee+"",A,z,Lt):void 0,af=Rn===void 0;if(af){var SE=EE(Ft),bE=!SE&&ET(Ft),xT=!SE&&!bE&&_T(Ft);Rn=Ft,SE||bE||xT?EE(st)?Rn=st:K2(st)?Rn=N2(st):bE?(af=!1,Rn=k2(Ft,!0)):xT?(af=!1,Rn=O2(Ft,!0)):Rn=[]:X2(Ft)||wE(Ft)?(Rn=st,wE(st)?Rn=Q2(st):(!tc(st)||_E(st))&&(Rn=U2(Ft))):af=!1}af&&(Lt.set(Ft,Rn),ct(Rn,Ft,be,Pt,Lt),Lt.delete(Ft)),V(A,ee,Rn)}function D2(A,z){return G2(W2(A,z,bT),A+"")}var R2=ze?function(A,z){return ze(A,"toString",{configurable:!0,enumerable:!1,value:Z2(z),writable:!0})}:bT;function k2(A,z){if(z)return A.slice();var ee=A.length,be=J?J(ee):new A.constructor(ee);return A.copy(be),be}function A2(A){var z=new A.constructor(A.byteLength);return new te(z).set(new te(A)),z}function O2(A,z){var ee=z?A2(A.buffer):A.buffer;return new A.constructor(ee,A.byteOffset,A.length)}function N2(A,z){var ee=-1,be=A.length;for(z||(z=Array(be));++ee<be;)z[ee]=A[ee];return z}function L2(A,z,ee,be){var ct=!ee;ee||(ee={});for(var Pt=-1,Lt=z.length;++Pt<Lt;){var st=z[Pt],Ft=be?be(ee[st],A[st],st,ee,A):void 0;Ft===void 0&&(Ft=A[st]),ct?ie(ee,st,Ft):X(ee,st,Ft)}return ee}function F2(A){return D2(function(z,ee){var be=-1,ct=ee.length,Pt=ct>1?ee[ct-1]:void 0,Lt=ct>2?ee[2]:void 0;for(Pt=A.length>3&&typeof Pt=="function"?(ct--,Pt):void 0,Lt&&j2(ee[0],ee[1],Lt)&&(Pt=ct<3?void 0:Pt,ct=1),z=Object(z);++be<ct;){var st=ee[be];st&&A(z,st,be,Pt)}return z})}function M2(A){return function(z,ee,be){for(var ct=-1,Pt=Object(z),Lt=be(z),st=Lt.length;st--;){var Ft=Lt[A?st:++ct];if(ee(Pt[Ft],Ft,Pt)===!1)break}return z}}function ah(A,z){var ee=A.__data__;return H2(z)?ee[typeof z=="string"?"string":"hash"]:ee.map}function vE(A,z){var ee=Pn(A,z);return Ke(ee)?ee:void 0}function $2(A){var z=ne.call(A,je),ee=A[je];try{A[je]=void 0;var be=!0}catch{}var ct=pe.call(A);return be&&(z?A[je]=ee:delete A[je]),ct}function U2(A){return typeof A.constructor=="function"&&!wT(A)?$e(ue(A)):{}}function yT(A,z){var ee=typeof A;return z=z??s,!!z&&(ee=="number"||ee!="symbol"&&re.test(A))&&A>-1&&A%1==0&&A<z}function j2(A,z,ee){if(!tc(ee))return!1;var be=typeof z;return(be=="number"?CE(ee)&&yT(z,ee.length):be=="string"&&z in ee)?ch(ee[z],A):!1}function H2(A){var z=typeof A;return z=="string"||z=="number"||z=="symbol"||z=="boolean"?A!=="__proto__":A===null}function q2(A){return!!ae&&ae in A}function wT(A){var z=A&&A.constructor,ee=typeof z=="function"&&z.prototype||xt;return A===ee}function B2(A){var z=[];if(A!=null)for(var ee in Object(A))z.push(ee);return z}function V2(A){return pe.call(A)}function W2(A,z,ee){return z=kt(z===void 0?A.length-1:z,0),function(){for(var be=arguments,ct=-1,Pt=kt(be.length-z,0),Lt=Array(Pt);++ct<Pt;)Lt[ct]=be[z+ct];ct=-1;for(var st=Array(z+1);++ct<z;)st[ct]=be[ct];return st[z]=ee(Lt),Fe(A,this,st)}}function yE(A,z){if(!(z==="constructor"&&typeof A[z]=="function")&&z!="__proto__")return A[z]}var G2=z2(R2);function z2(A){var z=0,ee=0;return function(){var be=ve(),ct=i-(be-ee);if(ee=be,ct>0){if(++z>=o)return arguments[0]}else z=0;return A.apply(void 0,arguments)}}function Y2(A){if(A!=null){try{return G.call(A)}catch{}try{return A+""}catch{}}return""}function ch(A,z){return A===z||A!==A&&z!==z}var wE=Qe(function(){return arguments}())?Qe:function(A){return sf(A)&&ne.call(A,"callee")&&!De.call(A,"callee")},EE=Array.isArray;function CE(A){return A!=null&&CT(A.length)&&!_E(A)}function K2(A){return sf(A)&&CE(A)}var ET=Ve||eV;function _E(A){if(!tc(A))return!1;var z=nt(A);return z==p||z==m||z==u||z==E}function CT(A){return typeof A=="number"&&A>-1&&A%1==0&&A<=s}function tc(A){var z=typeof A;return A!=null&&(z=="object"||z=="function")}function sf(A){return A!=null&&typeof A=="object"}function X2(A){if(!sf(A)||nt(A)!=w)return!1;var z=ue(A);if(z===null)return!0;var ee=ne.call(z,"constructor")&&z.constructor;return typeof ee=="function"&&ee instanceof ee&&G.call(ee)==de}var _T=Ie?ro(Ie):Et;function Q2(A){return L2(A,ST(A))}function ST(A){return CE(A)?F(A,!0):T2(A)}var J2=F2(function(A,z,ee){vT(A,z,ee)});function Z2(A){return function(){return A}}function bT(A){return A}function eV(){return!1}t.exports=J2}),HX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessorBase=void 0;var t=jt(),r=pi(),n=class{constructor(o,i){this._exporter=o,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let s=r.getEnv();this._maxExportBatchSize=typeof(i==null?void 0:i.maxExportBatchSize)=="number"?i.maxExportBatchSize:s.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(i==null?void 0:i.maxQueueSize)=="number"?i.maxQueueSize:s.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(i==null?void 0:i.scheduledDelayMillis)=="number"?i.scheduledDelayMillis:s.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(i==null?void 0:i.exportTimeoutMillis)=="number"?i.exportTimeoutMillis:s.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(o){}onEnd(o){this._isShutdown||this._addToBuffer(o)}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((o,i)=>{Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown()).then(o).catch(s=>{i(s)})}),this._shuttingDownPromise)}_addToBuffer(o){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(o),this._maybeStartTimer())}_flushAll(){return new Promise((o,i)=>{let s=[],a=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let c=0,u=a;c<u;c++)s.push(this._flushOneBatch());Promise.all(s).then(()=>{o()}).catch(i)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((o,i)=>{let s=setTimeout(()=>{i(new Error("Timeout"))},this._exportTimeoutMillis);t.context.with(r.suppressTracing(t.context.active()),()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),a=>{var c;clearTimeout(s),a.code===r.ExportResultCode.SUCCESS?o():i((c=a.error)!==null&&c!==void 0?c:new Error("BatchSpanProcessor: span export failed"))})})})}_maybeStartTimer(){this._timer===void 0&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(o=>{r.globalErrorHandler(o)})},this._scheduledDelayMillis),r.unrefTimer(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};e.BatchSpanProcessorBase=n}),qX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessor=void 0;var t=HX(),r=class extends t.BatchSpanProcessorBase{onShutdown(){}};e.BatchSpanProcessor=r}),BX=L(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(qX(),e)}),tU=L(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(BX(),e)}),VX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BasicTracerProvider=e.ForceFlushState=void 0;var t=jt(),r=pi(),n=p0(),o=rU(),i=Q$(),s=UX(),a=eU(),c=jX(),u=tU(),l;(function(f){f[f.resolved=0]="resolved",f[f.timeout=1]="timeout",f[f.error=2]="error",f[f.unresolved=3]="unresolved"})(l=e.ForceFlushState||(e.ForceFlushState={}));var d=class{constructor(f={}){var p;this._registeredSpanProcessors=[],this._tracers=new Map;let m=c({},i.DEFAULT_CONFIG,f);this.resource=(p=m.resource)!==null&&p!==void 0?p:n.Resource.empty(),this.resource=n.Resource.default().merge(this.resource),this._config=Object.assign({},m,{resource:this.resource});let h=this._buildExporterFromEnv();if(h!==void 0){let g=new u.BatchSpanProcessor(h);this.activeSpanProcessor=g}else this.activeSpanProcessor=new a.NoopSpanProcessor}getTracer(f,p){let m=`${f}@${p||""}`;return this._tracers.has(m)||this._tracers.set(m,new o.Tracer({name:f,version:p},this._config,this)),this._tracers.get(m)}addSpanProcessor(f){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(p=>t.diag.error("Error while trying to shutdown current span processor",p)),this._registeredSpanProcessors.push(f),this.activeSpanProcessor=new s.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(f={}){t.trace.setGlobalTracerProvider(this),f.propagator===void 0&&(f.propagator=this._buildPropagatorFromEnv()),f.contextManager&&t.context.setGlobalContextManager(f.contextManager),f.propagator&&t.propagation.setGlobalPropagator(f.propagator)}forceFlush(){let f=this._config.forceFlushTimeoutMillis,p=this._registeredSpanProcessors.map(m=>new Promise(h=>{let g,v=setTimeout(()=>{h(new Error(`Span processor did not completed within timeout period of ${f} ms`)),g=l.timeout},f);m.forceFlush().then(()=>{clearTimeout(v),g!==l.timeout&&(g=l.resolved,h(g))}).catch(w=>{clearTimeout(v),g=l.error,h(w)})}));return new Promise((m,h)=>{Promise.all(p).then(g=>{let v=g.filter(w=>w!==l.resolved);v.length>0?h(v):m()}).catch(g=>h([g]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(f){var p;return(p=d._registeredPropagators.get(f))===null||p===void 0?void 0:p()}_getSpanExporter(f){var p;return(p=d._registeredExporters.get(f))===null||p===void 0?void 0:p()}_buildPropagatorFromEnv(){let f=Array.from(new Set(r.getEnv().OTEL_PROPAGATORS)),p=f.map(m=>{let h=this._getPropagator(m);return h||t.diag.warn(`Propagator "${m}" requested through environment variable is unavailable.`),h}).reduce((m,h)=>(h&&m.push(h),m),[]);if(p.length!==0)return f.length===1?p[0]:new r.CompositePropagator({propagators:p})}_buildExporterFromEnv(){let f=r.getEnv().OTEL_TRACES_EXPORTER;if(f==="none")return;let p=this._getSpanExporter(f);return p||t.diag.error(`Exporter "${f}" requested through environment variable is unavailable.`),p}};e.BasicTracerProvider=d,d._registeredPropagators=new Map([["tracecontext",()=>new r.HttpTraceContextPropagator],["baggage",()=>new r.HttpBaggagePropagator]]),d._registeredExporters=new Map}),WX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConsoleSpanExporter=void 0;var t=pi(),r=class{export(n,o){return this._sendSpans(n,o)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(n){return{traceId:n.spanContext().traceId,parentId:n.parentSpanId,name:n.name,id:n.spanContext().spanId,kind:n.kind,timestamp:t.hrTimeToMicroseconds(n.startTime),duration:t.hrTimeToMicroseconds(n.duration),attributes:n.attributes,status:n.status,events:n.events}}_sendSpans(n,o){for(let i of n)console.log(this._exportInfo(i));if(o)return o({code:t.ExportResultCode.SUCCESS})}};e.ConsoleSpanExporter=r}),GX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemorySpanExporter=void 0;var t=pi(),r=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(n,o){if(this._stopped)return o({code:t.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...n),setTimeout(()=>o({code:t.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};e.InMemorySpanExporter=r}),zX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),YX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleSpanProcessor=void 0;var t=jt(),r=pi(),n=class{constructor(o){this._exporter=o,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(o){}onEnd(o){this._isShutdown||t.context.with(r.suppressTracing(t.context.active()),()=>{this._exporter.export([o],i=>{var s;i.code!==r.ExportResultCode.SUCCESS&&r.globalErrorHandler((s=i.error)!==null&&s!==void 0?s:new Error(`SimpleSpanProcessor: span export failed (status ${i})`))})})}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((o,i)=>{Promise.resolve().then(()=>this._exporter.shutdown()).then(o).catch(s=>{i(s)})}),this._shuttingDownPromise)}};e.SimpleSpanProcessor=n}),KX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),XX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),QX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),JX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),rU=L(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(RX(),e),r(VX(),e),r(tU(),e),r(WX(),e),r(GX(),e),r(zX(),e),r(YX(),e),r(KX(),e),r(eU(),e),r(X$(),e),r(XX(),e),r(QX(),e),r(JX(),e)}),ZX=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.azureCoreTracing=e.AzureMonitorSymbol=void 0;var t=ar();e.AzureMonitorSymbol="Azure_Monitor_Tracer";var r=!1,n=function(i){if(r)return i;try{var s=rU(),a=jt(),c=new s.BasicTracerProvider,u=c.getTracer("applicationinsights tracer"),l=i.setTracer;i.setTracer=function(d){var f=d.startSpan;d.startSpan=function(p,m,h){var g=f.call(this,p,m,h),v=g.end;return g.end=function(){var w=v.apply(this,arguments);return t.channel.publish("azure-coretracing",g),w},g},d[e.AzureMonitorSymbol]=!0,l.call(this,d)},a.trace.getSpan(a.context.active()),i.setTracer(u),r=!0}catch{}return i};e.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:n};function o(){t.channel.registerMonkeyPatch("@azure/core-tracing",e.azureCoreTracing)}e.enable=o}),e7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.bunyan=void 0;var t=ar(),r=function(o){var i=o.prototype._emit;return o.prototype._emit=function(s,a){var c=i.apply(this,arguments);if(!a){var u=c;u||(u=i.call(this,s,!0)),t.channel.publish("bunyan",{level:s.level,result:u})}return c},o};e.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:r};function n(){t.channel.registerMonkeyPatch("bunyan",e.bunyan)}e.enable=n}),t7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.console=void 0;var t=ar(),r=require("stream"),n=function(i){var s=new r.Writable,a=new r.Writable;s.write=function(m){if(!m)return!0;var h=m.toString();return t.channel.publish("console",{message:h}),!0},a.write=function(m){if(!m)return!0;var h=m.toString();return t.channel.publish("console",{message:h,stderr:!0}),!0};for(var c=new i.Console(s,a),u=["log","info","warn","error","dir","time","timeEnd","trace","assert"],l=function(m){var h=i[m];h&&(i[m]=function(){if(c[m])try{c[m].apply(c,arguments)}catch{}return h.apply(i,arguments)})},d=0,f=u;d<f.length;d++){var p=f[d];l(p)}return i};e.console={versionSpecifier:">= 4.0.0",patch:n};function o(){t.channel.registerMonkeyPatch("console",e.console),require("console")}e.enable=o}),r7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongoCore=void 0;var t=ar(),r=function(o){var i=o.Server.prototype.connect;return o.Server.prototype.connect=function(){var s=i.apply(this,arguments),a=this.s.pool.write;this.s.pool.write=function(){var u=typeof arguments[1]=="function"?1:2;return typeof arguments[u]=="function"&&(arguments[u]=t.channel.bindToContext(arguments[u])),a.apply(this,arguments)};var c=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=t.channel.bindToContext(arguments[1])),c.apply(this,arguments)},s},o};e.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:r};function n(){t.channel.registerMonkeyPatch("mongodb-core",e.mongoCore)}e.enable=n}),n7=L(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(c){for(var u,l=1,d=arguments.length;l<d;l++){u=arguments[l];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])}return c},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongo330=e.mongo3=e.mongo2=void 0;var r=ar(),n=function(c){var u=c.instrument({operationIdGenerator:{next:function(){return r.channel.bindToContext(function(d){return d()})}}}),l={};return u.on("started",function(d){l[d.requestId]||(l[d.requestId]=t(t({},d),{time:new Date}))}),u.on("succeeded",function(d){var f=l[d.requestId];f&&delete l[d.requestId],typeof d.operationId=="function"?d.operationId(function(){return r.channel.publish("mongodb",{startedData:f,event:d,succeeded:!0})}):r.channel.publish("mongodb",{startedData:f,event:d,succeeded:!0})}),u.on("failed",function(d){var f=l[d.requestId];f&&delete l[d.requestId],typeof d.operationId=="function"?d.operationId(function(){return r.channel.publish("mongodb",{startedData:f,event:d,succeeded:!1})}):r.channel.publish("mongodb",{startedData:f,event:d,succeeded:!1})}),c},o=function(c){var u=c.instrument(),l={},d={};return u.on("started",function(f){l[f.requestId]||(d[f.requestId]=r.channel.bindToContext(function(p){return p()}),l[f.requestId]=t(t({},f),{time:new Date}))}),u.on("succeeded",function(f){var p=l[f.requestId];p&&delete l[f.requestId],typeof f=="object"&&typeof d[f.requestId]=="function"&&(d[f.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:f,succeeded:!0})}),delete d[f.requestId])}),u.on("failed",function(f){var p=l[f.requestId];p&&delete l[f.requestId],typeof f=="object"&&typeof d[f.requestId]=="function"&&(d[f.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:f,succeeded:!1})}),delete d[f.requestId])}),c},i=function(c){var u=c.Server.prototype.connect;return c.Server.prototype.connect=function(){var l=u.apply(this,arguments),d=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var p=typeof arguments[1]=="function"?1:2;return typeof arguments[p]=="function"&&(arguments[p]=r.channel.bindToContext(arguments[p])),d.apply(this,arguments)};var f=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=r.channel.bindToContext(arguments[1])),f.apply(this,arguments)},l},c},s=function(c){i(c);var u=c.instrument(),l={},d={};return u.on("started",function(f){l[f.requestId]||(d[f.requestId]=r.channel.bindToContext(function(p){return p()}),l[f.requestId]=f)}),u.on("succeeded",function(f){var p=l[f.requestId];p&&delete l[f.requestId],typeof f=="object"&&typeof d[f.requestId]=="function"&&(d[f.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:f,succeeded:!0})}),delete d[f.requestId])}),u.on("failed",function(f){var p=l[f.requestId];p&&delete l[f.requestId],typeof f=="object"&&typeof d[f.requestId]=="function"&&(d[f.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:f,succeeded:!1})}),delete d[f.requestId])}),c};e.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:n},e.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:o},e.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:s};function a(){r.channel.registerMonkeyPatch("mongodb",e.mongo2),r.channel.registerMonkeyPatch("mongodb",e.mongo3),r.channel.registerMonkeyPatch("mongodb",e.mongo330)}e.enable=a}),o7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mysql=void 0;var t=ar(),r=require("path"),n=function(i,s){var a=function(p,m){return function(h,g){var v=p[h];v&&(p[h]=function(){for(var w=arguments.length-1,E=arguments.length-1;E>=0;--E)if(typeof arguments[E]=="function"){w=E;break}else if(typeof arguments[E]<"u")break;var C=arguments[w],S={result:null,startTime:null,startDate:null};typeof C=="function"&&(g?(S.startTime=process.hrtime(),S.startDate=new Date,arguments[w]=t.channel.bindToContext(g(S,C))):arguments[w]=t.channel.bindToContext(C));var x=v.apply(this,arguments);return S.result=x,x})}},c=function(p,m){return a(p.prototype,m+".prototype")},u=["connect","changeUser","ping","statistics","end"],l=require(r.dirname(s)+"/lib/Connection");u.forEach(function(p){return c(l,"Connection")(p)}),a(l,"Connection")("createQuery",function(p,m){return function(h){var g=process.hrtime(p.startTime),v=g[0]*1e3+g[1]/1e6|0;t.channel.publish("mysql",{query:p.result,callbackArgs:arguments,err:h,duration:v,time:p.startDate}),m.apply(this,arguments)}});var d=["_enqueueCallback"],f=require(r.dirname(s)+"/lib/Pool");return d.forEach(function(p){return c(f,"Pool")(p)}),i};e.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:n};function o(){t.channel.registerMonkeyPatch("mysql",e.mysql)}e.enable=o}),i7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgresPool1=void 0;var t=ar();function r(o){var i=o.prototype.connect;return o.prototype.connect=function(s){return s&&(arguments[0]=t.channel.bindToContext(s)),i.apply(this,arguments)},o}e.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:r};function n(){t.channel.registerMonkeyPatch("pg-pool",e.postgresPool1)}e.enable=n}),s7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgres7=e.postgres6=void 0;var t=ar(),r=require("events");function n(s,a){var c=s.Client.prototype.query,u="__diagnosticOriginalFunc";return s.Client.prototype.query=function(l,d,f){var p={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},m=process.hrtime(),h;function g(v){v&&v[u]&&(v=v[u]);var w=t.channel.bindToContext(function(E,C){var S=process.hrtime(m);if(p.result=C&&{rowCount:C.rowCount,command:C.command},p.error=E,p.duration=Math.ceil(S[0]*1e3+S[1]/1e6),t.channel.publish("postgres",p),E){if(v)return v.apply(this,arguments);h&&h instanceof r.EventEmitter&&h.emit("error",E)}else v&&v.apply(this,arguments)});try{return Object.defineProperty(w,u,{value:v}),w}catch{return v}}try{typeof l=="string"?d instanceof Array?(p.query.preparable={text:l,args:d},f=g(f)):(p.query.text=l,f?f=g(f):d=g(d)):(typeof l.name=="string"?p.query.plan=l.name:l.values instanceof Array?p.query.preparable={text:l.text,args:l.values}:p.query.text=l.text,f?f=g(f):d?d=g(d):l.callback=g(l.callback))}catch{return c.apply(this,arguments)}return arguments[0]=l,arguments[1]=d,arguments[2]=f,arguments.length=arguments.length>3?arguments.length:3,h=c.apply(this,arguments),h},s}function o(s,a){var c=s.Client.prototype.query,u="__diagnosticOriginalFunc";return s.Client.prototype.query=function(l,d,f){var p=this,m=!!f,h={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},g=process.hrtime(),v;function w(E){E&&E[u]&&(E=E[u]);var C=t.channel.bindToContext(function(S,x){var I=process.hrtime(g);if(h.result=x&&{rowCount:x.rowCount,command:x.command},h.error=S,h.duration=Math.ceil(I[0]*1e3+I[1]/1e6),t.channel.publish("postgres",h),S){if(E)return E.apply(this,arguments);v&&v instanceof r.EventEmitter&&v.emit("error",S)}else E&&E.apply(this,arguments)});try{return Object.defineProperty(C,u,{value:E}),C}catch{return E}}try{typeof l=="string"?d instanceof Array?(h.query.preparable={text:l,args:d},m=typeof f=="function",f=m?w(f):f):(h.query.text=l,f?(m=typeof f=="function",f=m?w(f):f):(m=typeof d=="function",d=m?w(d):d)):(typeof l.name=="string"?h.query.plan=l.name:l.values instanceof Array?h.query.preparable={text:l.text,args:l.values}:h.query.text=l.text,f?(m=typeof f=="function",f=w(f)):d?(m=typeof d=="function",d=m?w(d):d):(m=typeof l.callback=="function",l.callback=m?w(l.callback):l.callback))}catch{return c.apply(this,arguments)}return arguments[0]=l,arguments[1]=d,arguments[2]=f,arguments.length=arguments.length>3?arguments.length:3,v=c.apply(this,arguments),m?v:v.then(function(E){return w()(void 0,E),new p._Promise(function(C,S){C(E)})}).catch(function(E){return w()(E,void 0),new p._Promise(function(C,S){S(E)})})},s}e.postgres6={versionSpecifier:"6.*",patch:n},e.postgres7={versionSpecifier:">=7.* <=8.*",patch:o};function i(){t.channel.registerMonkeyPatch("pg",e.postgres6),t.channel.registerMonkeyPatch("pg",e.postgres7)}e.enable=i}),a7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.redis=void 0;var t=ar(),r=function(o){var i=o.RedisClient.prototype.internal_send_command;return o.RedisClient.prototype.internal_send_command=function(s){if(s){var a=s.callback;if(!a||!a.pubsubBound){var c=this.address,u=process.hrtime(),l=new Date;s.callback=t.channel.bindToContext(function(d,f){var p=process.hrtime(u),m=p[0]*1e3+p[1]/1e6|0;t.channel.publish("redis",{duration:m,address:c,commandObj:s,err:d,result:f,time:l}),typeof a=="function"&&a.apply(this,arguments)}),s.callback.pubsubBound=!0}}return i.call(this,s)},o};e.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:r};function n(){t.channel.registerMonkeyPatch("redis",e.redis)}e.enable=n}),c7=L(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(i){for(var s,a=1,c=arguments.length;a<c;a++){s=arguments[a];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(i[u]=s[u])}return i},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=void 0;var r=ar(),n=function(i){var s=i.Connection.prototype.makeRequest;return i.Connection.prototype.makeRequest=function(){function a(u){var l=process.hrtime(),d={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return r.channel.bindToContext(function(f,p,m){var h=process.hrtime(l);d=t(t({},d),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!f&&{rowCount:p,rows:m},query:{text:this.parametersByName.statement.value},error:f,duration:Math.ceil(h[0]*1e3+h[1]/1e6)}),r.channel.publish("tedious",d),u.call(this,f,p,m)})}var c=arguments[0];arguments[0].callback=a(c.callback),s.apply(this,arguments)},i};e.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:n};function o(){r.channel.registerMonkeyPatch("tedious",e.tedious)}e.enable=o}),u7=L(e=>{"use strict";var t=e&&e.__extends||function(){var a=function(c,u){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(l[f]=d[f])},a(c,u)};return function(c,u){a(c,u);function l(){this.constructor=c}c.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)}}(),r=e&&e.__rest||function(a,c){var u={};for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&c.indexOf(l)<0&&(u[l]=a[l]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,l=Object.getOwnPropertySymbols(a);d<l.length;d++)c.indexOf(l[d])<0&&Object.prototype.propertyIsEnumerable.call(a,l[d])&&(u[l[d]]=a[l[d]]);return u};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.winston2=e.winston3=void 0;var n=ar(),o=function(a){var c=a.Logger.prototype.log,u,l=function(d,f,p){var m;return u===a.config.npm.levels?m="npm":u===a.config.syslog.levels?m="syslog":m="unknown",n.channel.publish("winston",{level:d,message:f,meta:p,levelKind:m}),f};return a.Logger.prototype.log=function(){return u=this.levels,!this.filters||this.filters.length===0?this.filters=[l]:this.filters[this.filters.length-1]!==l&&(this.filters=this.filters.filter(function(d){return d!==l}),this.filters.push(l)),c.apply(this,arguments)},a},i=function(a){var c=function(p,m){var h;return p.config.npm.levels[m]!=null?h="npm":p.config.syslog.levels[m]!=null?h="syslog":h="unknown",h},u=function(p){t(m,p);function m(h,g){var v=p.call(this,g)||this;return v.winston=h,v}return m.prototype.log=function(h,g){var v=h.message,w=h.level,E=h.meta,C=r(h,["message","level","meta"]);w=typeof Symbol.for=="function"?h[Symbol.for("level")]:w,v=h instanceof Error?h:v;var S=c(this.winston,w);E=E||{};for(var x in C)C.hasOwnProperty(x)&&(E[x]=C[x]);n.channel.publish("winston",{message:v,level:w,levelKind:S,meta:E}),g()},m}(a.Transport);function l(){var p=arguments[0].levels||a.config.npm.levels,m;for(var h in p)p.hasOwnProperty(h)&&(m=m===void 0||p[h]>p[m]?h:m);this.add(new u(a,{level:m}))}var d=a.createLogger;a.createLogger=function(){var p=arguments[0].levels||a.config.npm.levels,m;for(var h in p)p.hasOwnProperty(h)&&(m=m===void 0||p[h]>p[m]?h:m);var g=d.apply(this,arguments);g.add(new u(a,{level:m}));var v=g.configure;return g.configure=function(){v.apply(this,arguments),l.apply(this,arguments)},g};var f=a.configure;return a.configure=function(){f.apply(this,arguments),l.apply(this,arguments)},a.add(new u(a)),a};e.winston3={versionSpecifier:"3.x",patch:i},e.winston2={versionSpecifier:"2.x",patch:o};function s(){n.channel.registerMonkeyPatch("winston",e.winston2),n.channel.registerMonkeyPatch("winston",e.winston3)}e.enable=s}),l7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=e.pgPool=e.pg=e.winston=e.redis=e.mysql=e.mongodb=e.mongodbCore=e.console=e.bunyan=e.azuresdk=void 0;var t=ZX();e.azuresdk=t;var r=e7();e.bunyan=r;var n=t7();e.console=n;var o=r7();e.mongodbCore=o;var i=n7();e.mongodb=i;var s=o7();e.mysql=s;var a=i7();e.pgPool=a;var c=s7();e.pg=c;var u=a7();e.redis=u;var l=c7();e.tedious=l;var d=u7();e.winston=d;function f(){r.enable(),n.enable(),o.enable(),i.enable(),s.enable(),c.enable(),a.enable(),u.enable(),d.enable(),t.enable(),l.enable()}e.enable=f}),m0=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerContextPreservation=e.IsInitialized=void 0;var t=R$(),r=Rr();e.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var n="DiagnosticChannel";if(e.IsInitialized){o=l7(),i=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",s=i.split(","),a={bunyan:o.bunyan,console:o.console,mongodb:o.mongodb,mongodbCore:o.mongodbCore,mysql:o.mysql,redis:o.redis,pg:o.pg,pgPool:o.pgPool,winston:o.winston,azuresdk:o.azuresdk};for(c in a)s.indexOf(c)===-1&&(a[c].enable(),r.info(n,"Subscribed to "+c+" events"));s.length>0&&r.info(n,"Some modules will not be patched",s)}else r.info(n,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var o,i,s,a,c;function u(l){if(e.IsInitialized){var d=ar();d.channel.addContextPreservation(l),d.channel.spanContextPropagator=t.AsyncScopeManager}}e.registerContextPreservation=u}),xm=L((e,t)=>{"use strict";t.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}}),Ro=L((e,t)=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(l){for(var d,f=1,p=arguments.length;f<p;f++){d=arguments[f];for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(l[m]=d[m])}return l},r.apply(this,arguments)},n=require("http"),o=require("https"),i=require("url"),s=require("constants"),a=Rr(),c=xm(),u=function(){function l(){}return l.getCookie=function(d,f){var p="";if(d&&d.length&&typeof f=="string")for(var m=d+"=",h=f.split(";"),g=0;g<h.length;g++){var f=h[g];if(f=l.trim(f),f&&f.indexOf(m)===0){p=f.substring(m.length,h[g].length);break}}return p},l.trim=function(d){return typeof d=="string"?d.replace(/^\s+|\s+$/g,""):""},l.int32ArrayToBase64=function(d){var f=function(v,w){return String.fromCharCode(v>>w&255)},p=function(v){return f(v,24)+f(v,16)+f(v,8)+f(v,0)},m=d.map(p).join(""),h=Buffer.from?Buffer.from(m,"binary"):new Buffer(m,"binary"),g=h.toString("base64");return g.substr(0,g.indexOf("="))},l.random32=function(){return 4294967296*Math.random()|0},l.randomu32=function(){return l.random32()+2147483648},l.w3cTraceId=function(){for(var d=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],f="",p,m=0;m<4;m++)p=l.random32(),f+=d[p&15]+d[p>>4&15]+d[p>>8&15]+d[p>>12&15]+d[p>>16&15]+d[p>>20&15]+d[p>>24&15]+d[p>>28&15];var h=d[8+Math.random()*4|0];return f.substr(0,8)+f.substr(9,4)+"4"+f.substr(13,3)+h+f.substr(16,3)+f.substr(19,12)},l.w3cSpanId=function(){return l.w3cTraceId().substring(16)},l.isValidW3CId=function(d){return d.length===32&&d!=="00000000000000000000000000000000"},l.isArray=function(d){return Object.prototype.toString.call(d)==="[object Array]"},l.isError=function(d){return d instanceof Error},l.isPrimitive=function(d){var f=typeof d;return f==="string"||f==="number"||f==="boolean"},l.isDate=function(d){return Object.prototype.toString.call(d)==="[object Date]"},l.msToTimeSpan=function(d){(isNaN(d)||d<0)&&(d=0);var f=(d/1e3%60).toFixed(7).replace(/0{0,4}$/,""),p=""+Math.floor(d/(1e3*60))%60,m=""+Math.floor(d/(1e3*60*60))%24,h=Math.floor(d/(1e3*60*60*24));f=f.indexOf(".")<2?"0"+f:f,p=p.length<2?"0"+p:p,m=m.length<2?"0"+m:m;var g=h>0?h+".":"";return g+m+":"+p+":"+f},l.extractError=function(d){var f=d;return{message:d.message,code:f.code||f.id||""}},l.extractObject=function(d){return d instanceof Error?l.extractError(d):typeof d.toJSON=="function"?d.toJSON():d},l.validateStringMap=function(d){if(typeof d!="object"){a.info("Invalid properties dropped from payload");return}var f={};for(var p in d){var m="",h=d[p],g=typeof h;if(l.isPrimitive(h))m=h.toString();else if(h===null||g==="undefined")m="";else if(g==="function"){a.info("key: "+p+" was function; will not serialize");continue}else{var v=l.isArray(h)?h:l.extractObject(h);try{l.isPrimitive(v)?m=v:m=JSON.stringify(v)}catch(w){m=h.constructor.name.toString()+" (Error: "+w.message+")",a.info("key: "+p+", could not be serialized")}}f[p]=m.substring(0,l.MAX_PROPERTY_LENGTH)}return f},l.canIncludeCorrelationHeader=function(d,f){var p=d&&d.config&&d.config.correlationHeaderExcludedDomains;if(!p||p.length==0||!f)return!0;for(var m=0;m<p.length;m++){var h=new RegExp(p[m].replace(/\./g,".").replace(/\*/g,".*"));if(h.test(i.parse(f).hostname))return!1}return!0},l.getCorrelationContextTarget=function(d,f){var p=d.headers&&d.headers[c.requestContextHeader];if(p)for(var m=p.split(","),h=0;h<m.length;++h){var g=m[h].split("=");if(g.length==2&&g[0]==f)return g[1]}},l.makeRequest=function(d,f,p,m){f&&f.indexOf("//")===0&&(f="https:"+f);var h=i.parse(f),g=r(r({},p),{host:h.hostname,port:h.port,path:h.pathname}),v=void 0;if(h.protocol==="https:"&&(v=d.proxyHttpsUrl||void 0),h.protocol==="http:"&&(v=d.proxyHttpUrl||void 0),v){v.indexOf("//")===0&&(v="http:"+v);var w=i.parse(v);w.protocol==="https:"?(a.info("Proxies that use HTTPS are not supported"),v=void 0):g=r(r({},g),{host:w.hostname,port:w.port||"80",path:f,headers:r(r({},g.headers),{Host:h.hostname})})}var E=h.protocol==="https:"&&!v;return E&&d.httpsAgent!==void 0?g.agent=d.httpsAgent:!E&&d.httpAgent!==void 0?g.agent=d.httpAgent:E&&(g.agent=l.tlsRestrictedAgent),E?o.request(g,m):n.request(g,m)},l.safeIncludeCorrelationHeader=function(d,f,p){var m;if(typeof p=="string")m=p;else if(p instanceof Array)m=p.join(",");else if(p&&typeof p.toString=="function")try{m=p.toString()}catch(h){a.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",h,p)}m?l.addCorrelationIdHeaderFromString(d,f,m):f.setHeader(c.requestContextHeader,c.requestContextSourceKey+"="+d.config.correlationId)},l.dumpObj=function(d){var f=Object.prototype.toString.call(d),p="";return f==="[object Error]"?p="{ stack: '"+d.stack+"', message: '"+d.message+"', name: '"+d.name+"'":p=JSON.stringify(d),f+p},l.addCorrelationIdHeaderFromString=function(d,f,p){var m=p.split(","),h=c.requestContextSourceKey+"=",g=m.some(function(v){return v.substring(0,h.length)===h});g||f.setHeader(c.requestContextHeader,p+","+c.requestContextSourceKey+"="+d.config.correlationId)},l.MAX_PROPERTY_LENGTH=8192,l.tlsRestrictedAgent=new o.Agent({keepAlive:!0,maxSockets:25,secureOptions:s.SSL_OP_NO_SSLv2|s.SSL_OP_NO_SSLv3|s.SSL_OP_NO_TLSv1|s.SSL_OP_NO_TLSv1_1}),l}();t.exports=u}),Ld=L((e,t)=>{"use strict";var r=Ro(),n=Rr(),o=function(){function i(){}return i.queryCorrelationId=function(s,a){var c=s.profileQueryEndpoint+"/api/profiles/"+s.instrumentationKey+"/appId";if(i.completedLookups.hasOwnProperty(c)){a(i.completedLookups[c]);return}else if(i.pendingLookups[c]){i.pendingLookups[c].push(a);return}i.pendingLookups[c]=[a];var u=function(){if(i.pendingLookups[c]){var l={method:"GET",disableAppInsightsAutoCollection:!0};n.info(i.TAG,l);var d=r.makeRequest(s,c,l,function(f){if(f.statusCode===200){var p="";f.setEncoding("utf-8"),f.on("data",function(m){p+=m}),f.on("end",function(){n.info(i.TAG,p);var m=i.correlationIdPrefix+p;i.completedLookups[c]=m,i.pendingLookups[c]&&i.pendingLookups[c].forEach(function(h){return h(m)}),delete i.pendingLookups[c]})}else f.statusCode>=400&&f.statusCode<500?(i.completedLookups[c]=void 0,delete i.pendingLookups[c]):setTimeout(u,s.correlationIdRetryIntervalMs)});d&&(d.on("error",function(f){n.warn(i.TAG,f)}),d.end())}};setTimeout(u,0)},i.cancelCorrelationIdQuery=function(s,a){var c=s.profileQueryEndpoint+"/api/profiles/"+s.instrumentationKey+"/appId",u=i.pendingLookups[c];u&&(i.pendingLookups[c]=u.filter(function(l){return l!=a}),i.pendingLookups[c].length==0&&delete i.pendingLookups[c])},i.generateRequestId=function(s){if(s){s=s[0]=="|"?s:"|"+s,s[s.length-1]!=="."&&(s+=".");var a=(i.currentRootId++).toString(16);return i.appendSuffix(s,a,"_")}else return i.generateRootId()},i.getRootId=function(s){var a=s.indexOf(".");a<0&&(a=s.length);var c=s[0]==="|"?1:0;return s.substring(c,a)},i.generateRootId=function(){return"|"+r.w3cTraceId()+"."},i.appendSuffix=function(s,a,c){if(s.length+a.length<i.requestIdMaxLength)return s+a+c;var u=i.requestIdMaxLength-9;if(s.length>u)for(;u>1;--u){var l=s[u-1];if(l==="."||l==="_")break}if(u<=1)return i.generateRootId();for(a=r.randomu32().toString(16);a.length<8;)a="0"+a;return s.substring(0,u)+a+"#"},i.TAG="CorrelationIdManager",i.correlationIdPrefix="cid-v1:",i.w3cEnabled=!0,i.pendingLookups={},i.completedLookups={},i.requestIdMaxLength=1024,i.currentRootId=r.randomu32(),i}();t.exports=o}),cw=L((e,t)=>{"use strict";var r=Ro(),n=Ld(),o=function(){function i(s,a){if(this.traceFlag=i.DEFAULT_TRACE_FLAG,this.version=i.DEFAULT_VERSION,s&&typeof s=="string")if(s.split(",").length>1)this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16);else{var c=s.trim().split("-"),u=c.length;u>=4?(this.version=c[0],this.traceId=c[1],this.spanId=c[2],this.traceFlag=c[3]):(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=i.DEFAULT_VERSION,this.traceId=r.w3cTraceId()),this.version==="00"&&u!==4&&(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=i.DEFAULT_VERSION,this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=i.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=i.DEFAULT_TRACE_FLAG,this.traceId=r.w3cTraceId()),i.isValidTraceId(this.traceId)||(this.traceId=r.w3cTraceId()),i.isValidSpanId(this.spanId)||(this.spanId=r.w3cTraceId().substr(0,16),this.traceId=r.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(a){this.parentId=a.slice();var l=n.getRootId(a);i.isValidTraceId(l)||(this.legacyRootId=l,l=r.w3cTraceId()),a.indexOf("|")!==-1&&(a=a.substring(1+a.substring(0,a.length-1).lastIndexOf("."),a.length-1)),this.traceId=l,this.spanId=a}else this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)}return i.isValidTraceId=function(s){return s.match(/^[0-9a-f]{32}$/)&&s!=="00000000000000000000000000000000"},i.isValidSpanId=function(s){return s.match(/^[0-9a-f]{16}$/)&&s!=="0000000000000000"},i.formatOpenTelemetryTraceFlags=function(s){var a="0"+s.toString(16);return a.substring(a.length-2)},i.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},i.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},i.prototype.updateSpanId=function(){this.spanId=r.w3cTraceId().substr(0,16)},i.DEFAULT_TRACE_FLAG="01",i.DEFAULT_VERSION="00",i}();t.exports=o}),nU=L((e,t)=>{"use strict";var r=function(){function n(o){this.fieldmap=[],o&&(this.fieldmap=this.parseHeader(o))}return n.prototype.toString=function(){var o=this.fieldmap;return!o||o.length==0?null:o.join(", ")},n.validateKeyChars=function(o){var i=o.split("@");if(i.length==2){var s=i[0].trim(),a=i[1].trim(),c=Boolean(s.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),u=Boolean(a.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return c&&u}else if(i.length==1)return Boolean(o.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/));return!1},n.prototype.parseHeader=function(o){var i=[],s={},a=o.split(",");if(a.length>32)return null;for(var c=0,u=a;c<u.length;c++){var l=u[c],d=l.trim();if(d.length!==0){var f=d.split("=");if(f.length!==2||!n.validateKeyChars(f[0])||s[f[0]])return null;s[f[0]]=!0,i.push(d)}}return i},n.strict=!0,n}();t.exports=r}),Oa=L((e,t)=>{"use strict";var r=function(){function n(){}return n}();t.exports=r}),d7=L((e,t)=>{"use strict";var r=e&&e.__extends||function(){var i=function(s,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(c[l]=u[l])},i(s,a)};return function(s,a){i(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Oa(),o=function(i){r(s,i);function s(){var a=i.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);t.exports=o}),oU=L((e,t)=>{"use strict";var r=function(){function n(){}return n}();t.exports=r}),f7=L((e,t)=>{"use strict";var r=function(){function n(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return n}();t.exports=r}),p7=L((e,t)=>{"use strict";var r=e&&e.__extends||function(){var i=function(s,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(c[l]=u[l])},i(s,a)};return function(s,a){i(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=oU(),o=function(i){r(s,i);function s(){return i.call(this)||this}return s}(n);t.exports=o}),iU=L((e,t)=>{"use strict";var r;(function(n){n[n.Measurement=0]="Measurement",n[n.Aggregation=1]="Aggregation"})(r||(r={})),t.exports=r}),m7=L((e,t)=>{"use strict";var r=iU(),n=function(){function o(){this.kind=r.Measurement}return o}();t.exports=n}),h7=L((e,t)=>{"use strict";var r=function(){function n(){this.ver=1,this.sampleRate=100,this.tags={}}return n}();t.exports=r}),sU=L((e,t)=>{"use strict";var r=e&&e.__extends||function(){var i=function(s,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(c[l]=u[l])},i(s,a)};return function(s,a){i(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Oa(),o=function(i){r(s,i);function s(){var a=i.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);t.exports=o}),g7=L((e,t)=>{"use strict";var r=e&&e.__extends||function(){var i=function(s,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(c[l]=u[l])},i(s,a)};return function(s,a){i(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Oa(),o=function(i){r(s,i);function s(){var a=i.call(this)||this;return a.ver=2,a.exceptions=[],a.properties={},a.measurements={},a}return s}(n);t.exports=o}),v7=L((e,t)=>{"use strict";var r=function(){function n(){this.hasFullStack=!0,this.parsedStack=[]}return n}();t.exports=r}),y7=L((e,t)=>{"use strict";var r=e&&e.__extends||function(){var i=function(s,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(c[l]=u[l])},i(s,a)};return function(s,a){i(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Oa(),o=function(i){r(s,i);function s(){var a=i.call(this)||this;return a.ver=2,a.properties={},a}return s}(n);t.exports=o}),w7=L((e,t)=>{"use strict";var r=e&&e.__extends||function(){var i=function(s,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(c[l]=u[l])},i(s,a)};return function(s,a){i(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Oa(),o=function(i){r(s,i);function s(){var a=i.call(this)||this;return a.ver=2,a.metrics=[],a.properties={},a}return s}(n);t.exports=o}),E7=L((e,t)=>{"use strict";var r=e&&e.__extends||function(){var i=function(s,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(c[l]=u[l])},i(s,a)};return function(s,a){i(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=sU(),o=function(i){r(s,i);function s(){var a=i.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);t.exports=o}),C7=L((e,t)=>{"use strict";var r=e&&e.__extends||function(){var i=function(s,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(c[l]=u[l])},i(s,a)};return function(s,a){i(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Oa(),o=function(i){r(s,i);function s(){var a=i.call(this)||this;return a.ver=2,a.success=!0,a.properties={},a.measurements={},a}return s}(n);t.exports=o}),_7=L((e,t)=>{"use strict";var r=e&&e.__extends||function(){var i=function(s,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(c[l]=u[l])},i(s,a)};return function(s,a){i(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Oa(),o=function(i){r(s,i);function s(){var a=i.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);t.exports=o}),S7=L((e,t)=>{"use strict";var r;(function(n){n[n.Verbose=0]="Verbose",n[n.Information=1]="Information",n[n.Warning=2]="Warning",n[n.Error=3]="Error",n[n.Critical=4]="Critical"})(r||(r={})),t.exports=r}),b7=L((e,t)=>{"use strict";var r=function(){function n(){}return n}();t.exports=r}),aU=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AvailabilityData=d7(),e.Base=oU(),e.ContextTagKeys=f7(),e.Data=p7(),e.DataPoint=m7(),e.DataPointType=iU(),e.Domain=Oa(),e.Envelope=h7(),e.EventData=sU(),e.ExceptionData=g7(),e.ExceptionDetails=v7(),e.MessageData=y7(),e.MetricData=w7(),e.PageViewData=E7(),e.RemoteDependencyData=C7(),e.RequestData=_7(),e.SeverityLevel=S7(),e.StackFrame=b7()}),x7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.domainSupportsProperties=e.RemoteDependencyDataConstants=void 0;var t=aU(),r=function(){function o(){}return o.TYPE_HTTP="Http",o.TYPE_AI="Http (tracked component)",o}();e.RemoteDependencyDataConstants=r;function n(o){return"properties"in o||o instanceof t.EventData||o instanceof t.ExceptionData||o instanceof t.MessageData||o instanceof t.MetricData||o instanceof t.PageViewData||o instanceof t.RemoteDependencyData||o instanceof t.RequestData}e.domainSupportsProperties=n}),P7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),T7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),I7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),D7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),R7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),k7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),A7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),O7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),N7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),L7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),F7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),M7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),$7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryType=e.TelemetryTypeString=e.baseTypeToTelemetryType=e.telemetryTypeToBaseType=void 0;function t(o){switch(o){case n.Event:return"EventData";case n.Exception:return"ExceptionData";case n.Trace:return"MessageData";case n.Metric:return"MetricData";case n.Request:return"RequestData";case n.Dependency:return"RemoteDependencyData";case n.Availability:return"AvailabilityData";case n.PageView:return"PageViewData"}}e.telemetryTypeToBaseType=t;function r(o){switch(o){case"EventData":return n.Event;case"ExceptionData":return n.Exception;case"MessageData":return n.Trace;case"MetricData":return n.Metric;case"RequestData":return n.Request;case"RemoteDependencyData":return n.Dependency;case"AvailabilityData":return n.Availability;case"PageViewData":return n.PageView}}e.baseTypeToTelemetryType=r,e.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var n;(function(o){o[o.Event=0]="Event",o[o.Exception=1]="Exception",o[o.Trace=2]="Trace",o[o.Metric=3]="Metric",o[o.Request=4]="Request",o[o.Dependency=5]="Dependency",o[o.Availability=6]="Availability",o[o.PageView=7]="PageView"})(n=e.TelemetryType||(e.TelemetryType={}))}),U7=L(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(P7(),e),r(T7(),e),r(I7(),e),r(D7(),e),r(R7(),e),r(k7(),e),r(A7(),e),r(O7(),e),r(N7(),e),r(L7(),e),r(F7(),e),r(M7(),e),r($7(),e)}),j7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),H7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),q7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),B7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),V7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),W7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),G7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),z7=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Y7=L(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(j7(),e),r(H7(),e),r(q7(),e),r(B7(),e),r(V7(),e),r(W7(),e),r(G7(),e),r(z7(),e)}),bn=L(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(x7(),e),r(aU(),e),r(U7(),e),r(Y7(),e)}),cU=L((e,t)=>{"use strict";var r=function(){function n(){}return n.prototype.getUrl=function(){return this.url},n.prototype.RequestParser=function(){this.startTime=+new Date},n.prototype._setStatus=function(o,i){var s=+new Date;this.duration=s-this.startTime,this.statusCode=o;var a=this.properties||{};if(i){if(typeof i=="string")a.error=i;else if(i instanceof Error)a.error=i.message;else if(typeof i=="object")for(var c in i)a[c]=i[c]&&i[c].toString&&i[c].toString()}this.properties=a},n.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},n}();t.exports=r}),uU=L((e,t)=>{"use strict";var r=e&&e.__extends||function(){var f=function(p,m){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var v in g)Object.prototype.hasOwnProperty.call(g,v)&&(h[v]=g[v])},f(p,m)};return function(p,m){f(p,m);function h(){this.constructor=p}p.prototype=m===null?Object.create(m):(h.prototype=m.prototype,new h)}}(),n=require("url"),o=bn(),i=Ro(),s=xm(),a=cU(),c=Ld(),u=nU(),l=cw(),d=function(f){r(p,f);function p(m,h){var g=f.call(this)||this;return m&&(g.method=m.method,g.url=g._getAbsoluteUrl(m),g.startTime=+new Date,g.socketRemoteAddress=m.socket&&m.socket.remoteAddress,g.parseHeaders(m,h),m.connection&&(g.connectionRemoteAddress=m.connection.remoteAddress,g.legacySocketRemoteAddress=m.connection.socket&&m.connection.socket.remoteAddress)),g}return p.prototype.onError=function(m,h){this._setStatus(void 0,m),h&&(this.duration=h)},p.prototype.onResponse=function(m,h){this._setStatus(m.statusCode,void 0),h&&(this.duration=h)},p.prototype.getRequestTelemetry=function(m){var h={id:this.requestId,name:this.method+" "+n.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(m&&m.time?h.time=m.time:this.startTime&&(h.time=new Date(this.startTime)),m){for(var g in m)h[g]||(h[g]=m[g]);if(m.properties)for(var g in m.properties)h.properties[g]=m.properties[g]}return h},p.prototype.getRequestTags=function(m){var h={};for(var g in m)h[g]=m[g];return h[p.keys.locationIp]=m[p.keys.locationIp]||this._getIp(),h[p.keys.sessionId]=m[p.keys.sessionId]||this._getId("ai_session"),h[p.keys.userId]=m[p.keys.userId]||this._getId("ai_user"),h[p.keys.userAuthUserId]=m[p.keys.userAuthUserId]||this._getId("ai_authUser"),h[p.keys.operationName]=this.getOperationName(m),h[p.keys.operationParentId]=this.getOperationParentId(m),h[p.keys.operationId]=this.getOperationId(m),h},p.prototype.getOperationId=function(m){return m[p.keys.operationId]||this.operationId},p.prototype.getOperationParentId=function(m){return m[p.keys.operationParentId]||this.parentId||this.getOperationId(m)},p.prototype.getOperationName=function(m){return m[p.keys.operationName]||this.method+" "+n.parse(this.url).pathname},p.prototype.getRequestId=function(){return this.requestId},p.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},p.prototype.getTraceparent=function(){return this.traceparent},p.prototype.getTracestate=function(){return this.tracestate},p.prototype.getLegacyRootId=function(){return this.legacyRootId},p.prototype._getAbsoluteUrl=function(m){if(!m.headers)return m.url;var h=m.connection?m.connection.encrypted:null,g=n.parse(m.url),v=g.pathname,w=g.search,E=h||m.headers["x-forwarded-proto"]=="https"?"https":"http",C=n.format({protocol:E,host:m.headers.host,pathname:v,search:w});return C},p.prototype._getIp=function(){var m=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,h=function(v){var w=m.exec(v);if(w)return w[0]},g=h(this.rawHeaders["x-forwarded-for"])||h(this.rawHeaders["x-client-ip"])||h(this.rawHeaders["x-real-ip"])||h(this.connectionRemoteAddress)||h(this.socketRemoteAddress)||h(this.legacySocketRemoteAddress);return!g&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(g="127.0.0.1"),g},p.prototype._getId=function(m){var h=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",g=p.parseId(i.getCookie(m,h));return g},p.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},p.prototype.parseHeaders=function(m,h){if(this.rawHeaders=m.headers||m.rawHeaders,this.userAgent=m.headers&&m.headers["user-agent"],this.sourceCorrelationId=i.getCorrelationContextTarget(m,s.requestContextSourceKey),m.headers){var g=m.headers[s.traceStateHeader]?m.headers[s.traceStateHeader].toString():null,v=m.headers[s.traceparentHeader]?m.headers[s.traceparentHeader].toString():null,w=m.headers[s.requestIdHeader]?m.headers[s.requestIdHeader].toString():null,E=m.headers[s.parentIdHeader]?m.headers[s.parentIdHeader].toString():null,C=m.headers[s.rootIdHeader]?m.headers[s.rootIdHeader].toString():null;this.correlationContextHeader=m.headers[s.correlationContextHeader]?m.headers[s.correlationContextHeader].toString():null,c.w3cEnabled&&(v||g)?(this.traceparent=new l(v?v.toString():null),this.tracestate=v&&g&&new u(g?g.toString():null),this.setBackCompatFromThisTraceContext()):w?c.w3cEnabled?(this.traceparent=new l(null,w),this.setBackCompatFromThisTraceContext()):(this.parentId=w,this.requestId=c.generateRequestId(this.parentId),this.operationId=c.getRootId(this.requestId)):c.w3cEnabled?(this.traceparent=new l,this.traceparent.parentId=E,this.traceparent.legacyRootId=C||E,this.setBackCompatFromThisTraceContext()):(this.parentId=E,this.requestId=c.generateRequestId(C||this.parentId),this.correlationContextHeader=null,this.operationId=c.getRootId(this.requestId)),h&&(this.requestId=h,this.operationId=c.getRootId(this.requestId))}},p.parseId=function(m){var h=m.split("|");return h.length>0?h[0]:""},p.keys=new o.ContextTagKeys,p}(a);t.exports=d}),K7=L((e,t)=>{e=t.exports=oe;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var y=Array.prototype.slice.call(arguments,0);y.unshift("SEMVER"),console.log.apply(console,y)}:r=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,s=e.re=[],a=e.src=[],c=0,u=c++;a[u]="0|[1-9]\\d*";var l=c++;a[l]="[0-9]+";var d=c++;a[d]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=c++;a[f]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var p=c++;a[p]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var m=c++;a[m]="(?:"+a[u]+"|"+a[d]+")";var h=c++;a[h]="(?:"+a[l]+"|"+a[d]+")";var g=c++;a[g]="(?:-("+a[m]+"(?:\\."+a[m]+")*))";var v=c++;a[v]="(?:-?("+a[h]+"(?:\\."+a[h]+")*))";var w=c++;a[w]="[0-9A-Za-z-]+";var E=c++;a[E]="(?:\\+("+a[w]+"(?:\\."+a[w]+")*))";var C=c++,S="v?"+a[f]+a[g]+"?"+a[E]+"?";a[C]="^"+S+"$";var x="[v=\\s]*"+a[p]+a[v]+"?"+a[E]+"?",I=c++;a[I]="^"+x+"$";var P=c++;a[P]="((?:<|>)?=?)";var T=c++;a[T]=a[l]+"|x|X|\\*";var D=c++;a[D]=a[u]+"|x|X|\\*";var R=c++;a[R]="[v=\\s]*("+a[D]+")(?:\\.("+a[D]+")(?:\\.("+a[D]+")(?:"+a[g]+")?"+a[E]+"?)?)?";var k=c++;a[k]="[v=\\s]*("+a[T]+")(?:\\.("+a[T]+")(?:\\.("+a[T]+")(?:"+a[v]+")?"+a[E]+"?)?)?";var U=c++;a[U]="^"+a[P]+"\\s*"+a[R]+"$";var W=c++;a[W]="^"+a[P]+"\\s*"+a[k]+"$";var j=c++;a[j]="(?:^|[^\\d])(\\d{1,"+i+"})(?:\\.(\\d{1,"+i+"}))?(?:\\.(\\d{1,"+i+"}))?(?:$|[^\\d])";var $=c++;a[$]="(?:~>?)";var O=c++;a[O]="(\\s*)"+a[$]+"\\s+",s[O]=new RegExp(a[O],"g");var H="$1~",Q=c++;a[Q]="^"+a[$]+a[R]+"$";var M=c++;a[M]="^"+a[$]+a[k]+"$";var Z=c++;a[Z]="(?:\\^)";var re=c++;a[re]="(\\s*)"+a[Z]+"\\s+",s[re]=new RegExp(a[re],"g");var K="$1^",fe=c++;a[fe]="^"+a[Z]+a[R]+"$";var _e=c++;a[_e]="^"+a[Z]+a[k]+"$";var ye=c++;a[ye]="^"+a[P]+"\\s*("+x+")$|^$";var Ee=c++;a[Ee]="^"+a[P]+"\\s*("+S+")$|^$";var Te=c++;a[Te]="(\\s*)"+a[P]+"\\s*("+x+"|"+a[R]+")",s[Te]=new RegExp(a[Te],"g");var Je="$1$2$3",Ge=c++;a[Ge]="^\\s*("+a[R]+")\\s+-\\s+("+a[R]+")\\s*$";var Se=c++;a[Se]="^\\s*("+a[k]+")\\s+-\\s+("+a[k]+")\\s*$";var Ie=c++;for(a[Ie]="(<|>)?=?\\s*\\*",Fe=0;Fe<c;Fe++)r(Fe,a[Fe]),s[Fe]||(s[Fe]=new RegExp(a[Fe]));var Fe;e.parse=et;function et(y,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),y instanceof oe)return y;if(typeof y!="string"||y.length>n)return null;var b=_.loose?s[I]:s[C];if(!b.test(y))return null;try{return new oe(y,_)}catch{return null}}e.valid=ro;function ro(y,_){var b=et(y,_);return b?b.version:null}e.clean=Pn;function Pn(y,_){var b=et(y.trim().replace(/^[=v]+/,""),_);return b?b.version:null}e.SemVer=oe;function oe(y,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),y instanceof oe){if(y.loose===_.loose)return y;y=y.version}else if(typeof y!="string")throw new TypeError("Invalid Version: "+y);if(y.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof oe))return new oe(y,_);r("SemVer",y,_),this.options=_,this.loose=!!_.loose;var b=y.trim().match(_.loose?s[I]:s[C]);if(!b)throw new TypeError("Invalid Version: "+y);if(this.raw=y,this.major=+b[1],this.minor=+b[2],this.patch=+b[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");b[4]?this.prerelease=b[4].split(".").map(function(N){if(/^[0-9]+$/.test(N)){var F=+N;if(F>=0&&F<o)return F}return N}):this.prerelease=[],this.build=b[5]?b[5].split("."):[],this.format()}oe.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},oe.prototype.toString=function(){return this.version},oe.prototype.compare=function(y){return r("SemVer.compare",this.version,this.options,y),y instanceof oe||(y=new oe(y,this.options)),this.compareMain(y)||this.comparePre(y)},oe.prototype.compareMain=function(y){return y instanceof oe||(y=new oe(y,this.options)),vt(this.major,y.major)||vt(this.minor,y.minor)||vt(this.patch,y.patch)},oe.prototype.comparePre=function(y){if(y instanceof oe||(y=new oe(y,this.options)),this.prerelease.length&&!y.prerelease.length)return-1;if(!this.prerelease.length&&y.prerelease.length)return 1;if(!this.prerelease.length&&!y.prerelease.length)return 0;var _=0;do{var b=this.prerelease[_],N=y.prerelease[_];if(r("prerelease compare",_,b,N),b===void 0&&N===void 0)return 0;if(N===void 0)return 1;if(b===void 0)return-1;if(b!==N)return vt(b,N)}while(++_)},oe.prototype.inc=function(y,_){switch(y){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",_);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",_);break;case"prepatch":this.prerelease.length=0,this.inc("patch",_),this.inc("pre",_);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",_),this.inc("pre",_);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var b=this.prerelease.length;--b>=0;)typeof this.prerelease[b]=="number"&&(this.prerelease[b]++,b=-2);b===-1&&this.prerelease.push(0)}_&&(this.prerelease[0]===_?isNaN(this.prerelease[1])&&(this.prerelease=[_,0]):this.prerelease=[_,0]);break;default:throw new Error("invalid increment argument: "+y)}return this.format(),this.raw=this.version,this},e.inc=no;function no(y,_,b,N){typeof b=="string"&&(N=b,b=void 0);try{return new oe(y,b).inc(_,N).version}catch{return null}}e.diff=Tn;function Tn(y,_){if(ge(y,_))return null;var b=et(y),N=et(_),F="";if(b.prerelease.length||N.prerelease.length){F="pre";var V="prerelease"}for(var X in b)if((X==="major"||X==="minor"||X==="patch")&&b[X]!==N[X])return F+X;return V}e.compareIdentifiers=vt;var xt=/^[0-9]+$/;function vt(y,_){var b=xt.test(y),N=xt.test(_);return b&&N&&(y=+y,_=+_),y===_?0:b&&!N?-1:N&&!b?1:y<_?-1:1}e.rcompareIdentifiers=G;function G(y,_){return vt(_,y)}e.major=ne;function ne(y,_){return new oe(y,_).major}e.minor=ae;function ae(y,_){return new oe(y,_).minor}e.patch=pe;function pe(y,_){return new oe(y,_).patch}e.compare=de;function de(y,_,b){return new oe(y,b).compare(new oe(_,b))}e.compareLoose=He;function He(y,_){return de(y,_,!0)}e.rcompare=ke;function ke(y,_,b){return de(_,y,b)}e.sort=Y;function Y(y,_){return y.sort(function(b,N){return e.compare(b,N,_)})}e.rsort=te;function te(y,_){return y.sort(function(b,N){return e.rcompare(b,N,_)})}e.gt=J;function J(y,_,b){return de(y,_,b)>0}e.lt=ue;function ue(y,_,b){return de(y,_,b)<0}e.eq=ge;function ge(y,_,b){return de(y,_,b)===0}e.neq=De;function De(y,_,b){return de(y,_,b)!==0}e.gte=Be;function Be(y,_,b){return de(y,_,b)>=0}e.lte=je;function je(y,_,b){return de(y,_,b)<=0}e.cmp=ze;function ze(y,_,b,N){switch(_){case"===":return typeof y=="object"&&(y=y.version),typeof b=="object"&&(b=b.version),y===b;case"!==":return typeof y=="object"&&(y=y.version),typeof b=="object"&&(b=b.version),y!==b;case"":case"=":case"==":return ge(y,b,N);case"!=":return De(y,b,N);case">":return J(y,b,N);case">=":return Be(y,b,N);case"<":return ue(y,b,N);case"<=":return je(y,b,N);default:throw new TypeError("Invalid operator: "+_)}}e.Comparator=Ve;function Ve(y,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),y instanceof Ve){if(y.loose===!!_.loose)return y;y=y.value}if(!(this instanceof Ve))return new Ve(y,_);r("comparator",y,_),this.options=_,this.loose=!!_.loose,this.parse(y),this.semver===kt?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var kt={};Ve.prototype.parse=function(y){var _=this.options.loose?s[ye]:s[Ee],b=y.match(_);if(!b)throw new TypeError("Invalid comparator: "+y);this.operator=b[1],this.operator==="="&&(this.operator=""),b[2]?this.semver=new oe(b[2],this.options.loose):this.semver=kt},Ve.prototype.toString=function(){return this.value},Ve.prototype.test=function(y){return r("Comparator.test",y,this.options.loose),this.semver===kt?!0:(typeof y=="string"&&(y=new oe(y,this.options)),ze(y,this.operator,this.semver,this.options))},Ve.prototype.intersects=function(y,_){if(!(y instanceof Ve))throw new TypeError("a Comparator is required");(!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1});var b;if(this.operator==="")return b=new ve(y.value,_),Ar(this.value,b,_);if(y.operator==="")return b=new ve(this.value,_),Ar(y.semver,b,_);var N=(this.operator===">="||this.operator===">")&&(y.operator===">="||y.operator===">"),F=(this.operator==="<="||this.operator==="<")&&(y.operator==="<="||y.operator==="<"),V=this.semver.version===y.semver.version,X=(this.operator===">="||this.operator==="<=")&&(y.operator===">="||y.operator==="<="),se=ze(this.semver,"<",y.semver,_)&&(this.operator===">="||this.operator===">")&&(y.operator==="<="||y.operator==="<"),ie=ze(this.semver,">",y.semver,_)&&(this.operator==="<="||this.operator==="<")&&(y.operator===">="||y.operator===">");return N||F||V&&X||se||ie},e.Range=ve;function ve(y,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),y instanceof ve)return y.loose===!!_.loose&&y.includePrerelease===!!_.includePrerelease?y:new ve(y.raw,_);if(y instanceof Ve)return new ve(y.value,_);if(!(this instanceof ve))return new ve(y,_);if(this.options=_,this.loose=!!_.loose,this.includePrerelease=!!_.includePrerelease,this.raw=y,this.set=y.split(/\s*\|\|\s*/).map(function(b){return this.parseRange(b.trim())},this).filter(function(b){return b.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+y);this.format()}ve.prototype.format=function(){return this.range=this.set.map(function(y){return y.join(" ").trim()}).join("||").trim(),this.range},ve.prototype.toString=function(){return this.range},ve.prototype.parseRange=function(y){var _=this.options.loose;y=y.trim();var b=_?s[Se]:s[Ge];y=y.replace(b,Ga),r("hyphen replace",y),y=y.replace(s[Te],Je),r("comparator trim",y,s[Te]),y=y.replace(s[O],H),y=y.replace(s[re],K),y=y.split(/\s+/).join(" ");var N=_?s[ye]:s[Ee],F=y.split(" ").map(function(V){return Vr(V,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(F=F.filter(function(V){return!!V.match(N)})),F=F.map(function(V){return new Ve(V,this.options)},this),F},ve.prototype.intersects=function(y,_){if(!(y instanceof ve))throw new TypeError("a Range is required");return this.set.some(function(b){return b.every(function(N){return y.set.some(function(F){return F.every(function(V){return N.intersects(V,_)})})})})},e.toComparators=ur;function ur(y,_){return new ve(y,_).set.map(function(b){return b.map(function(N){return N.value}).join(" ").trim().split(" ")})}function Vr(y,_){return r("comp",y,_),y=qa(y,_),r("caret",y),y=In(y,_),r("tildes",y),y=Va(y,_),r("xrange",y),y=Wr(y,_),r("stars",y),y}function $e(y){return!y||y.toLowerCase()==="x"||y==="*"}function In(y,_){return y.trim().split(/\s+/).map(function(b){return Ha(b,_)}).join(" ")}function Ha(y,_){var b=_.loose?s[M]:s[Q];return y.replace(b,function(N,F,V,X,se){r("tilde",y,N,F,V,X,se);var ie;return $e(F)?ie="":$e(V)?ie=">="+F+".0.0 <"+(+F+1)+".0.0":$e(X)?ie=">="+F+"."+V+".0 <"+F+"."+(+V+1)+".0":se?(r("replaceTilde pr",se),ie=">="+F+"."+V+"."+X+"-"+se+" <"+F+"."+(+V+1)+".0"):ie=">="+F+"."+V+"."+X+" <"+F+"."+(+V+1)+".0",r("tilde return",ie),ie})}function qa(y,_){return y.trim().split(/\s+/).map(function(b){return Ba(b,_)}).join(" ")}function Ba(y,_){r("caret",y,_);var b=_.loose?s[_e]:s[fe];return y.replace(b,function(N,F,V,X,se){r("caret",y,N,F,V,X,se);var ie;return $e(F)?ie="":$e(V)?ie=">="+F+".0.0 <"+(+F+1)+".0.0":$e(X)?F==="0"?ie=">="+F+"."+V+".0 <"+F+"."+(+V+1)+".0":ie=">="+F+"."+V+".0 <"+(+F+1)+".0.0":se?(r("replaceCaret pr",se),F==="0"?V==="0"?ie=">="+F+"."+V+"."+X+"-"+se+" <"+F+"."+V+"."+(+X+1):ie=">="+F+"."+V+"."+X+"-"+se+" <"+F+"."+(+V+1)+".0":ie=">="+F+"."+V+"."+X+"-"+se+" <"+(+F+1)+".0.0"):(r("no pr"),F==="0"?V==="0"?ie=">="+F+"."+V+"."+X+" <"+F+"."+V+"."+(+X+1):ie=">="+F+"."+V+"."+X+" <"+F+"."+(+V+1)+".0":ie=">="+F+"."+V+"."+X+" <"+(+F+1)+".0.0"),r("caret return",ie),ie})}function Va(y,_){return r("replaceXRanges",y,_),y.split(/\s+/).map(function(b){return Wa(b,_)}).join(" ")}function Wa(y,_){y=y.trim();var b=_.loose?s[W]:s[U];return y.replace(b,function(N,F,V,X,se,ie){r("xRange",y,N,F,V,X,se,ie);var at=$e(V),nt=at||$e(X),Qe=nt||$e(se),Ke=Qe;return F==="="&&Ke&&(F=""),at?F===">"||F==="<"?N="<0.0.0":N="*":F&&Ke?(nt&&(X=0),se=0,F===">"?(F=">=",nt?(V=+V+1,X=0,se=0):(X=+X+1,se=0)):F==="<="&&(F="<",nt?V=+V+1:X=+X+1),N=F+V+"."+X+"."+se):nt?N=">="+V+".0.0 <"+(+V+1)+".0.0":Qe&&(N=">="+V+"."+X+".0 <"+V+"."+(+X+1)+".0"),r("xRange return",N),N})}function Wr(y,_){return r("replaceStars",y,_),y.trim().replace(s[Ie],"")}function Ga(y,_,b,N,F,V,X,se,ie,at,nt,Qe,Ke){return $e(b)?_="":$e(N)?_=">="+b+".0.0":$e(F)?_=">="+b+"."+N+".0":_=">="+_,$e(ie)?se="":$e(at)?se="<"+(+ie+1)+".0.0":$e(nt)?se="<"+ie+"."+(+at+1)+".0":Qe?se="<="+ie+"."+at+"."+nt+"-"+Qe:se="<="+se,(_+" "+se).trim()}ve.prototype.test=function(y){if(!y)return!1;typeof y=="string"&&(y=new oe(y,this.options));for(var _=0;_<this.set.length;_++)if(za(this.set[_],y,this.options))return!0;return!1};function za(y,_,b){for(var N=0;N<y.length;N++)if(!y[N].test(_))return!1;if(_.prerelease.length&&!b.includePrerelease){for(N=0;N<y.length;N++)if(r(y[N].semver),y[N].semver!==kt&&y[N].semver.prerelease.length>0){var F=y[N].semver;if(F.major===_.major&&F.minor===_.minor&&F.patch===_.patch)return!0}return!1}return!0}e.satisfies=Ar;function Ar(y,_,b){try{_=new ve(_,b)}catch{return!1}return _.test(y)}e.maxSatisfying=Ya;function Ya(y,_,b){var N=null,F=null;try{var V=new ve(_,b)}catch{return null}return y.forEach(function(X){V.test(X)&&(!N||F.compare(X)===-1)&&(N=X,F=new oe(N,b))}),N}e.minSatisfying=Ka;function Ka(y,_,b){var N=null,F=null;try{var V=new ve(_,b)}catch{return null}return y.forEach(function(X){V.test(X)&&(!N||F.compare(X)===1)&&(N=X,F=new oe(N,b))}),N}e.minVersion=oo;function oo(y,_){y=new ve(y,_);var b=new oe("0.0.0");if(y.test(b)||(b=new oe("0.0.0-0"),y.test(b)))return b;b=null;for(var N=0;N<y.set.length;++N){var F=y.set[N];F.forEach(function(V){var X=new oe(V.semver.version);switch(V.operator){case">":X.prerelease.length===0?X.patch++:X.prerelease.push(0),X.raw=X.format();case"":case">=":(!b||J(b,X))&&(b=X);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+V.operator)}})}return b&&y.test(b)?b:null}e.validRange=Xa;function Xa(y,_){try{return new ve(y,_).range||"*"}catch{return null}}e.ltr=Qa;function Qa(y,_,b){return Dn(y,_,"<",b)}e.gtr=Ja;function Ja(y,_,b){return Dn(y,_,">",b)}e.outside=Dn;function Dn(y,_,b,N){y=new oe(y,N),_=new ve(_,N);var F,V,X,se,ie;switch(b){case">":F=J,V=je,X=ue,se=">",ie=">=";break;case"<":F=ue,V=Be,X=J,se="<",ie="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Ar(y,_,N))return!1;for(var at=0;at<_.set.length;++at){var nt=_.set[at],Qe=null,Ke=null;if(nt.forEach(function(Et){Et.semver===kt&&(Et=new Ve(">=0.0.0")),Qe=Qe||Et,Ke=Ke||Et,F(Et.semver,Qe.semver,N)?Qe=Et:X(Et.semver,Ke.semver,N)&&(Ke=Et)}),Qe.operator===se||Qe.operator===ie||(!Ke.operator||Ke.operator===se)&&V(y,Ke.semver)||Ke.operator===ie&&X(y,Ke.semver))return!1}return!0}e.prerelease=Za;function Za(y,_){var b=et(y,_);return b&&b.prerelease.length?b.prerelease:null}e.intersects=io;function io(y,_,b){return y=new ve(y,b),_=new ve(_,b),y.intersects(_)}e.coerce=ec;function ec(y){if(y instanceof oe)return y;if(typeof y!="string")return null;var _=y.match(s[j]);return _==null?null:et(_[1]+"."+(_[2]||"0")+"."+(_[3]||"0"))}}),h0=L((e,t)=>{"use strict";function r(l){return typeof l=="function"}var n=console.error.bind(console);function o(l,d,f){var p=!!l[d]&&l.propertyIsEnumerable(d);Object.defineProperty(l,d,{configurable:!0,enumerable:p,writable:!0,value:f})}function i(l){l&&l.logger&&(r(l.logger)?n=l.logger:n("new logger isn't a function, not replacing"))}function s(l,d,f){if(!l||!l[d]){n("no original function "+d+" to wrap");return}if(!f){n("no wrapper function"),n(new Error().stack);return}if(!r(l[d])||!r(f)){n("original object and wrapper must be functions");return}var p=l[d],m=f(p,d);return o(m,"__original",p),o(m,"__unwrap",function(){l[d]===m&&o(l,d,p)}),o(m,"__wrapped",!0),o(l,d,m),m}function a(l,d,f){if(l)Array.isArray(l)||(l=[l]);else{n("must provide one or more modules to patch"),n(new Error().stack);return}if(!(d&&Array.isArray(d))){n("must provide one or more functions to wrap on modules");return}l.forEach(function(p){d.forEach(function(m){s(p,m,f)})})}function c(l,d){if(!l||!l[d]){n("no function to unwrap."),n(new Error().stack);return}if(!l[d].__unwrap)n("no original to unwrap to -- has "+d+" already been unwrapped?");else return l[d].__unwrap()}function u(l,d){if(l)Array.isArray(l)||(l=[l]);else{n("must provide one or more modules to patch"),n(new Error().stack);return}if(!(d&&Array.isArray(d))){n("must provide one or more functions to unwrap on modules");return}l.forEach(function(f){d.forEach(function(p){c(f,p)})})}i.wrap=s,i.massWrap=a,i.unwrap=c,i.massUnwrap=u,t.exports=i}),g0=L((e,t)=>{"use strict";var r=h0(),n=r.wrap,o=r.unwrap,i="wrap@before";function s(d,f,p){var m=!!d[f]&&d.propertyIsEnumerable(f);Object.defineProperty(d,f,{configurable:!0,enumerable:m,writable:!0,value:p})}function a(d,f){for(var p=f.length,m=0;m<p;m++){var h=f[m],g=d[i];if(typeof g=="function")g(h);else if(Array.isArray(g))for(var v=g.length,w=0;w<v;w++)g[w](h)}}function c(d,f){var p;return p=d._events&&d._events[f],Array.isArray(p)||(p?p=[p]:p=[]),p}function u(d,f,p){var m=c(d,f),h=m.filter(function(g){return p.indexOf(g)===-1});h.length>0&&a(d,h)}function l(d,f){if(d){var p=d;if(typeof d=="function")p=f(d);else if(Array.isArray(d)){p=[];for(var m=0;m<d.length;m++)p[m]=f(d[m])}return p}}t.exports=function(d,f,p){if(!d||!d.on||!d.addListener||!d.removeListener||!d.emit)throw new Error("can only wrap real EEs");if(!f)throw new Error("must have function to run on listener addition");if(!p)throw new Error("must have function to wrap listeners when emitting");function m(g){return function(v,w){var E=c(this,v).slice();try{var C=g.call(this,v,w);return u(this,v,E),C}finally{this.on.__wrapped||n(this,"on",m),this.addListener.__wrapped||n(this,"addListener",m)}}}function h(g){return function(v){if(!this._events||!this._events[v])return g.apply(this,arguments);var w=this._events[v];function E(C){return function(){this._events[v]=w;try{return C.apply(this,arguments)}finally{w=this._events[v],this._events[v]=l(w,p)}}}n(this,"removeListener",E);try{return this._events[v]=l(w,p),g.apply(this,arguments)}finally{o(this,"removeListener"),this._events[v]=w}}}d[i]?typeof d[i]=="function"?s(d,i,[d[i],f]):Array.isArray(d[i])&&d[i].push(f):s(d,i,f),d.__wrapped||(n(d,"addListener",m),n(d,"on",m),n(d,"emit",h),s(d,"__unwrap",function(){o(d,"addListener"),o(d,"on"),o(d,"emit"),delete d[i],delete d.__wrapped}),s(d,"__wrapped",!0))}}),X7=L((e,t)=>{"use strict";var r=require("util"),n=require("assert"),o=g0(),i=require("async_hooks"),s="cls@contexts",a="error@context",c=process.env.DEBUG_CLS_HOOKED,u=-1;t.exports={getNamespace:d,createNamespace:f,destroyNamespace:p,reset:m,ERROR_SYMBOL:a};function l(g){this.name=g,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}l.prototype.set=function(g,v){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[g]=v,c){let w=" ".repeat(this._indent<0?0:this._indent);h(w+"CONTEXT-SET KEY:"+g+"="+v+" in ns:"+this.name+" currentUid:"+u+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return v},l.prototype.get=function(g){if(!this.active){if(c){let v=i.currentId(),w=i.triggerAsyncId(),E=" ".repeat(this._indent<0?0:this._indent);h(`${E}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${g}=undefined currentUid:${u} asyncHooksCurrentId:${v} triggerId:${w} len:${this._set.length}`)}return}if(c){let v=i.executionAsyncId(),w=i.triggerAsyncId(),E=" ".repeat(this._indent<0?0:this._indent);h(E+"CONTEXT-GETTING KEY:"+g+"="+this.active[g]+" ("+this.name+") currentUid:"+u+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),h(`${E}CONTEXT-GETTING KEY: (${this.name}) ${g}=${this.active[g]} currentUid:${u} asyncHooksCurrentId:${v} triggerId:${w} len:${this._set.length} active:${r.inspect(this.active)}`)}return this.active[g]},l.prototype.createContext=function(){let g=Object.create(this.active?this.active:Object.prototype);if(g._ns_name=this.name,g.id=u,c){let v=i.executionAsyncId(),w=i.triggerAsyncId(),E=" ".repeat(this._indent<0?0:this._indent);h(`${E}CONTEXT-CREATED Context: (${this.name}) currentUid:${u} asyncHooksCurrentId:${v} triggerId:${w} len:${this._set.length} context:${r.inspect(g,{showHidden:!0,depth:2,colors:!0})}`)}return g},l.prototype.run=function(g){let v=this.createContext();this.enter(v);try{if(c){let w=i.triggerAsyncId(),E=i.executionAsyncId(),C=" ".repeat(this._indent<0?0:this._indent);h(`${C}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${u} triggerId:${w} asyncHooksCurrentId:${E} len:${this._set.length} context:${r.inspect(v)}`)}return g(v),v}catch(w){throw w&&(w[a]=v),w}finally{if(c){let w=i.triggerAsyncId(),E=i.executionAsyncId(),C=" ".repeat(this._indent<0?0:this._indent);h(`${C}CONTEXT-RUN END: (${this.name}) currentUid:${u} triggerId:${w} asyncHooksCurrentId:${E} len:${this._set.length} ${r.inspect(v)}`)}this.exit(v)}},l.prototype.runAndReturn=function(g){let v;return this.run(function(w){v=g(w)}),v},l.prototype.runPromise=function(g){let v=this.createContext();this.enter(v);let w=g(v);if(!w||!w.then||!w.catch)throw new Error("fn must return a promise.");return c&&h("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+u+" len:"+this._set.length+" "+r.inspect(v)),w.then(E=>(c&&h("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+u+" len:"+this._set.length+" "+r.inspect(v)),this.exit(v),E)).catch(E=>{throw E[a]=v,c&&h("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+u+" len:"+this._set.length+" "+r.inspect(v)),this.exit(v),E})},l.prototype.bind=function(g,v){v||(this.active?v=this.active:v=this.createContext());let w=this;return function(){w.enter(v);try{return g.apply(this,arguments)}catch(E){throw E&&(E[a]=v),E}finally{w.exit(v)}}},l.prototype.enter=function(g){if(n.ok(g,"context must be provided for entering"),c){let v=i.executionAsyncId(),w=i.triggerAsyncId(),E=" ".repeat(this._indent<0?0:this._indent);h(`${E}CONTEXT-ENTER: (${this.name}) currentUid:${u} triggerId:${w} asyncHooksCurrentId:${v} len:${this._set.length} ${r.inspect(g)}`)}this._set.push(this.active),this.active=g},l.prototype.exit=function(g){if(n.ok(g,"context must be provided for exiting"),c){let w=i.executionAsyncId(),E=i.triggerAsyncId(),C=" ".repeat(this._indent<0?0:this._indent);h(`${C}CONTEXT-EXIT: (${this.name}) currentUid:${u} triggerId:${E} asyncHooksCurrentId:${w} len:${this._set.length} ${r.inspect(g)}`)}if(this.active===g){n.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let v=this._set.lastIndexOf(g);v<0?(c&&h("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(g)),n.ok(v>=0,`context not currently entered; can't exit. 
`+r.inspect(this)+`
`+r.inspect(g))):(n.ok(v,"can't remove top context"),this._set.splice(v,1))},l.prototype.bindEmitter=function(g){n.ok(g.on&&g.addListener&&g.emit,"can only bind real EEs");let v=this,w="context@"+this.name;function E(S){!S||(S[s]||(S[s]=Object.create(null)),S[s][w]={namespace:v,context:v.active})}function C(S){if(!(S&&S[s]))return S;let x=S,I=S[s];return Object.keys(I).forEach(function(P){let T=I[P];x=T.namespace.bind(x,T.context)}),x}o(g,E,C)},l.prototype.fromException=function(g){return g[a]};function d(g){return process.namespaces[g]}function f(g){n.ok(g,"namespace must be given a name."),c&&h(`NS-CREATING NAMESPACE (${g})`);let v=new l(g);return v.id=u,i.createHook({init(w,E,C,S){if(u=i.executionAsyncId(),v.active){if(v._contexts.set(w,v.active),c){let x=" ".repeat(v._indent<0?0:v._indent);h(`${x}INIT [${E}] (${g}) asyncId:${w} currentUid:${u} triggerId:${C} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${S}`)}}else if(u===0){let x=i.triggerAsyncId(),I=v._contexts.get(x);if(I){if(v._contexts.set(w,I),c){let P=" ".repeat(v._indent<0?0:v._indent);h(`${P}INIT USING CONTEXT FROM TRIGGERID [${E}] (${g}) asyncId:${w} currentUid:${u} triggerId:${x} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${S}`)}}else if(c){let P=" ".repeat(v._indent<0?0:v._indent);h(`${P}INIT MISSING CONTEXT [${E}] (${g}) asyncId:${w} currentUid:${u} triggerId:${x} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${S}`)}}if(c&&E==="PROMISE"){h(r.inspect(S,{showHidden:!0}));let x=S.parentId,I=" ".repeat(v._indent<0?0:v._indent);h(`${I}INIT RESOURCE-PROMISE [${E}] (${g}) parentId:${x} asyncId:${w} currentUid:${u} triggerId:${C} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${S}`)}},before(w){u=i.executionAsyncId();let E;if(E=v._contexts.get(w)||v._contexts.get(u),E){if(c){let C=i.triggerAsyncId(),S=" ".repeat(v._indent<0?0:v._indent);h(`${S}BEFORE (${g}) asyncId:${w} currentUid:${u} triggerId:${C} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(E)}`),v._indent+=2}v.enter(E)}else if(c){let C=i.triggerAsyncId(),S=" ".repeat(v._indent<0?0:v._indent);h(`${S}BEFORE MISSING CONTEXT (${g}) asyncId:${w} currentUid:${u} triggerId:${C} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${r.inspect(v._contexts,{showHidden:!0,depth:2,colors:!0})}`),v._indent+=2}},after(w){u=i.executionAsyncId();let E;if(E=v._contexts.get(w)||v._contexts.get(u),E){if(c){let C=i.triggerAsyncId();v._indent-=2;let S=" ".repeat(v._indent<0?0:v._indent);h(`${S}AFTER (${g}) asyncId:${w} currentUid:${u} triggerId:${C} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(E)}`)}v.exit(E)}else if(c){let C=i.triggerAsyncId();v._indent-=2;let S=" ".repeat(v._indent<0?0:v._indent);h(`${S}AFTER MISSING CONTEXT (${g}) asyncId:${w} currentUid:${u} triggerId:${C} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(E)}`)}},destroy(w){if(u=i.executionAsyncId(),c){let E=i.triggerAsyncId(),C=" ".repeat(v._indent<0?0:v._indent);h(`${C}DESTROY (${g}) currentUid:${u} asyncId:${w} triggerId:${E} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(v._contexts.get(u))}`)}v._contexts.delete(w)}}).enable(),process.namespaces[g]=v,v}function p(g){let v=d(g);n.ok(v,`can't delete nonexistent namespace! "`+g+'"'),n.ok(v.id,"don't assign to process.namespaces directly! "+r.inspect(v)),process.namespaces[g]=null}function m(){process.namespaces&&Object.keys(process.namespaces).forEach(function(g){p(g)}),process.namespaces=Object.create(null)}process.namespaces={};function h(...g){c&&process._rawDebug(`${r.format(...g)}`)}}),Q7=L((e,t)=>{"use strict";function r(){}t.exports=function(){let n=this._hooks,o=this._state,i=process.nextTick;process.nextTick=function(){if(!o.enabled)return i.apply(process,arguments);let s=new Array(arguments.length);for(let l=0;l<arguments.length;l++)s[l]=arguments[l];let a=s[0];if(typeof a!="function")throw new TypeError("callback is not a function");let c=new r,u=--o.counter;return n.init.call(c,u,0,null,null),s[0]=function(){n.pre.call(c,u);let l=!0;try{a.apply(this,arguments),l=!1}finally{l&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){n.post.call(c,u,!0),n.destroy.call(null,u)})}n.post.call(c,u,!1),n.destroy.call(null,u)},i.apply(process,s)}}}),J7=L((e,t)=>{"use strict";function r(){}t.exports=function(){let n=this._hooks,o=this._state,i=global.Promise,s=i.prototype.then;i.prototype.then=l;function a(d,f,p,m){return typeof d!="function"?m?c(p):u(p):function(){n.pre.call(f,p);try{return d.apply(this,arguments)}finally{n.post.call(f,p,!1),n.destroy.call(null,p)}}}function c(d){return function(f){return n.destroy.call(null,d),f}}function u(d){return function(f){throw n.destroy.call(null,d),f}}function l(d,f){if(!o.enabled)return s.call(this,d,f);let p=new r,m=--o.counter;return n.init.call(p,m,0,null,null),s.call(this,a(d,p,m,!0),a(f,p,m,!1))}}}),Z7=L((e,t)=>{"use strict";var r=require("timers");function n(){}function o(){}function i(){}var s=new Map,a=new Map,c=new Map,u=null,l=!1;t.exports=function(){d(this._hooks,this._state,"setTimeout","clearTimeout",n,s,!0),d(this._hooks,this._state,"setInterval","clearInterval",o,a,!1),d(this._hooks,this._state,"setImmediate","clearImmediate",i,c,!0),global.setTimeout=r.setTimeout,global.setInterval=r.setInterval,global.setImmediate=r.setImmediate,global.clearTimeout=r.clearTimeout,global.clearInterval=r.clearInterval,global.clearImmediate=r.clearImmediate};function d(f,p,m,h,g,v,w){let E=r[m],C=r[h];r[m]=function(){if(!p.enabled)return E.apply(r,arguments);let S=new Array(arguments.length);for(let D=0;D<arguments.length;D++)S[D]=arguments[D];let x=S[0];if(typeof x!="function")throw new TypeError('"callback" argument must be a function');let I=new g,P=--p.counter,T;return f.init.call(I,P,0,null,null),S[0]=function(){u=T,f.pre.call(I,P);let D=!0;try{x.apply(this,arguments),D=!1}finally{D&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){f.post.call(I,P,!0),v.delete(T),f.destroy.call(null,P)})}f.post.call(I,P,!1),u=null,(w||l)&&(l=!1,v.delete(T),f.destroy.call(null,P))},T=E.apply(r,S),v.set(T,P),T},r[h]=function(S){if(u===S&&S!==null)l=!0;else if(v.has(S)){let x=v.get(S);v.delete(S),f.destroy.call(null,x)}C.apply(r,arguments)}}}),lU=L((e,t)=>{t.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}}),eQ=L((e,t)=>{"use strict";var r=process.binding("async_wrap"),n=r.Providers.TIMERWRAP,o={nextTick:Q7(),promise:J7(),timers:Z7()},i=new Set;function s(){this.enabled=!1,this.counter=0}function a(){let l=this.initFns=[],d=this.preFns=[],f=this.postFns=[],p=this.destroyFns=[];this.init=function(m,h,g,v){if(h===n){i.add(m);return}for(let w of l)w(m,this,h,g,v)},this.pre=function(m){if(!i.has(m))for(let h of d)h(m,this)},this.post=function(m,h){if(!i.has(m))for(let g of f)g(m,this,h)},this.destroy=function(m){if(i.has(m)){i.delete(m);return}for(let h of p)h(m)}}a.prototype.add=function(l){l.init&&this.initFns.push(l.init),l.pre&&this.preFns.push(l.pre),l.post&&this.postFns.push(l.post),l.destroy&&this.destroyFns.push(l.destroy)};function c(l,d){let f=l.indexOf(d);f!==-1&&l.splice(f,1)}a.prototype.remove=function(l){l.init&&c(this.initFns,l.init),l.pre&&c(this.preFns,l.pre),l.post&&c(this.postFns,l.post),l.destroy&&c(this.destroyFns,l.destroy)};function u(){this._state=new s,this._hooks=new a,this.version=lU().version,this.providers=r.Providers;for(let l of Object.keys(o))o[l].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),r.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}t.exports=u,u.prototype.addHooks=function(l){this._hooks.add(l)},u.prototype.removeHooks=function(l){this._hooks.remove(l)},u.prototype.enable=function(){this._state.enabled=!0,r.enable()},u.prototype.disable=function(){this._state.enabled=!1,r.disable()}}),dU=L((e,t)=>{t.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}}),tQ=L((e,t)=>{function r(n){try{return Error.prototype.toString.call(n)}catch(o){try{return"<error: "+o+">"}catch{return"<error>"}}}t.exports=function(n,o){var i=[];i.push(r(n));for(var s=0;s<o.length;s++){var a=o[s],c;try{c=a.toString()}catch(u){try{c="<error: "+u+">"}catch{c="<error>"}}i.push("    at "+c)}return i.join(`
`)}}),rQ=L((e,t)=>{var r=tQ();function n(){this.extend=new s,this.filter=new s,this.format=new a,this.version=dU().version}var o=!1;n.prototype.callSite=function d(f){f||(f={}),o=!0;var p={};Error.captureStackTrace(p,d);var m=p.stack;return o=!1,m=m.slice(f.slice||0),f.extend&&(m=this.extend._modify(p,m)),f.filter&&(m=this.filter._modify(p,m)),m};var i=new n;function s(){this._modifiers=[]}s.prototype._modify=function(d,f){for(var p=0,m=this._modifiers.length;p<m;p++)f=this._modifiers[p](d,f);return f},s.prototype.attach=function(d){this._modifiers.push(d)},s.prototype.deattach=function(d){var f=this._modifiers.indexOf(d);return f===-1?!1:(this._modifiers.splice(f,1),!0)};function a(){this._formater=r,this._previous=void 0}a.prototype.replace=function(d){d?this._formater=d:this.restore()},a.prototype.restore=function(){this._formater=r,this._previous=void 0},a.prototype._backup=function(){this._previous=this._formater},a.prototype._roolback=function(){this._previous===r?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&i.format.replace(Error.prepareStackTrace);var c=!1;function u(d,f){if(o)return f;if(c)return r(d,f);var p=f.concat();p=i.extend._modify(d,p),p=i.filter._modify(d,p),p=p.slice(0,Error.stackTraceLimit),Object.isExtensible(d)&&Object.getOwnPropertyDescriptor(d,"callSite")===void 0&&(d.callSite={original:f,mutated:p}),c=!0;var m=i.format._formater(d,p);return c=!1,m}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return u},set:function(d){d===u?i.format._roolback():(i.format._backup(),i.format.replace(d))}});function l(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:l,set:function(d){Object.defineProperty(this,"callSite",{value:d,writable:!0,configurable:!0})},configurable:!0}),t.exports=i}),fU=L((e,t)=>{if(global._stackChain)if(global._stackChain.version===dU().version)t.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else t.exports=global._stackChain=rQ()}),nQ=L((e,t)=>{"use strict";var r=eQ();if(global._asyncHook)if(global._asyncHook.version===lU().version)t.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else fU().filter.attach(function(n,o){return o.filter(function(i){let s=i.getFileName();return!(s&&s.slice(0,__dirname.length)===__dirname)})}),t.exports=global._asyncHook=new r}),oQ=L((e,t)=>{"use strict";var r=require("util"),n=require("assert"),o=g0(),i=nQ(),s="cls@contexts",a="error@context",c=[];for(let C in i.providers)c[i.providers[C]]=C;var u=process.env.DEBUG_CLS_HOOKED,l=-1;t.exports={getNamespace:f,createNamespace:p,destroyNamespace:m,reset:h,ERROR_SYMBOL:a};function d(C){this.name=C,this.active=null,this._set=[],this.id=null,this._contexts=new Map}d.prototype.set=function(C,S){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return u&&g("    SETTING KEY:"+C+"="+S+" in ns:"+this.name+" uid:"+l+" active:"+r.inspect(this.active,!0)),this.active[C]=S,S},d.prototype.get=function(C){if(!this.active){u&&g("    GETTING KEY:"+C+"=undefined "+this.name+" uid:"+l+" active:"+r.inspect(this.active,!0));return}return u&&g("    GETTING KEY:"+C+"="+this.active[C]+" "+this.name+" uid:"+l+" active:"+r.inspect(this.active,!0)),this.active[C]},d.prototype.createContext=function(){u&&g("   CREATING Context: "+this.name+" uid:"+l+" len:"+this._set.length+"  active:"+r.inspect(this.active,!0,2,!0));let C=Object.create(this.active?this.active:Object.prototype);return C._ns_name=this.name,C.id=l,u&&g("   CREATED Context: "+this.name+" uid:"+l+" len:"+this._set.length+"  context:"+r.inspect(C,!0,2,!0)),C},d.prototype.run=function(C){let S=this.createContext();this.enter(S);try{return u&&g(" BEFORE RUN: "+this.name+" uid:"+l+" len:"+this._set.length+" "+r.inspect(S)),C(S),S}catch(x){throw x&&(x[a]=S),x}finally{u&&g(" AFTER RUN: "+this.name+" uid:"+l+" len:"+this._set.length+" "+r.inspect(S)),this.exit(S)}},d.prototype.runAndReturn=function(C){var S;return this.run(function(x){S=C(x)}),S},d.prototype.runPromise=function(C){let S=this.createContext();this.enter(S);let x=C(S);if(!x||!x.then||!x.catch)throw new Error("fn must return a promise.");return u&&g(" BEFORE runPromise: "+this.name+" uid:"+l+" len:"+this._set.length+" "+r.inspect(S)),x.then(I=>(u&&g(" AFTER runPromise: "+this.name+" uid:"+l+" len:"+this._set.length+" "+r.inspect(S)),this.exit(S),I)).catch(I=>{throw I[a]=S,u&&g(" AFTER runPromise: "+this.name+" uid:"+l+" len:"+this._set.length+" "+r.inspect(S)),this.exit(S),I})},d.prototype.bind=function(C,S){S||(this.active?S=this.active:S=this.createContext());let x=this;return function(){x.enter(S);try{return C.apply(this,arguments)}catch(I){throw I&&(I[a]=S),I}finally{x.exit(S)}}},d.prototype.enter=function(C){n.ok(C,"context must be provided for entering"),u&&g("  ENTER "+this.name+" uid:"+l+" len:"+this._set.length+" context: "+r.inspect(C)),this._set.push(this.active),this.active=C},d.prototype.exit=function(C){if(n.ok(C,"context must be provided for exiting"),u&&g("  EXIT "+this.name+" uid:"+l+" len:"+this._set.length+" context: "+r.inspect(C)),this.active===C){n.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let S=this._set.lastIndexOf(C);S<0?(u&&g("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(C)),n.ok(S>=0,`context not currently entered; can't exit. 
`+r.inspect(this)+`
`+r.inspect(C))):(n.ok(S,"can't remove top context"),this._set.splice(S,1))},d.prototype.bindEmitter=function(C){n.ok(C.on&&C.addListener&&C.emit,"can only bind real EEs");let S=this,x="context@"+this.name;function I(T){!T||(T[s]||(T[s]=Object.create(null)),T[s][x]={namespace:S,context:S.active})}function P(T){if(!(T&&T[s]))return T;let D=T,R=T[s];return Object.keys(R).forEach(function(k){let U=R[k];D=U.namespace.bind(D,U.context)}),D}o(C,I,P)},d.prototype.fromException=function(C){return C[a]};function f(C){return process.namespaces[C]}function p(C){n.ok(C,"namespace must be given a name."),u&&g("CREATING NAMESPACE "+C);let S=new d(C);return S.id=l,i.addHooks({init(x,I,P,T,D){l=x,T?(S._contexts.set(x,S._contexts.get(T)),u&&g("PARENTID: "+C+" uid:"+x+" parent:"+T+" provider:"+P)):S._contexts.set(l,S.active),u&&g("INIT "+C+" uid:"+x+" parent:"+T+" provider:"+c[P]+" active:"+r.inspect(S.active,!0))},pre(x,I){l=x;let P=S._contexts.get(x);P?(u&&g(" PRE "+C+" uid:"+x+" handle:"+v(I)+" context:"+r.inspect(P)),S.enter(P)):u&&g(" PRE MISSING CONTEXT "+C+" uid:"+x+" handle:"+v(I))},post(x,I){l=x;let P=S._contexts.get(x);P?(u&&g(" POST "+C+" uid:"+x+" handle:"+v(I)+" context:"+r.inspect(P)),S.exit(P)):u&&g(" POST MISSING CONTEXT "+C+" uid:"+x+" handle:"+v(I))},destroy(x){l=x,u&&g("DESTROY "+C+" uid:"+x+" context:"+r.inspect(S._contexts.get(l))+" active:"+r.inspect(S.active,!0)),S._contexts.delete(x)}}),process.namespaces[C]=S,S}function m(C){let S=f(C);n.ok(S,`can't delete nonexistent namespace! "`+C+'"'),n.ok(S.id,"don't assign to process.namespaces directly! "+r.inspect(S)),process.namespaces[C]=null}function h(){process.namespaces&&Object.keys(process.namespaces).forEach(function(C){m(C)}),process.namespaces=Object.create(null)}process.namespaces={},i._state&&!i._state.enabled&&i.enable();function g(C){process.env.DEBUG&&process._rawDebug(C)}function v(C){if(!C)return C;if(typeof C=="function")return C.name?C.name:(C.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(C.constructor&&C.constructor.name)return C.constructor.name}if(u){w=fU();for(E in w.filter._modifiers)w.filter.deattach(E)}var w,E}),iQ=L((e,t)=>{"use strict";var r=K7();process&&r.gte(process.versions.node,"8.0.0")?t.exports=X7():t.exports=oQ()}),sQ=L((e,t)=>{e=t.exports=oe;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var y=Array.prototype.slice.call(arguments,0);y.unshift("SEMVER"),console.log.apply(console,y)}:r=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,s=e.re=[],a=e.src=[],c=0,u=c++;a[u]="0|[1-9]\\d*";var l=c++;a[l]="[0-9]+";var d=c++;a[d]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=c++;a[f]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var p=c++;a[p]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var m=c++;a[m]="(?:"+a[u]+"|"+a[d]+")";var h=c++;a[h]="(?:"+a[l]+"|"+a[d]+")";var g=c++;a[g]="(?:-("+a[m]+"(?:\\."+a[m]+")*))";var v=c++;a[v]="(?:-?("+a[h]+"(?:\\."+a[h]+")*))";var w=c++;a[w]="[0-9A-Za-z-]+";var E=c++;a[E]="(?:\\+("+a[w]+"(?:\\."+a[w]+")*))";var C=c++,S="v?"+a[f]+a[g]+"?"+a[E]+"?";a[C]="^"+S+"$";var x="[v=\\s]*"+a[p]+a[v]+"?"+a[E]+"?",I=c++;a[I]="^"+x+"$";var P=c++;a[P]="((?:<|>)?=?)";var T=c++;a[T]=a[l]+"|x|X|\\*";var D=c++;a[D]=a[u]+"|x|X|\\*";var R=c++;a[R]="[v=\\s]*("+a[D]+")(?:\\.("+a[D]+")(?:\\.("+a[D]+")(?:"+a[g]+")?"+a[E]+"?)?)?";var k=c++;a[k]="[v=\\s]*("+a[T]+")(?:\\.("+a[T]+")(?:\\.("+a[T]+")(?:"+a[v]+")?"+a[E]+"?)?)?";var U=c++;a[U]="^"+a[P]+"\\s*"+a[R]+"$";var W=c++;a[W]="^"+a[P]+"\\s*"+a[k]+"$";var j=c++;a[j]="(?:^|[^\\d])(\\d{1,"+i+"})(?:\\.(\\d{1,"+i+"}))?(?:\\.(\\d{1,"+i+"}))?(?:$|[^\\d])";var $=c++;a[$]="(?:~>?)";var O=c++;a[O]="(\\s*)"+a[$]+"\\s+",s[O]=new RegExp(a[O],"g");var H="$1~",Q=c++;a[Q]="^"+a[$]+a[R]+"$";var M=c++;a[M]="^"+a[$]+a[k]+"$";var Z=c++;a[Z]="(?:\\^)";var re=c++;a[re]="(\\s*)"+a[Z]+"\\s+",s[re]=new RegExp(a[re],"g");var K="$1^",fe=c++;a[fe]="^"+a[Z]+a[R]+"$";var _e=c++;a[_e]="^"+a[Z]+a[k]+"$";var ye=c++;a[ye]="^"+a[P]+"\\s*("+x+")$|^$";var Ee=c++;a[Ee]="^"+a[P]+"\\s*("+S+")$|^$";var Te=c++;a[Te]="(\\s*)"+a[P]+"\\s*("+x+"|"+a[R]+")",s[Te]=new RegExp(a[Te],"g");var Je="$1$2$3",Ge=c++;a[Ge]="^\\s*("+a[R]+")\\s+-\\s+("+a[R]+")\\s*$";var Se=c++;a[Se]="^\\s*("+a[k]+")\\s+-\\s+("+a[k]+")\\s*$";var Ie=c++;for(a[Ie]="(<|>)?=?\\s*\\*",Fe=0;Fe<c;Fe++)r(Fe,a[Fe]),s[Fe]||(s[Fe]=new RegExp(a[Fe]));var Fe;e.parse=et;function et(y,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),y instanceof oe)return y;if(typeof y!="string"||y.length>n)return null;var b=_.loose?s[I]:s[C];if(!b.test(y))return null;try{return new oe(y,_)}catch{return null}}e.valid=ro;function ro(y,_){var b=et(y,_);return b?b.version:null}e.clean=Pn;function Pn(y,_){var b=et(y.trim().replace(/^[=v]+/,""),_);return b?b.version:null}e.SemVer=oe;function oe(y,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),y instanceof oe){if(y.loose===_.loose)return y;y=y.version}else if(typeof y!="string")throw new TypeError("Invalid Version: "+y);if(y.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof oe))return new oe(y,_);r("SemVer",y,_),this.options=_,this.loose=!!_.loose;var b=y.trim().match(_.loose?s[I]:s[C]);if(!b)throw new TypeError("Invalid Version: "+y);if(this.raw=y,this.major=+b[1],this.minor=+b[2],this.patch=+b[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");b[4]?this.prerelease=b[4].split(".").map(function(N){if(/^[0-9]+$/.test(N)){var F=+N;if(F>=0&&F<o)return F}return N}):this.prerelease=[],this.build=b[5]?b[5].split("."):[],this.format()}oe.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},oe.prototype.toString=function(){return this.version},oe.prototype.compare=function(y){return r("SemVer.compare",this.version,this.options,y),y instanceof oe||(y=new oe(y,this.options)),this.compareMain(y)||this.comparePre(y)},oe.prototype.compareMain=function(y){return y instanceof oe||(y=new oe(y,this.options)),vt(this.major,y.major)||vt(this.minor,y.minor)||vt(this.patch,y.patch)},oe.prototype.comparePre=function(y){if(y instanceof oe||(y=new oe(y,this.options)),this.prerelease.length&&!y.prerelease.length)return-1;if(!this.prerelease.length&&y.prerelease.length)return 1;if(!this.prerelease.length&&!y.prerelease.length)return 0;var _=0;do{var b=this.prerelease[_],N=y.prerelease[_];if(r("prerelease compare",_,b,N),b===void 0&&N===void 0)return 0;if(N===void 0)return 1;if(b===void 0)return-1;if(b!==N)return vt(b,N)}while(++_)},oe.prototype.inc=function(y,_){switch(y){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",_);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",_);break;case"prepatch":this.prerelease.length=0,this.inc("patch",_),this.inc("pre",_);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",_),this.inc("pre",_);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var b=this.prerelease.length;--b>=0;)typeof this.prerelease[b]=="number"&&(this.prerelease[b]++,b=-2);b===-1&&this.prerelease.push(0)}_&&(this.prerelease[0]===_?isNaN(this.prerelease[1])&&(this.prerelease=[_,0]):this.prerelease=[_,0]);break;default:throw new Error("invalid increment argument: "+y)}return this.format(),this.raw=this.version,this},e.inc=no;function no(y,_,b,N){typeof b=="string"&&(N=b,b=void 0);try{return new oe(y,b).inc(_,N).version}catch{return null}}e.diff=Tn;function Tn(y,_){if(ge(y,_))return null;var b=et(y),N=et(_),F="";if(b.prerelease.length||N.prerelease.length){F="pre";var V="prerelease"}for(var X in b)if((X==="major"||X==="minor"||X==="patch")&&b[X]!==N[X])return F+X;return V}e.compareIdentifiers=vt;var xt=/^[0-9]+$/;function vt(y,_){var b=xt.test(y),N=xt.test(_);return b&&N&&(y=+y,_=+_),y===_?0:b&&!N?-1:N&&!b?1:y<_?-1:1}e.rcompareIdentifiers=G;function G(y,_){return vt(_,y)}e.major=ne;function ne(y,_){return new oe(y,_).major}e.minor=ae;function ae(y,_){return new oe(y,_).minor}e.patch=pe;function pe(y,_){return new oe(y,_).patch}e.compare=de;function de(y,_,b){return new oe(y,b).compare(new oe(_,b))}e.compareLoose=He;function He(y,_){return de(y,_,!0)}e.rcompare=ke;function ke(y,_,b){return de(_,y,b)}e.sort=Y;function Y(y,_){return y.sort(function(b,N){return e.compare(b,N,_)})}e.rsort=te;function te(y,_){return y.sort(function(b,N){return e.rcompare(b,N,_)})}e.gt=J;function J(y,_,b){return de(y,_,b)>0}e.lt=ue;function ue(y,_,b){return de(y,_,b)<0}e.eq=ge;function ge(y,_,b){return de(y,_,b)===0}e.neq=De;function De(y,_,b){return de(y,_,b)!==0}e.gte=Be;function Be(y,_,b){return de(y,_,b)>=0}e.lte=je;function je(y,_,b){return de(y,_,b)<=0}e.cmp=ze;function ze(y,_,b,N){switch(_){case"===":return typeof y=="object"&&(y=y.version),typeof b=="object"&&(b=b.version),y===b;case"!==":return typeof y=="object"&&(y=y.version),typeof b=="object"&&(b=b.version),y!==b;case"":case"=":case"==":return ge(y,b,N);case"!=":return De(y,b,N);case">":return J(y,b,N);case">=":return Be(y,b,N);case"<":return ue(y,b,N);case"<=":return je(y,b,N);default:throw new TypeError("Invalid operator: "+_)}}e.Comparator=Ve;function Ve(y,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),y instanceof Ve){if(y.loose===!!_.loose)return y;y=y.value}if(!(this instanceof Ve))return new Ve(y,_);r("comparator",y,_),this.options=_,this.loose=!!_.loose,this.parse(y),this.semver===kt?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var kt={};Ve.prototype.parse=function(y){var _=this.options.loose?s[ye]:s[Ee],b=y.match(_);if(!b)throw new TypeError("Invalid comparator: "+y);this.operator=b[1],this.operator==="="&&(this.operator=""),b[2]?this.semver=new oe(b[2],this.options.loose):this.semver=kt},Ve.prototype.toString=function(){return this.value},Ve.prototype.test=function(y){return r("Comparator.test",y,this.options.loose),this.semver===kt?!0:(typeof y=="string"&&(y=new oe(y,this.options)),ze(y,this.operator,this.semver,this.options))},Ve.prototype.intersects=function(y,_){if(!(y instanceof Ve))throw new TypeError("a Comparator is required");(!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1});var b;if(this.operator==="")return b=new ve(y.value,_),Ar(this.value,b,_);if(y.operator==="")return b=new ve(this.value,_),Ar(y.semver,b,_);var N=(this.operator===">="||this.operator===">")&&(y.operator===">="||y.operator===">"),F=(this.operator==="<="||this.operator==="<")&&(y.operator==="<="||y.operator==="<"),V=this.semver.version===y.semver.version,X=(this.operator===">="||this.operator==="<=")&&(y.operator===">="||y.operator==="<="),se=ze(this.semver,"<",y.semver,_)&&(this.operator===">="||this.operator===">")&&(y.operator==="<="||y.operator==="<"),ie=ze(this.semver,">",y.semver,_)&&(this.operator==="<="||this.operator==="<")&&(y.operator===">="||y.operator===">");return N||F||V&&X||se||ie},e.Range=ve;function ve(y,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),y instanceof ve)return y.loose===!!_.loose&&y.includePrerelease===!!_.includePrerelease?y:new ve(y.raw,_);if(y instanceof Ve)return new ve(y.value,_);if(!(this instanceof ve))return new ve(y,_);if(this.options=_,this.loose=!!_.loose,this.includePrerelease=!!_.includePrerelease,this.raw=y,this.set=y.split(/\s*\|\|\s*/).map(function(b){return this.parseRange(b.trim())},this).filter(function(b){return b.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+y);this.format()}ve.prototype.format=function(){return this.range=this.set.map(function(y){return y.join(" ").trim()}).join("||").trim(),this.range},ve.prototype.toString=function(){return this.range},ve.prototype.parseRange=function(y){var _=this.options.loose;y=y.trim();var b=_?s[Se]:s[Ge];y=y.replace(b,Ga),r("hyphen replace",y),y=y.replace(s[Te],Je),r("comparator trim",y,s[Te]),y=y.replace(s[O],H),y=y.replace(s[re],K),y=y.split(/\s+/).join(" ");var N=_?s[ye]:s[Ee],F=y.split(" ").map(function(V){return Vr(V,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(F=F.filter(function(V){return!!V.match(N)})),F=F.map(function(V){return new Ve(V,this.options)},this),F},ve.prototype.intersects=function(y,_){if(!(y instanceof ve))throw new TypeError("a Range is required");return this.set.some(function(b){return b.every(function(N){return y.set.some(function(F){return F.every(function(V){return N.intersects(V,_)})})})})},e.toComparators=ur;function ur(y,_){return new ve(y,_).set.map(function(b){return b.map(function(N){return N.value}).join(" ").trim().split(" ")})}function Vr(y,_){return r("comp",y,_),y=qa(y,_),r("caret",y),y=In(y,_),r("tildes",y),y=Va(y,_),r("xrange",y),y=Wr(y,_),r("stars",y),y}function $e(y){return!y||y.toLowerCase()==="x"||y==="*"}function In(y,_){return y.trim().split(/\s+/).map(function(b){return Ha(b,_)}).join(" ")}function Ha(y,_){var b=_.loose?s[M]:s[Q];return y.replace(b,function(N,F,V,X,se){r("tilde",y,N,F,V,X,se);var ie;return $e(F)?ie="":$e(V)?ie=">="+F+".0.0 <"+(+F+1)+".0.0":$e(X)?ie=">="+F+"."+V+".0 <"+F+"."+(+V+1)+".0":se?(r("replaceTilde pr",se),ie=">="+F+"."+V+"."+X+"-"+se+" <"+F+"."+(+V+1)+".0"):ie=">="+F+"."+V+"."+X+" <"+F+"."+(+V+1)+".0",r("tilde return",ie),ie})}function qa(y,_){return y.trim().split(/\s+/).map(function(b){return Ba(b,_)}).join(" ")}function Ba(y,_){r("caret",y,_);var b=_.loose?s[_e]:s[fe];return y.replace(b,function(N,F,V,X,se){r("caret",y,N,F,V,X,se);var ie;return $e(F)?ie="":$e(V)?ie=">="+F+".0.0 <"+(+F+1)+".0.0":$e(X)?F==="0"?ie=">="+F+"."+V+".0 <"+F+"."+(+V+1)+".0":ie=">="+F+"."+V+".0 <"+(+F+1)+".0.0":se?(r("replaceCaret pr",se),F==="0"?V==="0"?ie=">="+F+"."+V+"."+X+"-"+se+" <"+F+"."+V+"."+(+X+1):ie=">="+F+"."+V+"."+X+"-"+se+" <"+F+"."+(+V+1)+".0":ie=">="+F+"."+V+"."+X+"-"+se+" <"+(+F+1)+".0.0"):(r("no pr"),F==="0"?V==="0"?ie=">="+F+"."+V+"."+X+" <"+F+"."+V+"."+(+X+1):ie=">="+F+"."+V+"."+X+" <"+F+"."+(+V+1)+".0":ie=">="+F+"."+V+"."+X+" <"+(+F+1)+".0.0"),r("caret return",ie),ie})}function Va(y,_){return r("replaceXRanges",y,_),y.split(/\s+/).map(function(b){return Wa(b,_)}).join(" ")}function Wa(y,_){y=y.trim();var b=_.loose?s[W]:s[U];return y.replace(b,function(N,F,V,X,se,ie){r("xRange",y,N,F,V,X,se,ie);var at=$e(V),nt=at||$e(X),Qe=nt||$e(se),Ke=Qe;return F==="="&&Ke&&(F=""),at?F===">"||F==="<"?N="<0.0.0":N="*":F&&Ke?(nt&&(X=0),se=0,F===">"?(F=">=",nt?(V=+V+1,X=0,se=0):(X=+X+1,se=0)):F==="<="&&(F="<",nt?V=+V+1:X=+X+1),N=F+V+"."+X+"."+se):nt?N=">="+V+".0.0 <"+(+V+1)+".0.0":Qe&&(N=">="+V+"."+X+".0 <"+V+"."+(+X+1)+".0"),r("xRange return",N),N})}function Wr(y,_){return r("replaceStars",y,_),y.trim().replace(s[Ie],"")}function Ga(y,_,b,N,F,V,X,se,ie,at,nt,Qe,Ke){return $e(b)?_="":$e(N)?_=">="+b+".0.0":$e(F)?_=">="+b+"."+N+".0":_=">="+_,$e(ie)?se="":$e(at)?se="<"+(+ie+1)+".0.0":$e(nt)?se="<"+ie+"."+(+at+1)+".0":Qe?se="<="+ie+"."+at+"."+nt+"-"+Qe:se="<="+se,(_+" "+se).trim()}ve.prototype.test=function(y){if(!y)return!1;typeof y=="string"&&(y=new oe(y,this.options));for(var _=0;_<this.set.length;_++)if(za(this.set[_],y,this.options))return!0;return!1};function za(y,_,b){for(var N=0;N<y.length;N++)if(!y[N].test(_))return!1;if(_.prerelease.length&&!b.includePrerelease){for(N=0;N<y.length;N++)if(r(y[N].semver),y[N].semver!==kt&&y[N].semver.prerelease.length>0){var F=y[N].semver;if(F.major===_.major&&F.minor===_.minor&&F.patch===_.patch)return!0}return!1}return!0}e.satisfies=Ar;function Ar(y,_,b){try{_=new ve(_,b)}catch{return!1}return _.test(y)}e.maxSatisfying=Ya;function Ya(y,_,b){var N=null,F=null;try{var V=new ve(_,b)}catch{return null}return y.forEach(function(X){V.test(X)&&(!N||F.compare(X)===-1)&&(N=X,F=new oe(N,b))}),N}e.minSatisfying=Ka;function Ka(y,_,b){var N=null,F=null;try{var V=new ve(_,b)}catch{return null}return y.forEach(function(X){V.test(X)&&(!N||F.compare(X)===1)&&(N=X,F=new oe(N,b))}),N}e.minVersion=oo;function oo(y,_){y=new ve(y,_);var b=new oe("0.0.0");if(y.test(b)||(b=new oe("0.0.0-0"),y.test(b)))return b;b=null;for(var N=0;N<y.set.length;++N){var F=y.set[N];F.forEach(function(V){var X=new oe(V.semver.version);switch(V.operator){case">":X.prerelease.length===0?X.patch++:X.prerelease.push(0),X.raw=X.format();case"":case">=":(!b||J(b,X))&&(b=X);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+V.operator)}})}return b&&y.test(b)?b:null}e.validRange=Xa;function Xa(y,_){try{return new ve(y,_).range||"*"}catch{return null}}e.ltr=Qa;function Qa(y,_,b){return Dn(y,_,"<",b)}e.gtr=Ja;function Ja(y,_,b){return Dn(y,_,">",b)}e.outside=Dn;function Dn(y,_,b,N){y=new oe(y,N),_=new ve(_,N);var F,V,X,se,ie;switch(b){case">":F=J,V=je,X=ue,se=">",ie=">=";break;case"<":F=ue,V=Be,X=J,se="<",ie="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Ar(y,_,N))return!1;for(var at=0;at<_.set.length;++at){var nt=_.set[at],Qe=null,Ke=null;if(nt.forEach(function(Et){Et.semver===kt&&(Et=new Ve(">=0.0.0")),Qe=Qe||Et,Ke=Ke||Et,F(Et.semver,Qe.semver,N)?Qe=Et:X(Et.semver,Ke.semver,N)&&(Ke=Et)}),Qe.operator===se||Qe.operator===ie||(!Ke.operator||Ke.operator===se)&&V(y,Ke.semver)||Ke.operator===ie&&X(y,Ke.semver))return!1}return!0}e.prerelease=Za;function Za(y,_){var b=et(y,_);return b&&b.prerelease.length?b.prerelease:null}e.intersects=io;function io(y,_,b){return y=new ve(y,b),_=new ve(_,b),y.intersects(_)}e.coerce=ec;function ec(y){if(y instanceof oe)return y;if(typeof y!="string")return null;var _=y.match(s[j]);return _==null?null:et(_[1]+"."+(_[2]||"0")+"."+(_[3]||"0"))}}),aQ=L((e,t)=>{var r=h0().wrap,n=1<<0,o=1<<1,i=1<<2,s=1<<3,a=[],c=0,u=!1,l=[],d,f;function p(I,P){var T=I.length,D=P.length,R=[];if(T===0&&D===0)return R;for(var k=0;k<T;k++)R[k]=I[k];if(D===0)return R;for(var U=0;U<D;U++){var W=!0;for(k=0;k<T;k++)if(I[k].uid===P[U].uid){W=!1;break}W&&R.push(P[U])}return R}process._fatalException?(m=!1,d=function(I){var P=a.length;if(m||P===0)return!1;var T=!1;m=!0;for(var D=0;D<P;++D){var R=a[D];if((R.flags&s)!==0){var k=h&&h[R.uid];T=R.error(k,I)||T}}return m=!1,l.length>0&&(a=l.pop()),h=void 0,T&&!u},f=function(I,P,T){var D=[];u=!0;for(var R=0;R<T;++R){var k=P[R];if(D[k.uid]=k.data,(k.flags&n)!==0){var U=k.create(k.data);U!==void 0&&(D[k.uid]=U)}}return u=!1,function(){h=D,l.push(a),a=p(P,a),u=!0;for(var W=0;W<T;++W)(P[W].flags&o)>0&&P[W].before(this,D[P[W].uid]);u=!1;var j=I.apply(this,arguments);for(u=!0,W=0;W<T;++W)(P[W].flags&i)>0&&P[W].after(this,D[P[W].uid]);return u=!1,a=l.pop(),h=void 0,j}},r(process,"_fatalException",function(I){return function(P){return d(P)||I(P)}})):(g=!1,d=function(I){if(g)throw I;for(var P=!1,T=a.length,D=0;D<T;++D){var R=a[D];(R.flags&s)!==0&&(P=R.error(null,I)||P)}if(!P&&u)throw I},f=function(I,P,T){var D=[];u=!0;for(var R=0;R<T;++R){var k=P[R];if(D[k.uid]=k.data,(k.flags&n)!==0){var U=k.create(k.data);U!==void 0&&(D[k.uid]=U)}}return u=!1,function(){var W=!1,j=!1;l.push(a),a=p(P,a),u=!0;for(var $=0;$<T;++$)(P[$].flags&o)>0&&P[$].before(this,D[P[$].uid]);u=!1;var O;try{O=I.apply(this,arguments)}catch(H){W=!0;for(var $=0;$<T;++$)if((a[$].flags&s)!=0)try{j=a[$].error(D[P[$].uid],H)||j}catch(M){throw g=!0,M}if(!j)throw process.removeListener("uncaughtException",d),process._originalNextTick(function(){process.addListener("uncaughtException",d)}),H}finally{if(!W||j){for(u=!0,$=0;$<T;++$)(P[$].flags&i)>0&&P[$].after(this,D[P[$].uid]);u=!1}a=l.pop()}return O}},process.addListener("uncaughtException",d));var m,h,g;function v(I,P,T){u=!0;for(var D=0;D<T;++D){var R=P[D];R.create&&R.create(R.data)}return u=!1,function(){l.push(a),a=p(P,a);var k=I.apply(this,arguments);return a=l.pop(),k}}function w(I){var P=a.length;if(P===0)return I;for(var T=a.slice(),D=0;D<P;++D)if(T[D].flags>0)return f(I,T,P);return v(I,T,P)}function E(I,P){typeof I.create=="function"&&(this.create=I.create,this.flags|=n),typeof I.before=="function"&&(this.before=I.before,this.flags|=o),typeof I.after=="function"&&(this.after=I.after,this.flags|=i),typeof I.error=="function"&&(this.error=I.error,this.flags|=s),this.uid=++c,this.data=P===void 0?null:P}E.prototype.create=void 0,E.prototype.before=void 0,E.prototype.after=void 0,E.prototype.error=void 0,E.prototype.data=void 0,E.prototype.uid=0,E.prototype.flags=0;function C(I,P){if(typeof I!="object"||!I)throw new TypeError("callbacks argument must be an object");return I instanceof E?I:new E(I,P)}function S(I,P){var T;I instanceof E?T=I:T=C(I,P);for(var D=!1,R=0;R<a.length;R++)if(T===a[R]){D=!0;break}return D||a.push(T),T}function x(I){for(var P=0;P<a.length;P++)if(I===a[P]){a.splice(P,1);break}}process.createAsyncListener=C,process.addAsyncListener=S,process.removeAsyncListener=x,t.exports=w}),cQ=L((e,t)=>{"use strict";t.exports=(r,n)=>class extends r{constructor(o){var i,s;super(c);var a=this;try{o.apply(i,s)}catch(u){s[1](u)}return a;function c(u,l){i=this,s=[d,f];function d(p){return n(a,!1),u(p)}function f(p){return n(a,!1),l(p)}}}}}),uQ=L(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var e=h0(),t=sQ(),r=e.wrap,n=e.massWrap,o=aQ(),i=require("util"),s=t.gte(process.version,"6.0.0"),a=t.gte(process.version,"7.0.0"),c=t.gte(process.version,"8.0.0"),u=t.gte(process.version,"11.0.0"),l=require("net");a&&!l._normalizeArgs?l._normalizeArgs=function(O){if(O.length===0)return[{},null];var H=O[0],Q={};typeof H=="object"&&H!==null?Q=H:$(H)?Q.path=H:(Q.port=H,O.length>1&&typeof O[1]=="string"&&(Q.host=O[1]));var M=O[O.length-1];return typeof M!="function"?[Q,null]:[Q,M]}:!a&&!l._normalizeConnectArgs&&(l._normalizeConnectArgs=function(O){var H={};function Q(Z){return(Z=Number(Z))>=0?Z:!1}typeof O[0]=="object"&&O[0]!==null?H=O[0]:typeof O[0]=="string"&&Q(O[0])===!1?H.path=O[0]:(H.port=O[0],typeof O[1]=="string"&&(H.host=O[1]));var M=O[O.length-1];return typeof M=="function"?[H,M]:[H]}),"_setUpListenHandle"in l.Server.prototype?r(l.Server.prototype,"_setUpListenHandle",d):r(l.Server.prototype,"_listen2",d);function d(O){return function(){this.on("connection",function(H){H._handle&&(H._handle.onread=o(H._handle.onread))});try{return O.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=o(this._handle.onconnection))}}}function f(O){if(O&&O._handle){var H=O._handle;H._originalOnread||(H._originalOnread=H.onread),H.onread=o(H._originalOnread)}}r(l.Socket.prototype,"connect",function(O){return function(){var H;c&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?H=arguments[0]:H=a?l._normalizeArgs(arguments):l._normalizeConnectArgs(arguments),H[1]&&(H[1]=o(H[1]));var Q=O.apply(this,H);return f(this),Q}});var p=require("http");r(p.Agent.prototype,"addRequest",function(O){return function(H){var Q=H.onSocket;return H.onSocket=o(function(M){return f(M),Q.apply(this,arguments)}),O.apply(this,arguments)}});var m=require("child_process");function h(O){Array.isArray(O.stdio)&&O.stdio.forEach(function(H){H&&H._handle&&(H._handle.onread=o(H._handle.onread),r(H._handle,"close",W))}),O._handle&&(O._handle.onexit=o(O._handle.onexit))}m.ChildProcess?r(m.ChildProcess.prototype,"spawn",function(O){return function(){var H=O.apply(this,arguments);return h(this),H}}):n(m,["execFile","fork","spawn"],function(O){return function(){var H=O.apply(this,arguments);return h(H),H}}),process._fatalException||(process._originalNextTick=process.nextTick);var g=[];process._nextDomainTick&&g.push("_nextDomainTick"),process._tickDomainCallback&&g.push("_tickDomainCallback"),n(process,g,U),r(process,"nextTick",W);var v=["setTimeout","setInterval"];global.setImmediate&&v.push("setImmediate");var w=require("timers"),E=global.setTimeout===w.setTimeout;n(w,v,W),E&&n(global,v,W);var C=require("dns");n(C,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],U),C.resolveNaptr&&r(C,"resolveNaptr",U);var S=require("fs");n(S,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],U),S.lchown&&r(S,"lchown",U),S.lchmod&&r(S,"lchmod",U),S.ftruncate&&r(S,"ftruncate",U);var x;try{x=require("zlib")}catch{}x&&x.Deflate&&x.Deflate.prototype&&(I=Object.getPrototypeOf(x.Deflate.prototype),I._transform?r(I,"_transform",U):I.write&&I.flush&&I.end&&n(I,["write","flush","end"],U));var I,P;try{P=require("crypto")}catch{}P&&(T=["pbkdf2","randomBytes"],u||T.push("pseudoRandomBytes"),n(P,T,U));var T,D=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";D&&(R=process.addAsyncListener({create:function(){D=!1}}),global.Promise.resolve(!0).then(function(){D=!1}),process.removeAsyncListener(R));var R;D&&k();function k(){var O=global.Promise;function H(K){if(!(this instanceof H))return O(K);if(typeof K!="function")return new O(K);var fe,_e,ye=new O(Ee);ye.__proto__=H.prototype;try{K.apply(fe,_e)}catch(Te){_e[1](Te)}return ye;function Ee(Te,Je){fe=this,_e=[Ge,Se];function Ge(Ie){return M(ye,!1),Te(Ie)}function Se(Ie){return M(ye,!1),Je(Ie)}}}if(i.inherits(H,O),r(O.prototype,"then",re),O.prototype.chain&&r(O.prototype,"chain",re),s)global.Promise=cQ()(O,M);else{var Q=["all","race","reject","resolve","accept","defer"];Q.forEach(function(K){typeof O[K]=="function"&&(H[K]=O[K])}),global.Promise=H}function M(K,fe){(!K.__asl_wrapper||fe)&&(K.__asl_wrapper=o(Z))}function Z(K,fe,_e,ye){var Ee;try{return Ee=fe.call(K,_e),{returnVal:Ee,error:!1}}catch(Te){return{errorVal:Te,error:!0}}finally{Ee instanceof O?ye.__asl_wrapper=function(){var Te=Ee.__asl_wrapper||Z;return Te.apply(this,arguments)}:M(ye,!0)}}function re(K){return function(){var fe=this,_e=K.apply(fe,Array.prototype.map.call(arguments,ye));return _e.__asl_wrapper=function(Ee,Te,Je,Ge){return fe.__asl_wrapper?(fe.__asl_wrapper(Ee,function(){},null,_e),_e.__asl_wrapper(Ee,Te,Je,Ge)):Z(Ee,Te,Je,Ge)},_e;function ye(Ee){return typeof Ee!="function"?Ee:o(function(Te){var Je=(fe.__asl_wrapper||Z)(this,Ee,Te,_e);if(Je.error)throw Je.errorVal;return Je.returnVal})}}}}function U(O){var H=function(){var Q,M=arguments.length-1;if(typeof arguments[M]=="function"){Q=Array(arguments.length);for(var Z=0;Z<arguments.length-1;Z++)Q[Z]=arguments[Z];Q[M]=o(arguments[M])}return O.apply(this,Q||arguments)};switch(O.length){case 1:return function(Q){return arguments.length!==1?H.apply(this,arguments):(typeof Q=="function"&&(Q=o(Q)),O.call(this,Q))};case 2:return function(Q,M){return arguments.length!==2?H.apply(this,arguments):(typeof M=="function"&&(M=o(M)),O.call(this,Q,M))};case 3:return function(Q,M,Z){return arguments.length!==3?H.apply(this,arguments):(typeof Z=="function"&&(Z=o(Z)),O.call(this,Q,M,Z))};case 4:return function(Q,M,Z,re){return arguments.length!==4?H.apply(this,arguments):(typeof re=="function"&&(re=o(re)),O.call(this,Q,M,Z,re))};case 5:return function(Q,M,Z,re,K){return arguments.length!==5?H.apply(this,arguments):(typeof K=="function"&&(K=o(K)),O.call(this,Q,M,Z,re,K))};case 6:return function(Q,M,Z,re,K,fe){return arguments.length!==6?H.apply(this,arguments):(typeof fe=="function"&&(fe=o(fe)),O.call(this,Q,M,Z,re,K,fe))};default:return H}}function W(O){var H=function(){var Q;if(typeof arguments[0]=="function"){Q=Array(arguments.length),Q[0]=o(arguments[0]);for(var M=1;M<arguments.length;M++)Q[M]=arguments[M]}return O.apply(this,Q||arguments)};switch(O.length){case 1:return function(Q){return arguments.length!==1?H.apply(this,arguments):(typeof Q=="function"&&(Q=o(Q)),O.call(this,Q))};case 2:return function(Q,M){return arguments.length!==2?H.apply(this,arguments):(typeof Q=="function"&&(Q=o(Q)),O.call(this,Q,M))};case 3:return function(Q,M,Z){return arguments.length!==3?H.apply(this,arguments):(typeof Q=="function"&&(Q=o(Q)),O.call(this,Q,M,Z))};case 4:return function(Q,M,Z,re){return arguments.length!==4?H.apply(this,arguments):(typeof Q=="function"&&(Q=o(Q)),O.call(this,Q,M,Z,re))};case 5:return function(Q,M,Z,re,K){return arguments.length!==5?H.apply(this,arguments):(typeof Q=="function"&&(Q=o(Q)),O.call(this,Q,M,Z,re,K))};case 6:return function(Q,M,Z,re,K,fe){return arguments.length!==6?H.apply(this,arguments):(typeof Q=="function"&&(Q=o(Q)),O.call(this,Q,M,Z,re,K,fe))};default:return H}}function j(O){return(O=Number(O))>=0?O:!1}function $(O){return typeof O=="string"&&j(O)===!1}}),lQ=L((e,t)=>{"use strict";var r=require("assert"),n=g0(),o="cls@contexts",i="error@context";process.addAsyncListener||uQ();function s(d){this.name=d,this.active=null,this._set=[],this.id=null}s.prototype.set=function(d,f){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[d]=f,f},s.prototype.get=function(d){if(this.active)return this.active[d]},s.prototype.createContext=function(){return Object.create(this.active)},s.prototype.run=function(d){var f=this.createContext();this.enter(f);try{return d(f),f}catch(p){throw p&&(p[i]=f),p}finally{this.exit(f)}},s.prototype.runAndReturn=function(d){var f;return this.run(function(p){f=d(p)}),f},s.prototype.bind=function(d,f){f||(this.active?f=this.active:f=this.createContext());var p=this;return function(){p.enter(f);try{return d.apply(this,arguments)}catch(m){throw m&&(m[i]=f),m}finally{p.exit(f)}}},s.prototype.enter=function(d){r.ok(d,"context must be provided for entering"),this._set.push(this.active),this.active=d},s.prototype.exit=function(d){if(r.ok(d,"context must be provided for exiting"),this.active===d){r.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var f=this._set.lastIndexOf(d);r.ok(f>=0,"context not currently entered; can't exit"),r.ok(f,"can't remove top context"),this._set.splice(f,1)},s.prototype.bindEmitter=function(d){r.ok(d.on&&d.addListener&&d.emit,"can only bind real EEs");var f=this,p="context@"+this.name;function m(g){!g||(g[o]||(g[o]=Object.create(null)),g[o][p]={namespace:f,context:f.active})}function h(g){if(!(g&&g[o]))return g;var v=g,w=g[o];return Object.keys(w).forEach(function(E){var C=w[E];v=C.namespace.bind(v,C.context)}),v}n(d,m,h)},s.prototype.fromException=function(d){return d[i]};function a(d){return process.namespaces[d]}function c(d){r.ok(d,"namespace must be given a name!");var f=new s(d);return f.id=process.addAsyncListener({create:function(){return f.active},before:function(p,m){m&&f.enter(m)},after:function(p,m){m&&f.exit(m)},error:function(p){p&&f.exit(p)}}),process.namespaces[d]=f,f}function u(d){var f=a(d);r.ok(f,"can't delete nonexistent namespace!"),r.ok(f.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(f.id),process.namespaces[d]=null}function l(){process.namespaces&&Object.keys(process.namespaces).forEach(function(d){u(d)}),process.namespaces=Object.create(null)}process.namespaces||l(),t.exports={getNamespace:a,createNamespace:c,destroyNamespace:u,reset:l}}),Fd=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CorrelationContextManager=void 0;var t=Rr(),r=m0(),n=cw(),o=nU(),i=uU(),s=function(){function c(){}return c.getCurrentContext=function(){if(!c.enabled)return null;var u=c.session.get(c.CONTEXT_NAME);return u===void 0?null:u},c.generateContextObject=function(u,l,d,f,p,m){return l=l||u,this.enabled?{operation:{name:d,id:u,parentId:l,traceparent:p,tracestate:m},customProperties:new a(f)}:null},c.spanToContextObject=function(u,l,d){var f=new n;return f.traceId=u.traceId,f.spanId=u.spanId,f.traceFlag=n.formatOpenTelemetryTraceFlags(u.traceFlags)||n.DEFAULT_TRACE_FLAG,f.parentId=l,c.generateContextObject(f.traceId,f.parentId,d,null,f)},c.runWithContext=function(u,l){var d;return c.enabled?c.session.bind(l,(d={},d[c.CONTEXT_NAME]=u,d))():l()},c.wrapEmitter=function(u){c.enabled&&c.session.bindEmitter(u)},c.wrapCallback=function(u,l){var d;return c.enabled?c.session.bind(u,l?(d={},d[c.CONTEXT_NAME]=l,d):void 0):u},c.enable=function(u){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}c.hasEverEnabled||(this.forceClsHooked=u,this.hasEverEnabled=!0,typeof this.cls>"u"&&(c.forceClsHooked===!0||c.forceClsHooked===void 0&&c.shouldUseClsHooked()?this.cls=iQ():this.cls=lQ()),c.session=this.cls.createNamespace("AI-CLS-Session"),r.registerContextPreservation(function(l){return c.session.bind(l)})),this.enabled=!0}},c.startOperation=function(u,l){var d=u&&u.traceContext||null,f=u&&u.traceId?u:null,p=u&&u.headers;if(f){var m=new n("00-"+f.traceId+"-"+f.spanId+"-01"),h=new o(f.traceState?f.traceState.serialize():null),g=c.generateContextObject(f.traceId,"|"+f.traceId+"."+f.spanId+".",typeof l=="string"?l:"",void 0,m,h);return g}if(d){var m=new n(d.traceparent),h=new o(d.tracestate),v=typeof l=="object"?new i(l):null,g=c.generateContextObject(m.traceId,m.parentId,typeof l=="string"?l:v.getOperationName({}),v&&v.getCorrelationContextHeader()||void 0,m,h);return g}if(p){var m=new n(p.traceparent?p.traceparent.toString():null),h=new o(p.tracestate?p.tracestate.toString():null),v=new i(u),g=c.generateContextObject(m.traceId,m.parentId,v.getOperationName({}),v.getCorrelationContextHeader(),m,h);return g}return t.warn("startOperation was called with invalid arguments",arguments),null},c.disable=function(){this.enabled=!1},c.reset=function(){c.hasEverEnabled&&(c.session=null,c.session=this.cls.createNamespace("AI-CLS-Session"))},c.isNodeVersionCompatible=function(){var u=process.versions.node.split(".");return parseInt(u[0])>3||parseInt(u[0])>2&&parseInt(u[1])>2},c.shouldUseClsHooked=function(){var u=process.versions.node.split(".");return parseInt(u[0])>8||parseInt(u[0])>=8&&parseInt(u[1])>=2},c.canUseClsHooked=function(){var u=process.versions.node.split("."),l=parseInt(u[0])>8||parseInt(u[0])>=8&&parseInt(u[1])>=0,d=parseInt(u[0])<8||parseInt(u[0])<=8&&parseInt(u[1])<2,f=parseInt(u[0])>4||parseInt(u[0])>=4&&parseInt(u[1])>=7;return!(l&&d)&&f},c.enabled=!1,c.hasEverEnabled=!1,c.forceClsHooked=void 0,c.CONTEXT_NAME="ApplicationInsights-Context",c}();e.CorrelationContextManager=s;var a=function(){function c(u){this.props=[],this.addHeaderData(u)}return c.prototype.addHeaderData=function(u){var l=u?u.split(", "):[];this.props=l.map(function(d){var f=d.split("=");return{key:f[0],value:f[1]}}).concat(this.props)},c.prototype.serializeToHeader=function(){return this.props.map(function(u){return u.key+"="+u.value}).join(", ")},c.prototype.getProperty=function(u){for(var l=0;l<this.props.length;++l){var d=this.props[l];if(d.key===u)return d.value}},c.prototype.setProperty=function(u,l){if(c.bannedCharacters.test(u)||c.bannedCharacters.test(l)){t.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+u+" and value: "+l);return}for(var d=0;d<this.props.length;++d){var f=this.props[d];if(f.key===u){f.value=l;return}}this.props.push({key:u,value:l})},c.bannedCharacters=/[,=]/,c}()}),dQ=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=bn(),r=ar(),n=[],o=function(a){var c=a.data.message;n.forEach(function(u){c instanceof Error?u.trackException({exception:c}):(c.lastIndexOf(`
`)==c.length-1&&(c=c.substring(0,c.length-1)),u.trackTrace({message:c,severity:a.data.stderr?t.SeverityLevel.Warning:t.SeverityLevel.Information}))})};function i(a,c){a?(n.length===0&&r.channel.subscribe("console",o),n.push(c)):(n=n.filter(function(u){return u!=c}),n.length===0&&r.channel.unsubscribe("console",o))}e.enable=i;function s(){r.channel.unsubscribe("console",o),n=[]}e.dispose=s}),fQ=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=bn(),r=ar(),n=[],o={10:t.SeverityLevel.Verbose,20:t.SeverityLevel.Verbose,30:t.SeverityLevel.Information,40:t.SeverityLevel.Warning,50:t.SeverityLevel.Error,60:t.SeverityLevel.Critical},i=function(c){var u=c.data.result;n.forEach(function(l){var d=o[c.data.level];u instanceof Error?l.trackException({exception:u}):l.trackTrace({message:u,severity:d})})};function s(c,u){c?(n.length===0&&r.channel.subscribe("bunyan",i),n.push(u)):(n=n.filter(function(l){return l!=u}),n.length===0&&r.channel.unsubscribe("bunyan",i))}e.enable=s;function a(){r.channel.unsubscribe("bunyan",i),n=[]}e.dispose=a}),pQ=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=bn(),r=ar(),n=[],o={syslog:function(c){var u={emerg:t.SeverityLevel.Critical,alert:t.SeverityLevel.Critical,crit:t.SeverityLevel.Critical,error:t.SeverityLevel.Error,warning:t.SeverityLevel.Warning,notice:t.SeverityLevel.Information,info:t.SeverityLevel.Information,debug:t.SeverityLevel.Verbose};return u[c]===void 0?t.SeverityLevel.Information:u[c]},npm:function(c){var u={error:t.SeverityLevel.Error,warn:t.SeverityLevel.Warning,info:t.SeverityLevel.Information,verbose:t.SeverityLevel.Verbose,debug:t.SeverityLevel.Verbose,silly:t.SeverityLevel.Verbose};return u[c]===void 0?t.SeverityLevel.Information:u[c]},unknown:function(c){return t.SeverityLevel.Information}},i=function(c){var u=c.data.message;n.forEach(function(l){if(u instanceof Error)l.trackException({exception:u,properties:c.data.meta});else{var d=o[c.data.levelKind](c.data.level);l.trackTrace({message:u,severity:d,properties:c.data.meta})}})};function s(c,u){c?(n.length===0&&r.channel.subscribe("winston",i),n.push(u)):(n=n.filter(function(l){return l!=u}),n.length===0&&r.channel.unsubscribe("winston",i))}e.enable=s;function a(){r.channel.unsubscribe("winston",i),n=[]}e.dispose=a}),mQ=L((e,t)=>{"use strict";var r=m0(),n=function(){function o(i){if(o.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=i,o.INSTANCE=this}return o.prototype.enable=function(i,s){r.IsInitialized&&(dQ().enable(i&&s,this._client),fQ().enable(i,this._client),pQ().enable(i,this._client))},o.prototype.isInitialized=function(){return this._isInitialized},o.prototype.dispose=function(){o.INSTANCE=null,this.enable(!1,!1)},o._methodNames=["debug","info","log","warn","error"],o}();t.exports=n}),hQ=L((e,t)=>{"use strict";var r=function(){function n(o){if(n.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");n.INSTANCE=this,this._client=o;var i=process.versions.node.split(".");n._canUseUncaughtExceptionMonitor=parseInt(i[0])>13||parseInt(i[0])===13&&parseInt(i[1])>=7}return n.prototype.isInitialized=function(){return this._isInitialized},n.prototype.enable=function(o){var i=this;if(o){this._isInitialized=!0;var s=this;if(!this._exceptionListenerHandle){var a=function(c,u,l){l===void 0&&(l=new Error(n._FALLBACK_ERROR_MESSAGE)),i._client.trackException({exception:l}),i._client.flush({isAppCrashing:!0}),c&&u&&process.listeners(u).length===1&&(console.error(l),process.exit(1))};n._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=a.bind(this,!1,void 0),process.on(n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=a.bind(this,!0,n.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=a.bind(this,!1,void 0),process.on(n.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(n.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(n._canUseUncaughtExceptionMonitor?process.removeListener(n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(n.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(n.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},n.prototype.dispose=function(){n.INSTANCE=null,this.enable(!1),this._isInitialized=!1},n.INSTANCE=null,n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",n.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",n.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",n._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",n._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",n._canUseUncaughtExceptionMonitor=!1,n}();t.exports=r}),Na=L(e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.HeartBeatMetricName=e.DependencyTypeName=e.SpanAttribute=e.TelemetryTypeStringToQuickPulseDocumentType=e.TelemetryTypeStringToQuickPulseType=e.QuickPulseType=e.QuickPulseDocumentType=e.PerformanceToQuickPulseCounter=e.MetricId=e.PerformanceCounter=e.QuickPulseCounter=e.DEFAULT_LIVEMETRICS_HOST=e.DEFAULT_LIVEMETRICS_ENDPOINT=e.DEFAULT_BREEZE_ENDPOINT=void 0,e.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var r;(function(i){i.COMMITTED_BYTES="\\Memory\\Committed Bytes",i.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",i.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",i.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",i.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",i.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",i.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",i.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",i.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(r=e.QuickPulseCounter||(e.QuickPulseCounter={}));var n;(function(i){i.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",i.AVAILABLE_BYTES="\\Memory\\Available Bytes",i.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",i.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",i.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",i.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(n=e.PerformanceCounter||(e.PerformanceCounter={}));var o;(function(i){i.REQUESTS_DURATION="requests/duration",i.DEPENDENCIES_DURATION="dependencies/duration",i.EXCEPTIONS_COUNT="exceptions/count",i.TRACES_COUNT="traces/count"})(o=e.MetricId||(e.MetricId={})),e.PerformanceToQuickPulseCounter=(t={},t[n.PROCESSOR_TIME]=r.PROCESSOR_TIME,t[n.REQUEST_RATE]=r.REQUEST_RATE,t[n.REQUEST_DURATION]=r.REQUEST_DURATION,t[r.COMMITTED_BYTES]=r.COMMITTED_BYTES,t[r.REQUEST_FAILURE_RATE]=r.REQUEST_FAILURE_RATE,t[r.DEPENDENCY_RATE]=r.DEPENDENCY_RATE,t[r.DEPENDENCY_FAILURE_RATE]=r.DEPENDENCY_FAILURE_RATE,t[r.DEPENDENCY_DURATION]=r.DEPENDENCY_DURATION,t[r.EXCEPTION_RATE]=r.EXCEPTION_RATE,t),e.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},e.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},e.TelemetryTypeStringToQuickPulseType={EventData:e.QuickPulseType.Event,ExceptionData:e.QuickPulseType.Exception,MessageData:e.QuickPulseType.Trace,MetricData:e.QuickPulseType.Metric,RequestData:e.QuickPulseType.Request,RemoteDependencyData:e.QuickPulseType.Dependency,AvailabilityData:e.QuickPulseType.Availability,PageViewData:e.QuickPulseType.PageView},e.TelemetryTypeStringToQuickPulseDocumentType={EventData:e.QuickPulseDocumentType.Event,ExceptionData:e.QuickPulseDocumentType.Exception,MessageData:e.QuickPulseDocumentType.Trace,MetricData:e.QuickPulseDocumentType.Metric,RequestData:e.QuickPulseDocumentType.Request,RemoteDependencyData:e.QuickPulseDocumentType.Dependency,AvailabilityData:e.QuickPulseDocumentType.Availability,PageViewData:e.QuickPulseDocumentType.PageView},e.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"},e.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"},e.HeartBeatMetricName="HeartBeat"}),v0=L((e,t)=>{"use strict";var r=require("os"),n=Na(),o=function(){function i(s,a,c){a===void 0&&(a=6e4),c===void 0&&(c=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,i.INSTANCE||(i.INSTANCE=this),this._isInitialized=!1,this._client=s,this._collectionInterval=a,this._enableLiveMetricsCounters=c}return i.prototype.enable=function(s,a){var c=this;this._isEnabled=s,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),s?this._handle||(this._lastCpus=r.cpus(),this._lastRequests={totalRequestCount:i._totalRequestCount,totalFailedRequestCount:i._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:i._totalDependencyCount,totalFailedDependencyCount:i._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:i._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=a||this._collectionInterval,this._handle=setInterval(function(){return c.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},i.countRequest=function(s,a){var c;if(i.isEnabled()){if(typeof s=="string")c=+new Date("1970-01-01T"+s+"Z");else if(typeof s=="number")c=s;else return;i._intervalRequestExecutionTime+=c,a===!1&&i._totalFailedRequestCount++,i._totalRequestCount++}},i.countException=function(){i._totalExceptionCount++},i.countDependency=function(s,a){var c;if(i.isEnabled()){if(typeof s=="string")c=+new Date("1970-01-01T"+s+"Z");else if(typeof s=="number")c=s;else return;i._intervalDependencyExecutionTime+=c,a===!1&&i._totalFailedDependencyCount++,i._totalDependencyCount++}},i.prototype.isInitialized=function(){return this._isInitialized},i.isEnabled=function(){return i.INSTANCE&&i.INSTANCE._isEnabled},i.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},i.prototype._trackCpu=function(){var s=r.cpus();if(s&&s.length&&this._lastCpus&&s.length===this._lastCpus.length){for(var a=0,c=0,u=0,l=0,d=0,f=0;!!s&&f<s.length;f++){var p=s[f],m=this._lastCpus[f],h="% cpu("+f+") ",g=p.model,v=p.speed,w=p.times,E=m.times,C=w.user-E.user||0;a+=C;var S=w.sys-E.sys||0;c+=S;var x=w.nice-E.nice||0;u+=x;var I=w.idle-E.idle||0;l+=I;var P=w.irq-E.irq||0;d+=P}var T=void 0;if(typeof process.cpuUsage=="function"){var D=process.cpuUsage(),R=process.hrtime(),k=D.user-this._lastAppCpuUsage.user+(D.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime<"u"&&this._lastHrtime.length===2){var U=(R[0]-this._lastHrtime[0])*1e6+(R[1]-this._lastHrtime[1])/1e3||0;T=100*k/(U*s.length)}this._lastAppCpuUsage=D,this._lastHrtime=R}var W=a+c+u+l+d||1;this._client.trackMetric({name:n.PerformanceCounter.PROCESSOR_TIME,value:(W-l)/W*100}),this._client.trackMetric({name:n.PerformanceCounter.PROCESS_TIME,value:T||a/W*100})}this._lastCpus=s},i.prototype._trackMemory=function(){var s=r.freemem(),a=process.memoryUsage().rss,c=r.totalmem()-s;this._client.trackMetric({name:n.PerformanceCounter.PRIVATE_BYTES,value:a}),this._client.trackMetric({name:n.PerformanceCounter.AVAILABLE_BYTES,value:s}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:n.QuickPulseCounter.COMMITTED_BYTES,value:c})},i.prototype._trackNetwork=function(){var s=this._lastRequests,a={totalRequestCount:i._totalRequestCount,totalFailedRequestCount:i._totalFailedRequestCount,time:+new Date},c=a.totalRequestCount-s.totalRequestCount||0,u=a.totalFailedRequestCount-s.totalFailedRequestCount||0,l=a.time-s.time,d=l/1e3,f=(i._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/c||0;if(this._lastIntervalRequestExecutionTime=i._intervalRequestExecutionTime,l>0){var p=c/d,m=u/d;this._client.trackMetric({name:n.PerformanceCounter.REQUEST_RATE,value:p}),(!this._enableLiveMetricsCounters||c>0)&&this._client.trackMetric({name:n.PerformanceCounter.REQUEST_DURATION,value:f}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:n.QuickPulseCounter.REQUEST_FAILURE_RATE,value:m})}this._lastRequests=a},i.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var s=this._lastDependencies,a={totalDependencyCount:i._totalDependencyCount,totalFailedDependencyCount:i._totalFailedDependencyCount,time:+new Date},c=a.totalDependencyCount-s.totalDependencyCount||0,u=a.totalFailedDependencyCount-s.totalFailedDependencyCount||0,l=a.time-s.time,d=l/1e3,f=(i._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/c||0;if(this._lastIntervalDependencyExecutionTime=i._intervalDependencyExecutionTime,l>0){var p=c/d,m=u/d;this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_RATE,value:p}),this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:m}),(!this._enableLiveMetricsCounters||c>0)&&this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_DURATION,value:f})}this._lastDependencies=a}},i.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var s=this._lastExceptions,a={totalExceptionCount:i._totalExceptionCount,time:+new Date},c=a.totalExceptionCount-s.totalExceptionCount||0,u=a.time-s.time,l=u/1e3;if(u>0){var d=c/l;this._client.trackMetric({name:n.QuickPulseCounter.EXCEPTION_RATE,value:d})}this._lastExceptions=a}},i.prototype.dispose=function(){i.INSTANCE=null,this.enable(!1),this._isInitialized=!1},i._totalRequestCount=0,i._totalFailedRequestCount=0,i._totalDependencyCount=0,i._totalFailedDependencyCount=0,i._totalExceptionCount=0,i._intervalDependencyExecutionTime=0,i._intervalRequestExecutionTime=0,i}();t.exports=o}),gQ=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AggregatedMetricCounter=void 0;var t=function(){function r(n){this.dimensions=n,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return r}();e.AggregatedMetricCounter=t}),vQ=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PreaggregatedMetricPropertyNames=void 0,e.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}}),pU=L((e,t)=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(a){for(var c,u=1,l=arguments.length;u<l;u++){c=arguments[u];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},r.apply(this,arguments)},n=Na(),o=gQ(),i=vQ(),s=function(){function a(c,u){u===void 0&&(u=6e4),a.INSTANCE||(a.INSTANCE=this),this._isInitialized=!1,a._dependencyCountersCollection=[],a._requestCountersCollection=[],a._exceptionCountersCollection=[],a._traceCountersCollection=[],this._client=c,this._collectionInterval=u}return a.prototype.enable=function(c,u){var l=this;this._isEnabled=c,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),c?this._handle||(this._collectionInterval=u||this._collectionInterval,this._handle=setInterval(function(){return l.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},a.countException=function(c){if(a.isEnabled()){var u=a._getAggregatedCounter(c,this._exceptionCountersCollection);u.totalCount++}},a.countTrace=function(c){if(a.isEnabled()){var u=a._getAggregatedCounter(c,this._traceCountersCollection);u.totalCount++}},a.countRequest=function(c,u){if(a.isEnabled()){var l,d=a._getAggregatedCounter(u,this._requestCountersCollection);if(typeof c=="string")l=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")l=c;else return;d.intervalExecutionTime+=l,d.totalCount++}},a.countDependency=function(c,u){if(a.isEnabled()){var l=a._getAggregatedCounter(u,this._dependencyCountersCollection),d;if(typeof c=="string")d=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")d=c;else return;l.intervalExecutionTime+=d,l.totalCount++}},a.prototype.isInitialized=function(){return this._isInitialized},a.isEnabled=function(){return a.INSTANCE&&a.INSTANCE._isEnabled},a.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},a._getAggregatedCounter=function(c,u){for(var l=!1,d=0;d<u.length;d++){if(c===u[d].dimensions)return u[d];if(Object.keys(c).length===Object.keys(u[d].dimensions).length){for(var f in c)if(c[f]!=u[d].dimensions[f]){l=!0;break}if(!l)return u[d];l=!1}}var p=new o.AggregatedMetricCounter(c);return u.push(p),p},a.prototype._trackRequestMetrics=function(){for(var c=0;c<a._requestCountersCollection.length;c++){var u=a._requestCountersCollection[c];u.time=+new Date;var l=u.totalCount-u.lastTotalCount||0,d=u.time-u.lastTime,f=(u.intervalExecutionTime-u.lastIntervalExecutionTime)/l||0;u.lastIntervalExecutionTime=u.intervalExecutionTime,d>0&&l>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:u.dimensions,value:f,count:l,aggregationInterval:d,metricType:n.MetricId.REQUESTS_DURATION}),u.lastTotalCount=u.totalCount,u.lastTime=u.time}},a.prototype._trackDependencyMetrics=function(){for(var c=0;c<a._dependencyCountersCollection.length;c++){var u=a._dependencyCountersCollection[c];u.time=+new Date;var l=u.totalCount-u.lastTotalCount||0,d=u.time-u.lastTime,f=(u.intervalExecutionTime-u.lastIntervalExecutionTime)/l||0;u.lastIntervalExecutionTime=u.intervalExecutionTime,d>0&&l>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:u.dimensions,value:f,count:l,aggregationInterval:d,metricType:n.MetricId.DEPENDENCIES_DURATION}),u.lastTotalCount=u.totalCount,u.lastTime=u.time}},a.prototype._trackExceptionMetrics=function(){for(var c=0;c<a._exceptionCountersCollection.length;c++){var u=a._exceptionCountersCollection[c],l=u.totalCount-u.lastTotalCount||0,d=u.time-u.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:u.dimensions,value:l,count:l,aggregationInterval:d,metricType:n.MetricId.EXCEPTIONS_COUNT}),u.lastTotalCount=u.totalCount,u.lastTime=u.time}},a.prototype._trackTraceMetrics=function(){for(var c=0;c<a._traceCountersCollection.length;c++){var u=a._traceCountersCollection[c],l=u.totalCount-u.lastTotalCount||0,d=u.time-u.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:u.dimensions,value:l,count:l,aggregationInterval:d,metricType:n.MetricId.TRACES_COUNT}),u.lastTotalCount=u.totalCount,u.lastTime=u.time}},a.prototype._trackPreAggregatedMetric=function(c){var u={};for(var l in c.dimensions)u[i.PreaggregatedMetricPropertyNames[l]]=c.dimensions[l];u=r(r({},u),{"_MS.MetricId":c.metricType,"_MS.AggregationIntervalMs":String(c.aggregationInterval),"_MS.IsAutocollected":"True"});var d={name:c.name,value:c.value,count:c.count,properties:u,kind:"Aggregation"};this._client.trackMetric(d)},a.prototype.dispose=function(){a.INSTANCE=null,this.enable(!1),this._isInitialized=!1},a}();t.exports=s}),uw=L((e,t)=>{"use strict";var r=require("os"),n=require("fs"),o=require("path"),i=bn(),s=Rr(),a=function(){function c(u){this.keys=new i.ContextTagKeys,this.tags={},this._loadApplicationContext(u),this._loadDeviceContext(),this._loadInternalContext()}return c.prototype._loadApplicationContext=function(u){if(u=u||o.resolve(__dirname,"../../../../package.json"),!c.appVersion[u]){c.appVersion[u]="unknown";try{var l=JSON.parse(n.readFileSync(u,"utf8"));l&&typeof l.version=="string"&&(c.appVersion[u]=l.version)}catch(d){s.info("unable to read app version: ",d)}}this.tags[this.keys.applicationVersion]=c.appVersion[u]},c.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=r&&r.hostname(),this.tags[this.keys.deviceOSVersion]=r&&r.type()+" "+r.release(),this.tags[this.keys.cloudRole]=c.DefaultRoleName,this.tags["ai.device.osArchitecture"]=r&&r.arch(),this.tags["ai.device.osPlatform"]=r&&r.platform()},c.prototype._loadInternalContext=function(){var u=o.resolve(__dirname,"../../package.json");if(!c.sdkVersion){c.sdkVersion="unknown";try{var l=JSON.parse(n.readFileSync(u,"utf8"));l&&typeof l.version=="string"&&(c.sdkVersion=l.version)}catch(d){s.info("unable to read app version: ",d)}}this.tags[this.keys.internalSdkVersion]="node:"+c.sdkVersion},c.DefaultRoleName="Web",c.appVersion={},c.sdkVersion=null,c}();t.exports=a}),yQ=L((e,t)=>{"use strict";var r=e&&e.__extends||function(){var l=function(d,f){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var h in m)Object.prototype.hasOwnProperty.call(m,h)&&(p[h]=m[h])},l(d,f)};return function(d,f){l(d,f);function p(){this.constructor=d}d.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}}(),n=require("url"),o=bn(),i=Ro(),s=xm(),a=cU(),c=Ld(),u=function(l){r(d,l);function d(f,p){var m=l.call(this)||this;return p&&p.method&&f&&(m.method=p.method,m.url=d._getUrlFromRequestOptions(f,p),m.startTime=+new Date),m}return d.prototype.onError=function(f){this._setStatus(void 0,f)},d.prototype.onResponse=function(f){this._setStatus(f.statusCode,void 0),this.correlationId=i.getCorrelationContextTarget(f,s.requestContextTargetKey)},d.prototype.getDependencyTelemetry=function(f,p){var m=n.parse(this.url);m.search=void 0,m.hash=void 0;var h=this.method.toUpperCase()+" "+m.pathname,g=o.RemoteDependencyDataConstants.TYPE_HTTP,v=m.hostname;m.port&&(v+=":"+m.port),this.correlationId?(g=o.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==c.correlationIdPrefix&&(v+=" | "+this.correlationId)):g=o.RemoteDependencyDataConstants.TYPE_HTTP;var w={id:p,name:h,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:g,target:v};if(f&&f.time?w.time=f.time:this.startTime&&(w.time=new Date(this.startTime)),f){for(var E in f)w[E]||(w[E]=f[E]);if(f.properties)for(var E in f.properties)w.properties[E]=f.properties[E]}return w},d._getUrlFromRequestOptions=function(f,p){if(typeof f=="string")if(f.indexOf("http://")===0||f.indexOf("https://")===0)f=n.parse(f);else{var m=n.parse(f);m.host==="443"?f=n.parse("https://"+f):f=n.parse("http://"+f)}else{if(f&&typeof n.URL=="function"&&f instanceof n.URL)return n.format(f);var h=f;f={},h&&Object.keys(h).forEach(function(w){f[w]=h[w]})}if(f.path){var g=n.parse(f.path);f.pathname=g.pathname,f.search=g.search}if(f.host&&f.port){var v=n.parse("http://"+f.host);!v.port&&f.port&&(f.hostname=f.host,delete f.host)}return f.protocol=f.protocol||p.agent&&p.agent.protocol||p.protocol||void 0,f.hostname=f.hostname||"localhost",n.format(f)},d}(a);t.exports=u}),wQ=L(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(s){for(var a,c=1,u=arguments.length;c<u;c++){a=arguments[c];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])}return s},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.spanToTelemetryContract=void 0;var r=jt(),n=Na();function o(s){var a=t({},s);return Object.keys(n.SpanAttribute).forEach(function(c){delete a[c]}),a}function i(s){var a="|"+s.spanContext().traceId+"."+s.spanContext().spanId+".",c=Math.round(s._duration[0]*1e3+s._duration[1]/1e6),u=s.attributes["peer.address"]?s.attributes["peer.address"].toString():"",l=s.attributes.component?s.attributes.component.toString():"",d=l.toUpperCase()===n.DependencyTypeName.Http||!!s.attributes[n.SpanAttribute.HttpUrl],f=l.toLowerCase()===n.DependencyTypeName.Grpc;if(d){var p=s.attributes[n.SpanAttribute.HttpMethod]||"GET",m=new URL(s.attributes[n.SpanAttribute.HttpUrl].toString()),h=s.attributes[n.SpanAttribute.HttpHost]||m.host,g=s.attributes[n.SpanAttribute.HttpPort]||m.port||null,v=m.pathname||"/",w=p+" "+v,E=n.DependencyTypeName.Http,C=g?(h+":"+g).toString():h.toString(),S=m.toString(),x=s.attributes[n.SpanAttribute.HttpStatusCode]||s.status.code||0,I=x<400;return{id:a,name:w,dependencyTypeName:E,target:C,data:S,success:I,duration:c,url:S,resultCode:String(x),properties:o(s.attributes)}}else if(f){var p=s.attributes[n.SpanAttribute.GrpcMethod]||"rpc",P=s.attributes[n.SpanAttribute.GrpcService],T=P?p+" "+P:s.name;return{id:a,duration:c,name:T,target:P.toString(),data:P.toString()||T,url:P.toString()||T,dependencyTypeName:n.DependencyTypeName.Grpc,resultCode:String(s.status.code||0),success:s.status.code===0,properties:o(s.attributes)}}else{var D=s.name,R=s.links&&s.links.map(function(k){return{operation_Id:k.context.traceId,id:k.context.spanId}});return{id:a,duration:c,name:D,target:u,data:u||D,url:u||D,dependencyTypeName:s.kind===r.SpanKind.INTERNAL?n.DependencyTypeName.InProc:l||s.name,resultCode:String(s.status.code||0),success:s.status.code===0,properties:t(t({},o(s.attributes)),{"_MS.links":R||void 0})}}}e.spanToTelemetryContract=i}),EQ=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=jt(),r=ar(),n=cw(),o=wQ(),i=R$(),s=[],a=function(u){var l=u.data,d=o.spanToTelemetryContract(l),f=l.spanContext(),p=new n;p.traceId=f.traceId,p.spanId=f.spanId,p.traceFlag=n.formatOpenTelemetryTraceFlags(f.traceFlags),p.parentId=l.parentSpanId?"|"+f.traceId+"."+l.parentSpanId+".":null,i.AsyncScopeManager.with(l,function(){s.forEach(function(m){l.kind===t.SpanKind.SERVER?m.trackRequest(d):(l.kind===t.SpanKind.CLIENT||l.kind===t.SpanKind.INTERNAL)&&m.trackDependency(d)})})};e.subscriber=a;function c(u,l){u?(s.length===0&&r.channel.subscribe("azure-coretracing",e.subscriber),s.push(l)):(s=s.filter(function(d){return d!=l}),s.length===0&&r.channel.unsubscribe("azure-coretracing",e.subscriber))}e.enable=c}),CQ=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=ar(),r=[],n=function(i){i.data.event.commandName!=="ismaster"&&r.forEach(function(s){var a=i.data.startedData&&i.data.startedData.databaseName||"Unknown database";s.trackDependency({target:a,data:i.data.event.commandName,name:i.data.event.commandName,duration:i.data.event.duration,success:i.data.succeeded,resultCode:i.data.succeeded?"0":"1",time:i.data.startedData.time,dependencyTypeName:"mongodb"})})};e.subscriber=n;function o(i,s){i?(r.length===0&&t.channel.subscribe("mongodb",e.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&t.channel.unsubscribe("mongodb",e.subscriber))}e.enable=o}),_Q=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=ar(),r=[],n=function(i){r.forEach(function(s){var a=i.data.query||{},c=a.sql||"Unknown query",u=!i.data.err,l=a._connection||{},d=l.config||{},f=d.socketPath?d.socketPath:(d.host||"localhost")+":"+d.port;s.trackDependency({target:f,data:c,name:c,duration:i.data.duration,success:u,resultCode:u?"0":"1",time:i.data.time,dependencyTypeName:"mysql"})})};e.subscriber=n;function o(i,s){i?(r.length===0&&t.channel.subscribe("mysql",e.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&t.channel.unsubscribe("mysql",e.subscriber))}e.enable=o}),SQ=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=ar(),r=[],n=function(i){r.forEach(function(s){i.data.commandObj.command!=="info"&&s.trackDependency({target:i.data.address,name:i.data.commandObj.command,data:i.data.commandObj.command,duration:i.data.duration,success:!i.data.err,resultCode:i.data.err?"1":"0",time:i.data.time,dependencyTypeName:"redis"})})};e.subscriber=n;function o(i,s){i?(r.length===0&&t.channel.subscribe("redis",e.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&t.channel.unsubscribe("redis",e.subscriber))}e.enable=o}),bQ=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=ar(),r=[],n=function(i){r.forEach(function(s){var a=i.data.query,c=a.preparable&&a.preparable.text||a.plan||a.text||"unknown query",u=!i.data.error,l=i.data.database.host+":"+i.data.database.port;s.trackDependency({target:l,data:c,name:c,duration:i.data.duration,success:u,resultCode:u?"0":"1",time:i.data.time,dependencyTypeName:"postgres"})})};e.subscriber=n;function o(i,s){i?(r.length===0&&t.channel.subscribe("postgres",e.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&t.channel.unsubscribe("postgres",e.subscriber))}e.enable=o}),Pm=L((e,t)=>{"use strict";var r=e&&e.__spreadArrays||function(){for(var m=0,h=0,g=arguments.length;h<g;h++)m+=arguments[h].length;for(var v=Array(m),w=0,h=0;h<g;h++)for(var E=arguments[h],C=0,S=E.length;C<S;C++,w++)v[w]=E[C];return v},n=require("http"),o=require("https"),i=Rr(),s=Ro(),a=xm(),c=yQ(),u=Fd(),l=Ld(),d=cw(),f=m0(),p=function(){function m(h){if(m.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");m.INSTANCE=this,this._client=h}return m.prototype.enable=function(h){this._isEnabled=h,this._isEnabled&&!this._isInitialized&&this._initialize(),f.IsInitialized&&(EQ().enable(!0,this._client),CQ().enable(h,this._client),_Q().enable(h,this._client),SQ().enable(h,this._client),bQ().enable(h,this._client))},m.prototype.isInitialized=function(){return this._isInitialized},m.prototype._initialize=function(){var h=this;this._isInitialized=!0;var g=n.request,v=o.request,w=function(E,C){var S=!C[m.disableCollectionRequestOption]&&!E[m.alreadyAutoCollectedFlag];C.headers&&C.headers["user-agent"]&&C.headers["user-agent"].toString().indexOf("azsdk-js")!==-1&&(S=!1),E[m.alreadyAutoCollectedFlag]=!0,E&&C&&S&&(u.CorrelationContextManager.wrapEmitter(E),m.trackRequest(h._client,{options:C,request:E}))};n.request=function(E){for(var C=[],S=1;S<arguments.length;S++)C[S-1]=arguments[S];var x=g.call.apply(g,r([n,E],C));return w(x,E),x},o.request=function(E){for(var C=[],S=1;S<arguments.length;S++)C[S-1]=arguments[S];var x=v.call.apply(v,r([o,E],C));return w(x,E),x},n.get=function(E){for(var C,S=[],x=1;x<arguments.length;x++)S[x-1]=arguments[x];var I=(C=n.request).call.apply(C,r([n,E],S));return I.end(),I},o.get=function(E){for(var C,S=[],x=1;x<arguments.length;x++)S[x-1]=arguments[x];var I=(C=o.request).call.apply(C,r([o,E],S));return I.end(),I}},m.trackRequest=function(h,g){if(!g.options||!g.request||!h){i.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!g.options,!g.request,!h);return}var v=new c(g.options,g.request),w=u.CorrelationContextManager.getCurrentContext(),E,C;if(w&&w.operation&&w.operation.traceparent&&d.isValidTraceId(w.operation.traceparent.traceId))w.operation.traceparent.updateSpanId(),E=w.operation.traceparent.getBackCompatRequestId();else if(l.w3cEnabled){var S=new d;C=S.toString(),E=S.getBackCompatRequestId()}else E=w&&w.operation&&w.operation.parentId+m.requestNumber+++".";if(s.canIncludeCorrelationHeader(h,v.getUrl())&&g.request.getHeader&&g.request.setHeader&&h.config&&h.config.correlationId){var x=g.request.getHeader(a.requestContextHeader);try{s.safeIncludeCorrelationHeader(h,g.request,x)}catch(T){i.warn("Request-Context header could not be set. Correlation of requests may be lost",T)}if(w&&w.operation)try{if(g.request.setHeader(a.requestIdHeader,E),h.config.ignoreLegacyHeaders||(g.request.setHeader(a.parentIdHeader,w.operation.id),g.request.setHeader(a.rootIdHeader,E)),C||w.operation.traceparent)g.request.setHeader(a.traceparentHeader,C||w.operation.traceparent.toString());else if(l.w3cEnabled){var S=new d().toString();g.request.setHeader(a.traceparentHeader,S)}if(w.operation.tracestate){var I=w.operation.tracestate.toString();I&&g.request.setHeader(a.traceStateHeader,I)}var P=w.customProperties.serializeToHeader();P&&g.request.setHeader(a.correlationContextHeader,P)}catch(T){i.warn("Correlation headers could not be set. Correlation of requests may be lost.",T)}}g.request.on&&(g.request.on("response",function(T){v.onResponse(T);var D=v.getDependencyTelemetry(g,E);D.contextObjects=D.contextObjects||{},D.contextObjects["http.RequestOptions"]=g.options,D.contextObjects["http.ClientRequest"]=g.request,D.contextObjects["http.ClientResponse"]=T,h.trackDependency(D)}),g.request.on("error",function(T){v.onError(T);var D=v.getDependencyTelemetry(g,E);D.contextObjects=D.contextObjects||{},D.contextObjects["http.RequestOptions"]=g.options,D.contextObjects["http.ClientRequest"]=g.request,D.contextObjects.Error=T,h.trackDependency(D)}),g.request.on("abort",function(){v.onError(new Error);var T=v.getDependencyTelemetry(g,E);T.contextObjects=T.contextObjects||{},T.contextObjects["http.RequestOptions"]=g.options,T.contextObjects["http.ClientRequest"]=g.request,h.trackDependency(T)}))},m.prototype.dispose=function(){m.INSTANCE=null,this.enable(!1),this._isInitialized=!1},m.disableCollectionRequestOption="disableAppInsightsAutoCollection",m.requestNumber=1,m.alreadyAutoCollectedFlag="_appInsightsAutoCollected",m}();t.exports=p}),xQ=L((e,t)=>{"use strict";var r=require("os"),n=Na(),o=Ro(),i=uw(),s=Pm(),a="http://169.254.169.254/metadata/instance/compute",c="api-version=2017-12-01",u="format=json",l="ENETUNREACH",d=function(){function f(p){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",f.INSTANCE||(f.INSTANCE=this),this._isInitialized=!1,this._client=p}return f.prototype.enable=function(p,m){var h=this;this._isEnabled=p,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),p?this._handle||(this._handle=setInterval(function(){return h.trackHeartBeat(m,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},f.prototype.isInitialized=function(){return this._isInitialized},f.isEnabled=function(){return f.INSTANCE&&f.INSTANCE._isEnabled},f.prototype.trackHeartBeat=function(p,m){var h=this,g=!1,v={},w=i.sdkVersion;v.sdk=w,v.osType=r.type(),process.env.WEBSITE_SITE_NAME?(v.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",v.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",v.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?v.azfunction_appId=process.env.WEBSITE_HOSTNAME:p&&(this._isVM===void 0?(g=!0,this._getAzureComputeMetadata(p,function(){h._isVM&&Object.keys(h._vmData).length>0&&(v.azInst_vmId=h._vmData.vmId||"",v.azInst_subscriptionId=h._vmData.subscriptionId||"",v.azInst_osType=h._vmData.osType||"",h._azInst_vmId=h._vmData.vmId||"",h._azInst_subscriptionId=h._vmData.subscriptionId||"",h._azInst_osType=h._vmData.osType||""),h._client.trackMetric({name:n.HeartBeatMetricName,value:0,properties:v}),m()})):this._isVM&&(v.azInst_vmId=this._azInst_vmId,v.azInst_subscriptionId=this._azInst_subscriptionId,v.azInst_osType=this._azInst_osType)),g||(this._client.trackMetric({name:n.HeartBeatMetricName,value:0,properties:v}),m())},f.prototype.dispose=function(){f.INSTANCE=null,this.enable(!1),this._isInitialized=!1},f.prototype._getAzureComputeMetadata=function(p,m){var h,g=this,v=a+"?"+c+"&"+u,w=(h={method:"GET"},h[s.disableCollectionRequestOption]=!0,h.headers={Metadata:"True"},h),E=o.makeRequest(p,v,w,function(C){if(C.statusCode===200){g._isVM=!0;var S="";C.on("data",function(x){S+=x}),C.on("end",function(){g._vmData=g._isJSON(S)?JSON.parse(S):{},m()})}else m()});E&&(E.on("error",function(C){C&&C.message&&C.message.indexOf(l)>-1&&(g._isVM=!1),m()}),E.end())},f.prototype._isJSON=function(p){try{return JSON.parse(p)&&!!p}catch{return!1}},f}();t.exports=d}),mU=L((e,t)=>{"use strict";var r=require("http"),n=require("https"),o=Rr(),i=Ro(),s=xm(),a=uU(),c=Fd(),u=v0(),l=function(){function d(f){if(d.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");d.INSTANCE=this,this._client=f}return d.prototype.enable=function(f){this._isEnabled=f,(this._isAutoCorrelating||this._isEnabled||u.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},d.prototype.useAutoCorrelation=function(f,p){f&&!this._isAutoCorrelating?c.CorrelationContextManager.enable(p):!f&&this._isAutoCorrelating&&c.CorrelationContextManager.disable(),this._isAutoCorrelating=f},d.prototype.isInitialized=function(){return this._isInitialized},d.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},d.prototype._generateCorrelationContext=function(f){if(this._isAutoCorrelating)return c.CorrelationContextManager.generateContextObject(f.getOperationId(this._client.context.tags),f.getRequestId(),f.getOperationName(this._client.context.tags),f.getCorrelationContextHeader(),f.getTraceparent(),f.getTracestate())},d.prototype._initialize=function(){var f=this;this._isInitialized=!0;var p=function(v){if(v){if(typeof v!="function")throw new Error("onRequest handler must be a function");return function(w,E){c.CorrelationContextManager.wrapEmitter(w),c.CorrelationContextManager.wrapEmitter(E);var C=w&&!w[d.alreadyAutoCollectedFlag];if(w&&C){var S=new a(w),x=f._generateCorrelationContext(S);c.CorrelationContextManager.runWithContext(x,function(){f._isEnabled&&(w[d.alreadyAutoCollectedFlag]=!0,d.trackRequest(f._client,{request:w,response:E},S)),typeof v=="function"&&v(w,E)})}else typeof v=="function"&&v(w,E)}}},m=function(v){var w=v.addListener.bind(v);v.addListener=function(E,C){switch(E){case"request":case"checkContinue":return w(E,p(C));default:return w(E,C)}},v.on=v.addListener},h=r.createServer;r.createServer=function(v,w){if(w&&typeof w=="function"){var E=h(v,p(w));return m(E),E}else{var E=h(p(v));return m(E),E}};var g=n.createServer;n.createServer=function(v,w){var E=g(v,p(w));return m(E),E}},d.trackRequestSync=function(f,p){if(!p.request||!p.response||!f){o.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!p.request,!p.response,!f);return}d.addResponseCorrelationIdHeader(f,p.response);var m=c.CorrelationContextManager.getCurrentContext(),h=new a(p.request,m&&m.operation.parentId);m&&(m.operation.id=h.getOperationId(f.context.tags)||m.operation.id,m.operation.name=h.getOperationName(f.context.tags)||m.operation.name,m.operation.parentId=h.getRequestId()||m.operation.parentId,m.customProperties.addHeaderData(h.getCorrelationContextHeader())),d.endRequest(f,h,p,p.duration,p.error)},d.trackRequest=function(f,p,m){if(!p.request||!p.response||!f){o.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!p.request,!p.response,!f);return}var h=c.CorrelationContextManager.getCurrentContext(),g=m||new a(p.request,h&&h.operation.parentId);i.canIncludeCorrelationHeader(f,g.getUrl())&&d.addResponseCorrelationIdHeader(f,p.response),h&&!m&&(h.operation.id=g.getOperationId(f.context.tags)||h.operation.id,h.operation.name=g.getOperationName(f.context.tags)||h.operation.name,h.operation.parentId=g.getOperationParentId(f.context.tags)||h.operation.parentId,h.customProperties.addHeaderData(g.getCorrelationContextHeader())),p.response.once&&p.response.once("finish",function(){d.endRequest(f,g,p,null,null)}),p.request.on&&p.request.on("error",function(v){d.endRequest(f,g,p,null,v)}),p.request.on&&p.request.on("aborted",function(){var v="The request has been aborted and the network socket has closed.";d.endRequest(f,g,p,null,v)})},d.addResponseCorrelationIdHeader=function(f,p){if(f.config&&f.config.correlationId&&p.getHeader&&p.setHeader&&!p.headersSent){var m=p.getHeader(s.requestContextHeader);i.safeIncludeCorrelationHeader(f,p,m)}},d.endRequest=function(f,p,m,h,g){g?p.onError(g,h):p.onResponse(m.response,h);var v=p.getRequestTelemetry(m);if(v.tagOverrides=p.getRequestTags(f.context.tags),m.tagOverrides)for(var w in m.tagOverrides)v.tagOverrides[w]=m.tagOverrides[w];var E=p.getLegacyRootId();E&&(v.properties.ai_legacyRootId=E),v.contextObjects=v.contextObjects||{},v.contextObjects["http.ServerRequest"]=m.request,v.contextObjects["http.ServerResponse"]=m.response,f.trackRequest(v)},d.prototype.dispose=function(){d.INSTANCE=null,this.enable(!1),this._isInitialized=!1,c.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},d.alreadyAutoCollectedFlag="_appInsightsAutoCollected",d}();t.exports=l}),PQ=L((e,t)=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(l){for(var d,f=1,p=arguments.length;f<p;f++){d=arguments[f];for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(l[m]=d[m])}return l},r.apply(this,arguments)},n=require("os"),o=bn(),i=Na(),s=Ro(),a=Rr(),c=s.w3cTraceId(),u=function(){function l(){}return l.createQuickPulseEnvelope=function(d,f,p,m){var h=n&&typeof n.hostname=="function"&&n.hostname()||"Unknown",g=m.tags&&m.keys&&m.keys.cloudRoleInstance&&m.tags[m.keys.cloudRoleInstance]||h,v=m.tags&&m.keys&&m.keys.cloudRole&&m.tags[m.keys.cloudRole]||null,w={Documents:f.length>0?f:null,InstrumentationKey:p.instrumentationKey||"",Metrics:d.length>0?d:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:m.tags[m.keys.internalSdkVersion],StreamId:c,MachineName:h,Instance:g,RoleName:v};return w},l.createQuickPulseMetric=function(d){var f;return f={Name:d.name,Value:d.value,Weight:d.count||1},f},l.telemetryEnvelopeToQuickPulseDocument=function(d){switch(d.data.baseType){case o.TelemetryTypeString.Event:return l.createQuickPulseEventDocument(d);case o.TelemetryTypeString.Exception:return l.createQuickPulseExceptionDocument(d);case o.TelemetryTypeString.Trace:return l.createQuickPulseTraceDocument(d);case o.TelemetryTypeString.Dependency:return l.createQuickPulseDependencyDocument(d);case o.TelemetryTypeString.Request:return l.createQuickPulseRequestDocument(d)}return null},l.createQuickPulseEventDocument=function(d){var f=l.createQuickPulseDocument(d),p=d.data.baseData.name,m=r(r({},f),{Name:p});return m},l.createQuickPulseTraceDocument=function(d){var f=l.createQuickPulseDocument(d),p=d.data.baseData.severityLevel||0,m=r(r({},f),{Message:d.data.baseData.message,SeverityLevel:o.SeverityLevel[p]});return m},l.createQuickPulseExceptionDocument=function(d){var f=l.createQuickPulseDocument(d),p=d.data.baseData.exceptions,m="",h="",g="";p&&p.length>0&&(p[0].parsedStack&&p[0].parsedStack.length>0?p[0].parsedStack.forEach(function(w){m+=w.assembly+`
`}):p[0].stack&&p[0].stack.length>0&&(m=p[0].stack),h=p[0].message,g=p[0].typeName);var v=r(r({},f),{Exception:m,ExceptionMessage:h,ExceptionType:g});return v},l.createQuickPulseRequestDocument=function(d){var f=l.createQuickPulseDocument(d),p=d.data.baseData,m=r(r({},f),{Name:p.name,Success:p.success,Duration:p.duration,ResponseCode:p.responseCode,OperationName:p.name});return m},l.createQuickPulseDependencyDocument=function(d){var f=l.createQuickPulseDocument(d),p=d.data.baseData,m=r(r({},f),{Name:p.name,Target:p.target,Success:p.success,Duration:p.duration,ResultCode:p.resultCode,CommandName:p.data,OperationName:f.OperationId,DependencyTypeName:p.type});return m},l.createQuickPulseDocument=function(d){var f,p,m,h;d.data.baseType?(p=i.TelemetryTypeStringToQuickPulseType[d.data.baseType],f=i.TelemetryTypeStringToQuickPulseDocumentType[d.data.baseType]):a.warn("Document type invalid; not sending live metric document",d.data.baseType),m=d.tags[l.keys.operationId],h=l.aggregateProperties(d);var g={DocumentType:f,__type:p,OperationId:m,Version:"1.0",Properties:h};return g},l.aggregateProperties=function(d){var f=[],p=d.data.baseData.measurements||{};for(var m in p)if(p.hasOwnProperty(m)){var h=p[m],g={key:m,value:h};f.push(g)}var v=d.data.baseData.properties||{};for(var m in v)if(v.hasOwnProperty(m)){var h=v[m],g={key:m,value:h};f.push(g)}return f},l.keys=new o.ContextTagKeys,l}();t.exports=u}),TQ=L((e,t)=>{"use strict";var r=function(){return(Date.now()+621355968e5)*1e4};t.exports={getTransmissionTime:r}}),IQ=L((e,t)=>{"use strict";var r=e&&e.__awaiter||function(d,f,p,m){function h(g){return g instanceof p?g:new p(function(v){v(g)})}return new(p||(p=Promise))(function(g,v){function w(S){try{C(m.next(S))}catch(x){v(x)}}function E(S){try{C(m.throw(S))}catch(x){v(x)}}function C(S){S.done?g(S.value):h(S.value).then(w,E)}C((m=m.apply(d,f||[])).next())})},n=e&&e.__generator||function(d,f){var p={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},m,h,g,v;return v={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function w(C){return function(S){return E([C,S])}}function E(C){if(m)throw new TypeError("Generator is already executing.");for(;p;)try{if(m=1,h&&(g=C[0]&2?h.return:C[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,C[1])).done)return g;switch(h=0,g&&(C=[C[0]&2,g.value]),C[0]){case 0:case 1:g=C;break;case 4:return p.label++,{value:C[1],done:!1};case 5:p.label++,h=C[1],C=[0];continue;case 7:C=p.ops.pop(),p.trys.pop();continue;default:if(g=p.trys,!(g=g.length>0&&g[g.length-1])&&(C[0]===6||C[0]===2)){p=0;continue}if(C[0]===3&&(!g||C[1]>g[0]&&C[1]<g[3])){p.label=C[1];break}if(C[0]===6&&p.label<g[1]){p.label=g[1],g=C;break}if(g&&p.label<g[2]){p.label=g[2],p.ops.push(C);break}g[2]&&p.ops.pop(),p.trys.pop();continue}C=f.call(d,p)}catch(S){C=[6,S],h=0}finally{m=g=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},o=require("https"),i=Pm(),s=Rr(),a=TQ(),c=Ro(),u={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},l=function(){function d(f){this._config=f,this._consecutiveErrors=0}return d.prototype.ping=function(f,p,m){var h=[{name:u.streamId,value:f.StreamId},{name:u.machineName,value:f.MachineName},{name:u.roleName,value:f.RoleName},{name:u.instanceName,value:f.Instance},{name:u.invariantVersion,value:f.InvariantVersion.toString()}];this._submitData(f,p,m,"ping",h)},d.prototype.post=function(f,p,m){return r(this,void 0,void 0,function(){return n(this,function(h){switch(h.label){case 0:return[4,this._submitData([f],p,m,"post")];case 1:return h.sent(),[2]}})})},d.prototype._submitData=function(f,p,m,h,g){return r(this,void 0,void 0,function(){var v,w,E,C,S,x=this;return n(this,function(I){return v=JSON.stringify(f),w=(C={},C[i.disableCollectionRequestOption]=!0,C.host=p&&p.length>0?p:this._config.quickPulseHost,C.method=u.method,C.path="/QuickPulseService.svc/"+h+"?ikey="+this._config.instrumentationKey,C.headers=(S={Expect:"100-continue"},S[u.time]=a.getTransmissionTime(),S["Content-Type"]="application/json",S["Content-Length"]=Buffer.byteLength(v),S),C),g&&g.length>0&&g.forEach(function(P){return w.headers[P.name]=P.value}),this._config.httpsAgent?w.agent=this._config.httpsAgent:w.agent=c.tlsRestrictedAgent,E=o.request(w,function(P){if(P.statusCode==200){var T=P.headers[u.subscribed]==="true",D=P.headers[u.endpointRedirect]?P.headers[u.endpointRedirect].toString():null,R=P.headers[u.pollingIntervalHint]?parseInt(P.headers[u.pollingIntervalHint].toString()):null;x._consecutiveErrors=0,m(T,P,D,R)}else x._onError("StatusCode:"+P.statusCode+" StatusMessage:"+P.statusMessage),m()}),E.on("error",function(P){x._onError(P),m()}),E.write(v),E.end(),[2]})})},d.prototype._onError=function(f){this._consecutiveErrors++;var p="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%d.MAX_QPS_FAILURES_BEFORE_WARN===0?(p="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",s.warn(d.TAG,p,f)):s.info(d.TAG,p,f)},d.TAG="QuickPulseSender",d.MAX_QPS_FAILURES_BEFORE_WARN=25,d}();t.exports=l}),DQ=L((e,t)=>{"use strict";var r=e&&e.__awaiter||function(l,d,f,p){function m(h){return h instanceof f?h:new f(function(g){g(h)})}return new(f||(f=Promise))(function(h,g){function v(C){try{E(p.next(C))}catch(S){g(S)}}function w(C){try{E(p.throw(C))}catch(S){g(S)}}function E(C){C.done?h(C.value):m(C.value).then(v,w)}E((p=p.apply(l,d||[])).next())})},n=e&&e.__generator||function(l,d){var f={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},p,m,h,g;return g={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function v(E){return function(C){return w([E,C])}}function w(E){if(p)throw new TypeError("Generator is already executing.");for(;f;)try{if(p=1,m&&(h=E[0]&2?m.return:E[0]?m.throw||((h=m.return)&&h.call(m),0):m.next)&&!(h=h.call(m,E[1])).done)return h;switch(m=0,h&&(E=[E[0]&2,h.value]),E[0]){case 0:case 1:h=E;break;case 4:return f.label++,{value:E[1],done:!1};case 5:f.label++,m=E[1],E=[0];continue;case 7:E=f.ops.pop(),f.trys.pop();continue;default:if(h=f.trys,!(h=h.length>0&&h[h.length-1])&&(E[0]===6||E[0]===2)){f=0;continue}if(E[0]===3&&(!h||E[1]>h[0]&&E[1]<h[3])){f.label=E[1];break}if(E[0]===6&&f.label<h[1]){f.label=h[1],h=E;break}if(h&&f.label<h[2]){f.label=h[2],f.ops.push(E);break}h[2]&&f.ops.pop(),f.trys.pop();continue}E=d.call(l,f)}catch(C){E=[6,C],m=0}finally{p=h=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},o=Rr(),i=PQ(),s=IQ(),a=Na(),c=uw(),u=function(){function l(d,f){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=d,this.context=f||new c,this._sender=new s(this.config),this._isEnabled=!1}return l.prototype.addCollector=function(d){this._collectors.push(d)},l.prototype.trackMetric=function(d){this._addMetric(d)},l.prototype.addDocument=function(d){var f=i.telemetryEnvelopeToQuickPulseDocument(d);f&&this._documents.push(f)},l.prototype.enable=function(d){d&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!d&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},l.prototype.enableCollectors=function(d){this._collectors.forEach(function(f){f.enable(d)})},l.prototype._addMetric=function(d){var f=d.value,p=d.count||1,m=a.PerformanceToQuickPulseCounter[d.name];m&&(this._metrics[m]?(this._metrics[m].Value=(this._metrics[m].Value*this._metrics[m].Weight+f*p)/(this._metrics[m].Weight+p),this._metrics[m].Weight+=p):(this._metrics[m]=i.createQuickPulseMetric(d),this._metrics[m].Name=m,this._metrics[m].Weight=1))},l.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},l.prototype._goQuickPulse=function(){return r(this,void 0,void 0,function(){var d,f,p,m,h=this;return n(this,function(g){switch(g.label){case 0:return d=Object.keys(this._metrics).map(function(v){return h._metrics[v]}),f=i.createQuickPulseEnvelope(d,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(f)]:[3,2];case 1:return g.sent(),[3,3];case 2:this._ping(f),g.label=3;case 3:return p=this._pollingIntervalHint>0?this._pollingIntervalHint:l.PING_INTERVAL,m=this._isCollectingData?l.POST_INTERVAL:p,this._isCollectingData&&Date.now()-this._lastSuccessTime>=l.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,m=l.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=l.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(m=l.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),m),this._handle.unref(),[2]}})})},l.prototype._ping=function(d){this._sender.ping(d,this._redirectedHost,this._quickPulseDone.bind(this))},l.prototype._post=function(d){return r(this,void 0,void 0,function(){return n(this,function(f){switch(f.label){case 0:return[4,this._sender.post(d,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return f.sent(),[2]}})})},l.prototype._quickPulseDone=function(d,f,p,m){d!=null?(this._isCollectingData!==d&&(o.info("Live Metrics sending data",d),this.enableCollectors(d)),this._isCollectingData=d,p&&p.length>0&&(this._redirectedHost=p,o.info("Redirecting endpoint to: ",p)),m&&m>0&&(this._pollingIntervalHint=m),f&&f.statusCode<300&&f.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},l.MAX_POST_WAIT_TIME=2e4,l.MAX_PING_WAIT_TIME=6e4,l.FALLBACK_INTERVAL=6e4,l.PING_INTERVAL=5e3,l.POST_INTERVAL=1e3,l}();t.exports=u}),RQ=L((e,t)=>{"use strict";var r=Na(),n=function(){function o(){}return o.parse=function(i){if(!i)return{};var s=i.split(o._FIELDS_SEPARATOR),a=s.reduce(function(u,l){var d=l.split(o._FIELD_KEY_VALUE_SEPARATOR);if(d.length===2){var f=d[0].toLowerCase(),p=d[1];u[f]=p}return u},{});if(Object.keys(a).length>0){if(a.endpointsuffix){var c=a.location?a.location+".":"";a.ingestionendpoint=a.ingestionendpoint||"https://"+c+"dc."+a.endpointsuffix,a.liveendpoint=a.liveendpoint||"https://"+c+"live."+a.endpointsuffix}a.ingestionendpoint=a.ingestionendpoint||r.DEFAULT_BREEZE_ENDPOINT,a.liveendpoint=a.liveendpoint||r.DEFAULT_LIVEMETRICS_ENDPOINT}return a},o._FIELDS_SEPARATOR=";",o._FIELD_KEY_VALUE_SEPARATOR="=",o}();t.exports=n}),hU=L((e,t)=>{"use strict";var r=Ld(),n=RQ(),o=Rr(),i=Na(),s=require("url"),a=function(){function c(u){var l=this;this.endpointBase=i.DEFAULT_BREEZE_ENDPOINT;var d=process.env[c.ENV_connectionString],f=n.parse(u),p=n.parse(d),m=!f.instrumentationkey&&Object.keys(f).length>0?null:u;this.instrumentationKey=f.instrumentationkey||m||p.instrumentationkey||c._getInstrumentationKey(),c._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(f.ingestionendpoint||p.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(h){return l.correlationId=h},this.proxyHttpUrl=process.env[c.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[c.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=f.ingestionendpoint||p.ingestionendpoint||process.env[c.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=f.liveendpoint||p.liveendpoint||process.env[c.ENV_quickPulseHost]||i.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=s.parse(this._quickPulseHost).host)}return Object.defineProperty(c.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(u){r.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=u,this.correlationId=r.correlationIdPrefix,r.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(u){this._quickPulseHost=u},enumerable:!1,configurable:!0}),c._getInstrumentationKey=function(){var u=process.env[c.ENV_iKey]||process.env[c.ENV_azurePrefix+c.ENV_iKey]||process.env[c.legacy_ENV_iKey]||process.env[c.ENV_azurePrefix+c.legacy_ENV_iKey];if(!u||u=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return u},c._validateInstrumentationKey=function(u){var l="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",d=new RegExp(l);return d.test(u)},c.ENV_azurePrefix="APPSETTING_",c.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",c.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",c.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",c.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",c.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",c.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",c.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",c.ENV_http_proxy="http_proxy",c.ENV_https_proxy="https_proxy",c}();t.exports=a}),kQ=L(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(s){for(var a,c=1,u=arguments.length;c<u;c++){a=arguments[c];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])}return s},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AutoCollectNativePerformance=void 0;var r=hU(),n=uw(),o=Rr(),i=function(){function s(a){this._disabledMetrics={},s.INSTANCE&&s.INSTANCE.dispose(),s.INSTANCE=this,this._client=a}return s.isNodeVersionCompatible=function(){var a=process.versions.node.split(".");return parseInt(a[0])>=6},s.prototype.enable=function(a,c,u){var l=this;if(c===void 0&&(c={}),u===void 0&&(u=6e4),!!s.isNodeVersionCompatible()){if(s._metricsAvailable==null&&a&&!this._isInitialized)try{var d=require("applicationinsights-native-metrics");s._emitter=new d,s._metricsAvailable=!0,o.info("Native metrics module successfully loaded!")}catch{s._metricsAvailable=!1;return}this._isEnabled=a,this._disabledMetrics=c,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&s._emitter?(s._emitter.enable(!0,u),this._handle||(this._handle=setInterval(function(){return l._trackNativeMetrics()},u),this._handle.unref())):s._emitter&&(s._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},s.prototype.dispose=function(){this.enable(!1)},s.parseEnabled=function(a){var c=process.env[r.ENV_nativeMetricsDisableAll],u=process.env[r.ENV_nativeMetricsDisablers];if(c)return{isEnabled:!1,disabledMetrics:{}};if(u){var l=u.split(","),d={};if(l.length>0)for(var f=0,p=l;f<p.length;f++){var m=p[f];d[m]=!0}return typeof a=="object"?{isEnabled:!0,disabledMetrics:t(t({},a),d)}:{isEnabled:a,disabledMetrics:d}}return typeof a=="boolean"?{isEnabled:a,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:a}},s.prototype._trackNativeMetrics=function(){var a=!0;typeof this._isEnabled!="object"&&(a=this._isEnabled),a&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},s.prototype._trackGarbageCollection=function(){var a;if(!this._disabledMetrics.gc){var c=s._emitter.getGCData();for(var u in c){var l=c[u].metrics,d=u+" Garbage Collection Duration",f=Math.sqrt(l.sumSquares/l.count-Math.pow(l.total/l.count,2))||0;this._client.trackMetric({name:d,value:l.total,count:l.count,max:l.max,min:l.min,stdDev:f,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,a)})}}},s.prototype._trackEventLoop=function(){var a;if(!this._disabledMetrics.loop){var c=s._emitter.getLoopData(),u=c.loopUsage;if(u.count!=0){var l="Event Loop CPU Time",d=Math.sqrt(u.sumSquares/u.count-Math.pow(u.total/u.count,2))||0;this._client.trackMetric({name:l,value:u.total,count:u.count,min:u.min,max:u.max,stdDev:d,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,a)})}}},s.prototype._trackHeapUsage=function(){var a,c,u;if(!this._disabledMetrics.heap){var l=process.memoryUsage(),d=l.heapUsed,f=l.heapTotal,p=l.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:d,count:1,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,a)}),this._client.trackMetric({name:"Memory Total (Heap)",value:f,count:1,tagOverrides:(c={},c[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,c)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:p-f,count:1,tagOverrides:(u={},u[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,u)})}},s}();e.AutoCollectNativePerformance=i}),AQ=L((e,t)=>{"use strict";var r=Rr(),n=function(){function o(i,s,a,c){this._buffer=[],this._lastSend=0,this._isDisabled=i,this._getBatchSize=s,this._getBatchIntervalMs=a,this._sender=c}return o.prototype.setUseDiskRetryCaching=function(i,s,a){this._sender.setDiskRetryMode(i,s,a)},o.prototype.send=function(i){var s=this;if(!this._isDisabled()){if(!i){r.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(i),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){s._timeoutHandle=null,s.triggerSend(!1)},this._getBatchIntervalMs()))}},o.prototype.triggerSend=function(i,s){var a=this._buffer.length<1;a||(i?(this._sender.saveOnCrash(this._buffer),typeof s=="function"&&s("data saved on crash")):this._sender.send(this._buffer,s)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,a&&typeof s=="function"&&s("no data to send")},o}();t.exports=n}),OQ=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.azureRoleEnvironmentTelemetryProcessor=void 0;function t(r,n){process.env.WEBSITE_SITE_NAME&&(r.tags[n.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}e.azureRoleEnvironmentTelemetryProcessor=t}),NQ=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSamplingHashCode=e.samplingTelemetryProcessor=void 0;var t=bn();function r(o,i){var s=o.sampleRate,a=!1;return s==null||s>=100||o.data&&t.TelemetryType.Metric===t.baseTypeToTelemetryType(o.data.baseType)?!0:(i.correlationContext&&i.correlationContext.operation?a=n(i.correlationContext.operation.id)<s:a=Math.random()*100<s,a)}e.samplingTelemetryProcessor=r;function n(o){var i=-2147483648,s=2147483647,a=5381;if(!o)return 0;for(;o.length<8;)o=o+o;for(var c=0;c<o.length;c++)a=((a<<5)+a|0)+o.charCodeAt(c)|0;return a=a<=i?s:Math.abs(a),a/s*100}e.getSamplingHashCode=n}),LQ=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.performanceMetricsTelemetryProcessor=void 0;var t=v0(),r=bn();function n(o,i){switch(i&&i.addDocument(o),o.data.baseType){case r.TelemetryTypeString.Exception:t.countException();break;case r.TelemetryTypeString.Request:var s=o.data.baseData;t.countRequest(s.duration,s.success);break;case r.TelemetryTypeString.Dependency:var a=o.data.baseData;t.countDependency(a.duration,a.success);break}return!0}e.performanceMetricsTelemetryProcessor=n}),FQ=L(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(s){for(var a,c=1,u=arguments.length;c<u;c++){a=arguments[c];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])}return s},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.preAggregatedMetricsTelemetryProcessor=void 0;var r=bn(),n=pU(),o=bn();function i(s,a){if(n.isEnabled())switch(s.data.baseType){case o.TelemetryTypeString.Exception:var c=s.data.baseData;c.properties=t(t({},c.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var u={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole]};n.countException(u);break;case o.TelemetryTypeString.Trace:var l=s.data.baseData;l.properties=t(t({},l.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var d={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole],traceSeverityLevel:r.SeverityLevel[l.severity]};n.countTrace(d);break;case o.TelemetryTypeString.Request:var f=s.data.baseData;f.properties=t(t({},f.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var p={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole],operationSynthetic:s.tags[a.keys.operationSyntheticSource],requestSuccess:f.success,requestResultCode:f.responseCode};n.countRequest(f.duration,p);break;case o.TelemetryTypeString.Dependency:var m=s.data.baseData;m.properties=t(t({},m.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var h={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole],operationSynthetic:s.tags[a.keys.operationSyntheticSource],dependencySuccess:m.success,dependencyType:m.type,dependencyTarget:m.target,dependencyResultCode:m.resultCode};n.countDependency(m.duration,h);break}return!0}e.preAggregatedMetricsTelemetryProcessor=i}),MQ=L(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(OQ(),e),r(NQ(),e),r(LQ(),e),r(FQ(),e)}),$Q=L((e,t)=>{"use strict";var r=e&&e.__awaiter||function(p,m,h,g){function v(w){return w instanceof h?w:new h(function(E){E(w)})}return new(h||(h=Promise))(function(w,E){function C(I){try{x(g.next(I))}catch(P){E(P)}}function S(I){try{x(g.throw(I))}catch(P){E(P)}}function x(I){I.done?w(I.value):v(I.value).then(C,S)}x((g=g.apply(p,m||[])).next())})},n=e&&e.__generator||function(p,m){var h={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},g,v,w,E;return E={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function C(x){return function(I){return S([x,I])}}function S(x){if(g)throw new TypeError("Generator is already executing.");for(;h;)try{if(g=1,v&&(w=x[0]&2?v.return:x[0]?v.throw||((w=v.return)&&w.call(v),0):v.next)&&!(w=w.call(v,x[1])).done)return w;switch(v=0,w&&(x=[x[0]&2,w.value]),x[0]){case 0:case 1:w=x;break;case 4:return h.label++,{value:x[1],done:!1};case 5:h.label++,v=x[1],x=[0];continue;case 7:x=h.ops.pop(),h.trys.pop();continue;default:if(w=h.trys,!(w=w.length>0&&w[w.length-1])&&(x[0]===6||x[0]===2)){h=0;continue}if(x[0]===3&&(!w||x[1]>w[0]&&x[1]<w[3])){h.label=x[1];break}if(x[0]===6&&h.label<w[1]){h.label=w[1],w=x;break}if(w&&h.label<w[2]){h.label=w[2],h.ops.push(x);break}w[2]&&h.ops.pop(),h.trys.pop();continue}x=m.call(p,h)}catch(I){x=[6,I],v=0}finally{g=w=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},o=require("fs"),i=require("os"),s=require("path"),a=require("zlib"),c=require("child_process"),u=Rr(),l=Pm(),d=Ro(),f=function(){function p(m,h,g){if(this._redirectedHost=null,this._config=m,this._onSuccess=h,this._onError=g,this._enableDiskRetryMode=!1,this._resendInterval=p.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=p.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=s.join(i.tmpdir(),p.TEMPDIR_PREFIX+this._config.instrumentationKey),!p.OS_PROVIDES_FILE_PROTECTION)if(p.USE_ICACLS){try{p.OS_PROVIDES_FILE_PROTECTION=o.existsSync(p.ICACLS_PATH)}catch{}p.OS_PROVIDES_FILE_PROTECTION||u.warn(p.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else p.OS_PROVIDES_FILE_PROTECTION=!0}return p.prototype.setDiskRetryMode=function(m,h,g){var v=this;this._enableDiskRetryMode=p.OS_PROVIDES_FILE_PROTECTION&&m,typeof h=="number"&&h>=0&&(this._resendInterval=Math.floor(h)),typeof g=="number"&&g>=0&&(this._maxBytesOnDisk=Math.floor(g)),m&&!p.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,u.warn(p.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){v._fileCleanupTask()},p.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},p.prototype.send=function(m,h){return r(this,void 0,void 0,function(){var g,v,w,E,C=this;return n(this,function(S){return m&&(g=this._redirectedHost||this._config.endpointUrl,v={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},w="",m.forEach(function(x){var I=C._stringify(x);typeof I=="string"&&(w+=I+`
`)}),w.length>0&&(w=w.substring(0,w.length-1)),E=Buffer.from?Buffer.from(w):new Buffer(w),a.gzip(E,function(x,I){var P=I;x?(u.warn(x),P=E,v.headers["Content-Length"]=E.length.toString()):(v.headers["Content-Encoding"]="gzip",v.headers["Content-Length"]=I.length.toString()),u.info(p.TAG,v),v[l.disableCollectionRequestOption]=!0;var T=function(R){R.setEncoding("utf-8");var k="";R.on("data",function(U){k+=U}),R.on("end",function(){if(C._numConsecutiveFailures=0,C._enableDiskRetryMode){if(R.statusCode===200)C._resendTimer||(C._resendTimer=setTimeout(function(){C._resendTimer=null,C._sendFirstFileOnDisk()},C._resendInterval),C._resendTimer.unref());else if(C._isRetriable(R.statusCode))try{var U=JSON.parse(k),W=[];U.errors.forEach(function($){C._isRetriable($.statusCode)&&W.push(m[$.index])}),W.length>0&&C._storeToDisk(W)}catch{C._storeToDisk(m)}}if(R.statusCode===307||R.statusCode===308)if(C._numConsecutiveRedirects++,C._numConsecutiveRedirects<10){var j=R.headers.location?R.headers.location.toString():null;j&&(C._redirectedHost=j,C.send(m,h))}else typeof h=="function"&&h("Error sending telemetry because of circular redirects.");else C._numConsecutiveRedirects=0,typeof h=="function"&&h(k),u.info(p.TAG,k),typeof C._onSuccess=="function"&&C._onSuccess(k)})},D=d.makeRequest(C._config,g,v,T);D.on("error",function(R){if(C._numConsecutiveFailures++,!C._enableDiskRetryMode||C._numConsecutiveFailures>0&&C._numConsecutiveFailures%p.MAX_CONNECTION_FAILURES_BEFORE_WARN===0){var k="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";C._enableDiskRetryMode&&(k="Ingestion endpoint could not be reached "+C._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),u.warn(p.TAG,k,d.dumpObj(R))}else{var k="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";u.info(p.TAG,k,d.dumpObj(R))}C._onErrorHelper(R),typeof h=="function"&&(R&&h(d.dumpObj(R)),h("Error sending telemetry")),C._enableDiskRetryMode&&C._storeToDisk(m)}),D.write(P),D.end()})),[2]})})},p.prototype.saveOnCrash=function(m){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(m))},p.prototype._isRetriable=function(m){return m===206||m===408||m===429||m===439||m===500||m===503},p.prototype._runICACLS=function(m,h){var g=c.spawn(p.ICACLS_PATH,m,{windowsHide:!0});g.on("error",function(v){return h(v)}),g.on("close",function(v,w){return h(v===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+v+")"))})},p.prototype._runICACLSSync=function(m){if(c.spawnSync){var h=c.spawnSync(p.ICACLS_PATH,m,{windowsHide:!0});if(h.error)throw h.error;if(h.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+h.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},p.prototype._getACLIdentity=function(m){if(p.ACL_IDENTITY)return m(null,p.ACL_IDENTITY);var h=c.spawn(p.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),g="";h.stdout.on("data",function(v){return g+=v}),h.on("error",function(v){return m(v,null)}),h.on("close",function(v,w){return p.ACL_IDENTITY=g&&g.trim(),m(v===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+v+")"),p.ACL_IDENTITY)})},p.prototype._getACLIdentitySync=function(){if(p.ACL_IDENTITY)return p.ACL_IDENTITY;if(c.spawnSync){var m=c.spawnSync(p.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(m.error)throw m.error;if(m.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+m.status+")");return p.ACL_IDENTITY=m.stdout&&m.stdout.toString().trim(),p.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},p.prototype._getACLArguments=function(m,h){return[m,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",h+":(OI)(CI)F","/inheritance:r"]},p.prototype._applyACLRules=function(m,h){var g=this;if(!p.USE_ICACLS)return h(null);if(p.ACLED_DIRECTORIES[m]===void 0)p.ACLED_DIRECTORIES[m]=!1,this._getACLIdentity(function(v,w){if(v)return p.ACLED_DIRECTORIES[m]=!1,h(v);g._runICACLS(g._getACLArguments(m,w),function(E){return p.ACLED_DIRECTORIES[m]=!E,h(E)})});else return h(p.ACLED_DIRECTORIES[m]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},p.prototype._applyACLRulesSync=function(m){if(p.USE_ICACLS){if(p.ACLED_DIRECTORIES[m]===void 0){this._runICACLSSync(this._getACLArguments(m,this._getACLIdentitySync())),p.ACLED_DIRECTORIES[m]=!0;return}else if(!p.ACLED_DIRECTORIES[m])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},p.prototype._confirmDirExists=function(m,h){var g=this;o.lstat(m,function(v,w){v&&v.code==="ENOENT"?o.mkdir(m,function(E){E&&E.code!=="EEXIST"?h(E):g._applyACLRules(m,h)}):!v&&w.isDirectory()?g._applyACLRules(m,h):h(v||new Error("Path existed but was not a directory"))})},p.prototype._getShallowDirectorySize=function(m,h){o.readdir(m,function(g,v){if(g)return h(g,-1);var w=null,E=0,C=0;if(v.length===0){h(null,0);return}for(var S=0;S<v.length;S++)o.stat(s.join(m,v[S]),function(x,I){C++,x?w=x:I.isFile()&&(E+=I.size),C===v.length&&(w?h(w,-1):h(w,E))})})},p.prototype._getShallowDirectorySizeSync=function(m){for(var h=o.readdirSync(m),g=0,v=0;v<h.length;v++)g+=o.statSync(s.join(m,h[v])).size;return g},p.prototype._storeToDisk=function(m){var h=this;u.info(p.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,function(g){if(g){u.warn(p.TAG,"Error while checking/creating directory: "+(g&&g.message)),h._onErrorHelper(g);return}h._getShallowDirectorySize(h._tempDir,function(v,w){if(v||w<0){u.warn(p.TAG,"Error while checking directory size: "+(v&&v.message)),h._onErrorHelper(v);return}else if(w>h._maxBytesOnDisk){u.warn(p.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+w);return}var E=new Date().getTime()+".ai.json",C=s.join(h._tempDir,E);u.info(p.TAG,"saving data to disk at: "+C),o.writeFile(C,h._stringify(m),{mode:384},function(S){return h._onErrorHelper(S)})})})},p.prototype._storeToDiskSync=function(m){try{u.info(p.TAG,"Checking existence of data storage directory: "+this._tempDir),o.existsSync(this._tempDir)||o.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var h=this._getShallowDirectorySizeSync(this._tempDir);if(h>this._maxBytesOnDisk){u.info(p.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+h);return}var g=new Date().getTime()+".ai.json",v=s.join(this._tempDir,g);u.info(p.TAG,"saving data before crash to disk at: "+v),o.writeFileSync(v,m,{mode:384})}catch(w){u.warn(p.TAG,"Error while saving data to disk: "+(w&&w.message)),this._onErrorHelper(w)}},p.prototype._sendFirstFileOnDisk=function(){var m=this;o.exists(this._tempDir,function(h){h&&o.readdir(m._tempDir,function(g,v){if(g)m._onErrorHelper(g);else if(v=v.filter(function(C){return s.basename(C).indexOf(".ai.json")>-1}),v.length>0){var w=v[0],E=s.join(m._tempDir,w);o.readFile(E,function(C,S){C?m._onErrorHelper(C):o.unlink(E,function(x){if(x)m._onErrorHelper(x);else try{var I=JSON.parse(S.toString());m.send(I)}catch(P){u.warn("Failed to read persisted file",P)}})})}})})},p.prototype._onErrorHelper=function(m){typeof this._onError=="function"&&this._onError(m)},p.prototype._stringify=function(m){try{return JSON.stringify(m)}catch(h){u.warn("Failed to serialize payload",h,m)}},p.prototype._fileCleanupTask=function(){var m=this;o.exists(this._tempDir,function(h){h&&o.readdir(m._tempDir,function(g,v){g?m._onErrorHelper(g):(v=v.filter(function(w){return s.basename(w).indexOf(".ai.json")>-1}),v.length>0&&v.forEach(function(w){var E=new Date(parseInt(w.split(".ai.json")[0])),C=new Date(+new Date-p.FILE_RETEMPTION_PERIOD)>E;if(C){var S=s.join(m._tempDir,w);o.unlink(S,function(x){x&&m._onErrorHelper(x)})}}))})})},p.TAG="Sender",p.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",p.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",p.ACLED_DIRECTORIES={},p.ACL_IDENTITY=null,p.WAIT_BETWEEN_RESEND=60*1e3,p.MAX_BYTES_ON_DISK=50*1024*1024,p.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,p.CLEANUP_TIMEOUT=60*60*1e3,p.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,p.TEMPDIR_PREFIX="appInsights-node",p.OS_PROVIDES_FILE_PROTECTION=!1,p.USE_ICACLS=i.type()==="Windows_NT",p}();t.exports=f}),UQ=L((e,t)=>{"use strict";var r=bn(),n=Ro(),o=Fd(),i=function(){function a(){}return a.createEnvelope=function(c,u,l,d,f){var p=null;switch(u){case r.TelemetryType.Trace:p=a.createTraceData(c);break;case r.TelemetryType.Dependency:p=a.createDependencyData(c);break;case r.TelemetryType.Event:p=a.createEventData(c);break;case r.TelemetryType.Exception:p=a.createExceptionData(c);break;case r.TelemetryType.Request:p=a.createRequestData(c);break;case r.TelemetryType.Metric:p=a.createMetricData(c);break;case r.TelemetryType.Availability:p=a.createAvailabilityData(c);break;case r.TelemetryType.PageView:p=a.createPageViewData(c);break}if(l&&r.domainSupportsProperties(p.baseData)){if(p&&p.baseData)if(!p.baseData.properties)p.baseData.properties=l;else for(var m in l)p.baseData.properties[m]||(p.baseData.properties[m]=l[m]);p.baseData.properties=n.validateStringMap(p.baseData.properties)}var h=f&&f.instrumentationKey||"",g=new r.Envelope;return g.data=p,g.iKey=h,g.name="Microsoft.ApplicationInsights."+h.replace(/-/g,"")+"."+p.baseType.substr(0,p.baseType.length-4),g.tags=this.getTags(d,c.tagOverrides),g.time=new Date().toISOString(),g.ver=1,g.sampleRate=f?f.samplingPercentage:100,u===r.TelemetryType.Metric&&(g.sampleRate=100),g},a.createTraceData=function(c){var u=new r.MessageData;u.message=c.message,u.properties=c.properties,isNaN(c.severity)?u.severityLevel=r.SeverityLevel.Information:u.severityLevel=c.severity;var l=new r.Data;return l.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Trace),l.baseData=u,l},a.createDependencyData=function(c){var u=new r.RemoteDependencyData;typeof c.name=="string"&&(u.name=c.name.length>1024?c.name.slice(0,1021)+"...":c.name),u.data=c.data,u.target=c.target,u.duration=n.msToTimeSpan(c.duration),u.success=c.success,u.type=c.dependencyTypeName,u.properties=c.properties,u.resultCode=c.resultCode?c.resultCode+"":"",c.id?u.id=c.id:u.id=n.w3cTraceId();var l=new r.Data;return l.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Dependency),l.baseData=u,l},a.createEventData=function(c){var u=new r.EventData;u.name=c.name,u.properties=c.properties,u.measurements=c.measurements;var l=new r.Data;return l.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Event),l.baseData=u,l},a.createExceptionData=function(c){var u=new r.ExceptionData;u.properties=c.properties,isNaN(c.severity)?u.severityLevel=r.SeverityLevel.Error:u.severityLevel=c.severity,u.measurements=c.measurements,u.exceptions=[];var l=c.exception.stack,d=new r.ExceptionDetails;d.message=c.exception.message,d.typeName=c.exception.name,d.parsedStack=this.parseStack(l),d.hasFullStack=n.isArray(d.parsedStack)&&d.parsedStack.length>0,u.exceptions.push(d);var f=new r.Data;return f.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Exception),f.baseData=u,f},a.createRequestData=function(c){var u=new r.RequestData;c.id?u.id=c.id:u.id=n.w3cTraceId(),u.name=c.name,u.url=c.url,u.source=c.source,u.duration=n.msToTimeSpan(c.duration),u.responseCode=c.resultCode?c.resultCode+"":"",u.success=c.success,u.properties=c.properties;var l=new r.Data;return l.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Request),l.baseData=u,l},a.createMetricData=function(c){var u=new r.MetricData;u.metrics=[];var l=new r.DataPoint;l.count=isNaN(c.count)?1:c.count,l.kind=r.DataPointType.Aggregation,l.max=isNaN(c.max)?c.value:c.max,l.min=isNaN(c.min)?c.value:c.min,l.name=c.name,l.stdDev=isNaN(c.stdDev)?0:c.stdDev,l.value=c.value,u.metrics.push(l),u.properties=c.properties;var d=new r.Data;return d.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Metric),d.baseData=u,d},a.createAvailabilityData=function(c){var u=new r.AvailabilityData;c.id?u.id=c.id:u.id=n.w3cTraceId(),u.name=c.name,u.duration=n.msToTimeSpan(c.duration),u.success=c.success,u.runLocation=c.runLocation,u.message=c.message,u.measurements=c.measurements,u.properties=c.properties;var l=new r.Data;return l.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Availability),l.baseData=u,l},a.createPageViewData=function(c){var u=new r.PageViewData;u.name=c.name,u.duration=n.msToTimeSpan(c.duration),u.url=c.url,u.measurements=c.measurements,u.properties=c.properties;var l=new r.Data;return l.baseType=r.telemetryTypeToBaseType(r.TelemetryType.PageView),l.baseData=u,l},a.getTags=function(c,u){var l=o.CorrelationContextManager.getCurrentContext(),d={};if(c&&c.tags)for(var f in c.tags)d[f]=c.tags[f];if(u)for(var f in u)d[f]=u[f];return l&&(d[c.keys.operationId]=d[c.keys.operationId]||l.operation.id,d[c.keys.operationName]=d[c.keys.operationName]||l.operation.name,d[c.keys.operationParentId]=d[c.keys.operationParentId]||l.operation.parentId),d},a.parseStack=function(c){var u=void 0;if(typeof c=="string"){var l=c.split(`
`);u=[];for(var d=0,f=0,p=0;p<=l.length;p++){var m=l[p];if(s.regex.test(m)){var h=new s(l[p],d++);f+=h.sizeInBytes,u.push(h)}}var g=32*1024;if(f>g)for(var v=0,w=u.length-1,E=0,C=v,S=w;v<w;){var x=u[v].sizeInBytes,I=u[w].sizeInBytes;if(E+=x+I,E>g){var P=S-C+1;u.splice(C,P);break}C=v,S=w,v++,w--}}return u},a}(),s=function(){function a(c,u){this.sizeInBytes=0,this.level=u,this.method="<no_method>",this.assembly=n.trim(c);var l=c.match(a.regex);l&&l.length>=5&&(this.method=n.trim(l[2])||this.method,this.fileName=n.trim(l[4])||"<no_filename>",this.line=parseInt(l[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=a.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return a.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,a.baseSize=58,a}();t.exports=i}),jQ=L((e,t)=>{"use strict";var r=require("url"),n=hU(),o=uw(),i=bn(),s=AQ(),a=MQ(),c=Fd(),u=$Q(),l=Ro(),d=Rr(),f=UQ(),p=function(){function m(h){this._telemetryProcessors=[],this._enableAzureProperties=!1;var g=new n(h);this.config=g,this.context=new o,this.commonProperties={};var v=new u(this.config);this.channel=new s(function(){return g.disableAppInsights},function(){return g.maxBatchSize},function(){return g.maxBatchIntervalMs},v)}return m.prototype.trackAvailability=function(h){this.track(h,i.TelemetryType.Availability)},m.prototype.trackPageView=function(h){this.track(h,i.TelemetryType.PageView)},m.prototype.trackTrace=function(h){this.track(h,i.TelemetryType.Trace)},m.prototype.trackMetric=function(h){this.track(h,i.TelemetryType.Metric)},m.prototype.trackException=function(h){h&&h.exception&&!l.isError(h.exception)&&(h.exception=new Error(h.exception.toString())),this.track(h,i.TelemetryType.Exception)},m.prototype.trackEvent=function(h){this.track(h,i.TelemetryType.Event)},m.prototype.trackRequest=function(h){this.track(h,i.TelemetryType.Request)},m.prototype.trackDependency=function(h){h&&!h.target&&h.data&&(h.target=r.parse(h.data).host),this.track(h,i.TelemetryType.Dependency)},m.prototype.flush=function(h){this.channel.triggerSend(h?!!h.isAppCrashing:!1,h?h.callback:void 0)},m.prototype.track=function(h,g){if(h&&i.telemetryTypeToBaseType(g)){var v=f.createEnvelope(h,g,this.commonProperties,this.context,this.config);h.time&&(v.time=h.time.toISOString()),this._enableAzureProperties&&a.azureRoleEnvironmentTelemetryProcessor(v,this.context);var w=this.runTelemetryProcessors(v,h.contextObjects);w=w&&a.samplingTelemetryProcessor(v,{correlationContext:c.CorrelationContextManager.getCurrentContext()}),a.preAggregatedMetricsTelemetryProcessor(v,this.context),w&&(a.performanceMetricsTelemetryProcessor(v,this.quickPulseClient),this.channel.send(v))}else d.warn("track() requires telemetry object and telemetryType to be specified.")},m.prototype.setAutoPopulateAzureProperties=function(h){this._enableAzureProperties=h},m.prototype.addTelemetryProcessor=function(h){this._telemetryProcessors.push(h)},m.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},m.prototype.runTelemetryProcessors=function(h,g){var v=!0,w=this._telemetryProcessors.length;if(w===0)return v;g=g||{},g.correlationContext=c.CorrelationContextManager.getCurrentContext();for(var E=0;E<w;++E)try{var C=this._telemetryProcessors[E];if(C&&C.apply(null,[h,g])===!1){v=!1;break}}catch(S){v=!0,d.warn("One of telemetry processors failed, telemetry item will be sent.",S,h)}return v&&(h&&h.tags&&(h.tags=l.validateStringMap(h.tags)),h&&h.data&&h.data.baseData&&h.data.baseData.properties&&(h.data.baseData.properties=l.validateStringMap(h.data.baseData.properties))),v},m}();t.exports=p}),HQ=L((e,t)=>{"use strict";var r=e&&e.__extends||function(){var c=function(u,l){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(d[p]=f[p])},c(u,l)};return function(u,l){c(u,l);function d(){this.constructor=u}u.prototype=l===null?Object.create(l):(d.prototype=l.prototype,new d)}}(),n=jQ(),o=mU(),i=Pm(),s=Rr(),a=function(c){r(u,c);function u(){return c!==null&&c.apply(this,arguments)||this}return u.prototype.trackNodeHttpRequestSync=function(l){l&&l.request&&l.response&&l.duration?o.trackRequestSync(this,l):s.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},u.prototype.trackNodeHttpRequest=function(l){(l.duration||l.error)&&s.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),l&&l.request&&l.response?o.trackRequest(this,l):s.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},u.prototype.trackNodeHttpDependency=function(l){l&&l.request?i.trackRequest(this,l):s.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},u}(n);t.exports=a}),qQ=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),BQ=L(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.Configuration=e.wrapWithCorrelationContext=e.startOperation=e.getCorrelationContext=e.start=e.setup=e.liveMetricsClient=e.defaultClient=e.DistributedTracingModes=void 0;var t=Fd(),r=mQ(),n=hQ(),o=v0(),i=pU(),s=xQ(),a=Pm(),c=mU(),u=Ld(),l=Rr(),d=DQ(),f=kQ();e.TelemetryClient=HQ(),e.Contracts=bn(),e.azureFunctionsTypes=qQ();var p;(function(Se){Se[Se.AI=0]="AI",Se[Se.AI_AND_W3C=1]="AI_AND_W3C"})(p=e.DistributedTracingModes||(e.DistributedTracingModes={}));var m=!0,h=!1,g=!0,v=!0,w=!0,E=!1,C=!0,S=!0,x=!0,I=!0,P,T=!1,D=!0,R,k=void 0,U=void 0,W,j,$,O,H,Q,M,Z,re=!1,K;function fe(Se){return e.defaultClient?l.info("The default client is already setup"):(e.defaultClient=new e.TelemetryClient(Se),W=new r(e.defaultClient),j=new n(e.defaultClient),$=new o(e.defaultClient),O=new i(e.defaultClient),H=new s(e.defaultClient),M=new c(e.defaultClient),Z=new a(e.defaultClient),Q||(Q=new f.AutoCollectNativePerformance(e.defaultClient))),e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(x,k,U),Je}e.setup=fe;function _e(){return e.defaultClient?(re=!0,W.enable(m,h),j.enable(g),$.enable(v),O.enable(w),H.enable(E,e.defaultClient.config),Q.enable(D,R),M.useAutoCorrelation(I,P),M.enable(C),Z.enable(S),e.liveMetricsClient&&T&&e.liveMetricsClient.enable(T)):l.warn("Start cannot be called before setup"),Je}e.start=_e;function ye(){return I?t.CorrelationContextManager.getCurrentContext():null}e.getCorrelationContext=ye;function Ee(Se,Ie){return t.CorrelationContextManager.startOperation(Se,Ie)}e.startOperation=Ee;function Te(Se,Ie){return t.CorrelationContextManager.wrapCallback(Se,Ie)}e.wrapWithCorrelationContext=Te;var Je=function(){function Se(){}return Se.setDistributedTracingMode=function(Ie){return u.w3cEnabled=Ie===p.AI_AND_W3C,Se},Se.setAutoCollectConsole=function(Ie,Fe){return Fe===void 0&&(Fe=!1),m=Ie,h=Fe,re&&W.enable(Ie,Fe),Se},Se.setAutoCollectExceptions=function(Ie){return g=Ie,re&&j.enable(Ie),Se},Se.setAutoCollectPerformance=function(Ie,Fe){Fe===void 0&&(Fe=!0),v=Ie;var et=f.AutoCollectNativePerformance.parseEnabled(Fe);return D=et.isEnabled,R=et.disabledMetrics,re&&($.enable(Ie),Q.enable(et.isEnabled,et.disabledMetrics)),Se},Se.setAutoCollectPreAggregatedMetrics=function(Ie){return w=Ie,re&&O.enable(Ie),Se},Se.setAutoCollectHeartbeat=function(Ie){return E=Ie,re&&H.enable(Ie,e.defaultClient.config),Se},Se.setAutoCollectRequests=function(Ie){return C=Ie,re&&M.enable(Ie),Se},Se.setAutoCollectDependencies=function(Ie){return S=Ie,re&&Z.enable(Ie),Se},Se.setAutoDependencyCorrelation=function(Ie,Fe){return I=Ie,P=Fe,re&&M.useAutoCorrelation(Ie,Fe),Se},Se.setUseDiskRetryCaching=function(Ie,Fe,et){return x=Ie,k=Fe,U=et,e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(Ie,Fe,et),Se},Se.setInternalLogging=function(Ie,Fe){return Ie===void 0&&(Ie=!1),Fe===void 0&&(Fe=!0),l.enableDebug=Ie,l.disableWarnings=!Fe,Se},Se.setSendLiveMetrics=function(Ie){return Ie===void 0&&(Ie=!1),e.defaultClient?(!e.liveMetricsClient&&Ie?(e.liveMetricsClient=new d(e.defaultClient.config,null),K=new o(e.liveMetricsClient,1e3,!0),e.liveMetricsClient.addCollector(K),e.defaultClient.quickPulseClient=e.liveMetricsClient):e.liveMetricsClient&&e.liveMetricsClient.enable(Ie),T=Ie,Se):(l.warn("Live metrics client cannot be setup without the default client"),Se)},Se.start=_e,Se}();e.Configuration=Je;function Ge(){u.w3cEnabled=!0,e.defaultClient=null,re=!1,W&&W.dispose(),j&&j.dispose(),$&&$.dispose(),O&&O.dispose(),H&&H.dispose(),Q&&Q.dispose(),M&&M.dispose(),Z&&Z.dispose(),e.liveMetricsClient&&(e.liveMetricsClient.enable(!1),T=!1,e.liveMetricsClient=void 0)}e.dispose=Ge}),gU={};C8(gU,{default:()=>JQ});vU.exports=_8(gU);var s0=sw(require("os")),Aa=sw(require("vscode")),VQ=sw(require("https")),fi=class{constructor(e){this.vscodeAPI=e}getTelemetryLevel(){let e="telemetry",t="enableTelemetry";try{let r=this.vscodeAPI.env.telemetryConfiguration;return r.isUsageEnabled&&r.isErrorsEnabled&&r.isCrashEnabled?"on":r.isErrorsEnabled&&r.isCrashEnabled?"error":"off"}catch{return this.vscodeAPI.env.isTelemetryEnabled!==void 0?this.vscodeAPI.env.isTelemetryEnabled?"on":"off":this.vscodeAPI.workspace.getConfiguration(e).get(t)?"on":"off"}}static applyReplacements(e,t){for(let r of Object.keys(e))for(let n of t)n.lookup.test(r)&&(n.replacementString!==void 0?e[r]=n.replacementString:delete e[r])}static shouldUseOneDataSystemSDK(e){return e.length===74&&e[32]==="-"&&e[41]==="-"&&e[46]==="-"&&e[51]==="-"&&e[56]==="-"&&e[69]==="-"}static getInstance(e){return fi._instance||(fi._instance=new fi(e)),fi._instance}},WQ=class{constructor(e,t,r,n,o,i){this.extensionId=e,this.extensionVersion=t,this.telemetryAppender=r,this.osShim=n,this.vscodeAPI=o,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!i,this.updateUserOptStatus(),o.env.onDidChangeTelemetryEnabled!==void 0?(this.disposables.push(o.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus())),this.disposables.push(o.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))):this.disposables.push(o.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))}updateUserOptStatus(){let e=fi.getInstance(this.vscodeAPI).getTelemetryLevel();this.userOptIn=e==="on",this.errorOptIn=e==="error"||this.userOptIn,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(e){if(!e)return"none";let t="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach(r=>{e.indexOf(`${r}`)===0&&(t=r)}),t}get extension(){return this._extension===void 0&&(this._extension=this.vscodeAPI.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(e,t){if(e===null||typeof e!="object"||typeof t!="function")return e;let r={};for(let n in e)r[n]=t(n,e[n]);return r}shouldSendErrorTelemetry(){return this.errorOptIn===!1?!1:this.firstParty?!(this.vscodeAPI.env.remoteName&&this.cleanRemoteName(this.vscodeAPI.env.remoteName)==="other"):!0}getCommonProperties(){let e={};if(e["common.os"]=this.osShim.platform,e["common.nodeArch"]=this.osShim.architecture,e["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,this.vscodeAPI&&this.vscodeAPI.env){switch(e["common.vscodemachineid"]=this.vscodeAPI.env.machineId,e["common.vscodesessionid"]=this.vscodeAPI.env.sessionId,e["common.vscodeversion"]=this.vscodeAPI.version,e["common.isnewappinstall"]=this.vscodeAPI.env.isNewAppInstall?this.vscodeAPI.env.isNewAppInstall.toString():"false",e["common.product"]=this.vscodeAPI.env.appHost,this.vscodeAPI.env.uiKind){case this.vscodeAPI.UIKind.Web:e["common.uikind"]="web";break;case this.vscodeAPI.UIKind.Desktop:e["common.uikind"]="desktop";break;default:e["common.uikind"]="unknown"}e["common.remotename"]=this.cleanRemoteName(this.vscodeAPI.env.remoteName)}return e}anonymizeFilePaths(e,t){let r;if(e==null)return"";let n=[];this.vscodeAPI.env.appRoot!==""&&n.push(new RegExp(this.vscodeAPI.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&n.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let o=e;if(t){let i=[];for(let u of n)for(;(r=u.exec(e))&&r;)i.push([r.index,u.lastIndex]);let s=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,a=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,c=0;for(o="";(r=a.exec(e))&&r;)r[0]&&!s.test(r[0])&&i.every(([u,l])=>r.index<u||r.index>=l)&&(o+=e.substring(c,r.index)+"<REDACTED: user-file-path>",c=a.lastIndex);c<e.length&&(o+=e.substr(c))}for(let i of n)o=o.replace(i,"");return o}removePropertiesWithPossibleUserInfo(e){if(typeof e!="object")return;let t={};for(let r of Object.keys(e)){let n=e[r];if(!n)continue;let o=/@[a-zA-Z0-9-.]+/,i=/(key|token|sig|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/,s=/xox[pbaors]-[a-zA-Z0-9]+-[a-zA-Z0-9-]+?/;i.test(n.toLowerCase())?t[r]="<REDACTED: secret>":o.test(n)?t[r]="<REDACTED: email>":s.test(n)?t[r]="<REDACTED: token>":t[r]=n}return t}get telemetryLevel(){switch(fi.getInstance(this.vscodeAPI).getTelemetryLevel()){case"on":return"all";case"error":return"error";case"off":return"off"}}internalSendTelemetryEvent(e,t,r,n,o){if((this.userOptIn||o)&&e!==""){if(t=mu(mu({},t),this.getCommonProperties()),n){let i=this.cloneAndChange(t,(s,a)=>this.anonymizeFilePaths(a,this.firstParty));t=this.removePropertiesWithPossibleUserInfo(i)}t=t??{},r=r??{},e=`${this.extensionId}/${e}`,this.telemetryAppender.logEvent(e,{properties:t,measurements:r})}}sendTelemetryEvent(e,t,r){this.internalSendTelemetryEvent(e,t,r,!0,!1)}sendRawTelemetryEvent(e,t,r){this.internalSendTelemetryEvent(e,t,r,!1,!1)}sendDangerousTelemetryEvent(e,t,r,n=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryEvent(e,t,r,n,!0)}internalSendTelemetryErrorEvent(e,t,r,n,o){if((this.shouldSendErrorTelemetry()||o)&&e!==""){if(t=mu(mu({},t),this.getCommonProperties()),n){let i=this.cloneAndChange(t,(s,a)=>this.anonymizeFilePaths(a,this.firstParty));t=this.removePropertiesWithPossibleUserInfo(i)}t=t??{},r=r??{},e=`${this.extensionId}/${e}`,this.telemetryAppender.logEvent(e,{properties:t,measurements:r})}}sendTelemetryErrorEvent(e,t,r){this.internalSendTelemetryErrorEvent(e,t,r,!0,!1)}sendDangerousTelemetryErrorEvent(e,t,r,n=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryErrorEvent(e,t,r,n,!0)}internalSendTelemetryException(e,t,r,n,o){if((this.shouldSendErrorTelemetry()||o)&&e){if(t=mu(mu({},t),this.getCommonProperties()),n){let i=this.cloneAndChange(t,(s,a)=>this.anonymizeFilePaths(a,this.firstParty));e.stack&&(e.stack=this.anonymizeFilePaths(e.stack,this.firstParty)),t=this.removePropertiesWithPossibleUserInfo(i)}t=t??{},r=r??{},this.telemetryAppender.logException(e,{properties:t,measurements:r})}}sendTelemetryException(e,t,r){this.internalSendTelemetryException(e,t,r,!0,!1)}sendDangerousTelemetryException(e,t,r,n=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryException(e,t,r,n,!0)}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map(e=>e.dispose()))}},GQ=class{constructor(e,t){this._instantiationStatus=0,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=t,this._key=e}logEvent(e,t){if(!this._telemetryClient){this._instantiationStatus!==2&&this._eventQueue.push({eventName:e,data:t});return}this._telemetryClient.logEvent(e,t)}logException(e,t){if(!this._telemetryClient){this._instantiationStatus!==2&&this._exceptionQueue.push({exception:e,data:t});return}this._telemetryClient.logException(e,t)}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:t})=>this.logEvent(e,t)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:t})=>this.logException(e,t)),this._exceptionQueue=[]}instantiateAppender(){this._instantiationStatus===0&&(this._instantiationStatus=1,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=2,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=2}))}},zQ=async(e,t,r)=>{let n=await Promise.resolve().then(()=>(uu(),UM)),o=await Promise.resolve().then(()=>(b$(),S$)),i=new n.AppInsightsCore,s=new o.PostChannel,a={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[s]]};if(r){a.extensionConfig={};let u={alwaysUseXhrOverride:!0,httpXHROverride:r};a.extensionConfig[s.identifier]=u}let c=t.workspace.getConfiguration("telemetry").get("internalTesting");return i.initialize(a,[]),i.addTelemetryInitializer(u=>{!c||(u.ext=u.ext??{},u.ext.utc=u.ext.utc??{},u.ext.utc.flags=8462029)}),i},YQ=async(e,t,r)=>{let n=await zQ(e,t,r);return{logEvent:(o,i)=>{try{n==null||n.track({name:o,baseData:{name:o,properties:i==null?void 0:i.properties,measurements:i==null?void 0:i.measurements}})}catch(s){throw new Error(`Failed to log event to app insights!
`+s.message)}},logException:(o,i)=>{throw new Error("1DS SDK does not support logging exceptions, please use logEvent for exception tracking")},flush:async()=>{try{n==null||n.unload()}catch(o){throw new Error(`Failed to flush app insights!
`+o.message)}}}},KQ=async(e,t)=>{let r;try{process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";let n=await Promise.resolve().then(()=>sw(BQ()));n.defaultClient?(r=new n.TelemetryClient(e),r.channel.setUseDiskRetryCaching(!0)):(n.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setAutoCollectHeartbeat(!1).setUseDiskRetryCaching(!0).start(),r=n.defaultClient),Aa&&Aa.env&&(r.context.tags[r.context.keys.userId]=Aa.env.machineId,r.context.tags[r.context.keys.sessionId]=Aa.env.sessionId,r.context.tags[r.context.keys.cloudRole]=Aa.env.appName,r.context.tags[r.context.keys.cloudRoleInstance]=Aa.env.appName),e&&e.indexOf("AIF-")===0&&(r.config.endpointUrl="https://mobile.events.data.microsoft.com/collect/v1")}catch(n){return Promise.reject(`Failed to initialize app insights!
`+n.message)}return t!=null&&t.length&&XQ(r,t),{logEvent:(n,o)=>{try{r==null||r.trackEvent({name:n,properties:o==null?void 0:o.properties,measurements:o==null?void 0:o.measurements})}catch(i){throw new Error(`Failed to log event to app insights!
`+i.message)}},logException:(n,o)=>{try{r==null||r.trackException({exception:n,properties:o==null?void 0:o.properties,measurements:o==null?void 0:o.measurements})}catch(i){throw new Error(`Failed to log exception to app insights!
`+i.message)}},flush:async()=>{try{r==null||r.flush()}catch(n){throw new Error(`Failed to flush app insights!
`+n.message)}}}};function XQ(e,t){e.addTelemetryProcessor(r=>(Array.isArray(r.tags)?r.tags.forEach(n=>fi.applyReplacements(n,t)):r.tags&&fi.applyReplacements(r.tags,t),r.data.baseData&&fi.applyReplacements(r.data.baseData,t),!0))}function QQ(){return{sendPOST:(e,t)=>{let r={method:"POST",headers:E8(mu({},e.headers),{"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)})};try{let n=VQ.request(e.urlString,r,o=>{o.on("data",function(i){t(o.statusCode??200,o.headers,i.toString())}),o.on("error",function(){t(0,{})})});n.write(e.data),n.end()}catch{t(0,{})}}}}var JQ=class extends WQ{constructor(e,t,r,n,o){let i=a=>KQ(a,o);fi.shouldUseOneDataSystemSDK(r)&&(i=a=>YQ(a,Aa,QQ()));let s=new GQ(r,i);r&&(r.indexOf("AIF-")===0||fi.shouldUseOneDataSystemSDK(r))&&(n=!0),super(e,t,s,{release:s0.release(),platform:s0.platform(),architecture:s0.arch()},Aa,n)}}});var y0=B(hu=>{"use strict";Object.defineProperty(hu,"__esModule",{value:!0});var lw=require("vscode"),Md=class{constructor(t,r,n){this.extensionName=t,this.extensionVersion=r,this.targetPopulation=n}static trimVersionSuffix(t){let r=/\-[a-zA-Z0-9]+$/;return t.split(r)[0]}getFilterValue(t){switch(t){case Ps.ApplicationVersion:return Md.trimVersionSuffix(lw.version);case Ps.Build:return lw.env.appName;case Ps.ClientId:return lw.env.machineId;case Ps.ExtensionName:return this.extensionName;case Ps.ExtensionVersion:return Md.trimVersionSuffix(this.extensionVersion);case Ps.Language:return lw.env.language;case Ps.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let t=new Map,r=Object.values(Ps);for(let n of r)t.set(n,this.getFilterValue(n));return t}};hu.VSCodeFilterProvider=Md;var Ps;(function(e){e.Market="X-MSEdge-Market",e.CorpNet="X-FD-Corpnet",e.ApplicationVersion="X-VSCode-AppVersion",e.Build="X-VSCode-Build",e.ClientId="X-MSEdge-ClientId",e.ExtensionName="X-VSCode-ExtensionName",e.ExtensionVersion="X-VSCode-ExtensionVersion",e.Language="X-VSCode-Language",e.TargetPopulation="X-VSCode-TargetPopulation"})(Ps=hu.Filters||(hu.Filters={}));var ZQ;(function(e){e.Team="team",e.Internal="internal",e.Insiders="insider",e.Public="public"})(ZQ=hu.TargetPopulation||(hu.TargetPopulation={}))});var wU=B(E0=>{"use strict";Object.defineProperty(E0,"__esModule",{value:!0});var w0=class{constructor(t){this.telemetry=t,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let t=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,t}};E0.BaseFeatureProvider=w0});var EU=B(_0=>{"use strict";Object.defineProperty(_0,"__esModule",{value:!0});var eJ=wU(),C0=class extends eJ.BaseFeatureProvider{constructor(t,r){super(t),this.telemetry=t,this.filterProviders=r,this.cachedTelemetryEvents=[]}getFilters(){let t=new Map;for(let r of this.filterProviders){let n=r.getFilters();for(let o of n.keys()){let i=n.get(o);t.set(o,i)}}return t}PostEventToTelemetry(t){if(this.cachedTelemetryEvents.includes(t))return;let r=JSON.stringify(t);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",r]])),this.cachedTelemetryEvents.push(t)}};_0.FilteredFeatureProvider=C0});var CU=B($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});var tJ=EU();$d.TASAPI_FETCHERROR_EVENTNAME="call-tas-error";var S0="ErrorType",b0=class extends tJ.FilteredFeatureProvider{constructor(t,r,n){super(r,n),this.httpClient=t,this.telemetry=r,this.filterProviders=n}async fetch(){let t=this.getFilters(),r={};for(let a of t.keys()){let c=t.get(a);r[a]=c}let n;try{n=await this.httpClient.get({headers:r})}catch(a){let c=a,u=new Map;c.response?u.set(S0,"ServerError"):c.request?u.set(S0,"NoResponse"):u.set(S0,"GenericError"),this.telemetry.postEvent($d.TASAPI_FETCHERROR_EVENTNAME,u)}if(!n)throw Error($d.TASAPI_FETCHERROR_EVENTNAME);t.keys.length>0&&this.PostEventToTelemetry(r);let o=n.data,i=o.Configs,s=[];for(let a of i)if(!!a.Parameters)for(let c of Object.keys(a.Parameters)){let u=c+(a.Parameters[c]?"":"cf");s.includes(u)||s.push(u)}return{features:s,assignmentContext:o.AssignmentContext,configs:i}}};$d.TasApiFeatureProvider=b0});var x0=B((Pwe,_U)=>{"use strict";_U.exports=function(t,r){return function(){for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];return t.apply(r,o)}}});var Hr=B((Twe,PU)=>{"use strict";var rJ=x0(),La=Object.prototype.toString;function I0(e){return Array.isArray(e)}function P0(e){return typeof e>"u"}function nJ(e){return e!==null&&!P0(e)&&e.constructor!==null&&!P0(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function SU(e){return La.call(e)==="[object ArrayBuffer]"}function oJ(e){return La.call(e)==="[object FormData]"}function iJ(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&SU(e.buffer),t}function sJ(e){return typeof e=="string"}function aJ(e){return typeof e=="number"}function bU(e){return e!==null&&typeof e=="object"}function dw(e){if(La.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function cJ(e){return La.call(e)==="[object Date]"}function uJ(e){return La.call(e)==="[object File]"}function lJ(e){return La.call(e)==="[object Blob]"}function xU(e){return La.call(e)==="[object Function]"}function dJ(e){return bU(e)&&xU(e.pipe)}function fJ(e){return La.call(e)==="[object URLSearchParams]"}function pJ(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function mJ(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function D0(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),I0(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function T0(){var e={};function t(o,i){dw(e[i])&&dw(o)?e[i]=T0(e[i],o):dw(o)?e[i]=T0({},o):I0(o)?e[i]=o.slice():e[i]=o}for(var r=0,n=arguments.length;r<n;r++)D0(arguments[r],t);return e}function hJ(e,t,r){return D0(t,function(o,i){r&&typeof o=="function"?e[i]=rJ(o,r):e[i]=o}),e}function gJ(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}PU.exports={isArray:I0,isArrayBuffer:SU,isBuffer:nJ,isFormData:oJ,isArrayBufferView:iJ,isString:sJ,isNumber:aJ,isObject:bU,isPlainObject:dw,isUndefined:P0,isDate:cJ,isFile:uJ,isBlob:lJ,isFunction:xU,isStream:dJ,isURLSearchParams:fJ,isStandardBrowserEnv:mJ,forEach:D0,merge:T0,extend:hJ,trim:pJ,stripBOM:gJ}});var fw=B((Iwe,IU)=>{"use strict";var Ud=Hr();function TU(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}IU.exports=function(t,r,n){if(!r)return t;var o;if(n)o=n(r);else if(Ud.isURLSearchParams(r))o=r.toString();else{var i=[];Ud.forEach(r,function(c,u){c===null||typeof c>"u"||(Ud.isArray(c)?u=u+"[]":c=[c],Ud.forEach(c,function(d){Ud.isDate(d)?d=d.toISOString():Ud.isObject(d)&&(d=JSON.stringify(d)),i.push(TU(u)+"="+TU(d))}))}),o=i.join("&")}if(o){var s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}});var RU=B((Dwe,DU)=>{"use strict";var vJ=Hr();function pw(){this.handlers=[]}pw.prototype.use=function(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};pw.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};pw.prototype.forEach=function(t){vJ.forEach(this.handlers,function(n){n!==null&&t(n)})};DU.exports=pw});var AU=B((Rwe,kU)=>{"use strict";var yJ=Hr();kU.exports=function(t,r){yJ.forEach(t,function(o,i){i!==r&&i.toUpperCase()===r.toUpperCase()&&(t[r]=o,delete t[i])})}});var mw=B((kwe,OU)=>{"use strict";OU.exports=function(t,r,n,o,i){return t.config=r,n&&(t.code=n),t.request=o,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t}});var hw=B((Awe,NU)=>{"use strict";NU.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}});var gw=B((Owe,LU)=>{"use strict";var wJ=mw();LU.exports=function(t,r,n,o,i){var s=new Error(t);return wJ(s,r,n,o,i)}});var R0=B((Nwe,FU)=>{"use strict";var EJ=gw();FU.exports=function(t,r,n){var o=n.config.validateStatus;!n.status||!o||o(n.status)?t(n):r(EJ("Request failed with status code "+n.status,n.config,null,n.request,n))}});var $U=B((Lwe,MU)=>{"use strict";var vw=Hr();MU.exports=vw.isStandardBrowserEnv()?function(){return{write:function(r,n,o,i,s,a){var c=[];c.push(r+"="+encodeURIComponent(n)),vw.isNumber(o)&&c.push("expires="+new Date(o).toGMTString()),vw.isString(i)&&c.push("path="+i),vw.isString(s)&&c.push("domain="+s),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var jU=B((Fwe,UU)=>{"use strict";UU.exports=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}});var qU=B((Mwe,HU)=>{"use strict";HU.exports=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}});var k0=B(($we,BU)=>{"use strict";var CJ=jU(),_J=qU();BU.exports=function(t,r){return t&&!CJ(r)?_J(t,r):r}});var WU=B((Uwe,VU)=>{"use strict";var A0=Hr(),SJ=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];VU.exports=function(t){var r={},n,o,i;return t&&A0.forEach(t.split(`
`),function(a){if(i=a.indexOf(":"),n=A0.trim(a.substr(0,i)).toLowerCase(),o=A0.trim(a.substr(i+1)),n){if(r[n]&&SJ.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([o]):r[n]=r[n]?r[n]+", "+o:o}}),r}});var YU=B((jwe,zU)=>{"use strict";var GU=Hr();zU.exports=GU.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function o(i){var s=i;return t&&(r.setAttribute("href",s),s=r.href),r.setAttribute("href",s),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=o(window.location.href),function(s){var a=GU.isString(s)?o(s):s;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}()});var jd=B((Hwe,KU)=>{"use strict";function O0(e){this.message=e}O0.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};O0.prototype.__CANCEL__=!0;KU.exports=O0});var QU=B((qwe,XU)=>{"use strict";var yw=Hr(),bJ=R0(),xJ=$U(),PJ=fw(),TJ=k0(),IJ=WU(),DJ=YU(),N0=gw(),RJ=hw(),kJ=jd();XU.exports=function(t){return new Promise(function(n,o){var i=t.data,s=t.headers,a=t.responseType,c;function u(){t.cancelToken&&t.cancelToken.unsubscribe(c),t.signal&&t.signal.removeEventListener("abort",c)}yw.isFormData(i)&&delete s["Content-Type"];var l=new XMLHttpRequest;if(t.auth){var d=t.auth.username||"",f=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.Authorization="Basic "+btoa(d+":"+f)}var p=TJ(t.baseURL,t.url);l.open(t.method.toUpperCase(),PJ(p,t.params,t.paramsSerializer),!0),l.timeout=t.timeout;function m(){if(!!l){var g="getAllResponseHeaders"in l?IJ(l.getAllResponseHeaders()):null,v=!a||a==="text"||a==="json"?l.responseText:l.response,w={data:v,status:l.status,statusText:l.statusText,headers:g,config:t,request:l};bJ(function(C){n(C),u()},function(C){o(C),u()},w),l=null}}if("onloadend"in l?l.onloadend=m:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(m)},l.onabort=function(){!l||(o(N0("Request aborted",t,"ECONNABORTED",l)),l=null)},l.onerror=function(){o(N0("Network Error",t,null,l)),l=null},l.ontimeout=function(){var v=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",w=t.transitional||RJ;t.timeoutErrorMessage&&(v=t.timeoutErrorMessage),o(N0(v,t,w.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",l)),l=null},yw.isStandardBrowserEnv()){var h=(t.withCredentials||DJ(p))&&t.xsrfCookieName?xJ.read(t.xsrfCookieName):void 0;h&&(s[t.xsrfHeaderName]=h)}"setRequestHeader"in l&&yw.forEach(s,function(v,w){typeof i>"u"&&w.toLowerCase()==="content-type"?delete s[w]:l.setRequestHeader(w,v)}),yw.isUndefined(t.withCredentials)||(l.withCredentials=!!t.withCredentials),a&&a!=="json"&&(l.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&l.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(c=function(g){!l||(o(!g||g&&g.type?new kJ("canceled"):g),l.abort(),l=null)},t.cancelToken&&t.cancelToken.subscribe(c),t.signal&&(t.signal.aborted?c():t.signal.addEventListener("abort",c))),i||(i=null),l.send(i)})}});var ww=B((Bwe,JU)=>{JU.exports={version:"0.26.1"}});var ij=B((Vwe,oj)=>{"use strict";var Tm=Hr(),ZU=R0(),AJ=k0(),ej=fw(),OJ=require("http"),NJ=require("https"),LJ=ju().http,FJ=ju().https,tj=require("url"),MJ=require("zlib"),$J=ww().version,Hd=gw(),Ew=mw(),UJ=hw(),jJ=jd(),rj=/https:?/;function nj(e,t,r){if(e.hostname=t.host,e.host=t.host,e.port=t.port,e.path=r,t.auth){var n=Buffer.from(t.auth.username+":"+t.auth.password,"utf8").toString("base64");e.headers["Proxy-Authorization"]="Basic "+n}e.beforeRedirect=function(i){i.headers.host=i.host,nj(i,t,i.href)}}oj.exports=function(t){return new Promise(function(n,o){var i;function s(){t.cancelToken&&t.cancelToken.unsubscribe(i),t.signal&&t.signal.removeEventListener("abort",i)}var a=function(K){s(),n(K)},c=!1,u=function(K){s(),c=!0,o(K)},l=t.data,d=t.headers,f={};if(Object.keys(d).forEach(function(K){f[K.toLowerCase()]=K}),"user-agent"in f?d[f["user-agent"]]||delete d[f["user-agent"]]:d["User-Agent"]="axios/"+$J,l&&!Tm.isStream(l)){if(!Buffer.isBuffer(l))if(Tm.isArrayBuffer(l))l=Buffer.from(new Uint8Array(l));else if(Tm.isString(l))l=Buffer.from(l,"utf-8");else return u(Hd("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",t));if(t.maxBodyLength>-1&&l.length>t.maxBodyLength)return u(Hd("Request body larger than maxBodyLength limit",t));f["content-length"]||(d["Content-Length"]=l.length)}var p=void 0;if(t.auth){var m=t.auth.username||"",h=t.auth.password||"";p=m+":"+h}var g=AJ(t.baseURL,t.url),v=tj.parse(g),w=v.protocol||"http:";if(!p&&v.auth){var E=v.auth.split(":"),C=E[0]||"",S=E[1]||"";p=C+":"+S}p&&f.authorization&&delete d[f.authorization];var x=rj.test(w),I=x?t.httpsAgent:t.httpAgent;try{ej(v.path,t.params,t.paramsSerializer).replace(/^\?/,"")}catch(re){var P=new Error(re.message);P.config=t,P.url=t.url,P.exists=!0,u(P)}var T={path:ej(v.path,t.params,t.paramsSerializer).replace(/^\?/,""),method:t.method.toUpperCase(),headers:d,agent:I,agents:{http:t.httpAgent,https:t.httpsAgent},auth:p};t.socketPath?T.socketPath=t.socketPath:(T.hostname=v.hostname,T.port=v.port);var D=t.proxy;if(!D&&D!==!1){var R=w.slice(0,-1)+"_proxy",k=process.env[R]||process.env[R.toUpperCase()];if(k){var U=tj.parse(k),W=process.env.no_proxy||process.env.NO_PROXY,j=!0;if(W){var $=W.split(",").map(function(K){return K.trim()});j=!$.some(function(K){return K?K==="*"||K[0]==="."&&v.hostname.substr(v.hostname.length-K.length)===K?!0:v.hostname===K:!1})}if(j&&(D={host:U.hostname,port:U.port,protocol:U.protocol},U.auth)){var O=U.auth.split(":");D.auth={username:O[0],password:O[1]}}}}D&&(T.headers.host=v.hostname+(v.port?":"+v.port:""),nj(T,D,w+"//"+v.hostname+(v.port?":"+v.port:"")+T.path));var H,Q=x&&(D?rj.test(D.protocol):!0);t.transport?H=t.transport:t.maxRedirects===0?H=Q?NJ:OJ:(t.maxRedirects&&(T.maxRedirects=t.maxRedirects),H=Q?FJ:LJ),t.maxBodyLength>-1&&(T.maxBodyLength=t.maxBodyLength),t.insecureHTTPParser&&(T.insecureHTTPParser=t.insecureHTTPParser);var M=H.request(T,function(K){if(!M.aborted){var fe=K,_e=K.req||M;if(K.statusCode!==204&&_e.method!=="HEAD"&&t.decompress!==!1)switch(K.headers["content-encoding"]){case"gzip":case"compress":case"deflate":fe=fe.pipe(MJ.createUnzip()),delete K.headers["content-encoding"];break}var ye={status:K.statusCode,statusText:K.statusMessage,headers:K.headers,config:t,request:_e};if(t.responseType==="stream")ye.data=fe,ZU(a,u,ye);else{var Ee=[],Te=0;fe.on("data",function(Ge){Ee.push(Ge),Te+=Ge.length,t.maxContentLength>-1&&Te>t.maxContentLength&&(c=!0,fe.destroy(),u(Hd("maxContentLength size of "+t.maxContentLength+" exceeded",t,null,_e)))}),fe.on("aborted",function(){c||(fe.destroy(),u(Hd("error request aborted",t,"ERR_REQUEST_ABORTED",_e)))}),fe.on("error",function(Ge){M.aborted||u(Ew(Ge,t,null,_e))}),fe.on("end",function(){try{var Ge=Ee.length===1?Ee[0]:Buffer.concat(Ee);t.responseType!=="arraybuffer"&&(Ge=Ge.toString(t.responseEncoding),(!t.responseEncoding||t.responseEncoding==="utf8")&&(Ge=Tm.stripBOM(Ge))),ye.data=Ge}catch(Se){u(Ew(Se,t,Se.code,ye.request,ye))}ZU(a,u,ye)})}}});if(M.on("error",function(K){M.aborted&&K.code!=="ERR_FR_TOO_MANY_REDIRECTS"||u(Ew(K,t,null,M))}),M.on("socket",function(K){K.setKeepAlive(!0,1e3*60)}),t.timeout){var Z=parseInt(t.timeout,10);if(isNaN(Z)){u(Hd("error trying to parse `config.timeout` to int",t,"ERR_PARSE_TIMEOUT",M));return}M.setTimeout(Z,function(){M.abort();var K="";t.timeoutErrorMessage?K=t.timeoutErrorMessage:K="timeout of "+t.timeout+"ms exceeded";var fe=t.transitional||UJ;u(Hd(K,t,fe.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",M))})}(t.cancelToken||t.signal)&&(i=function(re){M.aborted||(M.abort(),u(!re||re&&re.type?new jJ("canceled"):re))},t.cancelToken&&t.cancelToken.subscribe(i),t.signal&&(t.signal.aborted?i():t.signal.addEventListener("abort",i))),Tm.isStream(l)?l.on("error",function(K){u(Ew(K,t,null,M))}).pipe(M):M.end(l)})}});var _w=B((Wwe,cj)=>{"use strict";var kr=Hr(),sj=AU(),HJ=mw(),qJ=hw(),BJ={"Content-Type":"application/x-www-form-urlencoded"};function aj(e,t){!kr.isUndefined(e)&&kr.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function VJ(){var e;return typeof XMLHttpRequest<"u"?e=QU():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(e=ij()),e}function WJ(e,t,r){if(kr.isString(e))try{return(t||JSON.parse)(e),kr.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}var Cw={transitional:qJ,adapter:VJ(),transformRequest:[function(t,r){return sj(r,"Accept"),sj(r,"Content-Type"),kr.isFormData(t)||kr.isArrayBuffer(t)||kr.isBuffer(t)||kr.isStream(t)||kr.isFile(t)||kr.isBlob(t)?t:kr.isArrayBufferView(t)?t.buffer:kr.isURLSearchParams(t)?(aj(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):kr.isObject(t)||r&&r["Content-Type"]==="application/json"?(aj(r,"application/json"),WJ(t)):t}],transformResponse:[function(t){var r=this.transitional||Cw.transitional,n=r&&r.silentJSONParsing,o=r&&r.forcedJSONParsing,i=!n&&this.responseType==="json";if(i||o&&kr.isString(t)&&t.length)try{return JSON.parse(t)}catch(s){if(i)throw s.name==="SyntaxError"?HJ(s,this,"E_JSON_PARSE"):s}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};kr.forEach(["delete","get","head"],function(t){Cw.headers[t]={}});kr.forEach(["post","put","patch"],function(t){Cw.headers[t]=kr.merge(BJ)});cj.exports=Cw});var lj=B((Gwe,uj)=>{"use strict";var GJ=Hr(),zJ=_w();uj.exports=function(t,r,n){var o=this||zJ;return GJ.forEach(n,function(s){t=s.call(o,t,r)}),t}});var L0=B((zwe,dj)=>{"use strict";dj.exports=function(t){return!!(t&&t.__CANCEL__)}});var mj=B((Ywe,pj)=>{"use strict";var fj=Hr(),F0=lj(),YJ=L0(),KJ=_w(),XJ=jd();function M0(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new XJ("canceled")}pj.exports=function(t){M0(t),t.headers=t.headers||{},t.data=F0.call(t,t.data,t.headers,t.transformRequest),t.headers=fj.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),fj.forEach(["delete","get","head","post","put","patch","common"],function(o){delete t.headers[o]});var r=t.adapter||KJ.adapter;return r(t).then(function(o){return M0(t),o.data=F0.call(t,o.data,o.headers,t.transformResponse),o},function(o){return YJ(o)||(M0(t),o&&o.response&&(o.response.data=F0.call(t,o.response.data,o.response.headers,t.transformResponse))),Promise.reject(o)})}});var $0=B((Kwe,hj)=>{"use strict";var Qn=Hr();hj.exports=function(t,r){r=r||{};var n={};function o(l,d){return Qn.isPlainObject(l)&&Qn.isPlainObject(d)?Qn.merge(l,d):Qn.isPlainObject(d)?Qn.merge({},d):Qn.isArray(d)?d.slice():d}function i(l){if(Qn.isUndefined(r[l])){if(!Qn.isUndefined(t[l]))return o(void 0,t[l])}else return o(t[l],r[l])}function s(l){if(!Qn.isUndefined(r[l]))return o(void 0,r[l])}function a(l){if(Qn.isUndefined(r[l])){if(!Qn.isUndefined(t[l]))return o(void 0,t[l])}else return o(void 0,r[l])}function c(l){if(l in r)return o(t[l],r[l]);if(l in t)return o(void 0,t[l])}var u={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return Qn.forEach(Object.keys(t).concat(Object.keys(r)),function(d){var f=u[d]||i,p=f(d);Qn.isUndefined(p)&&f!==c||(n[d]=p)}),n}});var yj=B((Xwe,vj)=>{"use strict";var QJ=ww().version,U0={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){U0[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var gj={};U0.transitional=function(t,r,n){function o(i,s){return"[Axios v"+QJ+"] Transitional option '"+i+"'"+s+(n?". "+n:"")}return function(i,s,a){if(t===!1)throw new Error(o(s," has been removed"+(r?" in "+r:"")));return r&&!gj[s]&&(gj[s]=!0,console.warn(o(s," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,s,a):!0}};function JJ(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var n=Object.keys(e),o=n.length;o-- >0;){var i=n[o],s=t[i];if(s){var a=e[i],c=a===void 0||s(a,i,e);if(c!==!0)throw new TypeError("option "+i+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+i)}}vj.exports={assertOptions:JJ,validators:U0}});var bj=B((Qwe,Sj)=>{"use strict";var Cj=Hr(),ZJ=fw(),wj=RU(),Ej=mj(),Sw=$0(),_j=yj(),qd=_j.validators;function Im(e){this.defaults=e,this.interceptors={request:new wj,response:new wj}}Im.prototype.request=function(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Sw(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&_j.assertOptions(n,{silentJSONParsing:qd.transitional(qd.boolean),forcedJSONParsing:qd.transitional(qd.boolean),clarifyTimeoutError:qd.transitional(qd.boolean)},!1);var o=[],i=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(r)===!1||(i=i&&p.synchronous,o.unshift(p.fulfilled,p.rejected))});var s=[];this.interceptors.response.forEach(function(p){s.push(p.fulfilled,p.rejected)});var a;if(!i){var c=[Ej,void 0];for(Array.prototype.unshift.apply(c,o),c=c.concat(s),a=Promise.resolve(r);c.length;)a=a.then(c.shift(),c.shift());return a}for(var u=r;o.length;){var l=o.shift(),d=o.shift();try{u=l(u)}catch(f){d(f);break}}try{a=Ej(u)}catch(f){return Promise.reject(f)}for(;s.length;)a=a.then(s.shift(),s.shift());return a};Im.prototype.getUri=function(t){return t=Sw(this.defaults,t),ZJ(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};Cj.forEach(["delete","get","head","options"],function(t){Im.prototype[t]=function(r,n){return this.request(Sw(n||{},{method:t,url:r,data:(n||{}).data}))}});Cj.forEach(["post","put","patch"],function(t){Im.prototype[t]=function(r,n,o){return this.request(Sw(o||{},{method:t,url:r,data:n}))}});Sj.exports=Im});var Pj=B((Jwe,xj)=>{"use strict";var eZ=jd();function Bd(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(o){t=o});var r=this;this.promise.then(function(n){if(!!r._listeners){var o,i=r._listeners.length;for(o=0;o<i;o++)r._listeners[o](n);r._listeners=null}}),this.promise.then=function(n){var o,i=new Promise(function(s){r.subscribe(s),o=s}).then(n);return i.cancel=function(){r.unsubscribe(o)},i},e(function(o){r.reason||(r.reason=new eZ(o),t(r.reason))})}Bd.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Bd.prototype.subscribe=function(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]};Bd.prototype.unsubscribe=function(t){if(!!this._listeners){var r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}};Bd.source=function(){var t,r=new Bd(function(o){t=o});return{token:r,cancel:t}};xj.exports=Bd});var Ij=B((Zwe,Tj)=>{"use strict";Tj.exports=function(t){return function(n){return t.apply(null,n)}}});var Rj=B((eEe,Dj)=>{"use strict";var tZ=Hr();Dj.exports=function(t){return tZ.isObject(t)&&t.isAxiosError===!0}});var Oj=B((tEe,j0)=>{"use strict";var kj=Hr(),rZ=x0(),bw=bj(),nZ=$0(),oZ=_w();function Aj(e){var t=new bw(e),r=rZ(bw.prototype.request,t);return kj.extend(r,bw.prototype,t),kj.extend(r,t),r.create=function(o){return Aj(nZ(e,o))},r}var Ui=Aj(oZ);Ui.Axios=bw;Ui.Cancel=jd();Ui.CancelToken=Pj();Ui.isCancel=L0();Ui.VERSION=ww().version;Ui.all=function(t){return Promise.all(t)};Ui.spread=Ij();Ui.isAxiosError=Rj();j0.exports=Ui;j0.exports.default=Ui});var Lj=B((rEe,Nj)=>{Nj.exports=Oj()});var Fj=B(q0=>{"use strict";Object.defineProperty(q0,"__esModule",{value:!0});var iZ=Lj(),H0=class{constructor(t){this.endpoint=t}get(t){return iZ.default.get(this.endpoint,Object.assign(Object.assign({},t),{proxy:!1}))}};q0.AxiosHttpClient=H0});var Mj=B(V0=>{"use strict";Object.defineProperty(V0,"__esModule",{value:!0});var B0=class{constructor(){this.storage=new Map}async getValue(t,r){return this.storage.has(t)?await Promise.resolve(this.storage.get(t)):await Promise.resolve(r||void 0)}setValue(t,r){this.storage.set(t,r)}};V0.MemoryKeyValueStorage=B0});var $j=B(G0=>{"use strict";Object.defineProperty(G0,"__esModule",{value:!0});var sZ=Mj(),W0=class{constructor(t,r,n,o,i){this.telemetry=t,this.assignmentContextTelemetryPropertyName=r,this.telemetryEventName=n,this.storageKey=o,this.storage=i,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(i=new sZ.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise((s,a)=>{this.resolveInitialFetchPromise=s})}get features(){return this._features}set features(t){this._features=t,this.telemetry&&this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext)}async getFeaturesAsync(t=!1){if(this.fetchPromise!=null){try{await this.fetchPromise}catch{}return this.features}if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});try{this.fetchPromise=Promise.all(this.featureProviders.map(async n=>await n.getFeatures()));let r=await this.fetchPromise;this.updateFeatures(r,t)}catch{}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(t,r=!1){let n={features:[],assignmentContext:"",configs:[]};for(let o of t){for(let i of o.features)n.features.includes(i)||n.features.push(i);for(let i of o.configs){let s=n.configs.find(a=>a.Id===i.Id);s?s.Parameters=Object.assign(Object.assign({},s.Parameters),i.Parameters):n.configs.push(i)}n.assignmentContext+=o.assignmentContext}(r||!this.featuresConsumed)&&(this.features=n),this.storage&&this.storage.setValue(this.storageKey,n)}async loadCachedFeatureData(){let t;this.storage&&(t=await this.storage.getValue(this.storageKey),t!==void 0&&t.configs===void 0&&(t.configs=[])),this.features.features.length===0&&(this.features=t||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(t){return this.featuresConsumed=!0,this.PostEventToTelemetry(t),this.features.features.includes(t)}async isCachedFlightEnabled(t){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(t),this.features.features.includes(t)}async isFlightEnabledAsync(t){let r=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(t),r.features.includes(t)}getTreatmentVariable(t,r){var n;return this.featuresConsumed=!0,this.PostEventToTelemetry(`${t}.${r}`),(n=this.features.configs.find(i=>i.Id===t))===null||n===void 0?void 0:n.Parameters[r]}async getTreatmentVariableAsync(t,r,n){if(n){let o=this.featuresConsumed,i=this.getTreatmentVariable(t,r);if(i===void 0)this.featuresConsumed=o;else return i}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(t,r)}PostEventToTelemetry(t){this.cachedTelemetryEvents.includes(t)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",t]])),this.cachedTelemetryEvents.push(t))}invokeInit(){this.init()}addFeatureProvider(...t){if(!(t==null||this.featureProviders==null))for(let r of t)this.featureProviders.push(r)}};G0.ExperimentationServiceBase=W0});var Uj=B(Y0=>{"use strict";Object.defineProperty(Y0,"__esModule",{value:!0});var z0=class{constructor(t){this.fetchInterval=t}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(t){this.onTick=t}StartPolling(t=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(t&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}};Y0.PollingService=z0});var jj=B(X0=>{"use strict";Object.defineProperty(X0,"__esModule",{value:!0});var aZ=$j(),cZ=Uj(),K0=class extends aZ.ExperimentationServiceBase{constructor(t,r,n,o,i,s,a){if(super(t,o,i,s,a),this.telemetry=t,this.filterProviders=r,this.refreshRateMs=n,this.assignmentContextTelemetryPropertyName=o,this.telemetryEventName=i,this.storageKey=s,this.storage=a,n<1e3&&n!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");n>0&&(this.pollingService=new cZ.PollingService(n),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(t=!1){if(this.pollingService){this.pollingService.StopPolling();let r=await super.getFeaturesAsync(t);return this.pollingService.StartPolling(),r}else return await super.getFeaturesAsync(t)}};X0.ExperimentationServiceAutoPolling=K0});var Hj=B(Q0=>{"use strict";Object.defineProperty(Q0,"__esModule",{value:!0});var uZ=CU(),lZ=Fj(),dZ=jj(),xw=class extends dZ.ExperimentationServiceAutoPolling{constructor(t){super(t.telemetry,t.filterProviders||[],t.refetchInterval!=null?t.refetchInterval:0,t.assignmentContextTelemetryPropertyName,t.telemetryEventName,t.storageKey,t.keyValueStorage),this.options=t,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new uZ.TasApiFeatureProvider(new lZ.AxiosHttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}};Q0.ExperimentationService=xw;xw.REFRESH_RATE_IN_MINUTES=30});var qj=B(J0=>{"use strict";Object.defineProperty(J0,"__esModule",{value:!0});var fZ=Hj();J0.ExperimentationService=fZ.ExperimentationService});var Bj=B(eP=>{"use strict";Object.defineProperty(eP,"__esModule",{value:!0});var Z0=class{constructor(t){this.mementoGlobalStorage=t}async getValue(t,r){return await this.mementoGlobalStorage.get(t)||r}setValue(t,r){this.mementoGlobalStorage.update(t,r)}};eP.MementoKeyValueStorage=Z0});var Vj=B(rP=>{"use strict";Object.defineProperty(rP,"__esModule",{value:!0});var tP=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(t){return!1}isCachedFlightEnabled(t){return Promise.resolve(!1)}isFlightEnabledAsync(t){return Promise.resolve(!1)}getTreatmentVariable(t,r){}getTreatmentVariableAsync(t,r){return Promise.resolve(void 0)}};rP.default=tP});var Gj=B(Pw=>{"use strict";Object.defineProperty(Pw,"__esModule",{value:!0});var pZ=y0(),mZ=qj(),nP=require("vscode"),hZ=Bj(),gZ=Vj(),vZ="https://default.exp-tas.com/vscode/ab",yZ="query-expfeature",wZ="abexp.assignmentcontext",EZ="VSCode.ABExp.FeatureData",CZ=1e3*60*30;function Wj(e,t,r,n,o,...i){if(!o)throw new Error("Memento storage was not provided.");let s=nP.workspace.getConfiguration("telemetry");if(!(nP.env.isTelemetryEnabled===void 0?s.get("enableTelemetry",!0):nP.env.isTelemetryEnabled))return new gZ.default;let u=[new pZ.VSCodeFilterProvider(e,t,r),...i],l=new hZ.MementoKeyValueStorage(o);return new mZ.ExperimentationService({filterProviders:u,telemetry:n,storageKey:EZ,keyValueStorage:l,featuresTelemetryPropertyName:"",assignmentContextTelemetryPropertyName:wZ,telemetryEventName:yZ,endpoint:vZ,refetchInterval:CZ})}Pw.getExperimentationService=Wj;async function _Z(e,t,r,n,o,...i){let s=Wj(e,t,r,n,o,...i);return await s.initializePromise,s}Pw.getExperimentationServiceAsync=_Z});var Yj=B(Dm=>{"use strict";Object.defineProperty(Dm,"__esModule",{value:!0});var zj=Gj();Dm.getExperimentationService=zj.getExperimentationService;Dm.getExperimentationServiceAsync=zj.getExperimentationServiceAsync;var SZ=y0();Dm.TargetPopulation=SZ.TargetPopulation});var Um=B((fCe,vH)=>{var YZ="2.0.0",KZ=Number.MAX_SAFE_INTEGER||9007199254740991,XZ=16;vH.exports={SEMVER_SPEC_VERSION:YZ,MAX_LENGTH:256,MAX_SAFE_INTEGER:KZ,MAX_SAFE_COMPONENT_LENGTH:XZ}});var jm=B((pCe,yH)=>{var QZ=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};yH.exports=QZ});var Su=B((Ua,wH)=>{var{MAX_SAFE_COMPONENT_LENGTH:CP}=Um(),JZ=jm();Ua=wH.exports={};var ZZ=Ua.re=[],xe=Ua.src=[],Pe=Ua.t={},eee=0,Ze=(e,t,r)=>{let n=eee++;JZ(e,n,t),Pe[e]=n,xe[n]=t,ZZ[n]=new RegExp(t,r?"g":void 0)};Ze("NUMERICIDENTIFIER","0|[1-9]\\d*");Ze("NUMERICIDENTIFIERLOOSE","[0-9]+");Ze("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");Ze("MAINVERSION",`(${xe[Pe.NUMERICIDENTIFIER]})\\.(${xe[Pe.NUMERICIDENTIFIER]})\\.(${xe[Pe.NUMERICIDENTIFIER]})`);Ze("MAINVERSIONLOOSE",`(${xe[Pe.NUMERICIDENTIFIERLOOSE]})\\.(${xe[Pe.NUMERICIDENTIFIERLOOSE]})\\.(${xe[Pe.NUMERICIDENTIFIERLOOSE]})`);Ze("PRERELEASEIDENTIFIER",`(?:${xe[Pe.NUMERICIDENTIFIER]}|${xe[Pe.NONNUMERICIDENTIFIER]})`);Ze("PRERELEASEIDENTIFIERLOOSE",`(?:${xe[Pe.NUMERICIDENTIFIERLOOSE]}|${xe[Pe.NONNUMERICIDENTIFIER]})`);Ze("PRERELEASE",`(?:-(${xe[Pe.PRERELEASEIDENTIFIER]}(?:\\.${xe[Pe.PRERELEASEIDENTIFIER]})*))`);Ze("PRERELEASELOOSE",`(?:-?(${xe[Pe.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${xe[Pe.PRERELEASEIDENTIFIERLOOSE]})*))`);Ze("BUILDIDENTIFIER","[0-9A-Za-z-]+");Ze("BUILD",`(?:\\+(${xe[Pe.BUILDIDENTIFIER]}(?:\\.${xe[Pe.BUILDIDENTIFIER]})*))`);Ze("FULLPLAIN",`v?${xe[Pe.MAINVERSION]}${xe[Pe.PRERELEASE]}?${xe[Pe.BUILD]}?`);Ze("FULL",`^${xe[Pe.FULLPLAIN]}$`);Ze("LOOSEPLAIN",`[v=\\s]*${xe[Pe.MAINVERSIONLOOSE]}${xe[Pe.PRERELEASELOOSE]}?${xe[Pe.BUILD]}?`);Ze("LOOSE",`^${xe[Pe.LOOSEPLAIN]}$`);Ze("GTLT","((?:<|>)?=?)");Ze("XRANGEIDENTIFIERLOOSE",`${xe[Pe.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Ze("XRANGEIDENTIFIER",`${xe[Pe.NUMERICIDENTIFIER]}|x|X|\\*`);Ze("XRANGEPLAIN",`[v=\\s]*(${xe[Pe.XRANGEIDENTIFIER]})(?:\\.(${xe[Pe.XRANGEIDENTIFIER]})(?:\\.(${xe[Pe.XRANGEIDENTIFIER]})(?:${xe[Pe.PRERELEASE]})?${xe[Pe.BUILD]}?)?)?`);Ze("XRANGEPLAINLOOSE",`[v=\\s]*(${xe[Pe.XRANGEIDENTIFIERLOOSE]})(?:\\.(${xe[Pe.XRANGEIDENTIFIERLOOSE]})(?:\\.(${xe[Pe.XRANGEIDENTIFIERLOOSE]})(?:${xe[Pe.PRERELEASELOOSE]})?${xe[Pe.BUILD]}?)?)?`);Ze("XRANGE",`^${xe[Pe.GTLT]}\\s*${xe[Pe.XRANGEPLAIN]}$`);Ze("XRANGELOOSE",`^${xe[Pe.GTLT]}\\s*${xe[Pe.XRANGEPLAINLOOSE]}$`);Ze("COERCE",`(^|[^\\d])(\\d{1,${CP}})(?:\\.(\\d{1,${CP}}))?(?:\\.(\\d{1,${CP}}))?(?:$|[^\\d])`);Ze("COERCERTL",xe[Pe.COERCE],!0);Ze("LONETILDE","(?:~>?)");Ze("TILDETRIM",`(\\s*)${xe[Pe.LONETILDE]}\\s+`,!0);Ua.tildeTrimReplace="$1~";Ze("TILDE",`^${xe[Pe.LONETILDE]}${xe[Pe.XRANGEPLAIN]}$`);Ze("TILDELOOSE",`^${xe[Pe.LONETILDE]}${xe[Pe.XRANGEPLAINLOOSE]}$`);Ze("LONECARET","(?:\\^)");Ze("CARETTRIM",`(\\s*)${xe[Pe.LONECARET]}\\s+`,!0);Ua.caretTrimReplace="$1^";Ze("CARET",`^${xe[Pe.LONECARET]}${xe[Pe.XRANGEPLAIN]}$`);Ze("CARETLOOSE",`^${xe[Pe.LONECARET]}${xe[Pe.XRANGEPLAINLOOSE]}$`);Ze("COMPARATORLOOSE",`^${xe[Pe.GTLT]}\\s*(${xe[Pe.LOOSEPLAIN]})$|^$`);Ze("COMPARATOR",`^${xe[Pe.GTLT]}\\s*(${xe[Pe.FULLPLAIN]})$|^$`);Ze("COMPARATORTRIM",`(\\s*)${xe[Pe.GTLT]}\\s*(${xe[Pe.LOOSEPLAIN]}|${xe[Pe.XRANGEPLAIN]})`,!0);Ua.comparatorTrimReplace="$1$2$3";Ze("HYPHENRANGE",`^\\s*(${xe[Pe.XRANGEPLAIN]})\\s+-\\s+(${xe[Pe.XRANGEPLAIN]})\\s*$`);Ze("HYPHENRANGELOOSE",`^\\s*(${xe[Pe.XRANGEPLAINLOOSE]})\\s+-\\s+(${xe[Pe.XRANGEPLAINLOOSE]})\\s*$`);Ze("STAR","(<|>)?=?\\s*\\*");Ze("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Ze("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Hm=B((mCe,EH)=>{var tee=["includePrerelease","loose","rtl"],ree=e=>e?typeof e!="object"?{loose:!0}:tee.filter(t=>e[t]).reduce((t,r)=>(t[r]=!0,t),{}):{};EH.exports=ree});var _P=B((hCe,SH)=>{var CH=/^[0-9]+$/,_H=(e,t)=>{let r=CH.test(e),n=CH.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},nee=(e,t)=>_H(t,e);SH.exports={compareIdentifiers:_H,rcompareIdentifiers:nee}});var qr=B((gCe,TH)=>{var $w=jm(),{MAX_LENGTH:bH,MAX_SAFE_INTEGER:Uw}=Um(),{re:xH,t:PH}=Su(),oee=Hm(),{compareIdentifiers:Kd}=_P(),Zn=class{constructor(t,r){if(r=oee(r),t instanceof Zn){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid Version: ${t}`);if(t.length>bH)throw new TypeError(`version is longer than ${bH} characters`);$w("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=t.trim().match(r.loose?xH[PH.LOOSE]:xH[PH.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Uw||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Uw||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Uw||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){let i=+o;if(i>=0&&i<Uw)return i}return o}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if($w("SemVer.compare",this.version,this.options,t),!(t instanceof Zn)){if(typeof t=="string"&&t===this.version)return 0;t=new Zn(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Zn||(t=new Zn(t,this.options)),Kd(this.major,t.major)||Kd(this.minor,t.minor)||Kd(this.patch,t.patch)}comparePre(t){if(t instanceof Zn||(t=new Zn(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],o=t.prerelease[r];if($w("prerelease compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return Kd(n,o)}while(++r)}compareBuild(t){t instanceof Zn||(t=new Zn(t,this.options));let r=0;do{let n=this.build[r],o=t.build[r];if($w("prerelease compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return Kd(n,o)}while(++r)}inc(t,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r),this.inc("pre",r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}r&&(Kd(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}};TH.exports=Zn});var bu=B((vCe,kH)=>{var{MAX_LENGTH:iee}=Um(),{re:IH,t:DH}=Su(),RH=qr(),see=Hm(),aee=(e,t)=>{if(t=see(t),e instanceof RH)return e;if(typeof e!="string"||e.length>iee||!(t.loose?IH[DH.LOOSE]:IH[DH.FULL]).test(e))return null;try{return new RH(e,t)}catch{return null}};kH.exports=aee});var OH=B((yCe,AH)=>{var cee=bu(),uee=(e,t)=>{let r=cee(e,t);return r?r.version:null};AH.exports=uee});var LH=B((wCe,NH)=>{var lee=bu(),dee=(e,t)=>{let r=lee(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};NH.exports=dee});var $H=B((ECe,MH)=>{var FH=qr(),fee=(e,t,r,n)=>{typeof r=="string"&&(n=r,r=void 0);try{return new FH(e instanceof FH?e.version:e,r).inc(t,n).version}catch{return null}};MH.exports=fee});var Ao=B((CCe,jH)=>{var UH=qr(),pee=(e,t,r)=>new UH(e,r).compare(new UH(t,r));jH.exports=pee});var jw=B((_Ce,HH)=>{var mee=Ao(),hee=(e,t,r)=>mee(e,t,r)===0;HH.exports=hee});var VH=B((SCe,BH)=>{var qH=bu(),gee=jw(),vee=(e,t)=>{if(gee(e,t))return null;{let r=qH(e),n=qH(t),o=r.prerelease.length||n.prerelease.length,i=o?"pre":"",s=o?"prerelease":"";for(let a in r)if((a==="major"||a==="minor"||a==="patch")&&r[a]!==n[a])return i+a;return s}};BH.exports=vee});var GH=B((bCe,WH)=>{var yee=qr(),wee=(e,t)=>new yee(e,t).major;WH.exports=wee});var YH=B((xCe,zH)=>{var Eee=qr(),Cee=(e,t)=>new Eee(e,t).minor;zH.exports=Cee});var XH=B((PCe,KH)=>{var _ee=qr(),See=(e,t)=>new _ee(e,t).patch;KH.exports=See});var JH=B((TCe,QH)=>{var bee=bu(),xee=(e,t)=>{let r=bee(e,t);return r&&r.prerelease.length?r.prerelease:null};QH.exports=xee});var eq=B((ICe,ZH)=>{var Pee=Ao(),Tee=(e,t,r)=>Pee(t,e,r);ZH.exports=Tee});var rq=B((DCe,tq)=>{var Iee=Ao(),Dee=(e,t)=>Iee(e,t,!0);tq.exports=Dee});var Hw=B((RCe,oq)=>{var nq=qr(),Ree=(e,t,r)=>{let n=new nq(e,r),o=new nq(t,r);return n.compare(o)||n.compareBuild(o)};oq.exports=Ree});var sq=B((kCe,iq)=>{var kee=Hw(),Aee=(e,t)=>e.sort((r,n)=>kee(r,n,t));iq.exports=Aee});var cq=B((ACe,aq)=>{var Oee=Hw(),Nee=(e,t)=>e.sort((r,n)=>Oee(n,r,t));aq.exports=Nee});var qm=B((OCe,uq)=>{var Lee=Ao(),Fee=(e,t,r)=>Lee(e,t,r)>0;uq.exports=Fee});var qw=B((NCe,lq)=>{var Mee=Ao(),$ee=(e,t,r)=>Mee(e,t,r)<0;lq.exports=$ee});var SP=B((LCe,dq)=>{var Uee=Ao(),jee=(e,t,r)=>Uee(e,t,r)!==0;dq.exports=jee});var Bw=B((FCe,fq)=>{var Hee=Ao(),qee=(e,t,r)=>Hee(e,t,r)>=0;fq.exports=qee});var Vw=B((MCe,pq)=>{var Bee=Ao(),Vee=(e,t,r)=>Bee(e,t,r)<=0;pq.exports=Vee});var bP=B(($Ce,mq)=>{var Wee=jw(),Gee=SP(),zee=qm(),Yee=Bw(),Kee=qw(),Xee=Vw(),Qee=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return Wee(e,r,n);case"!=":return Gee(e,r,n);case">":return zee(e,r,n);case">=":return Yee(e,r,n);case"<":return Kee(e,r,n);case"<=":return Xee(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};mq.exports=Qee});var gq=B((UCe,hq)=>{var Jee=qr(),Zee=bu(),{re:Ww,t:Gw}=Su(),ete=(e,t)=>{if(e instanceof Jee)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(Ww[Gw.COERCE]);else{let n;for(;(n=Ww[Gw.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),Ww[Gw.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;Ww[Gw.COERCERTL].lastIndex=-1}return r===null?null:Zee(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};hq.exports=ete});var Cq=B((jCe,Eq)=>{"use strict";var tte=jh(),xu=Symbol("max"),ks=Symbol("length"),Xd=Symbol("lengthCalculator"),Vm=Symbol("allowStale"),Pu=Symbol("maxAge"),Rs=Symbol("dispose"),vq=Symbol("noDisposeOnSet"),Cr=Symbol("lruList"),gi=Symbol("cache"),wq=Symbol("updateAgeOnGet"),xP=()=>1,TP=class{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");let r=this[xu]=t.max||1/0,n=t.length||xP;if(this[Xd]=typeof n!="function"?xP:n,this[Vm]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Pu]=t.maxAge||0,this[Rs]=t.dispose,this[vq]=t.noDisposeOnSet||!1,this[wq]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[xu]=t||1/0,Bm(this)}get max(){return this[xu]}set allowStale(t){this[Vm]=!!t}get allowStale(){return this[Vm]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Pu]=t,Bm(this)}get maxAge(){return this[Pu]}set lengthCalculator(t){typeof t!="function"&&(t=xP),t!==this[Xd]&&(this[Xd]=t,this[ks]=0,this[Cr].forEach(r=>{r.length=this[Xd](r.value,r.key),this[ks]+=r.length})),Bm(this)}get lengthCalculator(){return this[Xd]}get length(){return this[ks]}get itemCount(){return this[Cr].length}rforEach(t,r){r=r||this;for(let n=this[Cr].tail;n!==null;){let o=n.prev;yq(this,t,n,r),n=o}}forEach(t,r){r=r||this;for(let n=this[Cr].head;n!==null;){let o=n.next;yq(this,t,n,r),n=o}}keys(){return this[Cr].toArray().map(t=>t.key)}values(){return this[Cr].toArray().map(t=>t.value)}reset(){this[Rs]&&this[Cr]&&this[Cr].length&&this[Cr].forEach(t=>this[Rs](t.key,t.value)),this[gi]=new Map,this[Cr]=new tte,this[ks]=0}dump(){return this[Cr].map(t=>zw(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Cr]}set(t,r,n){if(n=n||this[Pu],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let o=n?Date.now():0,i=this[Xd](r,t);if(this[gi].has(t)){if(i>this[xu])return Qd(this,this[gi].get(t)),!1;let c=this[gi].get(t).value;return this[Rs]&&(this[vq]||this[Rs](t,c.value)),c.now=o,c.maxAge=n,c.value=r,this[ks]+=i-c.length,c.length=i,this.get(t),Bm(this),!0}let s=new IP(t,r,i,o,n);return s.length>this[xu]?(this[Rs]&&this[Rs](t,r),!1):(this[ks]+=s.length,this[Cr].unshift(s),this[gi].set(t,this[Cr].head),Bm(this),!0)}has(t){if(!this[gi].has(t))return!1;let r=this[gi].get(t).value;return!zw(this,r)}get(t){return PP(this,t,!0)}peek(t){return PP(this,t,!1)}pop(){let t=this[Cr].tail;return t?(Qd(this,t),t.value):null}del(t){Qd(this,this[gi].get(t))}load(t){this.reset();let r=Date.now();for(let n=t.length-1;n>=0;n--){let o=t[n],i=o.e||0;if(i===0)this.set(o.k,o.v);else{let s=i-r;s>0&&this.set(o.k,o.v,s)}}}prune(){this[gi].forEach((t,r)=>PP(this,r,!1))}},PP=(e,t,r)=>{let n=e[gi].get(t);if(n){let o=n.value;if(zw(e,o)){if(Qd(e,n),!e[Vm])return}else r&&(e[wq]&&(n.value.now=Date.now()),e[Cr].unshiftNode(n));return o.value}},zw=(e,t)=>{if(!t||!t.maxAge&&!e[Pu])return!1;let r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[Pu]&&r>e[Pu]},Bm=e=>{if(e[ks]>e[xu])for(let t=e[Cr].tail;e[ks]>e[xu]&&t!==null;){let r=t.prev;Qd(e,t),t=r}},Qd=(e,t)=>{if(t){let r=t.value;e[Rs]&&e[Rs](r.key,r.value),e[ks]-=r.length,e[gi].delete(r.key),e[Cr].removeNode(t)}},IP=class{constructor(t,r,n,o,i){this.key=t,this.value=r,this.length=n,this.now=o,this.maxAge=i||0}},yq=(e,t,r,n)=>{let o=r.value;zw(e,o)&&(Qd(e,r),e[Vm]||(o=void 0)),o&&t.call(n,o.value,o.key,e)};Eq.exports=TP});var Oo=B((HCe,xq)=>{var Tu=class{constructor(t,r){if(r=nte(r),t instanceof Tu)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new Tu(t.raw,r);if(t instanceof DP)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t,this.set=t.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${t}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(o=>!Sq(o[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let o of this.set)if(o.length===1&&cte(o[0])){this.set=[o];break}}}this.format()}format(){return this.range=this.set.map(t=>t.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(t){t=t.trim();let n=`parseRange:${Object.keys(this.options).join(",")}:${t}`,o=_q.get(n);if(o)return o;let i=this.options.loose,s=i?xn[rn.HYPHENRANGELOOSE]:xn[rn.HYPHENRANGE];t=t.replace(s,yte(this.options.includePrerelease)),Vt("hyphen replace",t),t=t.replace(xn[rn.COMPARATORTRIM],ite),Vt("comparator trim",t),t=t.replace(xn[rn.TILDETRIM],ste),t=t.replace(xn[rn.CARETTRIM],ate),t=t.split(/\s+/).join(" ");let a=t.split(" ").map(d=>ute(d,this.options)).join(" ").split(/\s+/).map(d=>vte(d,this.options));i&&(a=a.filter(d=>(Vt("loose invalid filter",d,this.options),!!d.match(xn[rn.COMPARATORLOOSE])))),Vt("range list",a);let c=new Map,u=a.map(d=>new DP(d,this.options));for(let d of u){if(Sq(d))return[d];c.set(d.value,d)}c.size>1&&c.has("")&&c.delete("");let l=[...c.values()];return _q.set(n,l),l}intersects(t,r){if(!(t instanceof Tu))throw new TypeError("a Range is required");return this.set.some(n=>bq(n,r)&&t.set.some(o=>bq(o,r)&&n.every(i=>o.every(s=>i.intersects(s,r)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new ote(t,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(wte(this.set[r],t,this.options))return!0;return!1}};xq.exports=Tu;var rte=Cq(),_q=new rte({max:1e3}),nte=Hm(),DP=Wm(),Vt=jm(),ote=qr(),{re:xn,t:rn,comparatorTrimReplace:ite,tildeTrimReplace:ste,caretTrimReplace:ate}=Su(),Sq=e=>e.value==="<0.0.0-0",cte=e=>e.value==="",bq=(e,t)=>{let r=!0,n=e.slice(),o=n.pop();for(;r&&n.length;)r=n.every(i=>o.intersects(i,t)),o=n.pop();return r},ute=(e,t)=>(Vt("comp",e,t),e=fte(e,t),Vt("caret",e),e=lte(e,t),Vt("tildes",e),e=mte(e,t),Vt("xrange",e),e=gte(e,t),Vt("stars",e),e),nn=e=>!e||e.toLowerCase()==="x"||e==="*",lte=(e,t)=>e.trim().split(/\s+/).map(r=>dte(r,t)).join(" "),dte=(e,t)=>{let r=t.loose?xn[rn.TILDELOOSE]:xn[rn.TILDE];return e.replace(r,(n,o,i,s,a)=>{Vt("tilde",e,n,o,i,s,a);let c;return nn(o)?c="":nn(i)?c=`>=${o}.0.0 <${+o+1}.0.0-0`:nn(s)?c=`>=${o}.${i}.0 <${o}.${+i+1}.0-0`:a?(Vt("replaceTilde pr",a),c=`>=${o}.${i}.${s}-${a} <${o}.${+i+1}.0-0`):c=`>=${o}.${i}.${s} <${o}.${+i+1}.0-0`,Vt("tilde return",c),c})},fte=(e,t)=>e.trim().split(/\s+/).map(r=>pte(r,t)).join(" "),pte=(e,t)=>{Vt("caret",e,t);let r=t.loose?xn[rn.CARETLOOSE]:xn[rn.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(o,i,s,a,c)=>{Vt("caret",e,o,i,s,a,c);let u;return nn(i)?u="":nn(s)?u=`>=${i}.0.0${n} <${+i+1}.0.0-0`:nn(a)?i==="0"?u=`>=${i}.${s}.0${n} <${i}.${+s+1}.0-0`:u=`>=${i}.${s}.0${n} <${+i+1}.0.0-0`:c?(Vt("replaceCaret pr",c),i==="0"?s==="0"?u=`>=${i}.${s}.${a}-${c} <${i}.${s}.${+a+1}-0`:u=`>=${i}.${s}.${a}-${c} <${i}.${+s+1}.0-0`:u=`>=${i}.${s}.${a}-${c} <${+i+1}.0.0-0`):(Vt("no pr"),i==="0"?s==="0"?u=`>=${i}.${s}.${a}${n} <${i}.${s}.${+a+1}-0`:u=`>=${i}.${s}.${a}${n} <${i}.${+s+1}.0-0`:u=`>=${i}.${s}.${a} <${+i+1}.0.0-0`),Vt("caret return",u),u})},mte=(e,t)=>(Vt("replaceXRanges",e,t),e.split(/\s+/).map(r=>hte(r,t)).join(" ")),hte=(e,t)=>{e=e.trim();let r=t.loose?xn[rn.XRANGELOOSE]:xn[rn.XRANGE];return e.replace(r,(n,o,i,s,a,c)=>{Vt("xRange",e,n,o,i,s,a,c);let u=nn(i),l=u||nn(s),d=l||nn(a),f=d;return o==="="&&f&&(o=""),c=t.includePrerelease?"-0":"",u?o===">"||o==="<"?n="<0.0.0-0":n="*":o&&f?(l&&(s=0),a=0,o===">"?(o=">=",l?(i=+i+1,s=0,a=0):(s=+s+1,a=0)):o==="<="&&(o="<",l?i=+i+1:s=+s+1),o==="<"&&(c="-0"),n=`${o+i}.${s}.${a}${c}`):l?n=`>=${i}.0.0${c} <${+i+1}.0.0-0`:d&&(n=`>=${i}.${s}.0${c} <${i}.${+s+1}.0-0`),Vt("xRange return",n),n})},gte=(e,t)=>(Vt("replaceStars",e,t),e.trim().replace(xn[rn.STAR],"")),vte=(e,t)=>(Vt("replaceGTE0",e,t),e.trim().replace(xn[t.includePrerelease?rn.GTE0PRE:rn.GTE0],"")),yte=e=>(t,r,n,o,i,s,a,c,u,l,d,f,p)=>(nn(n)?r="":nn(o)?r=`>=${n}.0.0${e?"-0":""}`:nn(i)?r=`>=${n}.${o}.0${e?"-0":""}`:s?r=`>=${r}`:r=`>=${r}${e?"-0":""}`,nn(u)?c="":nn(l)?c=`<${+u+1}.0.0-0`:nn(d)?c=`<${u}.${+l+1}.0-0`:f?c=`<=${u}.${l}.${d}-${f}`:e?c=`<${u}.${l}.${+d+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),wte=(e,t,r)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let n=0;n<e.length;n++)if(Vt(e[n].semver),e[n].semver!==DP.ANY&&e[n].semver.prerelease.length>0){let o=e[n].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}});var Wm=B((qCe,Rq)=>{var Gm=Symbol("SemVer ANY"),Jd=class{static get ANY(){return Gm}constructor(t,r){if(r=Ete(r),t instanceof Jd){if(t.loose===!!r.loose)return t;t=t.value}kP("comparator",t,r),this.options=r,this.loose=!!r.loose,this.parse(t),this.semver===Gm?this.value="":this.value=this.operator+this.semver.version,kP("comp",this)}parse(t){let r=this.options.loose?Pq[Tq.COMPARATORLOOSE]:Pq[Tq.COMPARATOR],n=t.match(r);if(!n)throw new TypeError(`Invalid comparator: ${t}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new Iq(n[2],this.options.loose):this.semver=Gm}toString(){return this.value}test(t){if(kP("Comparator.test",t,this.options.loose),this.semver===Gm||t===Gm)return!0;if(typeof t=="string")try{t=new Iq(t,this.options)}catch{return!1}return RP(t,this.operator,this.semver,this.options)}intersects(t,r){if(!(t instanceof Jd))throw new TypeError("a Comparator is required");if((!r||typeof r!="object")&&(r={loose:!!r,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new Dq(t.value,r).test(this.value);if(t.operator==="")return t.value===""?!0:new Dq(this.value,r).test(t.semver);let n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),o=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),i=this.semver.version===t.semver.version,s=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),a=RP(this.semver,"<",t.semver,r)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),c=RP(this.semver,">",t.semver,r)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||o||i&&s||a||c}};Rq.exports=Jd;var Ete=Hm(),{re:Pq,t:Tq}=Su(),RP=bP(),kP=jm(),Iq=qr(),Dq=Oo()});var zm=B((BCe,kq)=>{var Cte=Oo(),_te=(e,t,r)=>{try{t=new Cte(t,r)}catch{return!1}return t.test(e)};kq.exports=_te});var Oq=B((VCe,Aq)=>{var Ste=Oo(),bte=(e,t)=>new Ste(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));Aq.exports=bte});var Lq=B((WCe,Nq)=>{var xte=qr(),Pte=Oo(),Tte=(e,t,r)=>{let n=null,o=null,i=null;try{i=new Pte(t,r)}catch{return null}return e.forEach(s=>{i.test(s)&&(!n||o.compare(s)===-1)&&(n=s,o=new xte(n,r))}),n};Nq.exports=Tte});var Mq=B((GCe,Fq)=>{var Ite=qr(),Dte=Oo(),Rte=(e,t,r)=>{let n=null,o=null,i=null;try{i=new Dte(t,r)}catch{return null}return e.forEach(s=>{i.test(s)&&(!n||o.compare(s)===1)&&(n=s,o=new Ite(n,r))}),n};Fq.exports=Rte});var jq=B((zCe,Uq)=>{var AP=qr(),kte=Oo(),$q=qm(),Ate=(e,t)=>{e=new kte(e,t);let r=new AP("0.0.0");if(e.test(r)||(r=new AP("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){let o=e.set[n],i=null;o.forEach(s=>{let a=new AP(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||$q(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),i&&(!r||$q(r,i))&&(r=i)}return r&&e.test(r)?r:null};Uq.exports=Ate});var qq=B((YCe,Hq)=>{var Ote=Oo(),Nte=(e,t)=>{try{return new Ote(e,t).range||"*"}catch{return null}};Hq.exports=Nte});var Yw=B((KCe,Gq)=>{var Lte=qr(),Wq=Wm(),{ANY:Fte}=Wq,Mte=Oo(),$te=zm(),Bq=qm(),Vq=qw(),Ute=Vw(),jte=Bw(),Hte=(e,t,r,n)=>{e=new Lte(e,n),t=new Mte(t,n);let o,i,s,a,c;switch(r){case">":o=Bq,i=Ute,s=Vq,a=">",c=">=";break;case"<":o=Vq,i=jte,s=Bq,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if($te(e,t,n))return!1;for(let u=0;u<t.set.length;++u){let l=t.set[u],d=null,f=null;if(l.forEach(p=>{p.semver===Fte&&(p=new Wq(">=0.0.0")),d=d||p,f=f||p,o(p.semver,d.semver,n)?d=p:s(p.semver,f.semver,n)&&(f=p)}),d.operator===a||d.operator===c||(!f.operator||f.operator===a)&&i(e,f.semver))return!1;if(f.operator===c&&s(e,f.semver))return!1}return!0};Gq.exports=Hte});var Yq=B((XCe,zq)=>{var qte=Yw(),Bte=(e,t,r)=>qte(e,t,">",r);zq.exports=Bte});var Xq=B((QCe,Kq)=>{var Vte=Yw(),Wte=(e,t,r)=>Vte(e,t,"<",r);Kq.exports=Wte});var Zq=B((JCe,Jq)=>{var Qq=Oo(),Gte=(e,t,r)=>(e=new Qq(e,r),t=new Qq(t,r),e.intersects(t));Jq.exports=Gte});var tB=B((ZCe,eB)=>{var zte=zm(),Yte=Ao();eB.exports=(e,t,r)=>{let n=[],o=null,i=null,s=e.sort((l,d)=>Yte(l,d,r));for(let l of s)zte(l,t,r)?(i=l,o||(o=l)):(i&&n.push([o,i]),i=null,o=null);o&&n.push([o,null]);let a=[];for(let[l,d]of n)l===d?a.push(l):!d&&l===s[0]?a.push("*"):d?l===s[0]?a.push(`<=${d}`):a.push(`${l} - ${d}`):a.push(`>=${l}`);let c=a.join(" || "),u=typeof t.raw=="string"?t.raw:String(t);return c.length<u.length?c:t}});var sB=B((e_e,iB)=>{var rB=Oo(),Kw=Wm(),{ANY:OP}=Kw,Ym=zm(),NP=Ao(),Kte=(e,t,r={})=>{if(e===t)return!0;e=new rB(e,r),t=new rB(t,r);let n=!1;e:for(let o of e.set){for(let i of t.set){let s=Xte(o,i,r);if(n=n||s!==null,s)continue e}if(n)return!1}return!0},Xte=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===OP){if(t.length===1&&t[0].semver===OP)return!0;r.includePrerelease?e=[new Kw(">=0.0.0-0")]:e=[new Kw(">=0.0.0")]}if(t.length===1&&t[0].semver===OP){if(r.includePrerelease)return!0;t=[new Kw(">=0.0.0")]}let n=new Set,o,i;for(let p of e)p.operator===">"||p.operator===">="?o=nB(o,p,r):p.operator==="<"||p.operator==="<="?i=oB(i,p,r):n.add(p.semver);if(n.size>1)return null;let s;if(o&&i){if(s=NP(o.semver,i.semver,r),s>0)return null;if(s===0&&(o.operator!==">="||i.operator!=="<="))return null}for(let p of n){if(o&&!Ym(p,String(o),r)||i&&!Ym(p,String(i),r))return null;for(let m of t)if(!Ym(p,String(m),r))return!1;return!0}let a,c,u,l,d=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1,f=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1;d&&d.prerelease.length===1&&i.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let p of t){if(l=l||p.operator===">"||p.operator===">=",u=u||p.operator==="<"||p.operator==="<=",o){if(f&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===f.major&&p.semver.minor===f.minor&&p.semver.patch===f.patch&&(f=!1),p.operator===">"||p.operator===">="){if(a=nB(o,p,r),a===p&&a!==o)return!1}else if(o.operator===">="&&!Ym(o.semver,String(p),r))return!1}if(i){if(d&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===d.major&&p.semver.minor===d.minor&&p.semver.patch===d.patch&&(d=!1),p.operator==="<"||p.operator==="<="){if(c=oB(i,p,r),c===p&&c!==i)return!1}else if(i.operator==="<="&&!Ym(i.semver,String(p),r))return!1}if(!p.operator&&(i||o)&&s!==0)return!1}return!(o&&u&&!i&&s!==0||i&&l&&!o&&s!==0||f||d)},nB=(e,t,r)=>{if(!e)return t;let n=NP(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},oB=(e,t,r)=>{if(!e)return t;let n=NP(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};iB.exports=Kte});var uB=B((t_e,cB)=>{var LP=Su(),Qte=Um(),Jte=qr(),aB=_P(),Zte=bu(),ere=OH(),tre=LH(),rre=$H(),nre=VH(),ore=GH(),ire=YH(),sre=XH(),are=JH(),cre=Ao(),ure=eq(),lre=rq(),dre=Hw(),fre=sq(),pre=cq(),mre=qm(),hre=qw(),gre=jw(),vre=SP(),yre=Bw(),wre=Vw(),Ere=bP(),Cre=gq(),_re=Wm(),Sre=Oo(),bre=zm(),xre=Oq(),Pre=Lq(),Tre=Mq(),Ire=jq(),Dre=qq(),Rre=Yw(),kre=Yq(),Are=Xq(),Ore=Zq(),Nre=tB(),Lre=sB();cB.exports={parse:Zte,valid:ere,clean:tre,inc:rre,diff:nre,major:ore,minor:ire,patch:sre,prerelease:are,compare:cre,rcompare:ure,compareLoose:lre,compareBuild:dre,sort:fre,rsort:pre,gt:mre,lt:hre,eq:gre,neq:vre,gte:yre,lte:wre,cmp:Ere,coerce:Cre,Comparator:_re,Range:Sre,satisfies:bre,toComparators:xre,maxSatisfying:Pre,minSatisfying:Tre,minVersion:Ire,validRange:Dre,outside:Rre,gtr:kre,ltr:Are,intersects:Ore,simplifyRange:Nre,subset:Lre,SemVer:Jte,re:LP.re,src:LP.src,tokens:LP.t,SEMVER_SPEC_VERSION:Qte.SEMVER_SPEC_VERSION,compareIdentifiers:aB.compareIdentifiers,rcompareIdentifiers:aB.rcompareIdentifiers}});var m2=B((Oxe,$ne)=>{$ne.exports={name:"remote-containers",displayName:"Dev Containers",description:"Open any folder or repository inside a Docker container and take advantage of Visual Studio Code's full feature set.",version:"0.275.1",preview:!0,publisher:"ms-vscode-remote",icon:"resources/dev-containers.png",repository:{type:"git",url:"https://github.com/Microsoft/vscode-remote-release.git"},bugs:{url:"https://github.com/Microsoft/vscode-remote-release/issues"},license:"SEE LICENSE IN LICENSE.txt",engines:{vscode:"^1.75.0"},extensionKind:["ui"],capabilities:{untrustedWorkspaces:{supported:"limited",description:"Opening a folder in a container requires workspace trust."},virtualWorkspaces:!0},categories:["Other"],keywords:["remote","docker","containers","remote development","dev container","development container","continueOn"],aiKey:"0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255",activationEvents:["onStartupFinished","workspaceContains:.devcontainer/devcontainer.json","workspaceContains:.devcontainer.json","onResolveRemoteAuthority:dev-container","onResolveRemoteAuthority:attached-container","onResolveRemoteAuthority:k8s-container","onDebugResolve:extensionHost"],main:"./dist/extension/extension",enabledApiProposals:["resolvers","tunnels","workspaceTrust","terminalDimensions","contribEditSessions","contribViewsRemote","contribRemoteHelp"],contributes:{continueEditSession:[{command:"remote-containers.openRepositoryFromRemoteHubWithEditSession",group:"0_local@2",when:"!isWeb && remoteHub:hasVirtualFolders",qualifiedName:"Continue Working in a Container Volume",remoteGroup:"remote_30_dev-container_1_actions@0"}],languages:[{id:"jsonc",filenames:["devcontainer-feature.json"]}],jsonValidation:[{fileMatch:"devcontainer-feature.json",url:"https://raw.githubusercontent.com/devcontainers/spec/main/schemas/devContainerFeature.schema.json"}],configuration:{title:"Dev Containers",properties:{"remote.containers.defaultExtensions":{scope:"application",deprecationMessage:"Use 'dev.containers.defaultExtensions' instead.",markdownDeprecationMessage:"Use `#dev.containers.defaultExtensions#` instead."},"dev.containers.defaultExtensions":{scope:"application",type:"array",description:"Configures the list of extensions to always install while creating a container.",default:[],items:{type:"string",pattern:"([a-z0-9A-Z][a-z0-9\\-A-Z]*)\\.([a-z0-9A-Z][a-z0-9\\-A-Z]*)",errorMessage:"Expected format '${publisher}.${name}'. Example: 'vscode.csharp'."}},"dev.containers.defaultFeatures":{scope:"application",type:"object",description:"Configures the list of features to always install while creating a container.",default:{}},"remote.containers.workspaceMountConsistency":{scope:"application",deprecationMessage:"Use 'dev.containers.workspaceMountConsistency' instead.",markdownDeprecationMessage:"Use `#dev.containers.workspaceMountConsistency#` instead."},"dev.containers.workspaceMountConsistency":{scope:"application",type:"string",enum:["consistent","cached","delegated"],enumDescriptions:["Perfect consistency.","The host\u2019s view is authoritative.","The container\u2019s view is authoritative."],description:"The consistency level used for the workspace mount (existing containers must be rebuilt to take effect).",default:"cached"},"remote.containers.cacheVolume":{scope:"application",deprecationMessage:"Use 'dev.containers.cacheVolume' instead.",markdownDeprecationMessage:"Use `#dev.containers.cacheVolume#` instead."},"dev.containers.cacheVolume":{scope:"application",type:"boolean",description:"Controls whether a Docker volume should be used to cache the VS Code server and extensions. Currently only applies to single container and not Docker Compose configurations.",default:!0},"remote.containers.copyGitConfig":{scope:"machine",deprecationMessage:"Use 'dev.containers.copyGitConfig' instead.",markdownDeprecationMessage:"Use `#dev.containers.copyGitConfig#` instead."},"dev.containers.copyGitConfig":{scope:"machine",type:"boolean",markdownDescription:"Controls whether the Git configuration (`~/.gitconfig`) should be copied into the container. This is done after installing any `#dotfiles.repository#` and will not overwrite an existing Git configuration file.",default:!0},"remote.containers.gitCredentialHelperConfigLocation":{scope:"machine",deprecationMessage:"Use 'dev.containers.gitCredentialHelperConfigLocation' instead.",markdownDeprecationMessage:"Use `#dev.containers.gitCredentialHelperConfigLocation#` instead."},"dev.containers.gitCredentialHelperConfigLocation":{scope:"machine",type:"string",enum:["system","global","none"],enumDescriptions:["Write to system config (`/etc/gitconfig`, requires root access).","Write to user config (`~/.gitconfig`).","Do not set a credential helper."],description:"Where to write the configuration for the Git credential helper.",default:"global"},"remote.containers.logLevel":{scope:"application",deprecationMessage:"Use 'dev.containers.logLevel' instead.",markdownDeprecationMessage:"Use `#dev.containers.logLevel#` instead."},"dev.containers.logLevel":{scope:"application",type:"string",description:"The log level for the extension.",default:"debug",enum:["info","debug","trace"]},"remote.containers.dockerPath":{scope:"application",deprecationMessage:"Use 'dev.containers.dockerPath' instead.",markdownDeprecationMessage:"Use `#dev.containers.dockerPath#` instead."},"dev.containers.dockerPath":{scope:"application",type:"string",description:"Docker (or Podman) executable name or path.",default:"docker"},"remote.containers.dockerComposePath":{scope:"application",deprecationMessage:"Use 'dev.containers.dockerComposePath' instead.",markdownDeprecationMessage:"Use `#dev.containers.dockerComposePath#` instead."},"dev.containers.dockerComposePath":{scope:"application",type:"string",description:"Docker Compose executable name or path.",default:"docker-compose"},"remote.containers.executeInWSL":{scope:"application",deprecationMessage:"Use 'dev.containers.executeInWSL' instead.",markdownDeprecationMessage:"Use `#dev.containers.executeInWSL#` instead."},"dev.containers.executeInWSL":{scope:"application",type:"boolean",description:"Controls whether CLI commands should always be executed in WSL. The default is to only execute in WSL for workspace folders in WSL. This setting has no effect on other platforms than Windows.",default:!1},"remote.containers.executeInWSLDistro":{scope:"application",deprecationMessage:"Use 'dev.containers.executeInWSLDistro' instead.",markdownDeprecationMessage:"Use `#dev.containers.executeInWSLDistro#` instead."},"dev.containers.executeInWSLDistro":{scope:"application",type:"string",markdownDescription:"WSL distro to use when not reopening a WSL folder. The default is to use the default WSL distro (see `wsl -l`). This setting has no effect when `#dev.containers.executeInWSL#` is not enabled or on other platforms than Windows."},"dotfiles.repository":{scope:"machine",type:"string",description:"URL of a dotfiles Git repository (e.g., https://github.com/owner/repository.git) or owner/repository of a GitHub repository."},"dotfiles.installCommand":{scope:"machine",type:"string",description:"The command to run after cloning the dotfiles repository. Defaults to run the first file of `install.sh`, `install`, `bootstrap.sh`, `bootstrap`, `setup.sh` and `setup` found in the dotfiles repository's root folder."},"dotfiles.targetPath":{scope:"machine",type:"string",description:"The path to clone the dotfiles repository to. Defaults to `~/dotfiles`.",default:"~/dotfiles"},"remote.containers.dotfiles.repository":{scope:"machine",deprecationMessage:"Use 'dotfiles.repository' instead.",markdownDeprecationMessage:"Use `#dotfiles.repository#` instead."},"remote.containers.dotfiles.installCommand":{scope:"machine",deprecationMessage:"Use 'dotfiles.installCommand' instead.",markdownDeprecationMessage:"Use `#dotfiles.installCommand#` instead."},"remote.containers.dotfiles.targetPath":{scope:"machine",description:"Deprecated setting. Use 'dotfiles.targetPath' instead.",deprecationMessage:"Use 'dotfiles.targetPath' instead.",markdownDeprecationMessage:"Use `#dotfiles.targetPath#` instead."},"remote.containers.repositoryConfigurationPaths":{scope:"application",description:"Deprecated setting. Use 'dev.containers.repositoryConfigurationPaths' instead.",deprecationMessage:"Use 'dev.containers.repositoryConfigurationPaths' instead.",markdownDeprecationMessage:"Use `#dev.containers.repositoryConfigurationPaths#` instead."},"dev.containers.repositoryConfigurationPaths":{scope:"application",type:"array",markdownDescription:"List of additional paths to search for [repository configurations](https://github.com/microsoft/vscode-dev-containers/tree/main/repository-containers).",default:[],items:{type:"string"}}}},commands:[{command:"remote-containers.reopenInContainer",title:"Reopen in Container",category:"Dev Containers"},{command:"remote-containers.rebuildAndReopenInContainer",title:"Rebuild and Reopen in Container",category:"Dev Containers"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",title:"Rebuild Without Cache and Reopen in Container",category:"Dev Containers"},{command:"remote-containers.reopenLocally",title:"Reopen Folder Locally",category:"Dev Containers"},{command:"remote-containers.reopenInWSL",title:"Reopen Folder in WSL",category:"Dev Containers"},{command:"remote-containers.reopenInSSH",title:"Reopen Folder in SSH",category:"Dev Containers"},{command:"remote-containers.openFolder",title:"Open Folder in Container...",category:"Dev Containers",icon:{light:"resources/light/reopen-folder.svg",dark:"resources/dark/reopen-folder.svg"}},{command:"remote-containers.startAndOpenFolder",title:"Open Folder in Container",category:"Dev Containers",icon:{light:"resources/light/reopen-folder.svg",dark:"resources/dark/reopen-folder.svg"}},{command:"remote-containers.openRepositoryInVolume",title:"Clone Repository in Named Container Volume...",category:"Dev Containers"},{command:"remote-containers.openRepositoryInUniqueVolume",title:"Clone Repository in Container Volume...",icon:"$(repo-clone)",category:"Dev Containers"},{command:"remote-containers.openRepositoryFromRemoteHubWithEditSession",title:"Clone Repository in a Container Volume",icon:"$(repo-clone)",category:"Dev Containers"},{command:"remote-containers.openPullRequestInVolume",title:"Clone GitHub Pull Request in Container Volume...",category:"Dev Containers"},{command:"remote-containers.inspectVolume",title:"Explore a Volume in a Dev Container...",category:"Dev Containers"},{command:"remote-containers.openWorkspace",title:"Open Workspace in Container...",category:"Dev Containers"},{command:"remote-containers.attachToRunningContainer",title:"Attach to Running Container...",category:"Dev Containers"},{command:"remote-containers.attachToRunningContainerFromViewlet",title:"Attach Visual Studio Code",category:"Dev Containers"},{command:"remote-containers.inspectVolumeFromViewlet",title:"Explore in a Dev Container",category:"Dev Containers"},{command:"remote-containers.cloneInVolumeFromViewlet",title:"Clone into existing Volume",category:"Dev Containers"},{command:"remote-containers.pruneVolumes",title:"Remove Unused Volumes...",category:"Dev Containers",icon:"$(clear-all)"},{command:"remote-containers.explorerVolumesRefresh",title:"Refresh",category:"Dev Containers",icon:"$(refresh)"},{command:"remote-containers.attachToK8sContainerFromViewlet",title:"Attach Visual Studio Code",category:"Dev Containers"},{command:"remote-containers.rebuildContainer",title:"Rebuild Container",category:"Dev Containers",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.rebuildContainerNoCache",title:"Rebuild Container Without Cache",category:"Dev Containers",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.createDevContainerFile",title:"Add Dev Container Configuration Files...",category:"Dev Containers"},{command:"remote-containers.createDevContainer",title:"Create Dev Container...",category:"Dev Containers"},{command:"remote-containers.settings",title:"Settings for Dev Containers",category:"Dev Containers"},{command:"remote-containers.getHelp",title:"Help for Dev Containers",category:"Dev Containers"},{command:"remote-containers.getStarted",title:"Getting Started with Dev Containers",category:"Dev Containers"},{command:"remote-containers.trySample",title:"Try a Dev Container Sample...",category:"Dev Containers"},{command:"remote-containers.reportIssue",title:"Report Issue with Dev Containers...",category:"Dev Containers"},{command:"remote-containers.provideFeedback",title:"Provide Feedback",category:"Dev Containers"},{command:"remote-containers.openDevContainerFile",title:"Open Container Configuration File",category:"Dev Containers",icon:{light:"resources/light/gear.svg",dark:"resources/dark/gear.svg"}},{command:"remote-containers.openAttachConfigByNameFile",title:"Open Named Container Configuration File",category:"Dev Containers"},{command:"remote-containers.openAttachDevContainerFile",title:"Open Attached Container Configuration File...",category:"Dev Containers"},{command:"remote-containers.revealLogTerminal",title:"Show Container Log",category:"Dev Containers"},{command:"remote-containers.openLogFile",title:"Show All Logs...",category:"Dev Containers Developer"},{command:"remote-containers.openLastLogFile",title:"Show Previous Log",category:"Dev Containers"},{command:"remote-containers.attachToContainer",title:"Attach to Container",category:"Dev Containers",icon:{light:"resources/light/empty-window.svg",dark:"resources/dark/empty-window.svg"}},{command:"remote-containers.attachToContainerNewWindow",title:"Attach in New Window",category:"Dev Containers"},{command:"remote-containers.stopContainer",title:"Stop Container",category:"Dev Containers"},{command:"remote-containers.startContainer",title:"Start Container",category:"Dev Containers",icon:{light:"resources/light/vm-start.svg",dark:"resources/dark/vm-start.svg"}},{command:"remote-containers.removeContainer",title:"Remove Container",category:"Dev Containers",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.removeRecentFolder",title:"Remove Recent Folder",category:"Dev Containers",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.showDetails",title:"Show Details",category:"Dev Containers"},{command:"remote-containers.explorerTargetsRefresh",title:"Refresh",category:"Dev Containers",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.explorerDetailsRefresh",title:"Refresh",category:"Dev Containers",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.inspectDockerResource",title:"Inspect",category:"Dev Containers"},{command:"remote-containers.inspectInBasicDevContainer",title:"Explore in Dev Container",category:"Dev Containers"},{command:"remote-containers.cloneInVolume",title:"Clone Repository in Volume",category:"Dev Containers"},{command:"remote-containers.removeVolume",title:"Remove",category:"Dev Containers"},{command:"remote-containers.newContainer",title:"New Container",category:"Dev Containers",icon:{light:"resources/light/plus.svg",dark:"resources/dark/plus.svg"}},{command:"remote-containers.showContainerLog",title:"Show Container Log",category:"Dev Containers"},{command:"remote-containers.addExtensionToConfig",title:"Add to devcontainer.json",category:"Dev Containers"},{command:"remote-containers.checkoutPRInVolume",title:"Checkout Pull Request in Dev Container",category:"Dev Containers"},{command:"remote-containers.showReopenInContainerNotificationReset",title:"Reset Don't Show Reopen Notification",category:"Dev Containers"},{command:"remote-containers.showRecoveryContainerNotificationReset",title:"Reset Don't Show Recovery Container Notification",category:"Dev Containers"},{command:"remote-containers.labelPortAndUpdateConfig",title:"Set Label and Update devcontainer.json",category:"Dev Containers",icon:"$(tag)"},{command:"remote-containers.installDocker",title:"Install Docker",category:"Dev Containers"},{command:"remote-containers.installUserCLI",title:"Install devcontainer CLI",category:"Dev Containers"},{command:"remote-containers.configureContainerFeatures",title:"Configure Container Features...",category:"Dev Containers"}],menus:{commandPalette:[{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && remoteName == dev-container && isRecoveryContainer"},{command:"remote-containers.rebuildAndReopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildAndReopenInContainer",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.reopenLocally",when:"canReopenLocally"},{command:"remote-containers.reopenInWSL",when:"canReopenInWSL"},{command:"remote-containers.reopenInSSH",when:"canReopenInSSH"},{command:"remote-containers.openFolder",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openRepositoryInVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openPullRequestInVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.createDevContainer",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openWorkspace",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.attachToRunningContainer",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.attachToRunningContainerFromViewlet",when:"false"},{command:"remote-containers.inspectVolumeFromViewlet",when:"false"},{command:"remote-containers.openRepositoryFromRemoteHubWithEditSession",when:"false"},{command:"remote-containers.cloneInVolumeFromViewlet",when:"false"},{command:"remote-containers.inspectInBasicDevContainer",when:"false"},{command:"remote-containers.cloneInVolume",when:"false"},{command:"remote-containers.removeVolume",when:"false"},{command:"remote-containers.attachToK8sContainerFromViewlet",when:"false"},{command:"remote-containers.checkoutPRInVolume",when:"false"},{command:"remote-containers.rebuildContainer",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.rebuildContainerNoCache",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.createDevContainerFile",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",when:"remoteName =~ /^(dev-container|wsl|ssh-remote)$/"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.openDevContainerFile",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.openAttachConfigByNameFile",when:"remoteName == attached-container"},{command:"remote-containers.openAttachDevContainerFile",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.getStarted",when:"false"},{command:"remote-containers.trySample",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.trySample",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.provideFeedback",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.attachToContainer",when:"false"},{command:"remote-containers.attachToContainerNewWindow",when:"false"},{command:"remote-containers.stopContainer",when:"false"},{command:"remote-containers.removeContainer",when:"false"},{command:"remote-containers.startContainer",when:"false"},{command:"remote-containers.removeRecentFolder",when:"false"},{command:"remote-containers.showDetails",when:"false"},{command:"remote-containers.explorerTargetsRefresh",when:"false"},{command:"remote-containers.explorerVolumesRefresh",when:"false"},{command:"remote-containers.explorerDetailsRefresh",when:"false"},{command:"remote-containers.inspectDockerResource",when:"false"},{command:"remote-containers.startAndOpenFolder",when:"false"},{command:"remote-containers.newContainer",when:"false"},{command:"remote-containers.showContainerLog",when:"false"},{command:"remote-containers.labelPortAndUpdateConfig",when:"false"},{command:"remote-containers.addExtensionToConfig",when:"false"},{command:"remote-containers.configureContainerFeatures",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.configureContainerFeatures",when:"remoteName =~ /^(dev-container|wsl|ssh-remote)$/"}],"statusBar/remoteIndicator":[{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@1",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@1",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_2_actions@2",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_2_actions@2",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.createDevContainer",group:"remote_30_dev-container_2_actions@4",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainer",group:"remote_30_dev-container_2_actions@4",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@5",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@5",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_2_actions@6",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_2_actions@6",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@7",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@7",when:"remoteName =~ /^(dev-container|wsl|ssh-remote)$/"},{command:"remote-containers.trySample",group:"remote_30_dev-container_2_actions@8",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.trySample",group:"remote_30_dev-container_2_actions@8",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.getStarted",group:"remote_30_dev-container_2_actions@9",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.getStarted",group:"remote_30_dev-container_2_actions@9",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.reopenInWSL",group:"remote_30_dev-container_1_actions@1",when:"canReopenInWSL"},{command:"remote-containers.reopenInSSH",group:"remote_30_dev-container_1_actions@1",when:"canReopenInSSH"},{command:"remote-containers.reopenLocally",group:"remote_30_dev-container_1_actions@2",when:"canReopenLocally"},{command:"remote-containers.rebuildContainer",group:"remote_30_dev-container_1_actions@3",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.openDevContainerFile",group:"remote_30_dev-container_1_actions@4",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.revealLogTerminal",group:"remote_30_dev-container_1_actions@5",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_1_actions@6",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/ && remoteConnectionState == connected"},{command:"remote-containers.createDevContainer",group:"remote_30_dev-container_1_actions@8",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/ && remoteConnectionState == connected"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_1_actions@9",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/ && remoteConnectionState == connected"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_1_actions@10",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.settings",group:"remote_30_dev-container_9_help@1",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.reportIssue",group:"remote_30_dev-container_9_help@2",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.getHelp",group:"remote_30_dev-container_9_help@4",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"}],"view/title":[{command:"remote-containers.explorerTargetsRefresh",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation"},{command:"remote-containers.newContainer",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation"},{command:"remote-containers.explorerDetailsRefresh",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.attachToContainer",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.rebuildContainer",when:"view == detailsContainers && remoteName == dev-container",group:"navigation"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && remoteName =~ /^(dev|attached)-container$/",group:"navigation"},{command:"remote-containers.pruneVolumes",when:"view == devVolumes",group:"navigation@2"},{command:"remote-containers.explorerVolumesRefresh",when:"view == devVolumes",group:"navigation@3"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"view == devVolumes",group:"navigation@1"}],"view/item/context":[{command:"remote-containers.attachToRunningContainerFromViewlet",when:"view == dockerContainers && viewItem =~ /^runningContainer$/i && vscode-docker:aciContext != true",group:"containers_1_general@2"},{command:"remote-containers.inspectVolumeFromViewlet",when:"view == dockerVolumes && viewItem == volume && vscode-docker:aciContext != true",group:"volumes_1_general@2"},{command:"remote-containers.checkoutPRInVolume",when:"view =~ /pr:/ && viewItem =~ /pullrequest(:local)?:nonactive|description/"},{command:"remote-containers.attachToK8sContainerFromViewlet",group:"2@4",when:"remoteName =~ /^(wsl)?$/ && view == extension.vsKubernetesExplorer && viewItem =~ /vsKubernetes\\.resource\\.pod/i"},{command:"remote-containers.startAndOpenFolder",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"1_folder@1"},{command:"remote-containers.startAndOpenFolder",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"inline@1"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"2_folder@1"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"inline@2"},{command:"workbench.action.closeFolder",when:"view == targetsContainers && viewItem =~ /active.*Folder/",group:"1_folder@1"},{command:"remote-containers.reopenLocally",when:"canReopenLocally && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInWSL",when:"canReopenInWSL && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInSSH",when:"canReopenInSSH && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.attachToContainer",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container/",group:"1_container@1"},{command:"remote-containers.attachToContainer",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container/",group:"inline@1"},{command:"remote-containers.attachToContainerNewWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container/",group:"1_container@2"},{command:"remote-containers.stopContainer",when:"view == targetsContainers && viewItem =~ /^(active|running)(Dev|)Container/",group:"2_container@2"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"2_container@3"},{command:"remote-containers.rebuildContainer",when:"view == targetsContainers && viewItem =~ /activeDevContainer/",group:"2_container@1"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"inline@2"},{command:"remote-containers.startContainer",when:"view == targetsContainers && viewItem =~ /^exited(Dev|)Container/",group:"1_container@3"},{command:"remote-containers.showDetails",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@4"},{command:"remote-containers.inspectDockerResource",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@5"},{command:"remote-containers.showContainerLog",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@6"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && viewItem == devContainer"},{command:"remote-containers.inspectDockerResource",when:"view == detailsContainers && viewItem =~ /^(image|volume)$/"},{command:"remote-containers.cloneInVolume",when:"view == devVolumes && viewItem =~ /^(devVolume)$/",group:"1_volumes@1"},{command:"remote-containers.inspectInBasicDevContainer",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@1"},{command:"remote-containers.inspectDockerResource",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@2"},{command:"remote-containers.removeVolume",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"3_volumes-destructive@1"}],"ports/item/port/inline":[{command:"remote-containers.labelPortAndUpdateConfig",group:"0_manage@4",when:"remoteName =~ /^(dev|attached)-container$/ && tunnelType == Forwarded"}],"extension/context":[{command:"remote-containers.addExtensionToConfig",group:"2_configure",when:"!isBuiltinExtension && remoteName =~ /^(dev-container|attached-container|wsl|ssh-remote)?$/"}]},resourceLabelFormatters:[{scheme:"vscode-remote",authority:"dev-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Dev Container"}},{scheme:"vscode-remote",authority:"attached-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Container"}},{scheme:"vscode-remote",authority:"exec+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Exec"}},{scheme:"vscode-remote",authority:"k8s-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Kubernetes"}}],views:{remote:[{id:"targetsContainers",name:"Containers",group:"targets@2",remoteName:["dev-container","attached-container","exec","k8s-container"]},{id:"detailsContainers",name:"Details (Containers)",when:"remote-containers:showDetails",group:"details@1",remoteName:["dev-container","attached-container"]},{id:"devVolumes",name:"DevVolumes",group:"details@2",remoteName:["dev-container","attached-container"]}]},viewsWelcome:[{view:"targetsContainers",when:"remote-containers:needsDockerStartOrInstall",contents:"Get started with containers by [installing Docker](command:remote-containers.installDocker) or by visiting the [help view](command:~remote.helpPanel.focus). [Refresh](command:remote-containers.explorerTargetsRefresh) after installation and startup."},{view:"targetsContainers",when:"remote-containers:needsSSHCredentials",contents:"[Refresh](command:remote-containers.explorerTargetsRefresh) to provide SSH credentials."},{view:"targetsContainers",when:"remote-containers:noContainersWithFolder",contents:`Get started with containers by running one of the [Dev Containers](command:remote-containers.newContainer) commands.
You can [reopen the current folder in a container](command:remote-containers.reopenInContainer), or open another folder in a container.
[Open Folder in Container](command:remote-containers.openFolder)
If you're new to containers and want to [try a sample](command:remote-containers.trySample), there are several to choose from.`},{view:"targetsContainers",when:"remote-containers:noContainersWithoutFolder",contents:`Get started with containers by running one of the [Dev Containers](command:remote-containers.newContainer) commands.
You can open an existing folder in a container.
[Open Folder in Container](command:remote-containers.openFolder)
If you're new to containers and want to [try a sample](command:remote-containers.trySample), there are several to choose from.`},{view:"devVolumes",when:"remote-containers:noDevVolumes",contents:`If there's a repository you want to work with you can clone that directly in a container volume.
[Clone Repository in Container Volume](command:remote-containers.openRepositoryInUniqueVolume)
`}],remoteHelp:{getStarted:"https://aka.ms/vscode-remote/containers/tutorial-sandbox",feedback:"https://aka.ms/vscode-remote/containers/provide-feedback",documentation:"https://aka.ms/vscode-remote/containers",issues:"https://aka.ms/vscode-remote/containers/issues",remoteName:["dev-container","attached-container","exec","k8s-container"]}},scripts:{"vscode:prepublish":"npx npm-run-all --npm-path npm clean definitions compile-prod dev-containers-user-cli-prepare",compile:"npx npm-run-all --npm-path npm clean-dist definitions compile-dev",watch:"npx npm-run-all --npm-path npm clean-dist definitions compile-watch",postinstall:"yarn --cwd node_modules/@devcontainers/cli",precommit:"node build/hygiene.js",package:"vsce package --yarn",definitions:"npx npm-run-all --npm-path npm definitions-clean definitions-copy",lint:"eslint -c .eslintrc.js --rulesdir ./build/eslint --max-warnings 0 --ext .ts ./src ./test","compile-prod":"npx npm-run-all --npm-path npm compile-cli-prod copy-cli esbuild-prod","compile-dev":"npx npm-run-all --npm-path npm compile-cli-dev copy-cli esbuild-dev","compile-watch":"npx npm-run-all --npm-path npm --parallel compile-cli-watch watch-cli esbuild-watch","esbuild-prod":"node esbuild.js --production","esbuild-dev":"node esbuild.js","esbuild-watch":"node esbuild.js --watch","compile-cli-prod":"yarn --cwd node_modules/@devcontainers/cli compile-prod","compile-cli-dev":"yarn --cwd node_modules/@devcontainers/cli compile-dev","compile-cli-watch":"yarn --cwd node_modules/@devcontainers/cli compile-watch","copy-cli":'copyfiles --up 4 --all "node_modules/@devcontainers/cli/dist/spec-node/devContainersSpecCLI.js" dist',"watch-cli":"npm-watch","type-check":"npx npm-run-all --npm-path npm clean-built tsc-b","tsc-b":"tsc -b","type-check-watch":"npx npm-run-all --npm-path npm clean-built tsc-b-w","tsc-b-w":"tsc -b -w","definitions-clean":"rimraf dist/node_modules/vscode-dev-containers","definitions-copy":'copyfiles --up 3 --all "node_modules/@devcontainers/cli/node_modules/vscode-dev-containers/**/*" dist',"dev-containers-cli-publish":"npx npm-run-all --npm-path npm dev-containers-cli-prepare dev-containers-cli-npm-publish","dev-containers-cli-package":"npx npm-run-all --npm-path npm dev-containers-cli-prepare dev-containers-cli-npm-pack","dev-containers-cli-prepare":"npx npm-run-all --npm-path npm clean dev-containers-cli-compile dev-containers-cli-copy-module dev-containers-cli-copy-definitions","dev-containers-cli-compile":"npx npm-run-all --npm-path npm compile-prod","dev-containers-cli-copy-module":'copyfiles ThirdPartyNotices.txt dist/node/devContainersCLI.js dist/spec-node/devContainersSpecCLI.js "scripts/**/*" dev-containers-cli',"dev-containers-cli-copy-definitions":'copyfiles --up 3 --all "node_modules/@devcontainers/cli/node_modules/vscode-dev-containers/**/*" dev-containers-cli/dist',"dev-containers-cli-npm-publish":"cd dev-containers-cli && npm publish","dev-containers-cli-npm-pack":"cd dev-containers-cli && npm pack","dev-containers-user-cli-package":"npx npm-run-all --npm-path npm dev-containers-user-cli-prepare dev-containers-user-cli-npm-pack","dev-containers-user-cli-prepare":"npx npm-run-all --npm-path npm dev-containers-user-cli-copy-module dev-containers-user-cli-copy-definitions","dev-containers-user-cli-clean-prepare":"npx npm-run-all --npm-path npm clean dev-containers-user-prepare","dev-containers-user-cli-copy-module":'copyfiles ThirdPartyNotices.txt dist/node/devContainersUserCLI.js dist/spec-node/devContainersSpecCLI.js "scripts/**/*" dev-containers-user-cli',"dev-containers-user-cli-copy-definitions":'copyfiles --up 3 --all "node_modules/@devcontainers/cli/node_modules/vscode-dev-containers/**/*" dev-containers-user-cli/dist',"dev-containers-user-cli-npm-pack":"cd dev-containers-user-cli && npm pack",clean:"npx npm-run-all --npm-path npm clean-dist clean-built","clean-dist":"rimraf dist dev-containers-cli/dist dev-containers-cli/scripts dev-containers-user-cli/dist dev-containers-user-cli/scripts","clean-built":"rimraf built",test:"env TS_NODE_PROJECT=test/core/tsconfig.json mocha -r ts-node/register --exit test/core/**/*.test.ts","test-matrix":"env TS_NODE_PROJECT=test/core/tsconfig.json mocha -r ts-node/register --exit","test-no-env":"mocha -r ts-node/register --exit test/core/**/*.test.ts","test-dev-containers":"env TS_NODE_PROJECT=test/dev-containers/tsconfig.json mocha -r ts-node/register --exit test/dev-containers/**/*.test.ts",copytestconfigsforalpine:"/bin/bash -c 'cd test/configs && for f in *; do if [[ -d $f ]] && [[ $f != *alpine* ]]; then cp -r -T $f $f-alpine ; fi ; done'"},watch:{"copy-cli":"node_modules/@devcontainers/cli/dist/spec-node/devContainersSpecCLI.js"},devDependencies:{"@types/chai":"^4.3.4","@types/follow-redirects":"^1.14.1","@types/js-yaml":"^4.0.5","@types/markdown-it":"^12.2.3","@types/minimist":"^1.2.2","@types/mocha":"^10.0.1","@types/ncp":"^2.0.5","@types/node":"^18.11.11","@types/pull-stream":"^3.6.2","@types/recursive-readdir":"^2.2.1","@types/semver":"^7.3.13","@types/shell-quote":"^1.7.1","@types/stats-lite":"^2.2.0","@types/tar":"^6.1.3","@types/uuid":"^9.0.0","@types/vscode":"~1.71.0","@types/yargs":"^17.0.16","@typescript-eslint/eslint-plugin":"^5.45.1","@typescript-eslint/experimental-utils":"^5.45.1","@typescript-eslint/parser":"^5.45.1",ajv:"^8.11.2",chai:"^4.3.7",copyfiles:"^2.4.1",esbuild:"^0.16.1",eslint:"^8.29.0","event-stream":"^4.0.1","gulp-eslint":"^6.0.0","gulp-filter":"^7.0.0",husky:"^8.0.2",jsonc:"^2.0.0",mocha:"^10.1.0","mocha-junit-reporter":"^2.2.0","npm-run-all":"^4.1.5","npm-watch":"^0.11.0","p-all":"^4.0.0",rimraf:"^3.0.2","ts-node":"^10.9.1",typescript:"^4.9.3","typescript-formatter":"^7.2.2",vinyl:"^3.0.0","vinyl-fs":"^3.0.3",vsce:"^2.15.0"},dependencies:{"@devcontainers/cli":"https://github.com/devcontainers/cli.git#8d9cb7f2b0dcc395165ca1b37dad6c6fff3d8274","@vscode/extension-telemetry":"^0.6.2",applicationinsights:"^2.3.6","find-process":"^1.4.7","follow-redirects":"^1.15.2","js-yaml":"^4.1.0","jsonc-parser":"^3.2.0","markdown-it":"^13.0.1",minimist:"^1.2.7",muxrpc:"^6.7.3","node-pty":"^0.10.1","pull-pushable":"^2.2.0","pull-stream":"^3.7.0","pull-stream-to-stream":"^2.0.0",semver:"^7.3.8","shell-quote":"^1.7.4","stats-lite":"^2.2.0","stream-to-pull-stream":"^1.7.3",tar:"^6.1.12",uuid:"^9.0.0","vscode-tas-client":"^0.1.63","vscode-uri":"^3.0.6",yaml:"^2.1.3",yargs:"~17.6.2"}}});var moe={};xE(moe,{activate:()=>Une,attachToContainer:()=>lE,deactivate:()=>Bne});module.exports=sV(moe);var q=ce(require("vscode")),w2=ce(require("os")),gE=ce(require("fs")),Yt=ce(require("path")),E2=ce(require("querystring"));function uf(e,t=!1){let r=e.length,n=0,o="",i=0,s=16,a=0,c=0,u=0,l=0,d=0;function f(E,C){let S=0,x=0;for(;S<E||!C;){let I=e.charCodeAt(n);if(I>=48&&I<=57)x=x*16+I-48;else if(I>=65&&I<=70)x=x*16+I-65+10;else if(I>=97&&I<=102)x=x*16+I-97+10;else break;n++,S++}return S<E&&(x=-1),x}function p(E){n=E,o="",i=0,s=16,d=0}function m(){let E=n;if(e.charCodeAt(n)===48)n++;else for(n++;n<e.length&&Au(e.charCodeAt(n));)n++;if(n<e.length&&e.charCodeAt(n)===46)if(n++,n<e.length&&Au(e.charCodeAt(n)))for(n++;n<e.length&&Au(e.charCodeAt(n));)n++;else return d=3,e.substring(E,n);let C=n;if(n<e.length&&(e.charCodeAt(n)===69||e.charCodeAt(n)===101))if(n++,(n<e.length&&e.charCodeAt(n)===43||e.charCodeAt(n)===45)&&n++,n<e.length&&Au(e.charCodeAt(n))){for(n++;n<e.length&&Au(e.charCodeAt(n));)n++;C=n}else d=3;return e.substring(E,C)}function h(){let E="",C=n;for(;;){if(n>=r){E+=e.substring(C,n),d=2;break}let S=e.charCodeAt(n);if(S===34){E+=e.substring(C,n),n++;break}if(S===92){if(E+=e.substring(C,n),n++,n>=r){d=2;break}switch(e.charCodeAt(n++)){case 34:E+='"';break;case 92:E+="\\";break;case 47:E+="/";break;case 98:E+="\b";break;case 102:E+="\f";break;case 110:E+=`
`;break;case 114:E+="\r";break;case 116:E+="	";break;case 117:let I=f(4,!0);I>=0?E+=String.fromCharCode(I):d=4;break;default:d=5}C=n;continue}if(S>=0&&S<=31)if(cf(S)){E+=e.substring(C,n),d=2;break}else d=6;n++}return E}function g(){if(o="",d=0,i=n,c=a,l=u,n>=r)return i=r,s=17;let E=e.charCodeAt(n);if(PE(E)){do n++,o+=String.fromCharCode(E),E=e.charCodeAt(n);while(PE(E));return s=15}if(cf(E))return n++,o+=String.fromCharCode(E),E===13&&e.charCodeAt(n)===10&&(n++,o+=`
`),a++,u=n,s=14;switch(E){case 123:return n++,s=1;case 125:return n++,s=2;case 91:return n++,s=3;case 93:return n++,s=4;case 58:return n++,s=6;case 44:return n++,s=5;case 34:return n++,o=h(),s=10;case 47:let C=n-1;if(e.charCodeAt(n+1)===47){for(n+=2;n<r&&!cf(e.charCodeAt(n));)n++;return o=e.substring(C,n),s=12}if(e.charCodeAt(n+1)===42){n+=2;let S=r-1,x=!1;for(;n<S;){let I=e.charCodeAt(n);if(I===42&&e.charCodeAt(n+1)===47){n+=2,x=!0;break}n++,cf(I)&&(I===13&&e.charCodeAt(n)===10&&n++,a++,u=n)}return x||(n++,d=1),o=e.substring(C,n),s=13}return o+=String.fromCharCode(E),n++,s=16;case 45:if(o+=String.fromCharCode(E),n++,n===r||!Au(e.charCodeAt(n)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return o+=m(),s=11;default:for(;n<r&&v(E);)n++,E=e.charCodeAt(n);if(i!==n){switch(o=e.substring(i,n),o){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return o+=String.fromCharCode(E),n++,s=16}}function v(E){if(PE(E)||cf(E))return!1;switch(E){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function w(){let E;do E=g();while(E>=12&&E<=15);return E}return{setPosition:p,getPosition:()=>n,scan:t?w:g,getToken:()=>s,getTokenValue:()=>o,getTokenOffset:()=>i,getTokenLength:()=>n-i,getTokenStartLine:()=>c,getTokenStartCharacter:()=>i-l,getTokenError:()=>d}}function PE(e){return e===32||e===9}function cf(e){return e===10||e===13}function Au(e){return e>=48&&e<=57}var TT;(function(e){e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.space=32]="space",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.asterisk=42]="asterisk",e[e.backslash=92]="backslash",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.plus=43]="plus",e[e.slash=47]="slash",e[e.formFeed=12]="formFeed",e[e.tab=9]="tab"})(TT||(TT={}));function TE(e,t,r){let n,o,i,s,a;if(t){for(s=t.offset,a=s+t.length,i=s;i>0&&!lf(e,i-1);)i--;let E=a;for(;E<e.length&&!lf(e,E);)E++;o=e.substring(i,E),n=cV(o,r)}else o=e,n=0,i=0,s=0,a=e.length;let c=uV(r,e),u=0,l=0,d;r.insertSpaces?d=Ou(" ",r.tabSize||4):d="	";let f=uf(o,!1),p=!1;function m(){return u>1?Ou(c,u)+Ou(d,n+l):c+Ou(d,n+l)}function h(){let E=f.scan();for(u=0;E===15||E===14;)E===14&&r.keepLines?u+=1:E===14&&(u=1),E=f.scan();return p=E===16||f.getTokenError()!==0,E}let g=[];function v(E,C,S){!p&&(!t||C<a&&S>s)&&e.substring(C,S)!==E&&g.push({offset:C,length:S-C,content:E})}let w=h();if(r.keepLines&&u>0&&v(Ou(c,u),0,0),w!==17){let E=f.getTokenOffset()+i,C=Ou(d,n);v(C,i,E)}for(;w!==17;){let E=f.getTokenOffset()+f.getTokenLength()+i,C=h(),S="",x=!1;for(;u===0&&(C===12||C===13);){let P=f.getTokenOffset()+i;v(" ",E,P),E=f.getTokenOffset()+f.getTokenLength()+i,x=C===12,S=x?m():"",C=h()}if(C===2)w!==1&&l--,r.keepLines&&u>0||!r.keepLines&&w!==1?S=m():r.keepLines&&(S=" ");else if(C===4)w!==3&&l--,r.keepLines&&u>0||!r.keepLines&&w!==3?S=m():r.keepLines&&(S=" ");else{switch(w){case 3:case 1:l++,r.keepLines&&u>0||!r.keepLines?S=m():S=" ";break;case 5:r.keepLines&&u>0||!r.keepLines?S=m():S=" ";break;case 12:S=m();break;case 13:u>0?S=m():x||(S=" ");break;case 6:r.keepLines&&u>0?S=m():x||(S=" ");break;case 10:r.keepLines&&u>0?S=m():C===6&&!x&&(S="");break;case 7:case 8:case 9:case 11:case 2:case 4:r.keepLines&&u>0?S=m():(C===12||C===13)&&!x?S=" ":C!==5&&C!==17&&(p=!0);break;case 16:p=!0;break}u>0&&(C===12||C===13)&&(S=m())}C===17&&(r.keepLines&&u>0?S=m():S=r.insertFinalNewline?c:"");let I=f.getTokenOffset()+i;v(S,E,I),w=C}return g}function Ou(e,t){let r="";for(let n=0;n<t;n++)r+=e;return r}function cV(e,t){let r=0,n=0,o=t.tabSize||4;for(;r<e.length;){let i=e.charAt(r);if(i===" ")n++;else if(i==="	")n+=o;else break;r++}return Math.floor(n/o)}function uV(e,t){for(let r=0;r<t.length;r++){let n=t.charAt(r);if(n==="\r")return r+1<t.length&&t.charAt(r+1)===`
`?`\r
`:"\r";if(n===`
`)return`
`}return e&&e.eol||`
`}function lf(e,t){return`\r
`.indexOf(e.charAt(t))!==-1}var df;(function(e){e.DEFAULT={allowTrailingComma:!1}})(df||(df={}));function IT(e,t){let r=[],n=new Object,o,i={value:{},offset:0,length:0,type:"object",parent:void 0},s=!1;function a(c,u,l,d){i.value=c,i.offset=u,i.length=l,i.type=d,i.colonOffset=void 0,o=i}try{fh(e,{onObjectBegin:(c,u)=>{if(t<=c)throw n;o=void 0,s=t>c,r.push("")},onObjectProperty:(c,u,l)=>{if(t<u||(a(c,u,l,"property"),r[r.length-1]=c,t<=u+l))throw n},onObjectEnd:(c,u)=>{if(t<=c)throw n;o=void 0,r.pop()},onArrayBegin:(c,u)=>{if(t<=c)throw n;o=void 0,r.push(0)},onArrayEnd:(c,u)=>{if(t<=c)throw n;o=void 0,r.pop()},onLiteralValue:(c,u,l)=>{if(t<u||(a(c,u,l,RT(c)),t<=u+l))throw n},onSeparator:(c,u,l)=>{if(t<=u)throw n;if(c===":"&&o&&o.type==="property")o.colonOffset=u,s=!1,o=void 0;else if(c===","){let d=r[r.length-1];typeof d=="number"?r[r.length-1]=d+1:(s=!0,r[r.length-1]=""),o=void 0}}})}catch(c){if(c!==n)throw c}return{path:r,previousNode:o,isAtPropertyKey:s,matches:c=>{let u=0;for(let l=0;u<c.length&&l<r.length;l++)if(c[u]===r[l]||c[u]==="*")u++;else if(c[u]!=="**")return!1;return u===c.length}}}function DT(e,t=[],r=df.DEFAULT){let n=null,o=[],i=[];function s(c){Array.isArray(o)?o.push(c):n!==null&&(o[n]=c)}return fh(e,{onObjectBegin:()=>{let c={};s(c),i.push(o),o=c,n=null},onObjectProperty:c=>{n=c},onObjectEnd:()=>{o=i.pop()},onArrayBegin:()=>{let c=[];s(c),i.push(o),o=c,n=null},onArrayEnd:()=>{o=i.pop()},onLiteralValue:s,onError:(c,u,l)=>{t.push({error:c,offset:u,length:l})}},r),o[0]}function dh(e,t=[],r=df.DEFAULT){let n={type:"array",offset:-1,length:-1,children:[],parent:void 0};function o(c){n.type==="property"&&(n.length=c-n.offset,n=n.parent)}function i(c){return n.children.push(c),c}fh(e,{onObjectBegin:c=>{n=i({type:"object",offset:c,length:-1,parent:n,children:[]})},onObjectProperty:(c,u,l)=>{n=i({type:"property",offset:u,length:-1,parent:n,children:[]}),n.children.push({type:"string",value:c,offset:u,length:l,parent:n})},onObjectEnd:(c,u)=>{o(c+u),n.length=c+u-n.offset,n=n.parent,o(c+u)},onArrayBegin:(c,u)=>{n=i({type:"array",offset:c,length:-1,parent:n,children:[]})},onArrayEnd:(c,u)=>{n.length=c+u-n.offset,n=n.parent,o(c+u)},onLiteralValue:(c,u,l)=>{i({type:RT(c),offset:u,length:l,parent:n,value:c}),o(u+l)},onSeparator:(c,u,l)=>{n.type==="property"&&(c===":"?n.colonOffset=u:c===","&&o(u))},onError:(c,u,l)=>{t.push({error:c,offset:u,length:l})}},r);let a=n.children[0];return a&&delete a.parent,a}function ff(e,t){if(!e)return;let r=e;for(let n of t)if(typeof n=="string"){if(r.type!=="object"||!Array.isArray(r.children))return;let o=!1;for(let i of r.children)if(Array.isArray(i.children)&&i.children[0].value===n&&i.children.length===2){r=i.children[1],o=!0;break}if(!o)return}else{let o=n;if(r.type!=="array"||o<0||!Array.isArray(r.children)||o>=r.children.length)return;r=r.children[o]}return r}function lh(e){switch(e.type){case"array":return e.children.map(lh);case"object":let t=Object.create(null);for(let r of e.children){let n=r.children[1];n&&(t[r.children[0].value]=lh(n))}return t;case"null":case"string":case"number":case"boolean":return e.value;default:return}}function fh(e,t,r=df.DEFAULT){let n=uf(e,!1),o=[];function i(k){return k?()=>k(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter()):()=>!0}function s(k){return k?()=>k(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter(),()=>o.slice()):()=>!0}function a(k){return k?U=>k(U,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter()):()=>!0}function c(k){return k?U=>k(U,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter(),()=>o.slice()):()=>!0}let u=s(t.onObjectBegin),l=c(t.onObjectProperty),d=i(t.onObjectEnd),f=s(t.onArrayBegin),p=i(t.onArrayEnd),m=c(t.onLiteralValue),h=a(t.onSeparator),g=i(t.onComment),v=a(t.onError),w=r&&r.disallowComments,E=r&&r.allowTrailingComma;function C(){for(;;){let k=n.scan();switch(n.getTokenError()){case 4:S(14);break;case 5:S(15);break;case 3:S(13);break;case 1:w||S(11);break;case 2:S(12);break;case 6:S(16);break}switch(k){case 12:case 13:w?S(10):g();break;case 16:S(1);break;case 15:case 14:break;default:return k}}}function S(k,U=[],W=[]){if(v(k),U.length+W.length>0){let j=n.getToken();for(;j!==17;){if(U.indexOf(j)!==-1){C();break}else if(W.indexOf(j)!==-1)break;j=C()}}}function x(k){let U=n.getTokenValue();return k?m(U):(l(U),o.push(U)),C(),!0}function I(){switch(n.getToken()){case 11:let k=n.getTokenValue(),U=Number(k);isNaN(U)&&(S(2),U=0),m(U);break;case 7:m(null);break;case 8:m(!0);break;case 9:m(!1);break;default:return!1}return C(),!0}function P(){return n.getToken()!==10?(S(3,[],[2,5]),!1):(x(!1),n.getToken()===6?(h(":"),C(),R()||S(4,[],[2,5])):S(5,[],[2,5]),o.pop(),!0)}function T(){u(),C();let k=!1;for(;n.getToken()!==2&&n.getToken()!==17;){if(n.getToken()===5){if(k||S(4,[],[]),h(","),C(),n.getToken()===2&&E)break}else k&&S(6,[],[]);P()||S(4,[],[2,5]),k=!0}return d(),n.getToken()!==2?S(7,[2],[]):C(),!0}function D(){f(),C();let k=!0,U=!1;for(;n.getToken()!==4&&n.getToken()!==17;){if(n.getToken()===5){if(U||S(4,[],[]),h(","),C(),n.getToken()===4&&E)break}else U&&S(6,[],[]);k?(o.push(0),k=!1):o[o.length-1]++,R()||S(4,[],[4,5]),U=!0}return p(),k||o.pop(),n.getToken()!==4?S(8,[4],[]):C(),!0}function R(){switch(n.getToken()){case 3:return D();case 1:return T();case 10:return x(!0);default:return I()}}return C(),n.getToken()===17?r.allowEmptyContent?!0:(S(4,[],[]),!1):R()?(n.getToken()!==17&&S(9,[],[]),!0):(S(4,[],[]),!1)}function RT(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":{if(e){if(Array.isArray(e))return"array"}else return"null";return"object"}default:return"null"}}function kT(e,t,r,n){let o=t.slice(),s=dh(e,[]),a,c;for(;o.length>0&&(c=o.pop(),a=ff(s,o),a===void 0&&r!==void 0);)typeof c=="string"?r={[c]:r}:r=[r];if(a)if(a.type==="object"&&typeof c=="string"&&Array.isArray(a.children)){let u=ff(a,[c]);if(u!==void 0)if(r===void 0){if(!u.parent)throw new Error("Malformed AST");let l=a.children.indexOf(u.parent),d,f=u.parent.offset+u.parent.length;if(l>0){let p=a.children[l-1];d=p.offset+p.length}else d=a.offset+1,a.children.length>1&&(f=a.children[1].offset);return rc(e,{offset:d,length:f-d,content:""},n)}else return rc(e,{offset:u.offset,length:u.length,content:JSON.stringify(r)},n);else{if(r===void 0)return[];let l=`${JSON.stringify(c)}: ${JSON.stringify(r)}`,d=n.getInsertionIndex?n.getInsertionIndex(a.children.map(p=>p.children[0].value)):a.children.length,f;if(d>0){let p=a.children[d-1];f={offset:p.offset+p.length,length:0,content:","+l}}else a.children.length===0?f={offset:a.offset+1,length:0,content:l}:f={offset:a.offset+1,length:0,content:l+","};return rc(e,f,n)}}else if(a.type==="array"&&typeof c=="number"&&Array.isArray(a.children)){let u=c;if(u===-1){let l=`${JSON.stringify(r)}`,d;if(a.children.length===0)d={offset:a.offset+1,length:0,content:l};else{let f=a.children[a.children.length-1];d={offset:f.offset+f.length,length:0,content:","+l}}return rc(e,d,n)}else if(r===void 0&&a.children.length>=0){let l=c,d=a.children[l],f;if(a.children.length===1)f={offset:a.offset+1,length:a.length-2,content:""};else if(a.children.length-1===l){let p=a.children[l-1],m=p.offset+p.length,h=a.offset+a.length;f={offset:m,length:h-2-m,content:""}}else f={offset:d.offset,length:a.children[l+1].offset-d.offset,content:""};return rc(e,f,n)}else if(r!==void 0){let l,d=`${JSON.stringify(r)}`;if(!n.isArrayInsertion&&a.children.length>c){let f=a.children[c];l={offset:f.offset,length:f.length,content:d}}else if(a.children.length===0||c===0)l={offset:a.offset+1,length:0,content:a.children.length===0?d:d+","};else{let f=c>a.children.length?a.children.length:c,p=a.children[f-1];l={offset:p.offset+p.length,length:0,content:","+d}}return rc(e,l,n)}else throw new Error(`Can not ${r===void 0?"remove":n.isArrayInsertion?"insert":"modify"} Array index ${u} as length is not sufficient`)}else throw new Error(`Can not add ${typeof c!="number"?"index":"property"} to parent of type ${a.type}`);else{if(r===void 0)throw new Error("Can not delete in empty document");return rc(e,{offset:s?s.offset:0,length:s?s.length:0,content:JSON.stringify(r)},n)}}function rc(e,t,r){if(!r.formattingOptions)return[t];let n=ph(e,t),o=t.offset,i=t.offset+t.content.length;if(t.length===0||t.content.length===0){for(;o>0&&!lf(n,o-1);)o--;for(;i<n.length&&!lf(n,i);)i++}let s=TE(n,{offset:o,length:i-o},{...r.formattingOptions,keepLines:!1});for(let c=s.length-1;c>=0;c--){let u=s[c];n=ph(n,u),o=Math.min(o,u.offset),i=Math.max(i,u.offset+u.length),i+=u.content.length-u.length}let a=e.length-(n.length-i)-o;return[{offset:o,length:a,content:n.substring(o,i)}]}function ph(e,t){return e.substring(0,t.offset)+t.content+e.substring(t.offset+t.length)}var AT;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})(AT||(AT={}));var OT;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(OT||(OT={}));var LT=IT,yt=DT,pf=dh,Ns=ff;var mf=lh;var NT;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})(NT||(NT={}));function Zt(e,t,r,n){return kT(e,t,r,n)}function sn(e,t){let r=t.slice(0).sort((o,i)=>{let s=o.offset-i.offset;return s===0?o.length-i.length:s}),n=e.length;for(let o=r.length-1;o>=0;o--){let i=r[o];if(i.offset+i.length<=n)e=ph(e,i);else throw new Error("Overlapping edit");n=i.offset}return e}var Mt=ce(require("fs")),wi=require("util");function lr(e){return new Promise(t=>Mt.stat(e,(r,n)=>t(!r&&n.isFile())))}function FT(e){return new Promise(t=>Mt.stat(e,(r,n)=>t(!r&&n.isDirectory())))}function MT(e){return new Promise(t=>Mt.stat(e,(r,n)=>t(!r&&n.isSocket())))}var pt=(0,wi.promisify)(Mt.readFile),mh=(0,wi.promisify)(Mt.writeFile),Soe=(0,wi.promisify)(Mt.appendFile),Wi=(0,wi.promisify)(Mt.rename),Ls=(0,wi.promisify)(Mt.readdir),$T=(0,wi.promisify)(Mt.unlink),Lo=e=>new Promise((t,r)=>Mt.mkdir(e,{recursive:!0},n=>n?r(n):t())),UT=(0,wi.promisify)(Mt.rmdir),Fs=(0,wi.promisify)(Mt.rm),boe=(0,wi.promisify)(Mt.copyFile);function hh(e,t,r){let n=e.relative(t,r);return!!n&&!n.startsWith("..")&&!e.isAbsolute(n)}var rt=ce(require("vscode")),Zm=ce(require("path"));var Hl=ce(require("path"));var BT=ce(require("os")),gf=ce(require("fs")),VT=ce(require("path"));var IE=require("events"),Nu=class{constructor(...t){this.nodeEmitter=new IE.EventEmitter;this.event=t=>(this.nodeEmitter.on("event",t),{dispose:()=>{this.nodeEmitter.off("event",t)}});this.disposables=t}fire(t){this.nodeEmitter.emit("event",t)}dispose(){this.nodeEmitter.removeAllListeners(),this.disposables.forEach(t=>t.dispose())}},gh=class{constructor(){this.nodeEmitter=new IE.EventEmitter;this.event=t=>{let r=n=>n.results.push(t(n.data));return this.nodeEmitter.on("event",r),{dispose:()=>{this.nodeEmitter.off("event",r)}}}}fire(t){let r=[];return this.nodeEmitter.emit("event",{data:t,results:r}),r}dispose(){this.nodeEmitter.removeAllListeners()}};async function jT(e,t){return{sendTelemetryEvent:async()=>{},isCachedFlightEnabled:async()=>!1,product:await t,package:await e,getTelemetryLevel:()=>"off"}}var kn=(a=>(a[a.Trace=1]="Trace",a[a.Debug=2]="Debug",a[a.Info=3]="Info",a[a.Warning=4]="Warning",a[a.Error=5]="Error",a[a.Critical=6]="Critical",a[a.Off=7]="Off",a))(kn||{}),RE={info:3,debug:2,trace:1},pV=Object.keys(RE).reduce((e,t)=>(e[RE[t]]=t,e),[]);function WT(e){return RE[e]||3}function Ei(e){return pV[e]||3}var ut={write:()=>{},raw:()=>{},start:()=>Date.now(),stop:()=>{},event:()=>{}},Lu=/(\x9B|\x1B\[)[0-?]*[ -\/]*[@-~]/g;function GT(e,t){let r=!!t;return{event:n=>{r&&(r=!1,e.forEach(o=>o.event({type:"text",level:3,timestamp:Date.now(),text:t}))),e.forEach(o=>o.event(n))}}}function zT(e,t){let r=gV(e);return{event(n){let o=hV(n,t());o&&r.write(o)},join:r.join}}function YT(e,t,r){return{event(n){let o=mV(n,t(),r.getTime());o&&e(o)}}}function ao(e,t=2){return{event:e.event,write(r,n=t){e.event({type:"text",level:n,timestamp:Date.now(),text:r})},raw(r,n=t){e.event({type:"raw",level:n,timestamp:Date.now(),text:r})},start(r,n=t){let o=Date.now();return e.event({type:"start",level:n,timestamp:o,text:r}),o},stop(r,n,o=t){e.event({type:"stop",level:o,timestamp:Date.now(),text:r,startTimestamp:n})},get dimensions(){return e.dimensions},onDidChangeDimensions:e.onDidChangeDimensions}}function mV(e,t,r){if(!(!("level"in e)||e.level<t))switch(e.type){case"text":return`[${hf(HT,`${e.timestamp-r} ms`)}] ${vh(e.text)}`;case"raw":return e.text;case"start":return 1>=t?`${hf(EV,`[${e.timestamp-r} ms] Start`)}: ${vh(e.text)}`:`[${hf(HT,`${e.timestamp-r} ms`)}] Start: ${vh(e.text)}`;case"stop":return 1>=t?`${hf(wV,`[${e.timestamp-r} ms] Stop`)} (${e.timestamp-e.startTimestamp} ms): ${vh(e.text)}`:void 0;default:throw KT(e)}}function vh(e){return _V(e).replace(/\r?\n/g,`\r
`).replace(/(\r?\n)?$/,`\r
`)}function hV(e,t){if(!(!("level"in e)||e.level<t))switch(e.type){case"text":case"raw":return`[${new Date(e.timestamp).toISOString()}] ${DE(e.text)}`;case"start":return`[${new Date(e.timestamp).toISOString()}] Start: ${DE(e.text)}`;case"stop":return 2>=t?`[${new Date(e.timestamp).toISOString()}] Stop (${e.timestamp-e.startTimestamp} ms): ${DE(e.text)}`:void 0;default:throw KT(e)}}function DE(e){return e.replace(Lu,"").replace(/(\r?\n)?$/,BT.EOL)}function KT(e){return new Error(`Unknown log event type: ${e.type}`)}function gV(e){let t=[],r=!1,n,o;function i(){r=!1,o&&!t.length&&(n=void 0,o(),o=void 0)}function s(a,c=!1){if(a&&t.push(a),!c&&!r&&t.length){r=!0;let u=t.join("");t.length=0,gf.appendFile(e,u,l=>{l&&(l.code==="ENOENT"?gf.mkdir(VT.dirname(e),{recursive:!0},d=>{d?(i(),console.error(d)):gf.appendFile(e,u,f=>{i(),f&&console.error(f),s()})}):(i(),console.error(l))),i(),s()})}}return{write:s,join:()=>n||(r?n=new Promise(a=>o=a):Promise.resolve())}}var vV="38;2;143;99;79",XT="38;2;99;143;79",yV="38;2;86;156;214",wV=vV,EV=XT,HT=XT,CV=yV;function hf(e,t){return t.split(`
`).map(r=>`\x1B[1m\x1B[${e}m${r}\x1B[39m\x1B[22m`).join(`
`)}function _V(e){let t,r=0,n=[];for(Lu.lastIndex=0;t=Lu.exec(e);)n.push(qT(e.substring(r,t.index))),n.push(t[0]),r=Lu.lastIndex;return n.push(qT(e.substr(r))),n.join("")}function qT(e){let t=/(?<=^|[^A-Za-z0-9_\-\.])[0-9]+(\.[0-9]+)*(?=$|[^A-Za-z0-9_\-\.])/g,r,n=0,o=[];for(;r=t.exec(e);)o.push(e.substring(n,r.index)),o.push(hf(CV,r[0])),n=t.lastIndex;return o.push(e.substr(n)),o.join("")}function dt(e){return e.split(/\r?\n/).map(t=>`\x1B[1m\x1B[31m${t}\x1B[39m\x1B[22m`).join(`\r
`)+`\r
`}function kE(e){return e.split(/\r?\n/).map(t=>`\x1B[1m\x1B[33m${t}\x1B[39m\x1B[22m`).join(`\r
`)+`\r
`}var Me=class extends Error{constructor(r){var n;super(r.originalError&&r.originalError.message||r.description);this.manageContainer=!1;this.actions=[];this.data={};Object.assign(this,r),(n=this.originalError)!=null&&n.stack&&(this.stack=this.originalError.stack)}};var Re=ce(require("path")),sv=ce(require("fs")),SN=ce(ju()),ES=require("string_decoder"),av=ce(Sg());var bN=ce(require("crypto")),xN=require("util");var nk=ce(require("crypto")),xg=new Uint8Array(256),bg=xg.length;function y_(){return bg>xg.length-16&&(nk.default.randomFillSync(xg),bg=0),xg.slice(bg,bg+=16)}var Pr=[];for(let e=0;e<256;++e)Pr.push((e+256).toString(16).slice(1));function ok(e,t=0){return(Pr[e[t+0]]+Pr[e[t+1]]+Pr[e[t+2]]+Pr[e[t+3]]+"-"+Pr[e[t+4]]+Pr[e[t+5]]+"-"+Pr[e[t+6]]+Pr[e[t+7]]+"-"+Pr[e[t+8]]+Pr[e[t+9]]+"-"+Pr[e[t+10]]+Pr[e[t+11]]+Pr[e[t+12]]+Pr[e[t+13]]+Pr[e[t+14]]+Pr[e[t+15]]).toLowerCase()}var ik=ce(require("crypto")),w_={randomUUID:ik.default.randomUUID};function R3(e,t,r){if(w_.randomUUID&&!t&&!e)return w_.randomUUID();e=e||{};let n=e.random||(e.rng||y_)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return ok(n)}var Mr=R3;var yY=ce(require("path")),lS=require("string_decoder");var Yr=ce(require("path")),WO=ce(require("fs")),GO=ce(require("os")),_l=ce(require("child_process")),cS=require("string_decoder");var MO=ce(require("path"));var sk;(()=>{"use strict";var e={470:o=>{function i(c){if(typeof c!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(c))}function s(c,u){for(var l,d="",f=0,p=-1,m=0,h=0;h<=c.length;++h){if(h<c.length)l=c.charCodeAt(h);else{if(l===47)break;l=47}if(l===47){if(!(p===h-1||m===1))if(p!==h-1&&m===2){if(d.length<2||f!==2||d.charCodeAt(d.length-1)!==46||d.charCodeAt(d.length-2)!==46){if(d.length>2){var g=d.lastIndexOf("/");if(g!==d.length-1){g===-1?(d="",f=0):f=(d=d.slice(0,g)).length-1-d.lastIndexOf("/"),p=h,m=0;continue}}else if(d.length===2||d.length===1){d="",f=0,p=h,m=0;continue}}u&&(d.length>0?d+="/..":d="..",f=2)}else d.length>0?d+="/"+c.slice(p+1,h):d=c.slice(p+1,h),f=h-p-1;p=h,m=0}else l===46&&m!==-1?++m:m=-1}return d}var a={resolve:function(){for(var c,u="",l=!1,d=arguments.length-1;d>=-1&&!l;d--){var f;d>=0?f=arguments[d]:(c===void 0&&(c=process.cwd()),f=c),i(f),f.length!==0&&(u=f+"/"+u,l=f.charCodeAt(0)===47)}return u=s(u,!l),l?u.length>0?"/"+u:"/":u.length>0?u:"."},normalize:function(c){if(i(c),c.length===0)return".";var u=c.charCodeAt(0)===47,l=c.charCodeAt(c.length-1)===47;return(c=s(c,!u)).length!==0||u||(c="."),c.length>0&&l&&(c+="/"),u?"/"+c:c},isAbsolute:function(c){return i(c),c.length>0&&c.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var c,u=0;u<arguments.length;++u){var l=arguments[u];i(l),l.length>0&&(c===void 0?c=l:c+="/"+l)}return c===void 0?".":a.normalize(c)},relative:function(c,u){if(i(c),i(u),c===u||(c=a.resolve(c))===(u=a.resolve(u)))return"";for(var l=1;l<c.length&&c.charCodeAt(l)===47;++l);for(var d=c.length,f=d-l,p=1;p<u.length&&u.charCodeAt(p)===47;++p);for(var m=u.length-p,h=f<m?f:m,g=-1,v=0;v<=h;++v){if(v===h){if(m>h){if(u.charCodeAt(p+v)===47)return u.slice(p+v+1);if(v===0)return u.slice(p+v)}else f>h&&(c.charCodeAt(l+v)===47?g=v:v===0&&(g=0));break}var w=c.charCodeAt(l+v);if(w!==u.charCodeAt(p+v))break;w===47&&(g=v)}var E="";for(v=l+g+1;v<=d;++v)v!==d&&c.charCodeAt(v)!==47||(E.length===0?E+="..":E+="/..");return E.length>0?E+u.slice(p+g):(p+=g,u.charCodeAt(p)===47&&++p,u.slice(p))},_makeLong:function(c){return c},dirname:function(c){if(i(c),c.length===0)return".";for(var u=c.charCodeAt(0),l=u===47,d=-1,f=!0,p=c.length-1;p>=1;--p)if((u=c.charCodeAt(p))===47){if(!f){d=p;break}}else f=!1;return d===-1?l?"/":".":l&&d===1?"//":c.slice(0,d)},basename:function(c,u){if(u!==void 0&&typeof u!="string")throw new TypeError('"ext" argument must be a string');i(c);var l,d=0,f=-1,p=!0;if(u!==void 0&&u.length>0&&u.length<=c.length){if(u.length===c.length&&u===c)return"";var m=u.length-1,h=-1;for(l=c.length-1;l>=0;--l){var g=c.charCodeAt(l);if(g===47){if(!p){d=l+1;break}}else h===-1&&(p=!1,h=l+1),m>=0&&(g===u.charCodeAt(m)?--m==-1&&(f=l):(m=-1,f=h))}return d===f?f=h:f===-1&&(f=c.length),c.slice(d,f)}for(l=c.length-1;l>=0;--l)if(c.charCodeAt(l)===47){if(!p){d=l+1;break}}else f===-1&&(p=!1,f=l+1);return f===-1?"":c.slice(d,f)},extname:function(c){i(c);for(var u=-1,l=0,d=-1,f=!0,p=0,m=c.length-1;m>=0;--m){var h=c.charCodeAt(m);if(h!==47)d===-1&&(f=!1,d=m+1),h===46?u===-1?u=m:p!==1&&(p=1):u!==-1&&(p=-1);else if(!f){l=m+1;break}}return u===-1||d===-1||p===0||p===1&&u===d-1&&u===l+1?"":c.slice(u,d)},format:function(c){if(c===null||typeof c!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof c);return function(u,l){var d=l.dir||l.root,f=l.base||(l.name||"")+(l.ext||"");return d?d===l.root?d+f:d+"/"+f:f}(0,c)},parse:function(c){i(c);var u={root:"",dir:"",base:"",ext:"",name:""};if(c.length===0)return u;var l,d=c.charCodeAt(0),f=d===47;f?(u.root="/",l=1):l=0;for(var p=-1,m=0,h=-1,g=!0,v=c.length-1,w=0;v>=l;--v)if((d=c.charCodeAt(v))!==47)h===-1&&(g=!1,h=v+1),d===46?p===-1?p=v:w!==1&&(w=1):p!==-1&&(w=-1);else if(!g){m=v+1;break}return p===-1||h===-1||w===0||w===1&&p===h-1&&p===m+1?h!==-1&&(u.base=u.name=m===0&&f?c.slice(1,h):c.slice(m,h)):(m===0&&f?(u.name=c.slice(1,p),u.base=c.slice(1,h)):(u.name=c.slice(m,p),u.base=c.slice(m,h)),u.ext=c.slice(p,h)),m>0?u.dir=c.slice(0,m-1):f&&(u.dir="/"),u},sep:"/",delimiter:":",win32:null,posix:null};a.posix=a,o.exports=a}},t={};function r(o){var i=t[o];if(i!==void 0)return i.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,r),s.exports}r.d=(o,i)=>{for(var s in i)r.o(i,s)&&!r.o(o,s)&&Object.defineProperty(o,s,{enumerable:!0,get:i[s]})},r.o=(o,i)=>Object.prototype.hasOwnProperty.call(o,i),r.r=o=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var n={};(()=>{var o;if(r.r(n),r.d(n,{URI:()=>h,Utils:()=>D}),typeof process=="object")o=process.platform==="win32";else if(typeof navigator=="object"){var i=navigator.userAgent;o=i.indexOf("Windows")>=0}var s,a,c=(s=function(j,$){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,H){O.__proto__=H}||function(O,H){for(var Q in H)Object.prototype.hasOwnProperty.call(H,Q)&&(O[Q]=H[Q])},s(j,$)},function(j,$){if(typeof $!="function"&&$!==null)throw new TypeError("Class extends value "+String($)+" is not a constructor or null");function O(){this.constructor=j}s(j,$),j.prototype=$===null?Object.create($):(O.prototype=$.prototype,new O)}),u=/^\w[\w\d+.-]*$/,l=/^\//,d=/^\/\//,f="",p="/",m=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,h=function(){function j($,O,H,Q,M,Z){Z===void 0&&(Z=!1),typeof $=="object"?(this.scheme=$.scheme||f,this.authority=$.authority||f,this.path=$.path||f,this.query=$.query||f,this.fragment=$.fragment||f):(this.scheme=function(re,K){return re||K?re:"file"}($,Z),this.authority=O||f,this.path=function(re,K){switch(re){case"https":case"http":case"file":K?K[0]!==p&&(K=p+K):K=p}return K}(this.scheme,H||f),this.query=Q||f,this.fragment=M||f,function(re,K){if(!re.scheme&&K)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(re.authority,'", path: "').concat(re.path,'", query: "').concat(re.query,'", fragment: "').concat(re.fragment,'"}'));if(re.scheme&&!u.test(re.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(re.path){if(re.authority){if(!l.test(re.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(d.test(re.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}(this,Z))}return j.isUri=function($){return $ instanceof j||!!$&&typeof $.authority=="string"&&typeof $.fragment=="string"&&typeof $.path=="string"&&typeof $.query=="string"&&typeof $.scheme=="string"&&typeof $.fsPath=="string"&&typeof $.with=="function"&&typeof $.toString=="function"},Object.defineProperty(j.prototype,"fsPath",{get:function(){return S(this,!1)},enumerable:!1,configurable:!0}),j.prototype.with=function($){if(!$)return this;var O=$.scheme,H=$.authority,Q=$.path,M=$.query,Z=$.fragment;return O===void 0?O=this.scheme:O===null&&(O=f),H===void 0?H=this.authority:H===null&&(H=f),Q===void 0?Q=this.path:Q===null&&(Q=f),M===void 0?M=this.query:M===null&&(M=f),Z===void 0?Z=this.fragment:Z===null&&(Z=f),O===this.scheme&&H===this.authority&&Q===this.path&&M===this.query&&Z===this.fragment?this:new v(O,H,Q,M,Z)},j.parse=function($,O){O===void 0&&(O=!1);var H=m.exec($);return H?new v(H[2]||f,T(H[4]||f),T(H[5]||f),T(H[7]||f),T(H[9]||f),O):new v(f,f,f,f,f)},j.file=function($){var O=f;if(o&&($=$.replace(/\\/g,p)),$[0]===p&&$[1]===p){var H=$.indexOf(p,2);H===-1?(O=$.substring(2),$=p):(O=$.substring(2,H),$=$.substring(H)||p)}return new v("file",O,$,f,f)},j.from=function($){return new v($.scheme,$.authority,$.path,$.query,$.fragment)},j.prototype.toString=function($){return $===void 0&&($=!1),x(this,$)},j.prototype.toJSON=function(){return this},j.revive=function($){if($){if($ instanceof j)return $;var O=new v($);return O._formatted=$.external,O._fsPath=$._sep===g?$.fsPath:null,O}return $},j}(),g=o?1:void 0,v=function(j){function $(){var O=j!==null&&j.apply(this,arguments)||this;return O._formatted=null,O._fsPath=null,O}return c($,j),Object.defineProperty($.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=S(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),$.prototype.toString=function(O){return O===void 0&&(O=!1),O?x(this,!0):(this._formatted||(this._formatted=x(this,!1)),this._formatted)},$.prototype.toJSON=function(){var O={$mid:1};return this._fsPath&&(O.fsPath=this._fsPath,O._sep=g),this._formatted&&(O.external=this._formatted),this.path&&(O.path=this.path),this.scheme&&(O.scheme=this.scheme),this.authority&&(O.authority=this.authority),this.query&&(O.query=this.query),this.fragment&&(O.fragment=this.fragment),O},$}(h),w=((a={})[58]="%3A",a[47]="%2F",a[63]="%3F",a[35]="%23",a[91]="%5B",a[93]="%5D",a[64]="%40",a[33]="%21",a[36]="%24",a[38]="%26",a[39]="%27",a[40]="%28",a[41]="%29",a[42]="%2A",a[43]="%2B",a[44]="%2C",a[59]="%3B",a[61]="%3D",a[32]="%20",a);function E(j,$){for(var O=void 0,H=-1,Q=0;Q<j.length;Q++){var M=j.charCodeAt(Q);if(M>=97&&M<=122||M>=65&&M<=90||M>=48&&M<=57||M===45||M===46||M===95||M===126||$&&M===47)H!==-1&&(O+=encodeURIComponent(j.substring(H,Q)),H=-1),O!==void 0&&(O+=j.charAt(Q));else{O===void 0&&(O=j.substr(0,Q));var Z=w[M];Z!==void 0?(H!==-1&&(O+=encodeURIComponent(j.substring(H,Q)),H=-1),O+=Z):H===-1&&(H=Q)}}return H!==-1&&(O+=encodeURIComponent(j.substring(H))),O!==void 0?O:j}function C(j){for(var $=void 0,O=0;O<j.length;O++){var H=j.charCodeAt(O);H===35||H===63?($===void 0&&($=j.substr(0,O)),$+=w[H]):$!==void 0&&($+=j[O])}return $!==void 0?$:j}function S(j,$){var O;return O=j.authority&&j.path.length>1&&j.scheme==="file"?"//".concat(j.authority).concat(j.path):j.path.charCodeAt(0)===47&&(j.path.charCodeAt(1)>=65&&j.path.charCodeAt(1)<=90||j.path.charCodeAt(1)>=97&&j.path.charCodeAt(1)<=122)&&j.path.charCodeAt(2)===58?$?j.path.substr(1):j.path[1].toLowerCase()+j.path.substr(2):j.path,o&&(O=O.replace(/\//g,"\\")),O}function x(j,$){var O=$?C:E,H="",Q=j.scheme,M=j.authority,Z=j.path,re=j.query,K=j.fragment;if(Q&&(H+=Q,H+=":"),(M||Q==="file")&&(H+=p,H+=p),M){var fe=M.indexOf("@");if(fe!==-1){var _e=M.substr(0,fe);M=M.substr(fe+1),(fe=_e.indexOf(":"))===-1?H+=O(_e,!1):(H+=O(_e.substr(0,fe),!1),H+=":",H+=O(_e.substr(fe+1),!1)),H+="@"}(fe=(M=M.toLowerCase()).indexOf(":"))===-1?H+=O(M,!1):(H+=O(M.substr(0,fe),!1),H+=M.substr(fe))}if(Z){if(Z.length>=3&&Z.charCodeAt(0)===47&&Z.charCodeAt(2)===58)(ye=Z.charCodeAt(1))>=65&&ye<=90&&(Z="/".concat(String.fromCharCode(ye+32),":").concat(Z.substr(3)));else if(Z.length>=2&&Z.charCodeAt(1)===58){var ye;(ye=Z.charCodeAt(0))>=65&&ye<=90&&(Z="".concat(String.fromCharCode(ye+32),":").concat(Z.substr(2)))}H+=O(Z,!0)}return re&&(H+="?",H+=O(re,!1)),K&&(H+="#",H+=$?K:E(K,!1)),H}function I(j){try{return decodeURIComponent(j)}catch{return j.length>3?j.substr(0,3)+I(j.substr(3)):j}}var P=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function T(j){return j.match(P)?j.replace(P,function($){return I($)}):j}var D,R=r(470),k=function(j,$,O){if(O||arguments.length===2)for(var H,Q=0,M=$.length;Q<M;Q++)!H&&Q in $||(H||(H=Array.prototype.slice.call($,0,Q)),H[Q]=$[Q]);return j.concat(H||Array.prototype.slice.call($))},U=R.posix||R,W="/";(function(j){j.joinPath=function($){for(var O=[],H=1;H<arguments.length;H++)O[H-1]=arguments[H];return $.with({path:U.join.apply(U,k([$.path],O,!1))})},j.resolvePath=function($){for(var O=[],H=1;H<arguments.length;H++)O[H-1]=arguments[H];var Q=$.path,M=!1;Q[0]!==W&&(Q=W+Q,M=!0);var Z=U.resolve.apply(U,k([Q],O,!1));return M&&Z[0]===W&&!$.authority&&(Z=Z.substring(1)),$.with({path:Z})},j.dirname=function($){if($.path.length===0||$.path===W)return $;var O=U.dirname($.path);return O.length===1&&O.charCodeAt(0)===46&&(O=""),$.with({path:O})},j.basename=function($){return U.basename($.path)},j.extname=function($){return U.extname($.path)}})(D||(D={}))})(),sk=n})();var{URI:Ue,Utils:$n}=sk;var ak=ce(require("path"));function St(e,t){if($f(t)){let r=e.dirname(t);return{isWorkspaceFile:!0,workspaceOrFolderPath:t,rootFolderPath:r,configFolderPath:r}}return{isWorkspaceFile:!1,workspaceOrFolderPath:t,rootFolderPath:t,configFolderPath:t}}function $f(e){return ak.extname(e)===".code-workspace"}async function Pg(e,t){if(!!t.isWorkspaceFile)try{let r=t.rootFolderPath,n=(await e.readFile(t.workspaceOrFolderPath)).toString(),i=yt(n).folders;if(i&&i.length>0){for(let s of i){let a=s.path,c;if(a){if(e.path.isAbsolute(a))return`Workspace contains an absolute folder path '${a}'.`;c=e.path.resolve(r,a)}else{let u=s.uri;return u?Ue.parse(u).scheme!=="file"?`Workspace contains folder '${u}' not on the local file system.`:`Workspace contains an absolute folder path '${u}'.`:"Workspace contains a folder that defines neither a path nor a URI."}if(!k3(e,c,r))return`Folder '${c}' is not a subfolder of shared root folder '${r}'.`}return}return"Workspace does not define any folders"}catch(r){return`Problems loading workspace file ${t.workspaceOrFolderPath}: ${r&&(r.message||r.toString())}`}}function k3(e,t,r){return t===r?!0:!t||!r||r.length>t.length||t.length>r.length&&t.charAt(r.length)!==e.path.sep?!1:A3(e.platform,r,t.substr(0,r.length))}function A3(e,t,r){return e==="linux"?t===r:t.toLowerCase()===r.toLowerCase()}var er=ce(require("path")),qg=ce(Sg()),z_=ce(require("crypto")),jg=ce(Uf()),Y_=require("util"),DO=require("string_decoder");var jf=ce(require("path"));async function T_(e,t,r){let n=await dA(e,"agent-extra-socket",r);if(!n)return;let o=await P_(t,"agent-socket");if(!o)return;let i=await P_(t,"homedir");try{let{stdout:a}=await t.exec(`ls '${i}/private-keys-v1.d' 2>/dev/null`);if(a.trim())return}catch{}let s=(async()=>{await t.exec(`mkdir -p -m 700 '${jf.posix.dirname(o)}'`);let a=await dA(e,"homedir",r),c=await P_(t,"homedir");a&&c&&(await fl({cliHost:e},{shellServer:t},e.path.join(a,"pubring.kbx"),jf.posix.join(c,"pubring.kbx"),"gpg"),await fl({cliHost:e},{shellServer:t},e.path.join(a,"pubring.gpg"),jf.posix.join(c,"pubring.gpg"),"gpg"),await fl({cliHost:e},{shellServer:t},e.path.join(a,"trustdb.gpg"),jf.posix.join(c,"trustdb.gpg"),"gpg")),await oz(e,r)})();return{cliHost:e,remoteGpgSocket:o,localGpgSocket:n,ready:s}}async function dA(e,t,r){try{let{stdout:n}=await Oe({exec:e.exec,cmd:"gpgconf",args:["--list-dir",t],output:r,print:!0}),o=n.toString().trim();if(o.indexOf(`
`)!==-1){let i=new RegExp(`^${t}:(.*)$`,"m").exec(o);i&&(o=i[1])}return e.platform==="win32"&&/^\/.\//.test(o)&&(o=`${o.charAt(1)}:${o.substr(2).replace(/\//g,"\\")}`),o}catch{return}}async function P_(e,t){try{let{stdout:r}=await e.exec(`gpgconf --list-dir ${t}`),n=r.trim();if(n.indexOf(`
`)!==-1){let o=new RegExp(`^${t}:(.*)$`,"m").exec(n);if(o)return o[1]}return n}catch{return}}async function oz(e,t){try{await Oe({exec:e.exec,cmd:"gpg-connect-agent",args:["updatestartuptty","/bye"],output:t})}catch{}}async function Hf(e,t,r){if(!("exec"in e)){for(let n=t,o="";n!==o;o=n,n=e.path.dirname(n))if(await e.isFile(e.path.join(n,".git","config")))return n;return}try{let{stdout:n}=await Oe({exec:e.exec,cmd:"git",args:["rev-parse","--show-cdup"],cwd:t,output:r}),o=n.toString().trim();return e.path.resolve(t,o)}catch{return}}async function I_(e,t,r){try{return await Oe({exec:e.exec,cmd:"git",args:["ls-remote",t],cwd:".",output:r,print:"onerror"}),!0}catch(n){return(n==null?void 0:n.code)==="ENOENT"?void 0:!1}}async function pA(e,t,r,n,o){let i=n[1],s={get:"fill",store:"approve",erase:"reject"}[i];if(s===void 0)throw new Error(`Expected get, store or erase, got: ${i}`);let a=await fA(r?e:t,s,o).catch(c=>{if(r)throw c});return!r&&(a==null?void 0:a.code)!==0&&(a=await fA(e,s,o),a.code===0&&(r=!0)),{result:a,preferLocalCLIHost:r}}async function fA({exec:e},t,r){try{let{stdout:n,stderr:o}=await Oe({exec:e,cmd:"git",args:["credential",t],env:{GIT_TERMINAL_PROMPT:"0"},stdin:Buffer.from(r),output:ut});return{stdout:n.toString(),stderr:o.toString(),code:0}}catch(n){if(!(n&&n.stdout&&n.stderr))throw n;let{stdout:o,stderr:i,code:s}=n;return{stdout:o.toString(),stderr:i.toString(),code:s||0}}}async function mA(e,t,r){let n=await D_(e,t,r);if(!n)return;n.startsWith("refs/")&&(n=n.substr(5)),n.startsWith("remotes/")&&(n=n.substr(8));let o=n.indexOf("/");if(o===-1)return;let i=n.substr(0,o),s=n.substr(o+1);try{let{stdout:a}=await Oe({exec:e.exec,cmd:"git",args:["remote","get-url",i],cwd:t.rootFolderPath,output:r}),c=a.toString().trim();if(c.endsWith(".git")&&(c=c.substr(0,c.length-4)),c.startsWith("https://github.com/")){let u=await cz(e,t,i,r);if(u&&s!==u)return`${c}/tree/${s}`}return c}catch{return}}async function hA(e,t,r){if(!("exec"in e)){let o=await Hf(e,t.rootFolderPath,r);if(!o)return;try{return(await e.readFile(e.path.join(o,".git","config"))).toString().split(/^\[/m).filter(a=>a.startsWith("remote")).map(a=>(/^\s*url\s*=\s*(\S+)/m.exec(a)||[])[1]).filter(Boolean)}catch(i){if((i==null?void 0:i.code)!=="ENOENT")throw i;return[]}}let n;try{let{stdout:o}=await Oe({exec:e.exec,cmd:"git",args:["remote","-v"],cwd:t.rootFolderPath,output:r});n=o.toString()}catch{return}return Array.from(new Set(iz(/^[^\s]+\s+([^\s]+)/gm,n,1)))}function iz(e,t,r){return{[Symbol.iterator]:function*(){let n;for(;n=e.exec(t);)yield n[r],e.lastIndex===n.index&&e.lastIndex++}}}async function gA(e,t,r){return await sz(e,t,r)||az(e,t,r)}async function sz(e,t,r){try{let{stdout:n}=await Oe({exec:e.exec,cmd:"git",args:["status","--porcelain"],cwd:t.rootFolderPath,output:r});return!!n.toString().trim()}catch{return}}async function az(e,t,r){let n=await D_(e,t,r);if(!!n)try{let{stdout:o}=await Oe({exec:e.exec,cmd:"git",args:["log",`${n}..HEAD`],cwd:t.rootFolderPath,output:r});return!!o.toString().trim()}catch{return}}async function vA(e,t,r,n){let o=await D_(e,t,n);if(!o)return!1;try{let i=e.platform==="win32"?r.replace(/\\/g,"/"):r;return await Oe({exec:e.exec,cmd:"git",args:["cat-file","-e",`${o}:${i}`],cwd:t.rootFolderPath,output:n}),!0}catch{return!1}}async function D_(e,t,r){try{let{stdout:n}=await Oe({exec:e.exec,cmd:"git",args:["rev-parse","--abbrev-ref","--symbolic-full-name","@{u}"],cwd:t.rootFolderPath,output:r});return n.toString().trim()}catch{return}}async function cz(e,t,r,n){try{let{stdout:o}=await Oe({exec:e.exec,cmd:"git",args:["remote","show",r],cwd:t.rootFolderPath,output:n});return(o.toString().match(/^\s*HEAD branch:\s*(.*)$/m)||[])[1]}catch{return}}async function Rg(e,t,r,n,o,i){let{extensionPath:s}=e;if(await t.isFolder(t.path.join(r,".git")))return{gitClone:void 0,gitUnshallow:void 0};await t.mkdirp(r);let a=n.tokenEnvVar?{...n.env,GIT_ASKPASS:t.path.join(s,"scripts","gitAskPass.sh"),GIT_TOKEN:t.env[n.tokenEnvVar]}:n.env,c=[];n.fullClone||c.push("--depth","1"),n.branch&&c.push("--branch",n.branch),n.recurseSubmodules&&c.push("--recurse-submodules");let u=pl({ptyExec:t.ptyExec,cmd:"git",args:["clone",...c,n.url,"."],cwd:r,env:a,output:ao(o,3)}),l=n.fullClone?u:(async()=>(await u,await pl({ptyExec:t.ptyExec,cmd:"git",args:["config","remote.origin.fetch","+refs/heads/*:refs/remotes/origin/*"],cwd:r,env:a,output:i}),pl({ptyExec:t.ptyExec,cmd:"git",args:["fetch","--unshallow","--tags"],cwd:r,env:a,output:i})))();return{gitClone:u,gitUnshallow:l}}var Ks=require("stream");async function yA(e,t){let{stdout:r}=await e.exec(`cat /proc/${t}/environ`,{logOutput:!1});return r.split("\0").map(n=>{let o=n.indexOf("=");return o!==-1?[n.slice(0,o),n.slice(o+1)]:[]}).reduce((n,[o,i])=>(o&&(n[o]=i),n),{})}async function R_(e){let t=`for pid in \`cd /proc && ls -d [0-9]*\`; do { echo $pid ; readlink /proc/$pid/cwd ; readlink /proc/$pid/ns/mnt ; cat /proc/$pid/stat | tr "
" " " ; echo ; cat /proc/$pid/environ | tr "
" " " ; echo ; cat < /proc/$pid/cmdline | tr "
" " " ; echo ; } ; echo --- ; done ; readlink /proc/self/ns/mnt 2>/dev/null`,{stdout:r}=await e.exec(t,{logOutput:!1}),n=6,o=r.split(`
---
`),i=o.pop().trim();return{processes:o.map(a=>a.split(`
`)).filter(a=>a.length>=n).map(([a,c,u,l,d,f])=>{let p=/.*\) [^ ]* ([^ ]*) ([^ ]*)/.exec(l)||[];return{pid:a,ppid:p[1],pgrp:p[2],cwd:c,mntNS:u,cmd:f.replace(/\0/g," "),env:d.split("\0").reduce((m,h)=>{let g=h.indexOf("=");return g!==-1&&(m[h.substr(0,g)]=h.substr(g+1)),m},{})}}),mntNS:i}}function wA(e){let t={};return e.forEach(r=>t[r.pid]={process:r,childProcesses:[]}),e.filter(r=>r.ppid).forEach(r=>{var n;return(n=t[r.ppid])==null?void 0:n.childProcesses.push(t[r.pid])}),t}function k_(e,t="  ",r="  "){return`${r}${e.process.pid}: ${e.process.cmd}
${e.childProcesses.map(n=>k_(n,t,r+t))}`}async function CA(e,t,r,n,o,i){let s=await EA(r?e:t,n,o,i).catch(a=>{if(r)throw a});return!r&&(s==null?void 0:s.code)!==0&&(s=await EA(e,n,o,i),s.code===0&&(r=!0)),{result:s,preferLocalCLIHost:r}}async function EA(e,t,r,n){try{let o=t[1]==="store"?JSON.parse(r).ServerURL:r.trim(),i=await uz(e,o,n);if(!i)return{stdout:"Credential helper not found.",stderr:"",code:1};if("auth"in i){if(t[1]!=="get")return{stdout:`Credential command not supported without credential helper: ${t[1]}.`,stderr:"",code:1};let[c,u]=Buffer.from(i.auth,"base64").toString().split(":");return{stdout:JSON.stringify({ServerURL:o,Username:c,Secret:u}),stderr:"",code:0}}let{stdout:s,stderr:a}=await Oe({exec:e.exec,cmd:`docker-credential-${i.helper}`,args:t.slice(1),stdin:Buffer.from(r),output:ut});return{stdout:s.toString(),stderr:a.toString(),code:0}}catch(o){if((o==null?void 0:o.code)==="ENOENT")return{code:o==null?void 0:o.code,stdout:"",stderr:`Docker credential helper not found: ${(o==null?void 0:o.message)||String(o)}.`};if(!(o&&o.stdout&&o.stderr))throw o;let{stdout:i,stderr:s,code:a}=o;return{stdout:i.toString(),stderr:s.toString(),code:a||0}}}async function uz(e,t,r){var n,o,i;try{let s=yt((await e.readFile(e.path.join(await e.homedir(),".docker","config.json"))).toString()),a=Ue.parse(t).authority,c=(n=s.credHelpers)==null?void 0:n[a];if(c)return{helper:c};let u=(i=(o=s.auths)==null?void 0:o[t])==null?void 0:i.auth;if(u)return{auth:u};if(s.credsStore)return{helper:s.credsStore}}catch(s){(s==null?void 0:s.code)!=="ENOENT"&&r.write(`Error reading Docker config: ${(s==null?void 0:s.message)||String(s)}.`)}if(e.platform==="darwin")return{helper:"osxkeychain"};if(e.platform==="win32")return{helper:"wincred"};if(e.platform==="linux")try{return await Oe({exec:e.exec,cmd:"/bin/sh",args:["-c","command -v docker-credential-pass >/dev/null 2>&1"],output:ut}),{helper:"pass"}}catch{return{helper:"secretservice"}}}var Xz=yO(),PO=B_(),W_=SO(),Qz=xO();async function Wf(e,t){var k,U,W,j,$;let{cliHost:r,output:n}=e,{shellServer:o,launchRootShellServer:i}=t,s="Launching Dev Containers helper.",a=n.start(s);if(Ti)return n.stop(s,a),{remoteEnv:{},ready:Promise.resolve(),reconnect:()=>Promise.resolve()};let c=r.type==="local",u=c?r:await Bg(process.cwd(),e.loadNativeModule,n),d=(await(0,Y_.promisify)(z_.randomBytes)(20)).toString("hex"),f={},p=TO(e.cliHost)||TO(u),m=p?er.posix.join(((k=t.env)==null?void 0:k.TMPDIR)||"/tmp",`vscode-ssh-auth-${d}.sock`):void 0;p?(f[m]=p,n.write(`ssh-agent: SSH_AUTH_SOCK in container (${m}) forwarded to ${p.cliHost!==u?"remote":"local"} host (${p.unparsed}).`)):n.write("ssh-agent: SSH_AUTH_SOCK not set on host.");let h=IO(e.cliHost)||IO(u),g=-1,v;if(h)do v=er.posix.join(((U=t.env)==null?void 0:U.TMPDIR)||"/tmp",".X11-unix",`X${++g}`);while(await Zz(o,v));let w=h?`:${g}`:void 0;h?(await o.exec(`mkdir -p '${er.posix.dirname(v)}'`),f[v]=h,n.write(`X11 forwarding: DISPLAY in container (${w}) forwarded to ${h.cliHost!==u?"remote":"local"} host (${h.unparsed}).`)):u.env.DISPLAY||e.cliHost.env.DISPLAY?n.write(`X11 forwarding: DISPLAY value on host not supported (${[u.env.DISPLAY,e.cliHost.env.DISPLAY].filter(Boolean).join(", ")}).`):n.write("X11 forwarding: DISPLAY not set on host.");let E=await T_(r,t.shellServer,n)||(c?void 0:await T_(u,t.shellServer,n));E&&(f[E.remoteGpgSocket]={unparsed:E.localGpgSocket,cliHost:E.cliHost,connectTo:{socketPath:E.localGpgSocket}});let C=er.posix.join(((W=t.env)==null?void 0:W.TMPDIR)||"/tmp",`vscode-remote-containers-ipc-${d}.sock`),S=er.posix.join(((j=t.env)==null?void 0:j.TMPDIR)||"/tmp",`vscode-remote-containers-server-${d}.js`),x=er.posix.join((($=t.env)==null?void 0:$.TMPDIR)||"/tmp",`vscode-remote-containers-${d}.js`),I=i&&await Jz(o,"docker")?er.posix.join("/usr/local/bin",`docker-credential-dev-containers-${d}`):void 0,P=RO(e,t,"Container",void 0,!1,!1,S,x,I,f,C,u),T=P.then(O=>O.ready),D=P.then(O=>O.mrpcExec),R=P.then(O=>O.mrpcPtyExec);return T.catch(console.error),e.onAdoptProcess(O=>oY(t.shellServer,C,m,v,O).catch(console.error)),n.stop(s,a),{remoteContainersCLI:x,remoteEnv:{REMOTE_CONTAINERS_IPC:C,...m?{SSH_AUTH_SOCK:m}:void 0,...w?{DISPLAY:w}:void 0,...v?{REMOTE_CONTAINERS_DISPLAY_SOCK:v}:void 0},mrpcExec:D,mrpcPtyExec:R,ready:T,reconnect:()=>P.then(O=>O.reconnect())}}async function Jz(e,t){try{return await e.exec(`command -v ${t} >/dev/null 2>&1`),!0}catch{return!1}}async function Zz(e,t){try{return await e.exec(`test -e ${t}`),!0}catch{return!1}}async function Gf(e,t,r,n,o){let{passwdUser:i,homeFolder:s,nodeExecutable:a,mrpcExec:c,mrpcPtyExec:u,setBaseEnv:l,connect:d,reconnect:f,terminate:p}=await RO(e,{remoteExec:t,platform:o},"Host",r,!0,n,void 0);return{passwdUser:i,homeFolder:s,nodeExecutable:a,exec:c,ptyExec:u,setBaseEnv:l,connect:d,reconnect:f,terminate:p}}async function RO(e,t,r,n,o,i,s,a,c,u,l,d){let{product:f,output:p}=e,{remoteExec:m,platform:h,nodeExecutable:g,launchRootShellServer:v}=t,w=a&&pt(er.join(e.extensionPath,"dist","common","remoteContainersCLI.js"),{encoding:"utf8"}),E=pt(er.join(e.extensionPath,"dist","common","remoteContainersServer.js"),{encoding:"utf8"}),C=await ho(m,p,void 0,h,r),S=o?await X_(C,await K_(C)):void 0,x=(await C.exec({posix:"echo ~",win32:"echo $env:userprofile"})).stdout.trim().split(`
`)[0],I=!0;if(!g||!s){let R=C.path.join(x,".vscode-remote-containers");g||(g=await iY(e,C,R,x,f,i)),s||(s=C.path.join(R,"dist",`vscode-remote-containers-server-${e.package.version}.js`),await gl(C,s)?I=!1:await C.exec(`mkdir -p '${C.path.dirname(s)}'`))}if(a){let R=`EOF-${a}`;await C.exec(`cat <<'${R}' >${a}
${await w}
${R}
`)}if(c&&v){let R=await v(),k=`EOF-${c}`;await R.exec(`mkdir -p ${er.posix.dirname(c)} && cat <<'${k}' >${c}
#!/bin/sh
${g} ${a} docker-credential-helper $@
${k}
`),await R.exec(`chmod +x ${c}`);let U=(await C.exec(`cat ~/.docker/config.json || echo "{
}"`)).stdout,W=Zt(U,["credsStore"],er.posix.basename(c).substring(18),{formattingOptions:{}}),j=sn(U,W);await C.exec(`mkdir -p ~/.docker && cat <<'${k}' >~/.docker/config.json
${j}
${k}
`)}if(I){let R=`EOF-${s}`,k=`${s}_${Date.now()}`;await C.exec(`cat <<'${R}' >${k}
${await E}
${R}
mv ${k} ${s}`)}let P=()=>eY(e,r,C,g,s,u,l,d),T=await P(),D;return{ready:T.ready,passwdUser:S,nodeExecutable:g,homeFolder:x,mrpcExec:tY(()=>T.mrpc,r,n||x),mrpcPtyExec:rY(()=>T.mrpc,r,n||x),mrpcExecToEnd:nY(()=>T.mrpc,r,n||x),setBaseEnv:R=>new Promise((k,U)=>{D=R,T.mrpc.setBaseEnv(R,W=>W?U(W):k())}),connect:T.mrpc.connect,reconnect:async()=>{let R=`${r}: Reconnecting exec server`,k=p.start(R);await T.process.terminate().catch(()=>{}),C=await ho(m,p,void 0,void 0,r),T=await P(),D&&await new Promise((U,W)=>{T.mrpc.setBaseEnv(D,j=>j?W(j):U())}),p.stop(R,k)},terminate:()=>T.process.terminate()}}async function eY(e,t,r,n,o,i,s,a){let{cliHost:c,output:u}=e,l=Object.keys(i||{}),d={...l.reduce((I,P)=>(I[P]="duplex",I),{}),rpc:"async",connected:"async",ready:"async"},f={exec:"async",stdin:"sink",stdout:"source",stderr:"source",exit:"async",terminate:"async",dispose:"async",ptyExec:"async",ptyIn:"sink",ptyOut:"source",ptyResize:"async",ptyExit:"async",ptyTerminate:"async",ptyDispose:"async",execToEnd:"async",setBaseEnv:"async",connect:"duplex"},p=r.process,m=`echo -n ${Un} >&2 ; ${s?`rm -f '${s}' ; `:""}REMOTE_CONTAINERS_SOCKETS='${JSON.stringify(l)}' REMOTE_CONTAINERS_IPC='${s||""}' '${n}' '${o}'
`;p.stdin.write(m);let h,g=new Promise(I=>h=I),v=new DO.StringDecoder;p.stderr.on("data",I=>{let P=v.write(I).replace(/^.*DeprecationWarning: Buffer\(\) is deprecated.*$\r?\n?/mg,"").trim();if(h){let T=P.indexOf(Un);T!==-1&&(h(),h=void 0,P=P.substr(0,T)+P.substr(T+1))}P&&u.write(dt(`${t} server: ${P}`))}),p.exit.then(({code:I,signal:P})=>{u.write(`${t} server terminated (code: ${I}, signal: ${P}).`)},I=>{u.write(`${t} server did not launch or terminated: ${I&&I.message||String(I)}`)});let w=(c==null?void 0:c.type)==="local",E={git:w,docker:w},C,S=new Promise(I=>C=I),x=Xz(f,d)({...l.reduce((I,P)=>{let T=i[P];return I[P]=()=>T.cliHost.connect(T.connectTo),I},{}),rpc:async(I,P)=>{try{let{args:T,stdin:D}=JSON.parse(I);if(T[0]==="git-credential-helper"){let R=await pA(a,c,E.git,T,D);E.git=R.preferLocalCLIHost,P(void 0,JSON.stringify(R.result))}else if(T[0]==="docker-credential-helper"){let R=await CA(a,c,E.docker,T,D,u);E.docker=R.preferLocalCLIHost,P(void 0,JSON.stringify(R.result))}}catch(T){console.error(T),P(T)}},connected:I=>{I()},ready:I=>{C(),I()}});return(0,jg.default)(PO.source(p.stdout),x.createStream(),PO.sink(p.stdin)),await Promise.race([g,p.exit.then(({code:I,signal:P})=>{throw new Error(`${t} server terminated (code: ${I}, signal: ${P}).`)})]),{ready:S,mrpc:x,process:p}}function tY(e,t,r){return async n=>{let{cmd:o,args:i,cwd:s,env:a,output:c}=n,u=`Run in ${t}: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,l=c.start(u),d=e(),f=await new Promise((p,m)=>{d.exec({cmd:o,args:i,cwd:s||r,env:a},(h,g)=>{h?m(h):p(g)})});return{stdin:W_.sink(d.stdin(f,p=>{p&&p.message!=="unexpected end of parent stream"&&console.error(p)})),stdout:W_.source(d.stdout(f)),stderr:W_.source(d.stderr(f)),exit:new Promise((p,m)=>{d.exit(f,(h,g)=>{var v;c.stop(u,l),h?(((v=h.message)==null?void 0:v.endsWith("ENOENT"))&&!h.code&&(h.code="ENOENT"),m(h)):p(g)})}),terminate:async()=>new Promise((p,m)=>{d.terminate(f,h=>{h?m(h):p()})})}}}function rY(e,t,r){return async n=>{let{cmd:o,args:i,cwd:s,env:a,output:c}=n,u=`Run in ${t}: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,l=c.start(u),d=e(),f=await new Promise((g,v)=>{var w,E;d.ptyExec({cmd:o,args:i,cwd:s||r,env:a,rows:(w=c.dimensions)==null?void 0:w.rows,cols:(E=c.dimensions)==null?void 0:E.columns},(C,S)=>{C?v(C):g(S)})}),p=[c.onDidChangeDimensions&&c.onDidChangeDimensions(g=>d.ptyResize(f,g.columns,g.rows))],m=Qz();(0,jg.default)(m,d.ptyIn(f,g=>{g&&g.message!=="unexpected end of parent stream"&&console.error(g)}));let h=new Nu;return(0,jg.default)(d.ptyOut(f),g=>{g(null,function v(w,E){if(w!==!0){if(w)throw w;h.fire(E),g(null,v)}})}),{write:g=>m.push(g),onData:h.event,resize:(g,v)=>d.ptyResize(f,g,v),exit:new Promise((g,v)=>{d.ptyExit(f,(w,E)=>{p.forEach(C=>C==null?void 0:C.dispose()),c.stop(u,l),w?v(w):g(E)})}),terminate:async()=>new Promise((g,v)=>{d.ptyTerminate(f,w=>{w?v(w):g()})})}}}function nY(e,t,r){return async n=>{let{cmd:o,args:i,cwd:s,env:a,output:c}=n,u=`Run in ${t}: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,l=c.start(u),d=e();return new Promise((f,p)=>{d.execToEnd({cmd:o,args:i,cwd:s||r,env:a},(m,h)=>{if(c.stop(u,l),m||!h)p({stdin:new Ks.Writable,stdout:Ks.Readable.from([]),stderr:Ks.Readable.from([]),exit:Promise.reject(m),terminate:async()=>{}});else{let g=Ks.Readable.from([Buffer.from(h.stdout.data)]),v=new Promise(C=>g.on("end",C)),w=Ks.Readable.from([Buffer.from(h.stderr.data)]),E=new Promise(C=>w.on("end",C));f({stdin:new Ks.Writable,stdout:g,stderr:w,exit:Promise.all([v,E]).then(()=>({code:h.code,signal:h.signal})),terminate:async()=>{}})}})})}}var Hg="\\\\.\\pipe\\openssh-ssh-agent";function TO(e){let t=e.env.SSH_AUTH_SOCK;if(t)return{unparsed:t,cliHost:e,connectTo:{socketPath:t}};if(e.platform==="win32")return{unparsed:Hg,cliHost:e,connectTo:{socketPath:Hg}}}function IO(e){let t=e.env.DISPLAY,r=t==null?void 0:t.match(/^(?<hostOrPath>[^:]+)?:(?<display>\d+)(?:\.(?<screen>\d+))?$/);if(r!=null&&r.groups){let{hostOrPath:n,display:o}=r.groups;return!n||n==="localhost/unix"?{unparsed:t,cliHost:e,connectTo:{socketPath:`/tmp/.X11-unix/X${o}`}}:n.startsWith("/")?{unparsed:t,cliHost:e,connectTo:{socketPath:`${n}:${o}`}}:{unparsed:t,cliHost:e,connectTo:{host:n,port:6e3+parseInt(o,10)}}}}async function kO(e){let t=e.env.WAYLAND_DISPLAY,r=e.env.XDG_RUNTIME_DIR,n=t&&e.path.isAbsolute(t)?t:t&&r&&e.path.join(r,t),o=r&&e.path.join(r,"wayland-0"),i=n||o;if(i&&await e.isSocket(i))return i}async function AO(e){let r=(await(0,Y_.promisify)(z_.randomBytes)(20)).toString("hex");return er.posix.join((e==null?void 0:e.TMPDIR)||"/tmp",`vscode-wayland-${r}.sock`)}async function OO(e,t){let{shellServer:r,remoteWaylandSocket:n}=e;if(!n||t.WAYLAND_DISPLAY)return{};let o=t.XDG_RUNTIME_DIR;o||(o=(await r.exec('umask 077 && XRD="/tmp/user/$(id -u)" && mkdir -p $XRD && echo $XRD')).stdout.trim());let i=er.posix.basename(n);return await r.exec(`test -e ${o}/${i} || ln -s ${n} ${o}/${i}`),o===t.XDG_RUNTIME_DIR?{WAYLAND_DISPLAY:i}:{XDG_RUNTIME_DIR:o,WAYLAND_DISPLAY:i}}var hl=new Set;async function oY(e,t,r,n,o){let i=await o.processId;if(i&&i>0){let s=await yA(e,i),a=s.REMOTE_CONTAINERS_IPC;a&&a!==t&&!hl.has(a)&&a.indexOf("vscode-remote-containers-ipc")!==-1&&(hl.add(a),await e.exec(`rm '${a}' && ln -s '${t}' '${a}'`));let c=s.SSH_AUTH_SOCK;c&&r&&c!==r&&!hl.has(c)&&c.indexOf("vscode-ssh-auth")!==-1&&(hl.add(c),await e.exec(`rm '${c}' && ln -s '${r}' '${c}'`));let u=s.REMOTE_CONTAINERS_DISPLAY_SOCK;u&&n&&u!==n&&!hl.has(u)&&(hl.add(u),await e.exec(`rm '${u}' && ln -s '${n}' '${u}'`))}}async function iY(e,t,r,n,o,i){let s=(o==null?void 0:o.commit)||"b3318bc0524af3d74034b8bb8a64df0ccf35549a",a=o!=null&&o.commit?o.quality||"insider":"stable",{localCacheFolder:c,output:u,alternateDownload:l}=e,d=er.posix.join(r,"bin",s),f=er.posix.join(d,"node");try{await t.exec(`test -x '${f}'`)}catch{if(o)try{let v=er.posix.join(Q_(n,o),"bin",s),w=er.posix.join(v,"node");await t.exec(`test -x '${w}'`);let E=er.posix.join(v,"node_modules","node-pty","package.json");return await t.exec(`test -f '${E}'`),w}catch{}let p;if((await t.exec("uname -s")).stdout.trim().split(`
`)[0]==="Darwin")p=G_;else{let v=await Z_(t);p=J_(v,!1)}let h={localCacheFolder:c,build:p,commit:s,quality:a,web:!1,output:u,alternateDownload:l},g=zf(h);if(await lr(g)||await Vg(h),p===G_)await Vf({output:u},t,g,d,i);else{let v=[];await qg.t({file:g,filter:E=>/^[^/]*\/(LICENSE$|node$|node_modules\/node-pty\/)/.test(E),onentry:E=>{new qg.WriteEntry.Tar(E).on("data",S=>v.push(S))}});let w=Buffer.concat(v);await Vf({output:u},t,w,d,i,!1)}}return f}var tS=ce(require("path"));var sY=ce(require("http")),aY=ce(require("https"));function eS(e,t={}){return new Promise((r,n)=>{let o=e.startsWith("https:")?aY:sY,i;if(Object.keys(t).length>0){let a=new URL(e);i={headers:t,host:a.host,path:a.pathname}}o.get(i??e,a=>{var c;if(a.statusCode<200||a.statusCode>299){if(a.statusCode===302){let u=(c=a.headers)==null?void 0:c.location;u&&r(eS(u,t))}n(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`))}else{a.on("error",n);let u=[];a.on("data",l=>u.push(l)),a.on("end",()=>r(Buffer.concat(u)))}}).on("error",n)})}async function ln(e){let t=await pt(tS.join(e,"package.json"),"utf8");return JSON.parse(t)}async function Yf(e){let t=await pt(tS.join(e,"product.json"),"utf8"),r=JSON.parse(t);return r.commit||(r.commit=await cY(r.quality)),r.serverDataFolderName||(r.serverDataFolderName=".vscode-server-oss"),r}async function cY(e="insider"){let t=`https://update.code.visualstudio.com/api/update/server-linux-x64/${e}/latest`,r=await eS(t);return JSON.parse(r.toString()).version}var NO=!0;function Kf(e,t=!1){let{serverApplicationName:r}=e;return!t&&r?["bin",r]:["server.sh"]}var Xf=ce(require("net"));var rS=B_(),LO=e=>{if("port"in e)return rS.duplex(Xf.connect(e.port,e.host));let t=e.socketPath;if(process.platform!=="win32"||t.startsWith("\\\\.\\pipe\\"))return rS.duplex(Xf.connect(t));let r=new Xf.Socket;return dY(r,t)};function uY(e){let t=[];return e.split("-").map(r=>{let n=r.match(/.{2}/g);n!==null&&n.reverse().map(o=>{t.push(parseInt(o,16))})}),Buffer.from(t)}function lY(e,t,r){return t||r===void 0?{headerSize:e,err:t}:e===0?{headerSize:e,data:r}:r.length>e?(r=r.slice(e,r.length),e=0,{headerSize:e,data:r}):(e=e-r.length,{headerSize:e})}function dY(e,t){let r=0,n=[],o=[],i,s=l=>{l instanceof Error&&console.error(l),e.destroy();for(let d of n)d.cb(l,void 0);n=[];for(let d of o)d(l,(f,p)=>{});o=[]};function a(l,d){i.source(l,function(f,p){let m=lY(r,f,p);r=m.headerSize,m.err||m.data?d(m.err||null,m.data):a(l,d)})}return(async()=>{let l=await pt(t),f=l.toString().match(/!<socket >(\d+)( s)? ((([A-Fa-f0-9]{2}){4}-?){4})/),p,m;if(f!==null){let h=f[1],g=f[3];p=parseInt(h,10);let v=uY(g),w=Buffer.alloc(12);w.writeUInt32LE(process.pid,0),m=Buffer.concat([v,w]),r=16+3*4}else{let h=l.indexOf(10);p=parseInt(l.slice(0,h).toString(),10),m=l.slice(h+1),r=0}e.on("error",h=>{s(h)}),e.connect(p,"127.0.0.1",()=>{e.write(m,h=>{if(!h){i=rS.duplex(e);for(let g of n)a(g.abort,g.cb);n=[];for(let g of o)i.sink(g);o=[]}})})})().catch(l=>{s(l)}),{source:function(l,d){i!==void 0?a(l,d):n.push({abort:l,cb:d})},sink:function(l){i!==void 0?i.sink(l):o.push(l)}}}var Wg=!1;function Gg(e,t,r){return Wg?function(o){return fY(e(o),`${t} ${JSON.stringify(o)}`,r)}:e}function fY(e,t,r){return Wg?{source:FO(e.source,`${t} Source`,r),sink:pY(e.sink,`${t} Sink`,r)}:e}function FO(e,t,r){return Wg?function(o,i){r.write(`${t} end in (${typeof o}${o&&typeof o=="object"?`: ${Object.keys(o)}`:""}): ${o&&typeof o=="object"&&o.stack||o}`),e(o,function(a,c){r.write(`${t} end out (${typeof a}${a&&typeof a=="object"?`: ${Object.keys(a)}`:""}): ${a&&typeof a=="object"&&a.stack||a}`),r.write(`${t} data: ${c==null?void 0:c.toString("hex")}`),i(a,c)})}:e}function pY(e,t,r){return Wg?function(o){e(FO(o,t,r))}:e}var $O=/^\\\\wsl(\.localhost|\$)?\\/;function zr(e){return $O.test(e.toLowerCase())}function vl(e){let t=e.toLowerCase(),r=$O.exec(t);if(!r)return"";let n=t.indexOf("\\",r[0].length);return e.substring(r[0].length,n)}async function zg(e){let{stdout:t}=await Oe({exec:rs(void 0),cmd:"wsl",args:["-l","-v"],output:e}),r=t.toString(t[1]===0?"utf16le":"utf8").trim();return(/^\*\s*(\S+)/m.exec(r)||[])[1]}async function Ec(e,t,r){let{stdout:n}=await Oe({exec:rs(void 0),cmd:"wsl",args:["-d",e,"-e","wslpath","-u",t],output:r});return n.toString().trim()}async function mY(e,t){let{stdout:r}=await Oe({exec:rs(void 0),cmd:"wsl",args:["-d",e,"-e","/bin/sh","-c","echo ~"],output:t});return r.toString().trim()}async function yl(e,t){let r=vl(e),n=await Ec(r,e,t);return Ue.parse(`vscode-remote://wsl+${r}${n}`)}function wl(e){if(e.scheme==="vscode-remote"){let t=Yg(e.authority);if(t){let r=e.path;return $f(r)&&(r=MO.posix.dirname(r)),{wslDistro:t,wslPath:r}}}}function Yg(e){return(/wsl\+(.*)/.exec(e)||[])[1]}async function UO(e,t,r,n,o,i,s,a){var m;let{distro:c,cwd:u}=await nS(e,t,s),l=El("wsl",["-d",c,"-e"],u),d=await Gf({extensionPath:r,localCacheFolder:n,package:await ln(r),product:o,loadNativeModule:i,output:s,alternateDownload:a},l,u,!1),f=await Cl({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:s},{shell:((m=d.passwdUser)==null?void 0:m.shell)||"/bin/sh",remoteExec:d.exec});delete f.WSL_INTEROP,await d.setBaseEnv(f);let p=jn("wsl",u,f,d.exec,d.ptyExec,Gg(d.connect,"WSL",s),d.nodeExecutable,s);return p.toCommonURI=async h=>{try{return Ue.file((await Oe({exec:d.exec,cmd:"wslpath",args:["-w",h],output:s})).stdout.toString().trim())}catch{return}},p}async function nS(e,{defaultDistro:t},r){let n,o;return typeof e=="object"?(n=e.wslDistro,o=e.wslPath):e&&zr(e)?(n=vl(e),o=await Ec(n,e,r)):(n=t||await zg(r)||(()=>{throw new Error("No default WSL distro found.")})(),o=e?await Ec(n,e,r):await mY(n,r)),{distro:n,cwd:o}}var oS=ce(require("path")),Kg=ce(require("os"));var jO=ce(require("os"));async function HO(e,t,r,n,o,i,s,a,c,u){var v;let l=e.substr(6),d=l.indexOf(":"),f=[(u==null?void 0:u.settings.executablePath)||"ssh"];u!=null&&u.settings.configFilePath&&f.push("-F",hY(u==null?void 0:u.settings.configFilePath)),d!==-1?f.push("-p",l.substr(d+1),l.substr(0,d)):f.push(l);let p=El(f[0],f.slice(1),void 0,await(u==null?void 0:u.sshAskpassEnv)||{}),m=await Gf({extensionPath:n,localCacheFolder:o,package:await ln(n),product:i,loadNativeModule:s,output:a,alternateDownload:c},p,t,!1),h=await Cl({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:a},{shell:((v=m.passwdUser)==null?void 0:v.shell)||"/bin/sh",remoteExec:m.exec});await m.setBaseEnv(h);let g=jn("ssh",t||m.homeFolder,h,m.exec,m.ptyExec,m.connect,m.nodeExecutable,a);return g.toCommonURI=()=>Promise.resolve(void 0),g.reconnect=()=>m.reconnect(),g.terminate=()=>m.terminate(),g}function hY(e){return e.replace(/^~($|\/|\\)/,`${jO.homedir()}$1`)}function Qf(e,t){let r=gY(e);if(!r)return;let n=r.hostName;if(r.user||r.hostName.toLowerCase()!==r.hostName||r.port||r.hostName.match(/[\/\\\+]/)){let o=JSON.stringify(r);n=Buffer.from(o,"utf8").toString("hex")}return Ue.parse(`vscode-remote://ssh-remote+${n}${t}`)}function gY(e){if(!e.startsWith("ssh://"))return;let t=e.substr(6),r=t.match(/^(?:(.*)@)?(.+?)(?::(\d+))?$/);if(r){let[,n,o,i]=r;return{hostName:o,user:n,port:i?parseInt(i,10):void 0}}return{hostName:t}}async function Hn(e,t,r,n,o,i,s,a,c,u){return(e==null?void 0:e.startsWith("ssh://"))&&!(u!=null&&u.localDocker)?HO(e,t,n,o,i,s,r,a,c,u):typeof t=="object"||n.executeInWSL==="forWSLPath"&&t&&zr(t)||n.executeInWSL==="always"?UO(t,n,o,i,s,r,a,c):Bg(t||process.cwd(),r,a)}async function Bg(e,t,r){let n=rs(e),o=await qO(e,t);return vY(e,n,o,Gg(LO,"Local",r))}function jn(e,t,r,n,o,i,s,a){let c,u;return{type:e,platform:"linux",exec:n,ptyExec:o,cwd:t,env:r,path:oS.posix,async homedir(){var l;return typeof u>"u"&&(u=this.env.HOME||((l=iS((await this.readFile("/etc/passwd")).toString(),(await this.getuid()).toString()))==null?void 0:l.home)||"/"),u},async tmpdir(){return this.env.TMPDIR||"/tmp"},isFile:async l=>{try{return await Oe({exec:n,cmd:"test",args:["-f",l],output:ut}),!0}catch(d){if((d==null?void 0:d.code)!==1)throw d;return!1}},isFolder:async l=>{try{return await Oe({exec:n,cmd:"test",args:["-d",l],output:ut}),!0}catch(d){if((d==null?void 0:d.code)!==1)throw d;return!1}},isSocket:async l=>{try{return await Oe({exec:n,cmd:"test",args:["-S",l],output:ut}),!0}catch(d){if((d==null?void 0:d.code)!==1)throw d;return!1}},readFile:async l=>{try{return(await Oe({exec:n,cmd:"cat",args:[l],output:ut})).stdout}catch(d){let f=new Error(`Could not read file: ${l}`);throw f.originalError=d,f.code="ENOENT",f}},writeFile:async(l,d)=>{await Oe({exec:n,cmd:"/bin/sh",args:["-c",`cat >'${l}'`],stdin:d,output:ut})},rename:async(l,d)=>{await Oe({exec:n,cmd:"mv",args:[l,d],output:ut})},rm:async(l,{recursive:d,force:f})=>{await Oe({exec:n,cmd:"rm",args:[...d?["-r"]:[],...f?["-f"]:[],l],output:ut})},mkdirp:async l=>{await Oe({exec:n,cmd:"mkdir",args:["-p",l],output:ut})},readDir:async l=>(await Oe({exec:n,cmd:"ls",args:["-a",l],output:ut})).stdout.toString().trim().split(`
`).filter(d=>d!=="."&&d!==".."),readDirWithTypes:async l=>{let d={f:1,"*":1,"/":2,"@":64};return(await Oe({exec:n,cmd:"ls",args:["-aF",l],output:ut})).stdout.toString().trim().split(`
`).map(f=>"/*@=%|>".indexOf(f[f.length-1])!==-1?[f.substr(0,f.length-1),f[f.length-1]]:[f,"f"]).filter(([f])=>f!=="."&&f!=="..").map(([f,p])=>[f,d[p]||0])},getUsername:async()=>(c===void 0&&(c=(await Oe({exec:n,cmd:"id",args:["-u","-n"],output:ut})).stdout.toString().trim()),c),getuid:async()=>{let l=await Oe({exec:n,cmd:"id",args:["-u"],output:ut});return parseInt(l.stdout.toString().trim(),10)},getgid:async()=>{let l=await Oe({exec:n,cmd:"id",args:["-g"],output:ut});return parseInt(l.stdout.toString().trim(),10)},toCommonURI:()=>Promise.resolve(void 0),connect:i,nodeExecutable:s}}function vY(e,t,r,n){return{type:"local",platform:process.platform,exec:t,ptyExec:r,cwd:e,env:process.env,path:oS,homedir:async()=>Kg.homedir(),tmpdir:async()=>Kg.tmpdir(),isFile:lr,isFolder:FT,isSocket:MT,readFile:pt,writeFile:mh,rename:Wi,rm:Fs,mkdirp:async o=>{await Lo(o)},readDir:Ls,getUsername:Xg,getuid:process.platform==="linux"||process.platform==="darwin"?async()=>process.getuid():void 0,getgid:process.platform==="linux"||process.platform==="darwin"?async()=>process.getgid():void 0,toCommonURI:async o=>Ue.file(o),connect:n}}function zO(e,t,r){return e==="linux"?t===r:t.toLowerCase()===r.toLowerCase()}var uS=Yr.join(__dirname,"..","..","node_modules",".bin","ts-node"),Ti=Yr.basename(process.argv[0])==="ts-node"||process.argv.indexOf("ts-node/register")!==-1;async function Oe(e){let{exec:t,cmd:r,args:n,cwd:o,env:i,stdin:s,output:a,print:c}=e,u=await t({cmd:r,args:n,cwd:o,env:i,output:a});return new Promise((l,d)=>{let f=[],p=[],m=c==="continuous"?new cS.StringDecoder:void 0;u.stdout.on("data",v=>{f.push(v),c==="continuous"&&a.write(m.write(v))}),u.stdout.on("error",v=>{if((v==null?void 0:v.code)!=="ENOTCONN")throw v});let h=c==="continuous"?new cS.StringDecoder:void 0;u.stderr.on("data",v=>{p.push(v),c==="continuous"&&a.write(dt(h.write(v)))}),u.stderr.on("error",v=>{if((v==null?void 0:v.code)!=="ENOTCONN")throw v});let g=[];u.exit.then(({code:v})=>{try{g.forEach(C=>C.dispose());let w=Buffer.concat(f),E=Buffer.concat(p);(c===!0||v&&c==="onerror")&&(a.write(w.toString().replace(/\r?\n/g,`\r
`)),a.write(dt(E.toString()))),c&&v&&a.write(`Exit code ${v}`),v?d({message:`Command failed: ${r} ${(n||[]).join(" ")}`,stdout:w,stderr:E,code:v}):l({stdout:w,stderr:E})}catch(w){d(w)}},d),s instanceof Buffer?(u.stdin.write(s,v=>{v&&d(v)}),u.stdin.end()):s instanceof WO.ReadStream?s.pipe(u.stdin):typeof s=="function"&&g.push(s(v=>u.stdin.write(v)))})}async function pl(e){let{ptyExec:t,cmd:r,args:n,cwd:o,env:i,output:s,resolveOn:a,onDidInput:c}=e,u=await t({cmd:r,args:n,cwd:o,env:i,output:s});return new Promise((l,d)=>{let f="",p=[c&&c(m=>u.write(m))];u.onData(m=>{f+=m,s.raw(m),a&&a.exec(f)&&l({cmdOutput:f})}),u.exit.then(({code:m,signal:h})=>{try{p.forEach(g=>g==null?void 0:g.dispose()),m||h?d({message:`Command failed: ${r} ${(n||[]).join(" ")}`,cmdOutput:f,code:m,signal:h}):l({cmdOutput:f})}catch(g){d(g)}},m=>{p.forEach(h=>h==null?void 0:h.dispose()),d(m)})})}function rs(e){return async function(t){let{cmd:r,args:n,output:o}=t,i=`Run: ${r} ${(n||[]).join(" ").replace(/\n.*/g,"")}`,s=o.start(i),a=t.cwd||e,c=t.env?{...process.env,...t.env}:process.env,u=await Qg(r,a,c,o),l=_l.spawn(u,n,{cwd:a,env:c,windowsHide:!0});return{stdin:l.stdin,stdout:l.stdout,stderr:l.stderr,exit:new Promise((d,f)=>{l.once("error",p=>{o.stop(i,s),f(p)}),l.once("close",(p,m)=>{o.stop(i,s),d({code:p,signal:m})})}),async terminate(){l.kill("SIGKILL")}}}}async function qO(e,t){let r=await t("node-pty");if(!r)throw new Error("Missing node-pty");return async function(n){var h,g;let{cmd:o,args:i,output:s}=n,a=`Run: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,c=s.start(a),u=!1,l=n.cwd||e,d=n.env?{...process.env,...n.env}:process.env,f=await Qg(o,l,d,s),p=r.spawn(f,i||[],{cwd:l,env:d,cols:(h=s.dimensions)==null?void 0:h.columns,rows:(g=s.dimensions)==null?void 0:g.rows,useConpty:u}),m=[s.onDidChangeDimensions&&s.onDidChangeDimensions(v=>p.resize(v.columns,v.rows))];return{onData:p.onData.bind(p),write:p.write.bind(p),resize:p.resize.bind(p),exit:new Promise(v=>{p.onExit(({exitCode:w,signal:E})=>{if(m.forEach(C=>C==null?void 0:C.dispose()),s.stop(a,c),v({code:w,signal:E}),process.platform==="win32")try{p.kill()}catch{}})}),async terminate(){p.kill("SIGKILL")}}}}function El(e,t,r,n){return async function(o){let{env:i,cmd:s,args:a,output:c}=o,u=o.cwd||r,l=u?`cd '${u}' && `:"",d=Object.keys(i||{}).map(C=>`${C}='${i[C]}' `).join(""),f=(a||[]).map(C=>` '${C.replace(/'/g,`'"'"'`)}'`).join(""),p=`${l}${d}${s}${f}`,m=p!==s?["/bin/sh","-c",p]:[p],h=[...t,...m],g=`Run: ${e} ${h.join(" ").replace(/\n.*/g,"")}`,v=c.start(g),w=await Qg(e,process.cwd(),process.env,c),E=_l.spawn(w,h,{windowsHide:!0,env:n?{...process.env,...n}:void 0});return{stdin:E.stdin,stdout:E.stdout,stderr:E.stderr,exit:new Promise((C,S)=>{E.once("error",x=>{c.stop(g,v),S(x)}),E.once("close",(x,I)=>{c.stop(g,v),C({code:x,signal:I})})}),async terminate(){E.kill("SIGKILL")}}}}async function YO(e,t,r,n){let o=await n("node-pty");if(!o)throw new Error("Missing node-pty");return async function(i){var x,I;let{env:s,cmd:a,args:c,output:u}=i,l=i.cwd||r,d=l?`cd '${l}' && `:"",f=Object.keys(s||{}).map(P=>`${P}='${s[P]}' `).join(""),p=(c||[]).map(P=>` '${P.replace(/'/g,`'"'"'`)}'`).join(""),m=`${d}${f}${a}${p}`,h=[...t,"/bin/sh","-c",m],g=`Run: ${e} ${h.join(" ").replace(/\n.*/g,"")}`,v=u.start(g),w=!1,E=await Qg(e,process.cwd(),process.env,u),C=o.spawn(E,h,{cols:(x=u.dimensions)==null?void 0:x.columns,rows:(I=u.dimensions)==null?void 0:I.rows,useConpty:w}),S=[u.onDidChangeDimensions&&u.onDidChangeDimensions(P=>C.resize(P.columns,P.rows))];return{onData:C.onData.bind(C),write:C.write.bind(C),resize:C.resize.bind(C),exit:new Promise(P=>{C.onExit(({exitCode:T,signal:D})=>{if(S.forEach(R=>R==null?void 0:R.dispose()),u.stop(g,v),P({code:T,signal:D}),process.platform==="win32")try{C.kill()}catch{}})}),async terminate(){C.kill("SIGKILL")}}}}async function Qg(e,t=process.cwd(),r,n){if(process.platform!=="win32")return e;if(Yr.isAbsolute(e))return await sS(e)||e;if(/[/\\]/.test(e)){let a=Yr.join(t,e);return await sS(a)||a}let o,i;if(r){for(let a of Object.keys(r))if(a.toLowerCase()==="path"){let c=r[a];typeof c=="string"&&(o=c,i=c.split(Yr.delimiter).filter(Boolean),i.push(Yr.join(r.ProgramW6432||"C:\\Program Files","Docker\\Docker\\resources\\bin")));break}}if(i===void 0||i.length===0){n.write(`findLocalWindowsExecutable: No PATH to look up executable '${e}'.`);let a=new Error(`No PATH to look up executable '${e}'.`);throw a.code="ENOENT",a}for(let a of i){let c;Yr.isAbsolute(a)?c=Yr.join(a,e):c=Yr.join(t,a,e);let u=await sS(c);if(u)return u}n.write(`findLocalWindowsExecutable: Exectuable '${e}' not found on PATH '${o}'.`);let s=new Error(`Exectuable '${e}' not found on PATH '${o}'.`);throw s.code="ENOENT",s}var BO=process.env.PATHEXT,VO=BO?BO.toLowerCase().split(";"):[".com",".exe",".bat",".cmd"];async function sS(e){if(VO.indexOf(Yr.extname(e))!==-1)return await lr(e)?e:void 0;for(let t of VO){let r=e+t;if(await lr(r))return r}}function Sl(e){let t=/^'?v?(\d+(\.\d+)*)/.exec(e);if(!!t)return t[1].split(".").map(r=>parseInt(r,10))}function bl(e,t){for(let r=0,n=Math.max(e.length,t.length);r<n;r++){let o=e[r]||0,i=t[r]||0;if(o!==i)return o<i}return!1}var KO=Ti?(e,t,r)=>_l.spawn(uS,[e,...t||[]],{...r,windowsHide:!0}):_l.fork;async function Jg(e,t){if(!t){try{return require(e)}catch{}return}try{return require(`${t}/node_modules.asar/${e}`)}catch{}try{return require(`${t}/node_modules/${e}`)}catch{}try{return __non_webpack_require__(`${t}/node_modules.asar/${e}`)}catch{}try{return __non_webpack_require__(`${t}/node_modules/${e}`)}catch{}}function Jf(e){let{output:t}=e,r=[];return{output:ao({...t,get dimensions(){return t.dimensions},event:o=>r?r.push(o):t.event(o)}),flush:()=>{r&&(r.forEach(o=>t.event(o)),r=void 0)}}}function XO(e,t,r){return ao({...e,get dimensions(){return e.dimensions},event:o=>{o.channel===t&&e.event(o),r.event(o)}})}function Zg(e,t){return t&&typeof t=="object"&&"win32"in t?e==="win32"?t.win32:t.posix:t}async function gl(e,t){return Zg(e.platform,{posix:async()=>{try{return await e.exec(`test -f '${t}'`),!0}catch{return!1}},win32:async()=>(await e.exec(`Test-Path '${t}' -PathType Leaf`)).stdout.trim()==="True"})()}var aS;async function Xg(){return aS===void 0&&(aS=(async()=>{try{return GO.userInfo().username}catch(e){if(process.platform!=="linux")throw e;return(await Oe({exec:rs(void 0),cmd:"id",args:["-u","-n"],output:ut})).stdout.toString().trim()}})()),aS}var Un="\u2404";async function ho(e,t,r,n="linux",o="Container"){let i=typeof e=="function",s=n==="win32",a=i?await e({env:r?{VSCODE_REMOTE_CONTAINERS_SESSION:r}:{},cmd:s?"powershell":"/bin/sh",args:s?["-NoProfile","-Command","-"]:[],output:t}):e;if(!i){let f=s?`powershell -NoProfile -Command "powershell -NoProfile -Command -"
`:`/bin/sh -c 'echo ${Un}; /bin/sh'
`;a.stdin.write(f),await new Promise(m=>{let h="",g=new lS.StringDecoder;a.stdout.on("data",function v(w){h+=g.write(w),h.includes(f)&&(a.stdout.off("data",v),m())})})}let c=wY(a),u;async function l(f,p){let m=u=(async()=>{try{await u}catch{}return d(Zg(n,f),p)})();try{return await Promise.race([m,c.unexpectedExit])}finally{c.disposeStdioListeners(),u===m&&(u=void 0)}}async function d(f,p){let m=`Run in ${o.toLowerCase()}: ${f.replace(/\n.*/g,"")}`,h;if((p==null?void 0:p.logOutput)!=="silent"&&(h=t.start(m,p==null?void 0:p.logLevel)),a.stdin.destroyed){t.write("Stdin closed!");let{code:I,signal:P}=await a.exit;return Promise.reject({message:`Shell server terminated (code: ${I}, signal: ${P})`,code:I,signal:P})}n==="win32"?a.stdin.write(`[Console]::Write('${Un}'); ( ${f} ); [Console]::Write("${Un}$LastExitCode ${Un}"); [Console]::Error.Write('${Un}')
`):a.stdin.write(`echo -n ${Un}; ( ${f} ); echo -n ${Un}$?${Un}; echo -n ${Un} >&2
`);let[g,v]=QO(a.stdout,[1,2],(p==null?void 0:p.logOutput)==="continuous"?(I,P,T)=>{P===1&&T===0&&t.write(I,p==null?void 0:p.logLevel)}:()=>{}),w=QO(a.stderr,[1],(p==null?void 0:p.logOutput)==="continuous"?(I,P,T)=>{P===0&&T===0&&t.write(I,p==null?void 0:p.logLevel)}:()=>{})[0];p!=null&&p.stdin&&(await g,a.stdin.write(p==null?void 0:p.stdin));let[E,C]=await v,[S]=await w,x=parseInt(C,10)||0;return((p==null?void 0:p.logOutput)===void 0||(p==null?void 0:p.logOutput)===!0)&&(t.write(E,p==null?void 0:p.logLevel),t.write(S,p==null?void 0:p.logLevel),x&&t.write(`Exit code ${x}`,p==null?void 0:p.logLevel)),(p==null?void 0:p.logOutput)==="continuous"&&x&&t.write(`Exit code ${x}`,p==null?void 0:p.logLevel),(p==null?void 0:p.logOutput)!=="silent"&&t.stop(m,h,p==null?void 0:p.logLevel),x?Promise.reject({message:`Command in ${o.toLowerCase()} failed: ${f}`,code:x,stdout:E,stderr:S}):{stdout:E,stderr:S}}return{exec:l,process:a,platform:n,path:Zg(n,yY)}}function QO(e,t,r){let n=t.map(()=>{let l;return{promise:new Promise((f,p)=>l={resolve:f,reject:p}),...l}}),o=new lS.StringDecoder("utf8"),i=[],s=0,a=[];function c(l){let d=o.write(l);u(d)}function u(l){let d=l.indexOf(Un);if(d!==-1){let f=l.substr(0,d);i.push(f),r(f,s,a.length),a.push(i.join("")),i.length=0,a.length===t[s]&&(n[s].resolve(a),s++,a=[],s===t.length&&e.off("data",c)),d+1<l.length&&u(l.substr(d+1))}else i.push(l),r(l,s,a.length)}return e.on("data",c),n.map(l=>l.promise)}function wY(e){let t,r=new Promise((c,u)=>t=u),n=[],o=[],i=c=>n.push(c),s=c=>o.push(c);return e.stdout.on("data",i),e.stderr.on("data",s),e.exit.then(({code:c,signal:u})=>{t(`Shell server terminated (code: ${c}, signal: ${u})
${Buffer.concat(n).toString()}
${Buffer.concat(o).toString()}`)},c=>{t(`Shell server failed: ${c&&(c.stack||c.message)}`)}),{unexpectedExit:r,disposeStdioListeners:()=>{e.stdout.off("data",i),e.stderr.off("data",s),n.length=0,o.length=0}}}var JO=ce(require("path"));function Xs(e){return`remote.containers.${e}`}function Zf(e){return`dev.containers.${e}`}var CY=["install.sh","install","bootstrap.sh","bootstrap","script/bootstrap","setup.sh","setup","script/setup"];async function dS(e,t,r,n,o){let{repository:i,installCommand:s,targetPath:a}=e.dotfilesConfiguration;if(i=o.getDotfileConfiguration("dotfiles.repository")||i,s=o.getDotfileConfiguration("dotfiles.installCommand")||s,a=o.getDotfileConfiguration("dotfiles.targetPath")||a,!i)return;await n;let c=await r;i.indexOf(":")===-1&&!/^\.{0,2}\//.test(i)&&(i=`https://github.com/${i}.git`);let u=t.shellServer,l=SY(t),d=Object.keys(c).filter(f=>!(f.startsWith("BASH_FUNC_")&&f.endsWith("%%"))).reduce((f,p)=>`${f}${p}=${_Y(c[p])} `,"");try{e.output.event({type:"progress",name:"Installing Dotfiles",status:"running"}),s?await u.exec(`# Clone & install dotfiles
${ev(l)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${d}git clone ${i} ${a} || exit $?
if [ -x ${s} ]
then
	echo Executing script ${s}
	cd ${a} && ${d}${s}
else
	echo Error: ${s} not executable
	exit 126
fi
`,{logOutput:"continuous",logLevel:3}):await u.exec(`# Clone & install dotfiles
${ev(l)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${d}git clone ${i} ${a} || exit $?
cd ${a}
for f in ${CY.join(" ")}
do
	if [ -e $f ]
	then
		installCommand=$f
		break
	fi
done
if [ -z "$installCommand" ]
then
	dotfiles=$(ls -d ${a}/.* 2>/dev/null | grep -v -E '/(.|..|.git)$')
	if [ ! -z "$dotfiles" ]
	then
		echo Linking dotfiles: $dotfiles
		ln -sf $dotfiles ~ 2>/dev/null
	else
		echo No dotfiles found.
	fi
else
	if [ -x "$installCommand" ]
	then
		echo Executing script '${a}'/"$installCommand"
		${d}./"$installCommand"
	else
		echo Error: '${a}'/"$installCommand" not executable
		exit 126
	fi
fi
`,{logOutput:"continuous",logLevel:3}),e.output.event({type:"progress",name:"Installing Dotfiles",status:"succeeded"})}catch{e.output.event({type:"progress",name:"Installing Dotfiles",status:"failed"})}}function _Y(e){return`'${(e||"").replace(/'+/g,`'"$&"'`)}'`}function SY(e){return JO.posix.join(go(e),".dotfilesMarker")}var pN=ce(require("net")),mN=ce(fN());async function vS({forwardedPorts:e,output:t,getLogLevel:r},n,o,i){t.write(`Port forwarding for container port ${o} starts listening on local port.`,2);let s=i?{VSCODE_REMOTE_CONTAINERS_SESSION:i}:void 0;return new Promise((a,c)=>{let u=new Set,l=pN.createServer({pauseOnConnect:!0},d=>{let f=d.remotePort,p=l.address().port;t.write(`Port forwarding connection from ${f} > ${p} > ${o} in the container.`),r()===1&&(async()=>{let m=await(0,mN.default)("port",f);t.write(`Port forwarding process for ${f} > ${p} > ${o} in the container:
${JSON.stringify(m,void 0,"  ")}`)})().catch(console.error),kY(t,n,[n.nodeExecutable,"-e",`
				const net = require('net');
				const fs = require('fs');
				process.stdin.pause();
				const client = net.createConnection({ host: '127.0.0.1', port: ${o} }, () => {
					console.error('Connection established');
					client.pipe(process.stdout);
					process.stdin.pipe(client);
				});
				client.on('close', function (hadError) {
					console.error(hadError ? 'Remote close with error' : 'Remote close');
					process.exit(hadError ? 1 : 0);
				});
				client.on('error', function (err) {
					process.stderr.write(err && (err.stack || err.message) || String(err));
				});
				process.stdin.on('close', function (hadError) {
					console.error(hadError ? 'Remote stdin close with error' : 'Remote stdin close');
					process.exit(hadError ? 1 : 0);
				});
				process.on('uncaughtException', function (err) {
					fs.writeSync(process.stderr.fd, \`Uncaught Exception: \${String(err && (err.stack || err.message) || err)}\\n\`);
				});
			`],s).then(m=>{let h;m.exit.then(({code:g,signal:v})=>{h||(u.delete(d),d.end()),t.write(`Port forwarding ${f} > ${p} > ${o} terminated${h?` by extension (${h})`:""} with code ${g} and signal ${v}.`)},g=>{u.delete(d),d.end(),t.write(`Port forwarding ${f} > ${p} > ${o} terminated with error: ${g&&g.message||String(g)}`)}),m.stderr.on("data",g=>{t.write(`Port forwarding ${f} > ${p} > ${o} stderr: ${g.toString("utf8")}`,2)}),d.on("close",g=>{t.write(`Port forwarding ${f} > ${p} > ${o}: Local close${g?" with error":""}`,2),u.delete(d),h="closed",m.stdin.end(),setTimeout(()=>{h="killed",m.terminate().catch(console.error)},5e3)}),m.stdout.pipe(d),d.pipe(m.stdin),u.add(d)}).catch(console.error)});l.on("listening",()=>{let d={targetPort:o,server:l,connections:u};l.on("close",()=>{e.delete(d)}),e.add(d),t.write(`Port forwarding local port ${l.address().port} to container port ${o}`),a(l)}),l.on("error",d=>{if(d&&(d.code==="EADDRINUSE"||d.code==="EACCES")){l.listen(0,"127.0.0.1");return}c(d)}),l.on("close",()=>{c(new Error("Closed"))}),l.listen(o,"127.0.0.1")})}async function kY(e,t,r,n){return t.remoteExec({env:n,cmd:r[0],args:r.slice(1),output:e})}var xl=ce(require("path"));function ov(e,t){let r,n=e.platform==="win32",o={...e,get env(){return r||(r=hN(n,e.env))}},i=NY.bind(void 0,n,o);return e.containerWorkspaceFolder&&(o.containerWorkspaceFolder=gN(i,e.containerWorkspaceFolder)),nv(i,t)}function yS(e,t,r,n){let o=e==="win32";return nv(LY.bind(void 0,o,t,hN(o,r)),n)}function nv(e,t){if(typeof t=="string")return gN(e,t);if(Array.isArray(t))return t.map(r=>nv(e,r));if(t&&typeof t=="object"){let r=Object.create(null);return Object.keys(t).forEach(n=>{r[n]=nv(e,t[n])}),r}return t}var AY=/\$\{(.*?)\}/g;function hN(e,t){if(e){let r=Object.create(null);return Object.keys(t).forEach(n=>{r[n.toLowerCase()]=t[n]}),r}return t}function gN(e,t){return t.replace(AY,OY.bind(void 0,e))}function OY(e,t,r){let n,o=r.split(":");return o.length>1&&(r=o[0],n=o[1]),e(t,r,n)}function NY(e,t,r,n,o){switch(n){case"env":case"localEnv":return vN(e,t.env,o,r,t.configFile);case"localWorkspaceFolder":return t.localWorkspaceFolder!==void 0?t.localWorkspaceFolder:r;case"localWorkspaceFolderBasename":return t.localWorkspaceFolder!==void 0?(e?xl.win32:xl.posix).basename(t.localWorkspaceFolder):r;case"containerWorkspaceFolder":return t.containerWorkspaceFolder!==void 0?t.containerWorkspaceFolder:r;case"containerWorkspaceFolderBasename":return t.containerWorkspaceFolder!==void 0?xl.posix.basename(t.containerWorkspaceFolder):r;default:return r}}function LY(e,t,r,n,o,i){switch(o){case"containerEnv":return vN(e,r,i,n,t);default:return n}}function vN(e,t,r,n,o){if(r){e&&(r=r.toLowerCase());let i=t[r];return typeof i=="string"?i:""}throw new Me({description:`'${n}'${o?` in ${xl.posix.basename(o.path)}`:""} can not be resolved because no environment variable name is given.`})}async function yo(e){return new Promise(t=>setTimeout(t,e))}var Js=0,yN=/Extension host agent listening on (\d+)/;var CS="updateContentCommand";async function cv(e){let{params:t,createdAt:r,startedAt:n,sharedDataFolder:o,sharedDataFolderIsLocalCacheFolder:i,remoteWorkspaceFolder:s,containerUser:a,containerGroup:c,containerEnv:u,remoteExec:l,remotePtyExec:d,remoteExecAsRoot:f,rootShellServer:p,remoteWaylandSocket:m}=e,h;if(p&&a==="root"?h=p:h=await ho(l,t.output,t.sessionId),!u){let U=(await h.exec("echo $PATH")).stdout.trim();u=U?{PATH:U}:{}}a||(a=await K_(h)),!f&&a==="root"&&(f=l);let g=await Z_(h),v=await X_(h,a);v||t.output.write(kE(`User ${a} not found in /etc/passwd.`));let w=await MY(u,v),E=await FY(u,v),C=Q_(E,t.product),{commit:S,quality:x}=t.product,I=S&&await $Y(C,S,x||"insider",t.web),P=J_(g,x==="stable"),T=S&&o&&await PN(Re.posix,o,P,S,x||"insider",t.web),D=I&&await jY(I),R;p?R=Promise.resolve(p):a==="root"&&(R=Promise.resolve(h));let k={createdAt:r,startedAt:n,osRelease:g,build:P,user:a,gid:c||(v==null?void 0:v.gid),env:u,shell:w,homeFolder:E,userDataFolder:C,sharedDataFolderIsLocalCacheFolder:i,sharedDataFolder:o,installFolder:I,sharedInstallFolder:T,remoteWorkspaceFolder:s,nodeExecutable:D,remoteExec:l,remotePtyExec:d,remoteExecAsRoot:f,shellServer:h,remoteWaylandSocket:m};return(R||f)&&(k.launchRootShellServer=()=>R||(R=ho(f,t.output))),k}async function K_(e){return(await e.exec("id -un")).stdout.trim()}async function FY(e,t){return e.HOME||t&&t.home||"/root"}async function MY(e,t){return e.SHELL||t&&t.shell||"/bin/sh"}async function X_(e,t){let{stdout:r}=await e.exec("cat /etc/passwd",{logOutput:!1});return iS(r,t)}function iS(e,t){return e.split(/\r?\n/).map(n=>n.split(":")).map(n=>({name:n[0],uid:n[2],gid:n[3],home:n[5],shell:n[6]})).find(n=>n.name===t||n.uid===t)}async function $Y(e,t,r,n){return Re.posix.join(e,"bin",`${t}${r==="stable"?"":`-${r}`}${n?"-web":""}`)}async function PN(e,t,r,n,o,i){return e.join(t,"bin",r.id,`${n}${o==="stable"?"":`-${o}`}${i?"-web":""}`)}function TN(e){return Re.posix.join(e.userDataFolder,"extensions")}function go(e){return Re.posix.join(typeof e=="string"?e:e.userDataFolder,"data/Machine")}function uv(e){return Re.posix.join(e.userDataFolder,"data/Machine/settings.json")}function UY(e){return Re.posix.join(e,".vscode-remote")}function Q_(e,t){return Re.posix.join(e,t.serverDataFolderName)}function Tl(e){return Re.posix.join("/var",/^\.*(.*)$/.exec(e)[1])}async function jY(e){return Re.posix.join(e,"node")}var ep=class{constructor(t){this.settings=t}getConfiguration(t){return this.settings[Zf(t)]||this.settings[Xs(t)]}getDotfileConfiguration(t){return this.settings[Xs(t)]||this.settings[t]}};async function IN(e,t,r,n,o=Js){await DN(e,t),await s4(e,t),await a4(e,t);let i=await RN(e,t,r),{serverDownloaded:s}=await kN(e,t),a,c,u=Promise.resolve(),l;if(!e.cliMode&&t.nodeExecutable){let w=await Wf(e,t);a=w.remoteContainersCLI,c=w.remoteEnv,u=w.ready,l=w.mrpcExec;let E=e.cliHost.reconnect;E&&(e.cliHost.reconnect=async()=>{await E(),w.reconnect().catch(C=>e.output.write(dt(C&&(C.stack||C.message)||String(C))))})}let f=e.computeExtensionHostEnv||t.installFolder&&e.cliMode||e.postCreate.enabled?Cl(e,t,r,l).then(w=>({...w,...c,...e.cliMode?{}:{REMOTE_CONTAINERS:"true"},...r.remoteEnv?yS(e.cliHost.platform,r.configFilePath,t.env,r.remoteEnv):{}})):Promise.resolve({}),p=i.getConfiguration("gitCredentialHelperConfigLocation")??e.credentialHelperConfigLocation;!e.cliMode&&t.nodeExecutable&&(await Cc(e,t,[".ssh","known_hosts"],"ssh"),p!=="none"&&await Pl(t,a,e.output,"system"));let m,h,g,v;if(t.installFolder){let E=await MN(e,t,o,l,async()=>ON(e,t,async()=>{var x,I,P;return Array.from(new Set([...((I=(x=r.customizations)==null?void 0:x.vscode)==null?void 0:I.extensions)||[],...((P=await n())==null?void 0:P.allFeatures.filter(T=>(NO||T.included)&&T.value).reduce((T,D)=>{var R,k;return T.concat(((k=(R=D.customizations)==null?void 0:R.vscode)==null?void 0:k.extensions)||[])},[]))||[]]))}),f),C=E.serverPort;g=E.connectionToken,v=E.webConnectionToken,m=C,e.forwardServerPort&&t.nodeExecutable&&(h=await vS(e,t,C,e.sessionId),m=h.address().port,e.backgroundTasks.push(async()=>jN(e,t,r)))}if(e.postCreate.enabled){let w,E=!1,C=new Promise(x=>w=()=>{E=!0,x()}),S=(async()=>{if((r.waitFor||CS)==="initializeCommand"&&w(),!(e.postCreate.skipNonBlocking&&E)&&(await wS(e,t,r,"onCreateCommand",f,u,!1,w),!(e.postCreate.skipNonBlocking&&E)&&(await wS(e,t,r,"updateContentCommand",f,u,!!e.prebuild,w),!(e.postCreate.skipNonBlocking&&E)))){if(!e.prebuild){if(await wS(e,t,r,"postCreateCommand",f,u,!1,w),e.postCreate.skipNonBlocking&&E||(await dS(e,t,f,u,i),!e.cliMode&&t.nodeExecutable&&((i.getConfiguration("copyGitConfig")??e.isCopyGitConfigEnabled)&&(await Cc(e,t,[".gitconfig"],"git"),await dv(e,t,f.then(x=>({...t.env,...x})))),await Pl(t,a,e.output,p)),await ZY(e,t,r,f,u,w),e.postCreate.skipNonBlocking&&E))return;await e4(e,t,r,f,u,w)}e.postCreate.done()}})();e.backgroundTasks.push(S),await Promise.race([C,S])}return{hostOrContainerPort:m,hostPortServer:h,connectionToken:g,webConnectionToken:v,remoteEnv:e.computeExtensionHostEnv?await f:{},serverDownloaded:s}}async function Il(e,t,r,n,o=Js,i,s){await DN(e,t);let a=await RN(e,t,n),{serverDownloaded:c}=await kN(e,t),u,l,d=Promise.resolve(),f;if(!e.cliMode&&t.nodeExecutable){let C=await Wf(e,t);u=C.remoteContainersCLI,l=C.remoteEnv,d=C.ready,f=C.mrpcExec;let S=e.cliHost.reconnect;S&&(e.cliHost.reconnect=async()=>{await S(),C.reconnect().catch(x=>e.output.write(dt(x&&(x.stack||x.message)||String(x))))})}let m=e.computeExtensionHostEnv||t.installFolder&&e.cliMode||e.postCreate.enabled?Cl(e,t,n,f).then(async C=>({...C,...l,...await OO(t,C),...e.cliMode?{}:{REMOTE_CONTAINERS:"true"},...yS(e.cliHost.platform,r.configFilePath,t.env,n.remoteEnv||{})})):Promise.resolve({}),h=a.getConfiguration("gitCredentialHelperConfigLocation")??e.credentialHelperConfigLocation;!e.cliMode&&t.nodeExecutable&&(await Cc(e,t,[".ssh","known_hosts"],"ssh"),h!=="none"&&await Pl(t,u,e.output,"system"));let g,v,w,E;if(t.installFolder){let S=await MN(e,t,o,f,async()=>ON(e,t,async()=>{var P;return[...new Set([].concat(...(((P=n.customizations)==null?void 0:P.vscode)||[]).map(T=>T.extensions||[])))]}),m),x=S.serverPort;w=S.connectionToken,E=S.webConnectionToken,g=x,e.forwardServerPort&&t.nodeExecutable&&(v=await vS(e,t,x,e.sessionId),g=v.address().port,e.backgroundTasks.push(async()=>jN(e,t,n)))}if(e.postCreate.enabled){let C,S=new Promise(I=>C=()=>{I()}),x=(async()=>{let I={...l,...e.cliMode?{}:{REMOTE_CONTAINERS:"true"}},P=["onCreateCommand","updateContentCommand","postCreateCommand","postStartCommand","postAttachCommand"],T=P.reduce((D,R)=>(D[R]=(n[`${R}s`]||[]).length>0,D),{});if(e.prebuild){let D=P.indexOf("updateContentCommand");if((!P.slice(0,D+1).some(U=>T[U])?"prebuild":await i(!1,!1,!0,I))!=="prebuild")throw new Error('"prebuild" expected')}else{let D=!0,R=!0,k=n.waitFor||CS,U=P.indexOf(k),W=P.indexOf("postCreateCommand"),j=U<=W&&!P.slice(0,U+1).some(H=>T[H]),$=!P.slice(0,W+1).some(H=>T[H]),O=j?"skipNonBlocking":$?"stopForPersonalization":await i(D,R,!1,I);if(O==="skipNonBlocking"){if(C(),e.postCreate.skipNonBlocking)return;D=!1,O=!P.slice(U+1,W+1).some(Q=>T[Q])?"stopForPersonalization":await i(D,R,!1,I)}if(O==="stopForPersonalization"){await dS(e,t,m,d,a),!e.cliMode&&t.nodeExecutable&&((a.getConfiguration("copyGitConfig")??e.isCopyGitConfigEnabled)&&(await Cc(e,t,[".gitconfig"],"git"),await dv(e,t,m.then(M=>({...t.env,...M})))),await Pl(t,u,e.output,h)),await(s==null?void 0:s()),R=!1;let H=U>W&&!P.slice(W+1,U+1).some(M=>T[M]),Q=!P.slice(W+1).some(M=>T[M]);O=H?"skipNonBlocking":Q?"done":await i(D,R,!1,I)}if(O==="skipNonBlocking"){if(C(),e.postCreate.skipNonBlocking)return;D=!1,O=!P.slice(U+1).some(Q=>T[Q])?"done":await i(D,R,!1,I)}if(O!=="done")throw new Error('"done" expected')}})();x.then(()=>{e.postCreate.done()},I=>{e.postCreate.done(I)}),e.backgroundTasks.push(x),await Promise.race([S,x])}return{hostOrContainerPort:g,hostPortServer:v,connectionToken:w,webConnectionToken:E,remoteEnv:e.computeExtensionHostEnv?await m:{},serverDownloaded:c}}async function DN(e,t){let r=UY(t.homeFolder);!await iv(t.shellServer,t.userDataFolder)&&await iv(t.shellServer,r)&&await ns(e,t,["/bin/sh","-c",`cp -r '${r}' '${t.userDataFolder}'`])}async function RN(e,t,r){var s;let n=go(t),o=Re.posix.join(n,".writeMachineSettingsMarker"),i=uv(t);if(await fv(t.shellServer,o)){let a=(s=r.customizations)==null?void 0:s.vscode,c=Object.assign({},...(Array.isArray(a)?a:a?[a]:[]).map(u=>u.settings));if(HY(c,r.portsAttributes),qY(c,r.otherPortsAttributes),Object.keys(c).length)return await t.shellServer.exec(`mkdir -p '${Re.posix.dirname(i)}' && cat >'${i}' <<'settingsJSON'
${JSON.stringify(c,null,"	")}
settingsJSON
`),new ep(c)}try{let{stdout:a}=await t.shellServer.exec(`cat ${i}`);return new ep(yt(a)||{})}catch{return new ep({})}}function HY(e,t){if(!e||!t||!Object.keys(t).length)return;let r="remote.portsAttributes";if(!e[r]){e[r]=t;return}for(let n in t)e[r][n]||(e[r][n]=t[n])}function qY(e,t){if(!e||!t)return;let r="remote.otherPortsAttributes";e[r]||(e[r]=t)}async function lv(e,t,r,n){let o=typeof e.gid=="string"?`${e.user}:${e.gid}`:e.user,i=await t();if((await i.exec(`stat -c %u ${r}`)).stdout.trim()==="0"){let c=Re.posix.dirname(r);c!=="/"&&await i.exec(`chown ${o} ${c}`),r!=="/"&&await i.exec(`chown -R ${o} ${r}`)}else if(n&&(await i.exec(`stat -c %u ${n}`)).stdout.trim()==="0"){let l=Re.posix.dirname(n);l!=="/"&&await i.exec(`chown -R ${o} ${l}`)}}async function Pl(e,t,r,n){if((t||Ti)&&n!=="none"){let o=n==="system"?e.launchRootShellServer&&await e.launchRootShellServer():e.shellServer;o?await o.exec(`command -v git >/dev/null 2>&1 && git config --${n} --replace-all credential.helper '!f() { ${e.nodeExecutable} ${t} git-credential-helper $*; }; f' || true`):r.write("Cannot configure system wide Git credential helper without root access.")}}async function Cc(e,t,r,n){let{cliHost:o}=e,i=o.path.join(await o.homedir(),...r),s=Re.posix.join(t.homeFolder,...r);await fl(e,t,i,s,n)}async function dv(e,t,r){let{cliHost:n}=e,{env:o}=n,i=["git","config"],s=o.XDG_CONFIG_HOME?[o.XDG_CONFIG_HOME]:[await n.homedir(),".config"],a=n.path.join(...s,...i),c=(async()=>{let u=await r,l=u.XDG_CONFIG_HOME?[u.XDG_CONFIG_HOME]:[t.homeFolder,".config"];return Re.posix.join(...l,...i)})();await fl(e,t,a,c,"git")}async function fl(e,t,r,n,o){let i=await BY(e.cliHost,r);if(i)try{let s=await n;await t.shellServer.exec(`# Test for ${s} and ${o}
[ -e ${s} ] && echo ${s} exists && exit 1
command -v ${o} >/dev/null 2>&1 || (echo ${o} not found && exit 1) || exit 1
mkdir -p ${Re.posix.dirname(s)}`),await t.shellServer.exec(`# Copy ${r} to ${s}
${bS(i.byteLength)} >${s}`,{stdin:i})}catch(s){if(s&&s.code!==1)throw s}}async function BY(e,t){try{return await e.readFile(t)}catch(r){if(r&&(r.code==="ENOENT"||r.code==="EISDIR"))return;throw r}}async function kN(e,t){let{commit:r}=e.product,{installFolder:n,shellServer:o,launchRootShellServer:i,build:s}=t;if(!(r&&n))return{serverDownloaded:void 0};VY(t.osRelease,s),s.preview&&e.output.write(`\r
\x1B[1mSupport for ${s.label} is in preview.\x1B[22m\r
\r
`);let a=await iv(o,n),c;a||s===LN[s.arch]&&(i?c=(await i()).exec("apk info | grep -e '^libstdc++$' || (apk update && apk add libstdc++)"):c=o.exec(`apk info | grep -e '^libstdc++$' || (echo "ERROR: libstdc++ not found. Please install." >&2 && exit 1)`));let u=t.sharedInstallFolder;if(u&&await iv(o,u))return a||await o.exec(`mkdir -p '${Re.posix.dirname(n)}' && ln -snf '${u}' '${n}'`),i&&(async()=>{await(await i()).exec(`touch '${u}'`)})().catch(console.error),await c,{serverDownloaded:!1};if(a)return{serverDownloaded:!1};e.progress(4),e.output.write(`Installing VS Code Server for commit ${r}\r
`);let l=!!(u&&i),d=l?u:n,f=l?await i():o,p={localCacheFolder:e.localCacheFolder,build:s,commit:r,quality:e.product.quality||"insider",web:e.web,output:e.output,alternateDownload:e.alternateDownload},m=zf(p),h=await lr(m);h||await Vg(p);try{t.sharedDataFolderIsLocalCacheFolder?await wN(p):await Vf(e,f,m,d)}catch(g){if(g&&g.stderr&&/unexpected end of file|not in gzip format/i.test(g.stderr.toString()))await Vg(p),t.sharedDataFolderIsLocalCacheFolder?await wN(p):await Vf(e,f,m,d);else throw g}return l&&(await o.exec(`mkdir -p '${Re.posix.dirname(n)}' && ln -snf '${u}' '${n}'`),(async()=>{await f.exec(`touch '${u}' && cd '${Re.posix.dirname(u)}' && ls -td *[^_]????????????? | tail -n +10 | xargs rm -rf`)})().catch(console.error)),await c,{serverDownloaded:!h}}function VY(e,t){let r=e.version;if(t.minVersion&&r){let n=Sl(r.trim());if(n&&bl(n,t.minVersion)){let o=`${t.label} ${t.minVersion.join(".")} or later required.`;throw new Me({description:o,data:{reload:!1}})}}}async function Vg(e){let{build:t,commit:r,quality:n,web:o,output:i}=e,s="Downloading VS Code Server",a=i.start(s);i.write(`${r} ${t.id} ${n} ${o?"web":""}`);let c=zf(e);await Lo(Re.dirname(c));let u=`https://update.code.visualstudio.com/commit:${r}/server-${t.id}${o?"-web":""}/${n}`;try{let l=`${c}_${Date.now()}`;await new Promise((d,f)=>{let p=sv.createWriteStream(l);i.write("Starting download.",1),SN.https.get(u,h=>{if(h.statusCode<200||h.statusCode>299){i.write(`Download failed: ${h.statusCode} ${h.statusMessage}.`,1),f(new Me({description:"Downloading the VS Code Server failed. Please try again later.",originalError:`Failed to download VS Code Server (${u}): HTTP ${h.statusCode} - ${h.statusMessage}`}));return}i.write("Downloading data.",1),h.on("error",f),h.pipe(p),h.on("end",d)}).on("error",f)}),await Wi(l,c)}catch(l){if(i.write("Downloading failed.",1),i.write((l==null?void 0:l.stack)||(l==null?void 0:l.message)||String(l),1),e.alternateDownload){i.write(l&&(l.originalError||l.message)),i.write("Retrying to download VS Code Server.");let d=`${c}_${Date.now()}`;await e.alternateDownload(u,d),await Wi(d,c)}else throw l||new Error("Failed to download VS Code Server.")}finally{i.stop(s,a)}}async function Vf(e,t,r,n,o,i=!0){let s="Installing VS Code Server",a=e.output.start(s),c=`${n}_${Date.now()}`;try{if(await t.exec(`mkdir -p ${c}`),o)typeof r=="string"&&r.endsWith(".zip")?await t.exec(`unzip ${r} -d ${c}`):await t.exec(`cat ${r} | tar --no-same-owner -x${i?"z":""} -C ${c}`);else{let u=typeof r=="string"?await pt(r):r;await t.exec(`${bS(u.byteLength)} | tar --no-same-owner -x${i?"z":""} -C ${c}`,{stdin:u})}await t.exec(`mv -n ${Re.posix.join(c,"*",".")} ${n} && rmdir ${c}`)}catch(u){try{await t.exec(`rm -rf ${c}`)}catch{}throw u}finally{e.output.stop(s,a)}}async function wN(e){let{localCacheFolder:t,build:r,commit:n,quality:o,web:i,output:s}=e,a="Unpacking VS Code Server",c=s.start(a);s.write(`${n} ${r.id} ${o} ${i?"web":""}`);let u=await PN(Re,t,r,n,o,i),l=`${u}_${Date.now()}`;try{await Lo(l);let d=zf(e);await(await rs(void 0)({cmd:"tar",args:["--no-same-owner","-xzf",d,"--strip-components","1","-C",l],cwd:process.cwd(),output:s})).exit,await Fs(u,{recursive:!0,force:!0}),await Wi(l,u)}catch(d){try{await Fs(l,{recursive:!0,force:!0})}catch{}throw d}finally{s.stop(a,c)}}function zf(e){let{localCacheFolder:t,build:r,commit:n,quality:o,web:i}=e,s=Re.join(t,"serverCache",n),a=`vscode-server-${r.id}${o==="stable"?"":`-${o}`}${i?"-web":""}${r.archiveExt||".tar.gz"}`;return Re.join(s,a)}async function AN(e,t){let r={VSCODE_AGENT_FOLDER:t.userDataFolder},{stdout:n}=await ns(e,t,[Re.posix.join(t.installFolder,...Kf(e.product)),...$N(t.userDataFolder),...UN(e.getTelemetryLevel()),"--list-extensions"],t.installFolder,{remoteEnv:r});return n.toString().split(`
`).filter(o=>!!o)}async function ON(e,t,r){let n="Preparing Extensions",o=e.output.start(n),{sharedDataFolder:i}=t,s=i?XY(i):void 0,a=NN(t),c=await WY(e,t,r);if(t.sharedDataFolderIsLocalCacheFolder)t.shellServer.exec(`mkdir -p '${s}' && ln -s -T '${s}' '${a}' || true`),t.launchRootShellServer&&(await t.launchRootShellServer()).exec(`chown -R ${t.user} ${s}`);else{let u=KY(e.localCacheFolder),l=await GY(e,t,u,s,a,[...c.builtinExtensions,...c.extensions]);zY(e,t,u,s,a,l).catch(console.error)}return e.output.stop(n,o),c}async function WY(e,t,r){let n=go(t),o=Re.posix.join(n,".installExtensionsMarker"),i=!await fv(t.shellServer,o),s=i?[]:e.installBuiltinExtensions||[],a=await e.getAdditionalExtensionsToInstall(i),c=i?[]:await r();for(let l of a)c.indexOf(l)===-1&&c.push(l);let u=[].concat(...s.map(l=>["--install-builtin-extension",l]),...c.map(l=>["--install-extension",l]));return e.cliMode&&u.length&&u.push("--do-not-sync"),{builtinExtensions:s,extensions:c,args:u}}async function GY(e,t,r,n,o,i){e.output.write(`Extensions cache, install extensions: ${i.join(", ")||"None"}`);let{shellServer:s}=t,a=(await s.exec(`test -d ${o} && ls ${o} || true`)).stdout.trim().split(`
`).filter(c=>!!c);if(n){let c=(await s.exec(`test -d ${n} && ls ${n} || true`)).stdout.trim().split(`
`).filter(l=>!!l),u=c.filter(l=>i.some(d=>l.toLowerCase().startsWith(d.toLowerCase()))&&a.indexOf(l)===-1);if(e.output.write(`Extensions cache, link in container: ${u.join(", ")||"None"}`),u.length){await s.exec(`mkdir -p '${o}' && ln -s '${n}'/* '${o}' || true`);let{launchRootShellServer:l}=t;l&&(async()=>{await(await l()).exec(`cd ${n} && touch ${u.map(f=>`'${f}'`).join(" ")}`)})().catch(console.error)}return{remoteExtensions:[...new Set([...a,...c])],cachedExtensions:c}}else{await Lo(r);let c=await Ls(r),u=c.filter(l=>i.some(d=>l.toLowerCase().startsWith(d.toLowerCase()))&&a.indexOf(l)===-1);if(e.output.write(`Extensions cache, copy to remote: ${u.join(", ")||"None"}`),u.length){let l=Re.basename(r),d=av.c({cwd:Re.dirname(r)},u.map(m=>Re.join(l,m))),f=Re.posix.join(o,`tmp-${Date.now()}`),p=await new Promise(m=>{let h=[];d.on("data",g=>h.push(g)),d.on("end",()=>m(Buffer.concat(h)))});await s.exec(`# Copy extensions to remote
mkdir -p ${f}
${bS(p.byteLength)} | tar --no-same-owner -x --strip-components 1 -C ${f}
mv ${f}/* ${o} && rmdir ${f}`,{stdin:p})}return{remoteExtensions:a.concat(u),cachedExtensions:c}}}async function zY(e,t,r,n,o,i){if(n&&!t.launchRootShellServer)return;let s=1e4,a=6e4;for(await yo(s);;)i=await YY(e,t,r,n,o,i),await yo(a)}async function YY(e,t,r,n,o,{remoteExtensions:i,cachedExtensions:s}){let{shellServer:a,launchRootShellServer:c,remoteExec:u}=t,l=(await a.exec(`ls ${o} || true`,{logOutput:"silent"})).stdout.trim().split(`
`).filter(f=>!!f);if(!n){let f=i.filter(p=>l.indexOf(p)===-1);e.output.write(`Extensions cache, remote removals: ${f.join(", ")||"None"}`);for(let p of f)try{await $T(Re.join(r,p))}catch(m){if(!(m&&m.code==="ENOENT"))throw m}}let d=l.filter(f=>i.indexOf(f)===-1&&s.indexOf(f)===-1);if(e.output.write(`Extensions cache, copy to ${n?"shared cache":"local"}: ${d.join(", ")||"None"}`,1),d.length)if(n){let f=await c();await f.exec(`mkdir -p '${n}' && cd '${o}' && cp ${d.map(p=>`'${p}'`).join(" ")} '${n}'`),await f.exec(`cd '${n}' && ls -t | tail -n +50 | xargs rm -f`)}else{let f=Re.posix.basename(o),p=await u({cmd:"tar",cwd:Re.posix.dirname(o),args:["c",...d.map(v=>Re.posix.join(f,v))],output:e.output}),m=Re.join(Re.dirname(r),`${Re.basename(r)}-${Date.now()}`);await Lo(m);let h=av.x({cwd:m,strip:1}),g=new Promise((v,w)=>{h.on("error",w),h.on("finish",v)});p.stdout.pipe(h),await g;for(let v of await Ls(m))await Wi(Re.join(m,v),Re.join(r,v));await UT(m)}return{remoteExtensions:l,cachedExtensions:s}}var _S="extensionsCache";function KY(e){return Re.join(e,_S)}function XY(e){return Re.posix.join(e,_S)}function NN(e){return Re.posix.join(e.userDataFolder,_S)}var QY={x64:{label:"x86-64",id:"linux-x64",arch:"x64",stable:!0,preview:!1},armhf:{label:"ARM",id:"linux-armhf",arch:"armhf",stable:!0,preview:!0},arm64:{label:"ARM64",id:"linux-arm64",arch:"arm64",stable:!0,preview:!0}},LN={x64:{label:"Alpine Linux",id:"linux-alpine",arch:"x64",stable:!0,preview:!0,minVersion:[3,9]},arm64:{label:"Alpine Linux ARM64",id:"alpine-arm64",arch:"arm64",stable:!0,preview:!0,minVersion:[3,9]}},G_={label:"Mac",id:"darwin",arch:"x64",stable:!0,preview:!0,archiveExt:".zip"},JY={x86_64:"x64",armv7l:"armhf",arm64:"arm64",aarch64:"arm64"};function J_(e,t){let r=JY[e.hardware];if(e.id==="alpine"){let o=r&&LN[r];if(!o)throw new Me({description:`Alpine Linux is not supported on the hardware architecture '${e.hardware}' of the container.`,data:{learnMoreUrl:"https://aka.ms/vscode-remote/linux",reload:!1}});return o}let n=r&&QY[r];if(!n||t&&!n.stable)throw new Me({description:`The hardware architecture '${e.hardware}' of the container is not supported.`,data:{learnMoreUrl:"https://aka.ms/vscode-remote/linux",reload:!1}});return n}async function Z_(e){let t="unknown",r="unknown",n="unknown";try{t=(await e.exec("uname -m")).stdout.trim();let{stdout:o}=await e.exec("(cat /etc/os-release || cat /usr/lib/os-release) 2>/dev/null");r=(o.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",n=(o.match(/^VERSION_ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound"}catch(o){console.error(o)}return{hardware:t,id:r,version:n}}async function wS(e,t,r,n,o,i,s,a){let c=Re.posix.join(go(t),`.${n}Marker`),u=!!t.createdAt&&await FN(t.shellServer,c,t.createdAt)||s;await SS(e,t,r,n,o,i,u,a)}async function ZY(e,t,r,n,o,i){let s=Re.posix.join(go(t),".postStartCommandMarker"),a=!!t.startedAt&&await FN(t.shellServer,s,t.startedAt);await SS(e,t,r,"postStartCommand",n,o,a,i)}async function FN(e,t,r){try{return await e.exec(`mkdir -p '${Re.posix.dirname(t)}' && CONTENT="$(cat '${t}' 2>/dev/null || echo ENOENT)" && [ "\${CONTENT:-${r}}" != '${r}' ] && echo '${r}' > '${t}'`),!0}catch{return!1}}async function e4(e,t,r,n,o,i){await SS(e,t,r,"postAttachCommand",n,o,!0,i)}async function SS({postCreate:e},t,r,n,o,i,s,a){let c=r[n];if(s&&c&&(typeof c=="string"?c.trim():c.length)){await i;let u=`Running ${n}...`,l=typeof c=="string"?c:c.join(" "),d=ao({event(f){e.output.event(f),f.type==="raw"&&f.text.includes("::endstep::")&&e.output.event({type:"progress",name:u,status:"running",stepDetail:""}),f.type==="raw"&&f.text.includes("::step::")&&e.output.event({type:"progress",name:u,status:"running",stepDetail:`${f.text.split("::step::")[1].split(`\r
`)[0]}`})},get dimensions(){return e.output.dimensions},onDidChangeDimensions:e.output.onDidChangeDimensions},3);try{d.event({type:"progress",name:u,status:"running",stepDetail:l});let f=t.remoteWorkspaceFolder||t.homeFolder;d.raw(`\x1B[1mRunning the ${n} from devcontainer.json...\x1B[0m\r
\r
`),await i4({...e,output:d},t,typeof c=="string"?["/bin/sh","-c",c]:c,f,{remoteEnv:await o,print:"continuous"}),d.raw(`\r
`),d.event({type:"progress",name:u,status:"succeeded"})}catch(f){if(d.event({type:"progress",name:u,status:"failed"}),f&&(f.code===130||f.signal===2))d.raw(`\r
\x1B[1m${n} interrupted.\x1B[0m\r
\r
`);else throw f!=null&&f.code&&d.write(dt(`${n} failed with exit code ${f.code}. Skipping any further user-provided commands.`)),new Me({description:`The ${n} in the devcontainer.json failed.`,originalError:f})}}n===(r.waitFor||CS)&&a()}async function fv(e,t){try{return await e.exec(ev(t)),!0}catch{return!1}}function ev(e){return`test ! -f '${e}' && set -o noclobber && mkdir -p '${Re.posix.dirname(e)}' && { > '${e}' ; } 2> /dev/null`}async function iv(e,t){try{return await t4(e,t),!0}catch{return!1}}async function t4(e,t){return e.exec(`test -d ${t}`)}async function MN(e,t,r,n,o,i){let{userDataFolder:s,installFolder:a,sharedInstallFolder:c,shellServer:u}=t,{processes:l,mntNS:d}=await R_(u),f=`(${Re.posix.join(...Kf(e.product,!1))}|${Re.posix.join(...Kf(e.product,!0))})`.replace(".","\\."),p=new RegExp(`${Re.posix.join(Re.posix.dirname(a).replace(".","\\."),"[^/]*",f)}`),m=l.filter($=>$.mntNS===d&&p.test($.cmd));e.output.write(`Running extension host agents:
${JSON.stringify(m,void 0,"  ")}`,1);let{current:h,others:g}=m.reduce(($,O)=>($[(O.cwd===a||O.cwd===c)&&p.test(O.cmd)?"current":"others"].push(O),$),{current:[],others:[]});if(!e.cliMode&&g.length){e.output.write(`Terminating old extension host agent.\r
`);try{await u.exec(`kill -9 ${g.map($=>$.pgrp?`-${$.pgrp}`:$.pid).join(" ")}`)}catch{}}let{commit:v,quality:w}=e.product,E=Re.posix.join(go(t),`.connection-token-${v}${w==="stable"?"":`-${w}`}${e.web?"-web":""}`),C=Re.posix.join(go(t),`.devport-${v}${w==="stable"?"":`-${w}`}${e.web?"-web":""}`);if(h.length){e.output.write(`Extension host agent is already running.\r
`);try{let{stdout:$}=await u.exec(`cat '${C}' 2>/dev/null`),O=$.toString().trim(),H=parseInt(O,10),Q=new RegExp(` '?${EN(e.product)}'? `).test(h[0].cmd)?(await u.exec(`cat '${E}'`)).stdout.toString().trim():void 0,M=(/'?--connectionToken'? '?([^ ']+)'? /.exec(h[0].cmd)||[])[1];return{serverPort:H,connectionToken:Q,webConnectionToken:M}}catch($){console.error($),e.output.write(`Agent port not found. Terminating old extension host agent.\r
`);try{await u.exec(`kill -9 ${h.map(O=>O.pgrp?`-${O.pgrp}`:O.pid).join(" ")}`)}catch{}}}let S="webConnectionToken"in e,x="isLocalContainer"in e&&e.isLocalContainer,I=S&&!!e.webConnectionToken,P;if(!I){let $=`${E}-${Mr()}`,{stdout:O}=await u.exec(`cat '${E}' 2>/dev/null || (umask 377 && echo '${Mr()}' >'${$}' && mv -n '${$}' '${E}' && rm -f '${$}' && cat '${E}')`);P=O.toString().trim()}e.progress(5);let T="Starting VS Code Server",D=e.output.start(T),R=[Re.posix.join(a,...Kf(e.product,I)),"--log",Ei(e.getLogLevel()),"--force-disable-user-env",...$N(t.userDataFolder),...r4(x),...UN(e.getTelemetryLevel()),"--accept-server-license-terms","--host","127.0.0.1","--port",String(r),...S&&e.webConnectionToken?["--connectionToken",e.webConnectionToken]:[],...P?[EN(e.product),E]:[],"--extensions-download-dir",NN(t),...(await o()).args,"--start-server",...x?["--disable-websocket-compression"]:[""],...e.cliMode?["--enable-remote-auto-shutdown"]:[]],U=(await ns(e,{remoteExec:t.remoteExec},R,a,{remoteEnv:{SHELL:t.shell,VSCODE_AGENT_FOLDER:s,...e.cliMode?await i:{}},resolveOn:yN,print:"continuous"})).cmdOutput;e.output.stop(T,D);let W=(yN.exec(U)||[])[1];if(!W)throw new Error("Port not found");return await u.exec(`echo ${W} >'${C}'`),{serverPort:parseInt(W,10),connectionToken:P,webConnectionToken:S?e.webConnectionToken:void 0}}function $N(e){return["--server-data-dir",e]}function EN(e){return e.serverApplicationName?"--connection-token-file":"--connection-secret"}function r4(e){return e?["--use-host-proxy"]:[]}function UN(e){return e?["--telemetry-level",e]:[]}var n4=/^([a-z0-9\-]+):(\d{1,5})$/;function o4(e){let t=e.match(n4);if(!(!t||t.length!==3))return{host:t[1],port:Number(t[2])}}async function jN(e,t,r){let n=(r.forwardPorts||[]).map(i=>typeof i=="number"?`localhost:${i}`:i).map(o4).filter(Boolean),o=await e.getTunnels();await Promise.all(n.filter(i=>!o.find(s=>s.remoteAddress.host===i.host&&s.remoteAddress.port===i.port)).map(async({host:i,port:s})=>e.openTunnel(t,s,i)))}async function i4(e,{remotePtyExec:t},r,n,o={}){let i=o.print||(o.silent?"off":"end"),s=await t({env:o.remoteEnv,cwd:n,cmd:r[0],args:r.slice(1),output:o.silent?ut:e.output}),a="",c,u=new Promise(f=>{c=f});s.onData(f=>{a+=f,i==="continuous"&&e.output.raw(f),o.resolveOn&&o.resolveOn.exec(a)&&c()});let l=e.onDidInput&&e.onDidInput(f=>s.write(f)),d=await Promise.race([s.exit,u]);return l&&l.dispose(),i==="end"&&e.output.raw(a),d&&(d.code||d.signal)?Promise.reject({message:`Command failed: ${r.join(" ")}`,cmdOutput:a,code:d.code,signal:d.signal}):{cmdOutput:a}}async function ns(e,{remoteExec:t},r,n,o={}){let i=o.print||(o.silent?"off":"end"),s=await t({env:o.remoteEnv,cwd:n,cmd:r[0],args:r.slice(1),output:o.silent?ut:e.output}),a=[],c=[],u=new ES.StringDecoder,l=new ES.StringDecoder,d="",f="",p,m,h=new Promise((C,S)=>{p=C,m=S});s.stdout.on("data",C=>{a.push(C);let S=u.write(C);i==="continuous"&&e.output.write(S.replace(/\r?\n/g,`\r
`)),d+=S,o.resolveOn&&o.resolveOn.exec(d)&&p()}),s.stderr.on("data",C=>{c.push(C),f+=l.write(C)}),o.stdin instanceof Buffer?(s.stdin.write(o.stdin,C=>{C&&m(C)}),s.stdin.end()):o.stdin instanceof sv.ReadStream&&o.stdin.pipe(s.stdin);let g=await Promise.race([s.exit,h]),v=Buffer.concat(a),w=Buffer.concat(c);i==="end"&&(e.output.write(d.replace(/\r?\n/g,`\r
`)),e.output.write(dt(f)));let E=`${d}
${f}`;return g&&(g.code||g.signal)?Promise.reject({message:`Command failed: ${r.join(" ")}`,cmdOutput:E,stdout:v,stderr:w,code:g.code,signal:g.signal}):{cmdOutput:E,stdout:v,stderr:w}}function bS(e){let r=e%8192;return`(dd iflag=fullblock bs=${8192} count=${(e-r)/8192} 2>/dev/null; dd iflag=fullblock bs=${r} count=1 2>/dev/null)`}async function s4(e,t){let r=Re.posix.join(Tl(e.product.serverDataFolderName),".patchEtcEnvironmentMarker");if(e.allowSystemConfigChange&&t.launchRootShellServer&&!await gl(t.shellServer,r)){let n=await t.launchRootShellServer();await fv(n,r)&&await n.exec(`cat >> /etc/environment <<'etcEnvrionmentEOF'
${Object.keys(t.env).map(o=>`
${o}="${t.env[o]}"`).join("")}
etcEnvrionmentEOF
`)}}async function a4(e,t){let r=Re.posix.join(Tl(e.product.serverDataFolderName),".patchEtcProfileMarker");if(e.allowSystemConfigChange&&t.launchRootShellServer&&!await gl(t.shellServer,r)){let n=await t.launchRootShellServer();await fv(n,r)&&await n.exec("sed -i -E 's/((^|\\s)PATH=)([^\\$]*)$/\\1${PATH:-\\3}/g' /etc/profile || true")}}async function Cl(e,t,r,n){let o=l4(r,e);if(!o||o==="none")return{};let i=await c4(o,e,t.shellServer);return i||(e.output.write("userEnvProbe: not found in cache"),i=await CN(o,e,t,n,"cat /proc/self/environ","\0"),i||(e.output.write("userEnvProbe: falling back to printenv"),i=await CN(o,e,t,n,"printenv",`
`)),i&&await u4(i,o,e,t.shellServer),i||{})}async function c4(e,t,r){if(!r||!t.containerSessionDataFolder)return;let n=HN(e,t.containerSessionDataFolder);try{if(await gl(r,n)){let{stdout:o}=await r.exec(`cat '${n}'`);return JSON.parse(o)}}catch(o){t.output.write(`Failed to read/parse user env cache: ${o}`,5)}}async function u4(e,t,r,n){if(!n||!r.containerSessionDataFolder)return;let o=HN(t,r.containerSessionDataFolder);try{await n.exec(`mkdir -p '${Re.posix.dirname(o)}' && cat > '${o}' << 'envJSON'
${JSON.stringify(e,null,"	")}
envJSON
`)}catch(i){r.output.write(`Failed to cache user env: ${i}`,5)}}function HN(e,t){return Re.posix.join(t,`env-${e}.json`)}async function CN(e,t,r,n,o,i){var s;if(e==="none")return{};try{let c=(await(0,xN.promisify)(bN.randomBytes)(16)).toString("hex"),u=new RegExp(c+"([^]*)"+c),l=r.shell;t.output.write(`userEnvProbe shell: ${l}`);let d=Re.posix.basename(l),f=`echo -n ${c}; ${o}; echo -n ${c}`,p;/^pwsh(-preview)?$/.test(d)?p=e==="loginInteractiveShell"||e==="loginShell"?["-Login","-Command"]:["-Command"]:p=[e==="loginInteractiveShell"?"-lic":e==="loginShell"?"-lc":e==="interactiveShell"?"-ic":"-c"];let m=ao(t.output,1),h=ns({output:m},{remoteExec:await n||r.remoteExec},[l,...p,f],r.installFolder);Promise.race([h,yo(2e3)]).then(async P=>{if(!P){let T,D=r.shellServer||await ho(r.remoteExec,t.output);try{({processes:T}=await R_(D))}finally{r.shellServer||await D.process.terminate()}let R=T.find(k=>k.cmd.startsWith(l)&&k.cmd.indexOf(c)!==-1);if(R){let U=wA(T)[R.pid];t.output.write(`userEnvProbe is taking longer than 2 seconds. Process tree:
${k_(U)}`)}else t.output.write("userEnvProbe is taking longer than 2 seconds. Process not found.")}},()=>{}).catch(P=>t.output.write(dt(P&&(P.stack||P.message)||"Error reading process tree.")));let g=await Promise.race([h,yo(1e4)]);if(!g)return t.output.write(dt("userEnvProbe is taking longer than 10 seconds. Avoid waiting for user input in your shell's startup scripts. Continuing.")),{};let v=g.stdout.toString(),w=u.exec(v),E=w?w[1]:"";if(!E||E.trim()==="-n")return;let C=E.split(i).reduce((P,T)=>{let D=T.indexOf("=");return D!==-1&&(P[T.substring(0,D)]=T.substring(D+1)),P},{});t.output.write(`userEnvProbe parsed: ${JSON.stringify(C,void 0,"  ")}`,1),delete C.PWD;let S=C.PATH,x=(s=r.env)==null?void 0:s.PATH,I=!(t.allowSystemConfigChange&&r.launchRootShellServer)&&S&&x;if(I){let P=r.user;C.PATH=d4(S,x,P==="root"||P==="0")}return t.output.write(`userEnvProbe PATHs:
Probe:     ${typeof S=="string"?`'${S}'`:"None"}
Container: ${typeof x=="string"?`'${x}'`:"None"}${I?`
Merged:    ${typeof C.PATH=="string"?`'${C.PATH}'`:"None"}`:""}`),C}catch(a){return t.output.write(dt(a&&(a.stack||a.message)||"Error reading shell environment.")),{}}}function l4(e,t){let r=e==null?void 0:e.userEnvProbe;return t.output.write(`userEnvProbe: ${r||t.defaultUserEnvProbe}${r?"":" (default)"}`),r||(r=t.defaultUserEnvProbe),r}function d4(e,t,r){let n=e.split(":"),o=0;for(let i of t.split(":")){let s=n.indexOf(i);s===-1?(r||!/\/sbin(\/|$)/.test(i))&&n.splice(o++,0,i):o=s+1}return n.join(":")}async function qN(e){for(let t of e)await(typeof t=="function"?t():t)}var $L=ce(require("crypto")),fp=ce(require("path"));function oL(e){return typeof e>"u"||e===null}function f4(e){return typeof e=="object"&&e!==null}function p4(e){return Array.isArray(e)?e:oL(e)?[]:[e]}function m4(e,t){var r,n,o,i;if(t)for(i=Object.keys(t),r=0,n=i.length;r<n;r+=1)o=i[r],e[o]=t[o];return e}function h4(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}function g4(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var v4=oL,y4=f4,w4=p4,E4=h4,C4=g4,_4=m4,fr={isNothing:v4,isObject:y4,toArray:w4,repeat:E4,isNegativeZero:C4,extend:_4};function iL(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),n+" "+r):n}function rp(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=iL(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}rp.prototype=Object.create(Error.prototype);rp.prototype.constructor=rp;rp.prototype.toString=function(t){return this.name+": "+iL(this,t)};var dn=rp;function xS(e,t,r,n,o){var i="",s="",a=Math.floor(o/2)-1;return n-t>a&&(i=" ... ",t=n-a+i.length),r-n>a&&(s=" ...",r=n+a-s.length),{str:i+e.slice(t,r).replace(/\t/g,"\u2192")+s,pos:n-t+i.length}}function PS(e,t){return fr.repeat(" ",t-e.length)+e}function S4(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],o=[],i,s=-1;i=r.exec(e.buffer);)o.push(i.index),n.push(i.index+i[0].length),e.position<=i.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var a="",c,u,l=Math.min(e.line+t.linesAfter,o.length).toString().length,d=t.maxLength-(t.indent+l+3);for(c=1;c<=t.linesBefore&&!(s-c<0);c++)u=xS(e.buffer,n[s-c],o[s-c],e.position-(n[s]-n[s-c]),d),a=fr.repeat(" ",t.indent)+PS((e.line-c+1).toString(),l)+" | "+u.str+`
`+a;for(u=xS(e.buffer,n[s],o[s],e.position,d),a+=fr.repeat(" ",t.indent)+PS((e.line+1).toString(),l)+" | "+u.str+`
`,a+=fr.repeat("-",t.indent+l+3+u.pos)+`^
`,c=1;c<=t.linesAfter&&!(s+c>=o.length);c++)u=xS(e.buffer,n[s+c],o[s+c],e.position-(n[s]-n[s+c]),d),a+=fr.repeat(" ",t.indent)+PS((e.line+c+1).toString(),l)+" | "+u.str+`
`;return a.replace(/\n$/,"")}var b4=S4,x4=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],P4=["scalar","sequence","mapping"];function T4(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}function I4(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(x4.indexOf(r)===-1)throw new dn('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=T4(t.styleAliases||null),P4.indexOf(this.kind)===-1)throw new dn('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var $r=I4;function BN(e,t){var r=[];return e[t].forEach(function(n){var o=r.length;r.forEach(function(i,s){i.tag===n.tag&&i.kind===n.kind&&i.multi===n.multi&&(o=s)}),r[o]=n}),r}function D4(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function n(o){o.multi?(e.multi[o.kind].push(o),e.multi.fallback.push(o)):e[o.kind][o.tag]=e.fallback[o.tag]=o}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}function IS(e){return this.extend(e)}IS.prototype.extend=function(t){var r=[],n=[];if(t instanceof $r)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new dn("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(i){if(!(i instanceof $r))throw new dn("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(i.loadKind&&i.loadKind!=="scalar")throw new dn("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(i.multi)throw new dn("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(i){if(!(i instanceof $r))throw new dn("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var o=Object.create(IS.prototype);return o.implicit=(this.implicit||[]).concat(r),o.explicit=(this.explicit||[]).concat(n),o.compiledImplicit=BN(o,"implicit"),o.compiledExplicit=BN(o,"explicit"),o.compiledTypeMap=D4(o.compiledImplicit,o.compiledExplicit),o};var R4=IS,k4=new $r("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),A4=new $r("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),O4=new $r("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),N4=new R4({explicit:[k4,A4,O4]});function L4(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function F4(){return null}function M4(e){return e===null}var $4=new $r("tag:yaml.org,2002:null",{kind:"scalar",resolve:L4,construct:F4,predicate:M4,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function U4(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function j4(e){return e==="true"||e==="True"||e==="TRUE"}function H4(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var q4=new $r("tag:yaml.org,2002:bool",{kind:"scalar",resolve:U4,construct:j4,predicate:H4,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function B4(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function V4(e){return 48<=e&&e<=55}function W4(e){return 48<=e&&e<=57}function G4(e){if(e===null)return!1;var t=e.length,r=0,n=!1,o;if(!t)return!1;if(o=e[r],(o==="-"||o==="+")&&(o=e[++r]),o==="0"){if(r+1===t)return!0;if(o=e[++r],o==="b"){for(r++;r<t;r++)if(o=e[r],o!=="_"){if(o!=="0"&&o!=="1")return!1;n=!0}return n&&o!=="_"}if(o==="x"){for(r++;r<t;r++)if(o=e[r],o!=="_"){if(!B4(e.charCodeAt(r)))return!1;n=!0}return n&&o!=="_"}if(o==="o"){for(r++;r<t;r++)if(o=e[r],o!=="_"){if(!V4(e.charCodeAt(r)))return!1;n=!0}return n&&o!=="_"}}if(o==="_")return!1;for(;r<t;r++)if(o=e[r],o!=="_"){if(!W4(e.charCodeAt(r)))return!1;n=!0}return!(!n||o==="_")}function z4(e){var t=e,r=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}function Y4(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!fr.isNegativeZero(e)}var K4=new $r("tag:yaml.org,2002:int",{kind:"scalar",resolve:G4,construct:z4,predicate:Y4,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),X4=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Q4(e){return!(e===null||!X4.test(e)||e[e.length-1]==="_")}function J4(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}var Z4=/^[-+]?[0-9]+e/;function e6(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(fr.isNegativeZero(e))return"-0.0";return r=e.toString(10),Z4.test(r)?r.replace("e",".e"):r}function t6(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||fr.isNegativeZero(e))}var r6=new $r("tag:yaml.org,2002:float",{kind:"scalar",resolve:Q4,construct:J4,predicate:t6,represent:e6,defaultStyle:"lowercase"}),n6=N4.extend({implicit:[$4,q4,K4,r6]}),o6=n6,sL=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),aL=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function i6(e){return e===null?!1:sL.exec(e)!==null||aL.exec(e)!==null}function s6(e){var t,r,n,o,i,s,a,c=0,u=null,l,d,f;if(t=sL.exec(e),t===null&&(t=aL.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,o=+t[3],!t[4])return new Date(Date.UTC(r,n,o));if(i=+t[4],s=+t[5],a=+t[6],t[7]){for(c=t[7].slice(0,3);c.length<3;)c+="0";c=+c}return t[9]&&(l=+t[10],d=+(t[11]||0),u=(l*60+d)*6e4,t[9]==="-"&&(u=-u)),f=new Date(Date.UTC(r,n,o,i,s,a,c)),u&&f.setTime(f.getTime()-u),f}function a6(e){return e.toISOString()}var c6=new $r("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:i6,construct:s6,instanceOf:Date,represent:a6});function u6(e){return e==="<<"||e===null}var l6=new $r("tag:yaml.org,2002:merge",{kind:"scalar",resolve:u6}),OS=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function d6(e){if(e===null)return!1;var t,r,n=0,o=e.length,i=OS;for(r=0;r<o;r++)if(t=i.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}function f6(e){var t,r,n=e.replace(/[\r\n=]/g,""),o=n.length,i=OS,s=0,a=[];for(t=0;t<o;t++)t%4===0&&t&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|i.indexOf(n.charAt(t));return r=o%4*6,r===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):r===18?(a.push(s>>10&255),a.push(s>>2&255)):r===12&&a.push(s>>4&255),new Uint8Array(a)}function p6(e){var t="",r=0,n,o,i=e.length,s=OS;for(n=0;n<i;n++)n%3===0&&n&&(t+=s[r>>18&63],t+=s[r>>12&63],t+=s[r>>6&63],t+=s[r&63]),r=(r<<8)+e[n];return o=i%3,o===0?(t+=s[r>>18&63],t+=s[r>>12&63],t+=s[r>>6&63],t+=s[r&63]):o===2?(t+=s[r>>10&63],t+=s[r>>4&63],t+=s[r<<2&63],t+=s[64]):o===1&&(t+=s[r>>2&63],t+=s[r<<4&63],t+=s[64],t+=s[64]),t}function m6(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var h6=new $r("tag:yaml.org,2002:binary",{kind:"scalar",resolve:d6,construct:f6,predicate:m6,represent:p6}),g6=Object.prototype.hasOwnProperty,v6=Object.prototype.toString;function y6(e){if(e===null)return!0;var t=[],r,n,o,i,s,a=e;for(r=0,n=a.length;r<n;r+=1){if(o=a[r],s=!1,v6.call(o)!=="[object Object]")return!1;for(i in o)if(g6.call(o,i))if(!s)s=!0;else return!1;if(!s)return!1;if(t.indexOf(i)===-1)t.push(i);else return!1}return!0}function w6(e){return e!==null?e:[]}var E6=new $r("tag:yaml.org,2002:omap",{kind:"sequence",resolve:y6,construct:w6}),C6=Object.prototype.toString;function _6(e){if(e===null)return!0;var t,r,n,o,i,s=e;for(i=new Array(s.length),t=0,r=s.length;t<r;t+=1){if(n=s[t],C6.call(n)!=="[object Object]"||(o=Object.keys(n),o.length!==1))return!1;i[t]=[o[0],n[o[0]]]}return!0}function S6(e){if(e===null)return[];var t,r,n,o,i,s=e;for(i=new Array(s.length),t=0,r=s.length;t<r;t+=1)n=s[t],o=Object.keys(n),i[t]=[o[0],n[o[0]]];return i}var b6=new $r("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:_6,construct:S6}),x6=Object.prototype.hasOwnProperty;function P6(e){if(e===null)return!0;var t,r=e;for(t in r)if(x6.call(r,t)&&r[t]!==null)return!1;return!0}function T6(e){return e!==null?e:{}}var I6=new $r("tag:yaml.org,2002:set",{kind:"mapping",resolve:P6,construct:T6}),cL=o6.extend({implicit:[c6,l6],explicit:[h6,E6,b6,I6]}),ea=Object.prototype.hasOwnProperty,pv=1,uL=2,lL=3,mv=4,TS=1,D6=2,VN=3,R6=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,k6=/[\x85\u2028\u2029]/,A6=/[,\[\]\{\}]/,dL=/^(?:!|!!|![a-z\-]+!)$/i,fL=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function WN(e){return Object.prototype.toString.call(e)}function Ii(e){return e===10||e===13}function Sc(e){return e===9||e===32}function fn(e){return e===9||e===32||e===10||e===13}function Rl(e){return e===44||e===91||e===93||e===123||e===125}function O6(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function N6(e){return e===120?2:e===117?4:e===85?8:0}function L6(e){return 48<=e&&e<=57?e-48:-1}function GN(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function F6(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var pL=new Array(256),mL=new Array(256);for(_c=0;_c<256;_c++)pL[_c]=GN(_c)?1:0,mL[_c]=GN(_c);var _c;function M6(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||cL,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function hL(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=b4(r),new dn(t,r)}function Ae(e,t){throw hL(e,t)}function hv(e,t){e.onWarning&&e.onWarning.call(null,hL(e,t))}var zN={YAML:function(t,r,n){var o,i,s;t.version!==null&&Ae(t,"duplication of %YAML directive"),n.length!==1&&Ae(t,"YAML directive accepts exactly one argument"),o=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),o===null&&Ae(t,"ill-formed argument of the YAML directive"),i=parseInt(o[1],10),s=parseInt(o[2],10),i!==1&&Ae(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=s<2,s!==1&&s!==2&&hv(t,"unsupported YAML version of the document")},TAG:function(t,r,n){var o,i;n.length!==2&&Ae(t,"TAG directive accepts exactly two arguments"),o=n[0],i=n[1],dL.test(o)||Ae(t,"ill-formed tag handle (first argument) of the TAG directive"),ea.call(t.tagMap,o)&&Ae(t,'there is a previously declared suffix for "'+o+'" tag handle'),fL.test(i)||Ae(t,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch{Ae(t,"tag prefix is malformed: "+i)}t.tagMap[o]=i}};function Zs(e,t,r,n){var o,i,s,a;if(t<r){if(a=e.input.slice(t,r),n)for(o=0,i=a.length;o<i;o+=1)s=a.charCodeAt(o),s===9||32<=s&&s<=1114111||Ae(e,"expected valid JSON character");else R6.test(a)&&Ae(e,"the stream contains non-printable characters");e.result+=a}}function YN(e,t,r,n){var o,i,s,a;for(fr.isObject(r)||Ae(e,"cannot merge mappings; the provided source object is unacceptable"),o=Object.keys(r),s=0,a=o.length;s<a;s+=1)i=o[s],ea.call(t,i)||(t[i]=r[i],n[i]=!0)}function kl(e,t,r,n,o,i,s,a,c){var u,l;if(Array.isArray(o))for(o=Array.prototype.slice.call(o),u=0,l=o.length;u<l;u+=1)Array.isArray(o[u])&&Ae(e,"nested arrays are not supported inside keys"),typeof o=="object"&&WN(o[u])==="[object Object]"&&(o[u]="[object Object]");if(typeof o=="object"&&WN(o)==="[object Object]"&&(o="[object Object]"),o=String(o),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(i))for(u=0,l=i.length;u<l;u+=1)YN(e,t,i[u],r);else YN(e,t,i,r);else!e.json&&!ea.call(r,o)&&ea.call(t,o)&&(e.line=s||e.line,e.lineStart=a||e.lineStart,e.position=c||e.position,Ae(e,"duplicated mapping key")),o==="__proto__"?Object.defineProperty(t,o,{configurable:!0,enumerable:!0,writable:!0,value:i}):t[o]=i,delete r[o];return t}function NS(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):Ae(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function tr(e,t,r){for(var n=0,o=e.input.charCodeAt(e.position);o!==0;){for(;Sc(o);)o===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),o=e.input.charCodeAt(++e.position);if(t&&o===35)do o=e.input.charCodeAt(++e.position);while(o!==10&&o!==13&&o!==0);if(Ii(o))for(NS(e),o=e.input.charCodeAt(e.position),n++,e.lineIndent=0;o===32;)e.lineIndent++,o=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&hv(e,"deficient indentation"),n}function yv(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||fn(r)))}function LS(e,t){t===1?e.result+=" ":t>1&&(e.result+=fr.repeat(`
`,t-1))}function $6(e,t,r){var n,o,i,s,a,c,u,l,d=e.kind,f=e.result,p;if(p=e.input.charCodeAt(e.position),fn(p)||Rl(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(o=e.input.charCodeAt(e.position+1),fn(o)||r&&Rl(o)))return!1;for(e.kind="scalar",e.result="",i=s=e.position,a=!1;p!==0;){if(p===58){if(o=e.input.charCodeAt(e.position+1),fn(o)||r&&Rl(o))break}else if(p===35){if(n=e.input.charCodeAt(e.position-1),fn(n))break}else{if(e.position===e.lineStart&&yv(e)||r&&Rl(p))break;if(Ii(p))if(c=e.line,u=e.lineStart,l=e.lineIndent,tr(e,!1,-1),e.lineIndent>=t){a=!0,p=e.input.charCodeAt(e.position);continue}else{e.position=s,e.line=c,e.lineStart=u,e.lineIndent=l;break}}a&&(Zs(e,i,s,!1),LS(e,e.line-c),i=s=e.position,a=!1),Sc(p)||(s=e.position+1),p=e.input.charCodeAt(++e.position)}return Zs(e,i,s,!1),e.result?!0:(e.kind=d,e.result=f,!1)}function U6(e,t){var r,n,o;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=o=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(Zs(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,o=e.position;else return!0;else Ii(r)?(Zs(e,n,o,!0),LS(e,tr(e,!1,t)),n=o=e.position):e.position===e.lineStart&&yv(e)?Ae(e,"unexpected end of the document within a single quoted scalar"):(e.position++,o=e.position);Ae(e,"unexpected end of the stream within a single quoted scalar")}function j6(e,t){var r,n,o,i,s,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return Zs(e,r,e.position,!0),e.position++,!0;if(a===92){if(Zs(e,r,e.position,!0),a=e.input.charCodeAt(++e.position),Ii(a))tr(e,!1,t);else if(a<256&&pL[a])e.result+=mL[a],e.position++;else if((s=N6(a))>0){for(o=s,i=0;o>0;o--)a=e.input.charCodeAt(++e.position),(s=O6(a))>=0?i=(i<<4)+s:Ae(e,"expected hexadecimal character");e.result+=F6(i),e.position++}else Ae(e,"unknown escape sequence");r=n=e.position}else Ii(a)?(Zs(e,r,n,!0),LS(e,tr(e,!1,t)),r=n=e.position):e.position===e.lineStart&&yv(e)?Ae(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}Ae(e,"unexpected end of the stream within a double quoted scalar")}function H6(e,t){var r=!0,n,o,i,s=e.tag,a,c=e.anchor,u,l,d,f,p,m=Object.create(null),h,g,v,w;if(w=e.input.charCodeAt(e.position),w===91)l=93,p=!1,a=[];else if(w===123)l=125,p=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),w=e.input.charCodeAt(++e.position);w!==0;){if(tr(e,!0,t),w=e.input.charCodeAt(e.position),w===l)return e.position++,e.tag=s,e.anchor=c,e.kind=p?"mapping":"sequence",e.result=a,!0;r?w===44&&Ae(e,"expected the node content, but found ','"):Ae(e,"missed comma between flow collection entries"),g=h=v=null,d=f=!1,w===63&&(u=e.input.charCodeAt(e.position+1),fn(u)&&(d=f=!0,e.position++,tr(e,!0,t))),n=e.line,o=e.lineStart,i=e.position,Al(e,t,pv,!1,!0),g=e.tag,h=e.result,tr(e,!0,t),w=e.input.charCodeAt(e.position),(f||e.line===n)&&w===58&&(d=!0,w=e.input.charCodeAt(++e.position),tr(e,!0,t),Al(e,t,pv,!1,!0),v=e.result),p?kl(e,a,m,g,h,v,n,o,i):d?a.push(kl(e,null,m,g,h,v,n,o,i)):a.push(h),tr(e,!0,t),w=e.input.charCodeAt(e.position),w===44?(r=!0,w=e.input.charCodeAt(++e.position)):r=!1}Ae(e,"unexpected end of the stream within a flow collection")}function q6(e,t){var r,n,o=TS,i=!1,s=!1,a=t,c=0,u=!1,l,d;if(d=e.input.charCodeAt(e.position),d===124)n=!1;else if(d===62)n=!0;else return!1;for(e.kind="scalar",e.result="";d!==0;)if(d=e.input.charCodeAt(++e.position),d===43||d===45)TS===o?o=d===43?VN:D6:Ae(e,"repeat of a chomping mode identifier");else if((l=L6(d))>=0)l===0?Ae(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?Ae(e,"repeat of an indentation width identifier"):(a=t+l-1,s=!0);else break;if(Sc(d)){do d=e.input.charCodeAt(++e.position);while(Sc(d));if(d===35)do d=e.input.charCodeAt(++e.position);while(!Ii(d)&&d!==0)}for(;d!==0;){for(NS(e),e.lineIndent=0,d=e.input.charCodeAt(e.position);(!s||e.lineIndent<a)&&d===32;)e.lineIndent++,d=e.input.charCodeAt(++e.position);if(!s&&e.lineIndent>a&&(a=e.lineIndent),Ii(d)){c++;continue}if(e.lineIndent<a){o===VN?e.result+=fr.repeat(`
`,i?1+c:c):o===TS&&i&&(e.result+=`
`);break}for(n?Sc(d)?(u=!0,e.result+=fr.repeat(`
`,i?1+c:c)):u?(u=!1,e.result+=fr.repeat(`
`,c+1)):c===0?i&&(e.result+=" "):e.result+=fr.repeat(`
`,c):e.result+=fr.repeat(`
`,i?1+c:c),i=!0,s=!0,c=0,r=e.position;!Ii(d)&&d!==0;)d=e.input.charCodeAt(++e.position);Zs(e,r,e.position,!1)}return!0}function KN(e,t){var r,n=e.tag,o=e.anchor,i=[],s,a=!1,c;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=i),c=e.input.charCodeAt(e.position);c!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Ae(e,"tab characters must not be used in indentation")),!(c!==45||(s=e.input.charCodeAt(e.position+1),!fn(s))));){if(a=!0,e.position++,tr(e,!0,-1)&&e.lineIndent<=t){i.push(null),c=e.input.charCodeAt(e.position);continue}if(r=e.line,Al(e,t,lL,!1,!0),i.push(e.result),tr(e,!0,-1),c=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&c!==0)Ae(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=n,e.anchor=o,e.kind="sequence",e.result=i,!0):!1}function B6(e,t,r){var n,o,i,s,a,c,u=e.tag,l=e.anchor,d={},f=Object.create(null),p=null,m=null,h=null,g=!1,v=!1,w;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=d),w=e.input.charCodeAt(e.position);w!==0;){if(!g&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Ae(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),i=e.line,(w===63||w===58)&&fn(n))w===63?(g&&(kl(e,d,f,p,m,null,s,a,c),p=m=h=null),v=!0,g=!0,o=!0):g?(g=!1,o=!0):Ae(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,w=n;else{if(s=e.line,a=e.lineStart,c=e.position,!Al(e,r,uL,!1,!0))break;if(e.line===i){for(w=e.input.charCodeAt(e.position);Sc(w);)w=e.input.charCodeAt(++e.position);if(w===58)w=e.input.charCodeAt(++e.position),fn(w)||Ae(e,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(kl(e,d,f,p,m,null,s,a,c),p=m=h=null),v=!0,g=!1,o=!1,p=e.tag,m=e.result;else if(v)Ae(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=u,e.anchor=l,!0}else if(v)Ae(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=u,e.anchor=l,!0}if((e.line===i||e.lineIndent>t)&&(g&&(s=e.line,a=e.lineStart,c=e.position),Al(e,t,mv,!0,o)&&(g?m=e.result:h=e.result),g||(kl(e,d,f,p,m,h,s,a,c),p=m=h=null),tr(e,!0,-1),w=e.input.charCodeAt(e.position)),(e.line===i||e.lineIndent>t)&&w!==0)Ae(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return g&&kl(e,d,f,p,m,null,s,a,c),v&&(e.tag=u,e.anchor=l,e.kind="mapping",e.result=d),v}function V6(e){var t,r=!1,n=!1,o,i,s;if(s=e.input.charCodeAt(e.position),s!==33)return!1;if(e.tag!==null&&Ae(e,"duplication of a tag property"),s=e.input.charCodeAt(++e.position),s===60?(r=!0,s=e.input.charCodeAt(++e.position)):s===33?(n=!0,o="!!",s=e.input.charCodeAt(++e.position)):o="!",t=e.position,r){do s=e.input.charCodeAt(++e.position);while(s!==0&&s!==62);e.position<e.length?(i=e.input.slice(t,e.position),s=e.input.charCodeAt(++e.position)):Ae(e,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!fn(s);)s===33&&(n?Ae(e,"tag suffix cannot contain exclamation marks"):(o=e.input.slice(t-1,e.position+1),dL.test(o)||Ae(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),s=e.input.charCodeAt(++e.position);i=e.input.slice(t,e.position),A6.test(i)&&Ae(e,"tag suffix cannot contain flow indicator characters")}i&&!fL.test(i)&&Ae(e,"tag name cannot contain such characters: "+i);try{i=decodeURIComponent(i)}catch{Ae(e,"tag name is malformed: "+i)}return r?e.tag=i:ea.call(e.tagMap,o)?e.tag=e.tagMap[o]+i:o==="!"?e.tag="!"+i:o==="!!"?e.tag="tag:yaml.org,2002:"+i:Ae(e,'undeclared tag handle "'+o+'"'),!0}function W6(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&Ae(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!fn(r)&&!Rl(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&Ae(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function G6(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!fn(n)&&!Rl(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&Ae(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),ea.call(e.anchorMap,r)||Ae(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],tr(e,!0,-1),!0}function Al(e,t,r,n,o){var i,s,a,c=1,u=!1,l=!1,d,f,p,m,h,g;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,i=s=a=mv===r||lL===r,n&&tr(e,!0,-1)&&(u=!0,e.lineIndent>t?c=1:e.lineIndent===t?c=0:e.lineIndent<t&&(c=-1)),c===1)for(;V6(e)||W6(e);)tr(e,!0,-1)?(u=!0,a=i,e.lineIndent>t?c=1:e.lineIndent===t?c=0:e.lineIndent<t&&(c=-1)):a=!1;if(a&&(a=u||o),(c===1||mv===r)&&(pv===r||uL===r?h=t:h=t+1,g=e.position-e.lineStart,c===1?a&&(KN(e,g)||B6(e,g,h))||H6(e,h)?l=!0:(s&&q6(e,h)||U6(e,h)||j6(e,h)?l=!0:G6(e)?(l=!0,(e.tag!==null||e.anchor!==null)&&Ae(e,"alias node should not have any properties")):$6(e,h,pv===r)&&(l=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):c===0&&(l=a&&KN(e,g))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&Ae(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),d=0,f=e.implicitTypes.length;d<f;d+=1)if(m=e.implicitTypes[d],m.resolve(e.result)){e.result=m.construct(e.result),e.tag=m.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(ea.call(e.typeMap[e.kind||"fallback"],e.tag))m=e.typeMap[e.kind||"fallback"][e.tag];else for(m=null,p=e.typeMap.multi[e.kind||"fallback"],d=0,f=p.length;d<f;d+=1)if(e.tag.slice(0,p[d].tag.length)===p[d].tag){m=p[d];break}m||Ae(e,"unknown tag !<"+e.tag+">"),e.result!==null&&m.kind!==e.kind&&Ae(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+m.kind+'", not "'+e.kind+'"'),m.resolve(e.result,e.tag)?(e.result=m.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):Ae(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||l}function z6(e){var t=e.position,r,n,o,i=!1,s;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(s=e.input.charCodeAt(e.position))!==0&&(tr(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||s!==37));){for(i=!0,s=e.input.charCodeAt(++e.position),r=e.position;s!==0&&!fn(s);)s=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),o=[],n.length<1&&Ae(e,"directive name must not be less than one character in length");s!==0;){for(;Sc(s);)s=e.input.charCodeAt(++e.position);if(s===35){do s=e.input.charCodeAt(++e.position);while(s!==0&&!Ii(s));break}if(Ii(s))break;for(r=e.position;s!==0&&!fn(s);)s=e.input.charCodeAt(++e.position);o.push(e.input.slice(r,e.position))}s!==0&&NS(e),ea.call(zN,n)?zN[n](e,n,o):hv(e,'unknown document directive "'+n+'"')}if(tr(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,tr(e,!0,-1)):i&&Ae(e,"directives end mark is expected"),Al(e,e.lineIndent-1,mv,!1,!0),tr(e,!0,-1),e.checkLineBreaks&&k6.test(e.input.slice(t,e.position))&&hv(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&yv(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,tr(e,!0,-1));return}if(e.position<e.length-1)Ae(e,"end of the stream or a document separator is expected");else return}function gL(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new M6(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,Ae(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)z6(r);return r.documents}function Y6(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=gL(e,r);if(typeof t!="function")return n;for(var o=0,i=n.length;o<i;o+=1)t(n[o])}function K6(e,t){var r=gL(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new dn("expected a single document in the stream, but found more")}}var X6=Y6,Q6=K6,vL={loadAll:X6,load:Q6},yL=Object.prototype.toString,wL=Object.prototype.hasOwnProperty,FS=65279,J6=9,np=10,Z6=13,eK=32,tK=33,rK=34,DS=35,nK=37,oK=38,iK=39,sK=42,EL=44,aK=45,gv=58,cK=61,uK=62,lK=63,dK=64,CL=91,_L=93,fK=96,SL=123,pK=124,bL=125,Ur={};Ur[0]="\\0";Ur[7]="\\a";Ur[8]="\\b";Ur[9]="\\t";Ur[10]="\\n";Ur[11]="\\v";Ur[12]="\\f";Ur[13]="\\r";Ur[27]="\\e";Ur[34]='\\"';Ur[92]="\\\\";Ur[133]="\\N";Ur[160]="\\_";Ur[8232]="\\L";Ur[8233]="\\P";var mK=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],hK=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function gK(e,t){var r,n,o,i,s,a,c;if(t===null)return{};for(r={},n=Object.keys(t),o=0,i=n.length;o<i;o+=1)s=n[o],a=String(t[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),c=e.compiledTypeMap.fallback[s],c&&wL.call(c.styleAliases,a)&&(a=c.styleAliases[a]),r[s]=a;return r}function vK(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new dn("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+fr.repeat("0",n-t.length)+t}var yK=1,op=2;function wK(e){this.schema=e.schema||cL,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=fr.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=gK(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?op:yK,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function XN(e,t){for(var r=fr.repeat(" ",t),n=0,o=-1,i="",s,a=e.length;n<a;)o=e.indexOf(`
`,n),o===-1?(s=e.slice(n),n=a):(s=e.slice(n,o+1),n=o+1),s.length&&s!==`
`&&(i+=r),i+=s;return i}function RS(e,t){return`
`+fr.repeat(" ",e.indent*t)}function EK(e,t){var r,n,o;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(o=e.implicitTypes[r],o.resolve(t))return!0;return!1}function vv(e){return e===eK||e===J6}function ip(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==FS||65536<=e&&e<=1114111}function QN(e){return ip(e)&&e!==FS&&e!==Z6&&e!==np}function JN(e,t,r){var n=QN(e),o=n&&!vv(e);return(r?n:n&&e!==EL&&e!==CL&&e!==_L&&e!==SL&&e!==bL)&&e!==DS&&!(t===gv&&!o)||QN(t)&&!vv(t)&&e===DS||t===gv&&o}function CK(e){return ip(e)&&e!==FS&&!vv(e)&&e!==aK&&e!==lK&&e!==gv&&e!==EL&&e!==CL&&e!==_L&&e!==SL&&e!==bL&&e!==DS&&e!==oK&&e!==sK&&e!==tK&&e!==pK&&e!==cK&&e!==uK&&e!==iK&&e!==rK&&e!==nK&&e!==dK&&e!==fK}function _K(e){return!vv(e)&&e!==gv}function tp(e,t){var r=e.charCodeAt(t),n;return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function xL(e){var t=/^\n* /;return t.test(e)}var PL=1,kS=2,TL=3,IL=4,Dl=5;function SK(e,t,r,n,o,i,s,a){var c,u=0,l=null,d=!1,f=!1,p=n!==-1,m=-1,h=CK(tp(e,0))&&_K(tp(e,e.length-1));if(t||s)for(c=0;c<e.length;u>=65536?c+=2:c++){if(u=tp(e,c),!ip(u))return Dl;h=h&&JN(u,l,a),l=u}else{for(c=0;c<e.length;u>=65536?c+=2:c++){if(u=tp(e,c),u===np)d=!0,p&&(f=f||c-m-1>n&&e[m+1]!==" ",m=c);else if(!ip(u))return Dl;h=h&&JN(u,l,a),l=u}f=f||p&&c-m-1>n&&e[m+1]!==" "}return!d&&!f?h&&!s&&!o(e)?PL:i===op?Dl:kS:r>9&&xL(e)?Dl:s?i===op?Dl:kS:f?IL:TL}function bK(e,t,r,n,o){e.dump=function(){if(t.length===0)return e.quotingType===op?'""':"''";if(!e.noCompatMode&&(mK.indexOf(t)!==-1||hK.test(t)))return e.quotingType===op?'"'+t+'"':"'"+t+"'";var i=e.indent*Math.max(1,r),s=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-i),a=n||e.flowLevel>-1&&r>=e.flowLevel;function c(u){return EK(e,u)}switch(SK(t,a,e.indent,s,c,e.quotingType,e.forceQuotes&&!n,o)){case PL:return t;case kS:return"'"+t.replace(/'/g,"''")+"'";case TL:return"|"+ZN(t,e.indent)+eL(XN(t,i));case IL:return">"+ZN(t,e.indent)+eL(XN(xK(t,s),i));case Dl:return'"'+PK(t)+'"';default:throw new dn("impossible error: invalid scalar style")}}()}function ZN(e,t){var r=xL(e)?String(t):"",n=e[e.length-1]===`
`,o=n&&(e[e.length-2]===`
`||e===`
`),i=o?"+":n?"":"-";return r+i+`
`}function eL(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function xK(e,t){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=e.indexOf(`
`);return u=u!==-1?u:e.length,r.lastIndex=u,tL(e.slice(0,u),t)}(),o=e[0]===`
`||e[0]===" ",i,s;s=r.exec(e);){var a=s[1],c=s[2];i=c[0]===" ",n+=a+(!o&&!i&&c!==""?`
`:"")+tL(c,t),o=i}return n}function tL(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,o=0,i,s=0,a=0,c="";n=r.exec(e);)a=n.index,a-o>t&&(i=s>o?s:a,c+=`
`+e.slice(o,i),o=i+1),s=a;return c+=`
`,e.length-o>t&&s>o?c+=e.slice(o,s)+`
`+e.slice(s+1):c+=e.slice(o),c.slice(1)}function PK(e){for(var t="",r=0,n,o=0;o<e.length;r>=65536?o+=2:o++)r=tp(e,o),n=Ur[r],!n&&ip(r)?(t+=e[o],r>=65536&&(t+=e[o+1])):t+=n||vK(r);return t}function TK(e,t,r){var n="",o=e.tag,i,s,a;for(i=0,s=r.length;i<s;i+=1)a=r[i],e.replacer&&(a=e.replacer.call(r,String(i),a)),(os(e,t,a,!1,!1)||typeof a>"u"&&os(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=o,e.dump="["+n+"]"}function rL(e,t,r,n){var o="",i=e.tag,s,a,c;for(s=0,a=r.length;s<a;s+=1)c=r[s],e.replacer&&(c=e.replacer.call(r,String(s),c)),(os(e,t+1,c,!0,!0,!1,!0)||typeof c>"u"&&os(e,t+1,null,!0,!0,!1,!0))&&((!n||o!=="")&&(o+=RS(e,t)),e.dump&&np===e.dump.charCodeAt(0)?o+="-":o+="- ",o+=e.dump);e.tag=i,e.dump=o||"[]"}function IK(e,t,r){var n="",o=e.tag,i=Object.keys(r),s,a,c,u,l;for(s=0,a=i.length;s<a;s+=1)l="",n!==""&&(l+=", "),e.condenseFlow&&(l+='"'),c=i[s],u=r[c],e.replacer&&(u=e.replacer.call(r,c,u)),os(e,t,c,!1,!1)&&(e.dump.length>1024&&(l+="? "),l+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),os(e,t,u,!1,!1)&&(l+=e.dump,n+=l));e.tag=o,e.dump="{"+n+"}"}function DK(e,t,r,n){var o="",i=e.tag,s=Object.keys(r),a,c,u,l,d,f;if(e.sortKeys===!0)s.sort();else if(typeof e.sortKeys=="function")s.sort(e.sortKeys);else if(e.sortKeys)throw new dn("sortKeys must be a boolean or a function");for(a=0,c=s.length;a<c;a+=1)f="",(!n||o!=="")&&(f+=RS(e,t)),u=s[a],l=r[u],e.replacer&&(l=e.replacer.call(r,u,l)),os(e,t+1,u,!0,!0,!0)&&(d=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,d&&(e.dump&&np===e.dump.charCodeAt(0)?f+="?":f+="? "),f+=e.dump,d&&(f+=RS(e,t)),os(e,t+1,l,!0,d)&&(e.dump&&np===e.dump.charCodeAt(0)?f+=":":f+=": ",f+=e.dump,o+=f));e.tag=i,e.dump=o||"{}"}function nL(e,t,r){var n,o,i,s,a,c;for(o=r?e.explicitTypes:e.implicitTypes,i=0,s=o.length;i<s;i+=1)if(a=o[i],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(r?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(c=e.styleMap[a.tag]||a.defaultStyle,yL.call(a.represent)==="[object Function]")n=a.represent(t,c);else if(wL.call(a.represent,c))n=a.represent[c](t,c);else throw new dn("!<"+a.tag+'> tag resolver accepts not "'+c+'" style');e.dump=n}return!0}return!1}function os(e,t,r,n,o,i,s){e.tag=null,e.dump=r,nL(e,r,!1)||nL(e,r,!0);var a=yL.call(e.dump),c=n,u;n&&(n=e.flowLevel<0||e.flowLevel>t);var l=a==="[object Object]"||a==="[object Array]",d,f;if(l&&(d=e.duplicates.indexOf(r),f=d!==-1),(e.tag!==null&&e.tag!=="?"||f||e.indent!==2&&t>0)&&(o=!1),f&&e.usedDuplicates[d])e.dump="*ref_"+d;else{if(l&&f&&!e.usedDuplicates[d]&&(e.usedDuplicates[d]=!0),a==="[object Object]")n&&Object.keys(e.dump).length!==0?(DK(e,t,e.dump,o),f&&(e.dump="&ref_"+d+e.dump)):(IK(e,t,e.dump),f&&(e.dump="&ref_"+d+" "+e.dump));else if(a==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!s&&t>0?rL(e,t-1,e.dump,o):rL(e,t,e.dump,o),f&&(e.dump="&ref_"+d+e.dump)):(TK(e,t,e.dump),f&&(e.dump="&ref_"+d+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&bK(e,e.dump,t,i,c);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new dn("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(u=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",e.dump=u+" "+e.dump)}return!0}function RK(e,t){var r=[],n=[],o,i;for(AS(e,r,n),o=0,i=n.length;o<i;o+=1)t.duplicates.push(r[n[o]]);t.usedDuplicates=new Array(i)}function AS(e,t,r){var n,o,i;if(e!==null&&typeof e=="object")if(o=t.indexOf(e),o!==-1)r.indexOf(o)===-1&&r.push(o);else if(t.push(e),Array.isArray(e))for(o=0,i=e.length;o<i;o+=1)AS(e[o],t,r);else for(n=Object.keys(e),o=0,i=n.length;o<i;o+=1)AS(e[n[o]],t,r)}function kK(e,t){t=t||{};var r=new wK(t);r.noRefs||RK(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),os(r,0,n,!0,!0)?r.dump+`
`:""}var AK=kK,OK={dump:AK};function MS(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var sp=vL.load,Fue=vL.loadAll,Mue=OK.dump;var $ue=MS("safeLoad","load"),Uue=MS("safeLoadAll","loadAll"),jue=MS("safeDump","dump");var qo=ce(require("path")),FL=ce(require("os")),ML=ce(Sg());var ap=ce(require("path")),AL=ce(require("os"));var RL=ce(require("crypto"));var kL=require("util");var Ho={async readDocument(e){switch(e.scheme){case"file":try{return(await pt(e.fsPath)).toString()}catch(t){if(t&&t.code==="ENOENT")return;throw t}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}},async applyEdits(e,t,r){switch(e.scheme){case"file":let n=sn(r,t);await mh(e.fsPath,n);break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},HS=class{constructor(t,r=HS.scheme){this.fileHost=t;this.scheme=r}async readDocument(t){switch(t.scheme){case this.scheme:try{return(await this.fileHost.readFile(qe(t,this.fileHost.platform))).toString()}catch{return}default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}async applyEdits(t,r,n){switch(t.scheme){case this.scheme:let o=sn(n,r);await this.fileHost.writeFile(qe(t,this.fileHost.platform),Buffer.from(o));break;default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}},wt=HS;wt.scheme="vscode-fileHost";var bc=class{constructor(t){this.shellServer=t}async readDocument(t){switch(t.scheme){case bc.scheme:try{let{stdout:r}=await this.shellServer.exec(`cat ${t.path}`);return r}catch{return}default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}async applyEdits(t,r,n){switch(t.scheme){case bc.scheme:try{if(!bc.nonce){let s=await(0,kL.promisify)(RL.randomBytes)(20);bc.nonce=s.toString("hex")}let o=sn(n,r),i=`EOF-${bc.nonce}`;await this.shellServer.exec(`cat <<'${i}' >${t.path}
${o}
${i}
`)}catch(o){console.log(o)}break;default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}},pn=bc;pn.scheme="vscode-remote";var US=class{constructor(t){this.documents=t}async readDocument(t){let r=this.documents[t.scheme];if(!r)throw new Error(`Unsupported scheme: ${t.toString()}`);return r.readDocument(t)}async applyEdits(t,r,n){let o=this.documents[t.scheme];if(!o)throw new Error(`Unsupported scheme: ${t.toString()}`);return o.applyEdits(t,r,n)}};function vr(e,t){let r={file:Ho,[wt.scheme]:new wt(e)};return t&&(r[pn.scheme]="readFile"in t?new wt(t,pn.scheme):new pn(t)),new US(r)}var $S=new Map;async function jS(e,t){let r=e.toString(),n=$S.get(r);if(n||$S.set(r,n=[]),n.push(t),n.length===1){for(;n.length;)await n[0](),n.shift();$S.delete(r)}}function qe(e,t){let r;return e.authority&&e.path.length>1&&(e.scheme==="file"||e.scheme===wt.scheme)?r=`//${e.authority}${e.path}`:e.path.charCodeAt(0)===47&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&e.path.charCodeAt(2)===58?r=e.path[1].toLowerCase()+e.path.substr(2):r=e.path,t==="win32"&&(r=r.replace(/\//g,"\\")),r}function Ol(e,t){return[e.join(t,".devcontainer","devcontainer.json"),e.join(t,".devcontainer.json")]}function cp(e,t){let r=e.normalize(t);return Ol(e,"").includes(r)}async function wv(e,t){let r=Ol(e.path,t);for(let n of r)if(await e.isFile(n))return Ue.file(n).with({scheme:wt.scheme})}async function OL(e){let t=Ol(ap,e);for(let r of t)if(await lr(r))return r}var is=`{${AL.EOL}}`;async function wo(e,t,r,n){t.scheme==="file"&&await Lo(ap.dirname(t.fsPath)),await e.applyEdits(t,r,n)}function ta(e){let t=ap.posix.dirname(e.path);return e.with({path:t})}var qS=ce(require("path")),LK={src:"source",destination:"target",dst:"target"};function NL(e){return e.split(",").map(t=>t.split("=")).reduce((t,[r,n])=>({...t,[LK[r]||r]:n}),{})}function Ev(e){let t=typeof e=="string"?qS.join(e,"dist"):e.distFolder;return qS.join(t,"node_modules","vscode-dev-containers","container-features")}function LL(e){var t;return(t=e.options)!=null&&t.version?"version":void 0}var up=require("string_decoder");function dp(e){if(!(e.extensions||e.settings||e.devPort!==void 0))return e;let t={...e},r=t.customizations||(t.customizations={}),n=r.vscode||(r.vscode={});return t.extensions&&(n.extensions=(n.extensions||[]).concat(t.extensions),delete t.extensions),t.settings&&(n.settings={...t.settings,...n.settings||{}},delete t.settings),t.devPort!==void 0&&n.devPort===void 0&&(n.devPort=t.devPort,delete t.devPort),t}function lp(e,t,r){return Cv(e,t.configFilePath,r)}function Cv(e,t,r){let n=ta(t);return t.with({path:qo.posix.resolve(n.path,e.platform==="win32"&&t.scheme!==pn.scheme?(qo.win32.isAbsolute(r)?"/":"")+r.replace(/\\/g,"/"):r)})}function jr(e){return"dockerFile"in e||"build"in e&&"dockerfile"in e.build}function _v(e){return e&&(jr(e)||"image"in e||"dockerComposeFile"in e)}function ra(e,t){return lp(e,t,FK(t))}function FK(e){return"dockerFile"in e?e.dockerFile:e.build.dockerfile}async function na(e,t,r,n){if(Array.isArray(t.dockerComposeFile)){if(t.dockerComposeFile.length)return t.dockerComposeFile.map(o=>qe(lp(e,t,o),e.platform))}else if(typeof t.dockerComposeFile=="string")return[qe(lp(e,t,t.dockerComposeFile),e.platform)];if(n){let o=r==null?void 0:r.COMPOSE_FILE;if(o)return o.split(e.path.delimiter).map(a=>e.path.resolve(n,a));try{let a=e.path.join(n,".env"),c=await e.readFile(a),u=/^COMPOSE_FILE=(.+)$/m.exec(c.toString()),l=u&&u[1].trim();if(l)return l.split(e.path.delimiter).map(d=>e.path.resolve(n,d))}catch(a){if(!(a&&(a.code==="ENOENT"||a.code==="EISDIR")))throw a}let i=[e.path.resolve(n,"docker-compose.yml")],s=e.path.resolve(n,"docker-compose.override.yml");return await e.isFile(s)&&i.push(s),i}return[]}async function Di(e,t){let{cliHost:r,postCreate:n,output:o}=e,i=await MK(e),s=$K(r),a;return await UK({exec:r.exec,cwd:i.cwd,cmd:s.cmd,args:[...s.args,i.script,...t],env:jK(e,s.cmd),stdin:n==null?void 0:n.onDidInput,output:o,stdoutData:c=>a=c,stderrData:c=>{o.event(c)}}),a}async function MK(e){let{cliHost:t,extensionPath:r,output:n}=e,o=qo.join(r,...Ti?["node_modules","@devcontainers","cli","src"]:["dist"],"spec-node",`devContainersSpecCLI.${Ti?"t":"j"}s`),i=t.type==="local"?r:t.path.join(await t.homedir(),".vscode-remote-containers","dist",`dev-containers-cli-${e.package.version}`),s=t.type==="local"?o:t.path.join(i,"dist","spec-node","devContainersSpecCLI.js");if(["wsl","ssh"].indexOf(t.type)!==-1&&!await t.isFile(s)){let a=`${i}-${Mr()}`,c=t.path.join(a,"dist","spec-node","devContainersSpecCLI.js");await t.mkdirp(t.path.dirname(c)),await t.writeFile(t.path.join(a,"package.json"),await pt(qo.join(r,"package.json"))),await t.writeFile(c,await pt(o));let u=Ev(r),l=t.path.join(a,"dist","node_modules","vscode-dev-containers","container-features");await xc(u,t,l,n),await xc(qo.join(r,"scripts"),t,t.path.join(a,"scripts"),n),await t.rename(a,i)}return{cwd:i,script:s}}function $K(e){if(e.type==="local")return Ti?{cmd:uS,args:[]}:{cmd:process.argv[0],args:process.versions.electron&&process.versions["microsoft-build"]?["--ms-enable-electron-run-as-node"]:[]};if(e.nodeExecutable)return{cmd:e.nodeExecutable,args:[]};throw new Error("Node executable required")}async function UK(e){let{exec:t,cmd:r,args:n,cwd:o,env:i,stdin:s,output:a,stdoutData:c,stderrData:u}=e,l=await t({cmd:r,args:n,cwd:o,env:i,output:a});return new Promise((d,f)=>{let p=new up.StringDecoder,m="";l.stdout.on("data",w=>{m+=p.write(w);let E=m.split(`
`);m=E.pop();for(let C of E)if(C.trim())try{c(JSON.parse(C))}catch{a.write(C)}}),l.stdout.on("error",w=>{if((w==null?void 0:w.code)!=="ENOTCONN")throw w});let h=new up.StringDecoder,g="";l.stderr.on("data",w=>{g+=h.write(w);let E=g.split(`
`);g=E.pop();for(let C of E)if(C.trim())try{u(JSON.parse(C))}catch{a.write(C)}}),l.stderr.on("error",w=>{if((w==null?void 0:w.code)!=="ENOTCONN")throw w});let v=[];l.exit.then(({code:w})=>{try{v.forEach(E=>E.dispose()),w?(a.write(`Exit code ${w}`),f({message:`Command failed: ${r} ${(n||[]).join(" ")}`,code:w})):d()}catch(E){f(E)}},f),typeof s=="function"&&v.push(s(w=>l.stdin.write(w)))})}function jK(e,t){let{cliHost:r,env:n,appRoot:o}=e;return{...n,...r.type==="local"?o?{NODE_PATH:`${r.path.join(o,"node_modules.asar")}${qo.delimiter}${r.path.join(o,"node_modules")}`}:void 0:r.type==="container"?void 0:{NODE_PATH:r.path.join(r.path.dirname(t),"node_modules")},...Ti?{TS_NODE_PROJECT:void 0}:{}}}async function xc(e,t,r,n){await t.mkdirp(r);let o=ML.c({cwd:e,filter:u=>(console.log(u),!0)},["."]),i=new Promise((u,l)=>{o.on("error",l),o.on("finish",u)}),s=await t.exec({cmd:"tar",args:["--no-same-owner","-x","-f","-"],cwd:r,output:n}),a=new up.StringDecoder;s.stdout.on("data",u=>{n.write(a.write(u))});let c=new up.StringDecoder;s.stderr.on("data",u=>{n.write(dt(c.write(u)))}),o.pipe(s.stdin),await Promise.all([s.exit,i])}async function Eo(){return qo.join(FL.tmpdir(),process.platform==="linux"?`vsch-${await Xg()}`:"vsch")}function HK(){return{contentHashes:{}}}async function bv(e,t,r,n){let o=e.getConfigurationState();if(o){let i=o.contentHashes,s=Object.keys(i),c=(await BS(t,r,n)).contentHashes,u=Object.keys(c),l=new Set(u);s.forEach(p=>l.delete(p));let d=new Set(s);u.forEach(p=>d.delete(p));let f=[];for(let p of s)p in c&&c[p]!==i[p]&&f.push(p);if(l.size||d.size||f.length){let p=await BS(t,r,n);(async()=>{await e.containerOutdated([...l,...d,...f].sort())==="ignore"&&await e.updateConfigurationState(p)})().catch(console.error)}}else await UL(e,t,r,n)}async function xv(e,t,r,n,o){let i="Updating configuration state",s=o.start(i);await UL(e,t,r,n),o.stop(i,s)}async function UL(e,t,r,n){let o=await BS(t,r,n);await e.updateConfigurationState(o)}async function BS(e,t,r){let n=HK();Sv(n,fp.posix.basename(r.configFilePath.path),JSON.stringify({...r,forwardPorts:void 0,configFilePath:void 0,postStartCommand:void 0,postAttachCommand:void 0}));let o=ta(r.configFilePath).path;if(jr(r)){let i=ra(e,r),s=await t.readDocument(i);s!==void 0&&Sv(n,fp.posix.relative(o,i.path),s)}if("dockerComposeFile"in r){let i=await na(e,r,e.env,e.cwd),s=await Promise.all(i.map(async a=>{let c=Ue.file(a).with({scheme:wt.scheme});return{uri:c,content:await t.readDocument(c)}}));for(let{uri:a,content:c}of s)c!==void 0&&Sv(n,fp.posix.relative(o,a.path),c);for(let a=s.length-1;a>=0;a--){let{uri:c,content:u}=s[a];if(u){let l=sp(u),d=l&&l.services,f=d&&d[r.service],p=f&&f.build,m=p&&(typeof p=="string"?p:p.context);if(m){let h=Cv(e,c,m),g=jL(h,p.dockerfile||"Dockerfile"),v=await t.readDocument(g);v!==void 0&&Sv(n,fp.posix.relative(o,g.path),v)}if(f&&(f.image||f.build))break}}}return n}function Sv(e,t,r){let n=$L.createHash("sha256").update(r).digest("hex");e.contentHashes[t]=n}var Vo=ce(require("path")),hF=ce(require("crypto"));var Gt=ce(require("path"));var WL=ce(require("net")),YS=ce(require("path"));var VS=ce(require("path")),GS=ce(require("http")),HL=ce(require("os")),qL=ce(require("crypto"));async function BL(e,t){let r=await zS(e),n=new WS(r,t);return n.listen(),n}var WS=class{constructor(t,r){this.ipcHandlePath=t;this.server=GS.createServer((n,o)=>{Promise.resolve(r(n,o)).catch(i=>console.error(i&&i.message||i))}),this.server.on("error",n=>console.error(n))}listen(){this.server.listen(this.ipcHandlePath)}dispose(){this.server.close()}};async function VL(e){return new Promise((t,r)=>{let n=[];e.setEncoding("utf8"),e.on("data",o=>n.push(o)),e.on("error",o=>r(o)),e.on("end",()=>{let o=JSON.parse(n.join(""));t(o)})})}async function qK(e){return new Promise((t,r)=>{qL.randomBytes(e,(n,o)=>{n?r(n):t(o)})})}async function zS(e){let r=(await qK(20)).toString("hex"),n=`${e}-${r}`;return process.platform==="win32"?`\\\\.\\pipe\\${n}-sock`:process.env.XDG_RUNTIME_DIR?VS.join(process.env.XDG_RUNTIME_DIR,`${n}.sock`):VS.join(HL.tmpdir(),`${n}.sock`)}var Pv=class{constructor(){this.messages=[]}push(t){this.messages.push(t),this.dequeueRequest&&(this.dequeueRequest.resolve(this.messages),this.dequeueRequest=void 0,this.messages=[])}async dequeue(t){if(this.messages.length){let r=this.messages;return this.messages=[],r}return this.dequeueRequest&&this.dequeueRequest.resolve([]),new Promise((r,n)=>{this.dequeueRequest={resolve:r,reject:n},typeof t=="number"&&setTimeout(n,t)})}};async function Ri(e,t,r){let n=await zS("ssh-askpass");return await new Promise((o,i)=>{WL.createServer(s=>{s.setEncoding("utf8");let a="";s.on("data",async c=>{if(a+=c,a.endsWith(`
`))try{r.write(`SSH askpass request: ${a}`,1);let u=await t(JSON.parse(a));s.write(u,l=>{l&&console.error(l)}),s.end()}catch(u){console.error(u)}}),s.on("error",c=>console.error(c))}).on("error",s=>{i(s)}).listen(n,()=>{o()})}),{DISPLAY:process.env.DISPLAY||"1",ELECTRON_RUN_AS_NODE:"1",SSH_ASKPASS:YS.join(e,"scripts",`ssh-askpass.${process.platform==="win32"?"bat":"sh"}`),SSH_ASKPASS_REQUIRE:"force",VSCODE_SSH_ASKPASS_NODE:process.execPath,VSCODE_SSH_ASKPASS_EXTRA_ARGS:process.versions.electron?"--ms-enable-electron-run-as-node":"",VSCODE_SSH_ASKPASS_MAIN:YS.join(e,"dist","common","sshAskpass.js"),VSCODE_SSH_ASKPASS_HANDLE:n}}var BK=0;function Kt(e){return e.VSCODE_SSH_ASKPASS_HANDLE?{VSCODE_SSH_ASKPASS_COUNTER:String(++BK)}:{}}async function mn(e,t){return(await oa(e,[t]))[0]}async function oa(e,t){let r=await Iv(e,"container",t);for(let n of r){n.Ports=[];let o=n.NetworkSettings.Ports;for(let i in o){let[s,a]=i.split("/");for(let c of o[i]||[]){let{HostIp:u,HostPort:l}=c;n.Ports.push({IP:u,PrivatePort:parseInt(s),PublicPort:parseInt(l),Type:a})}}}return r}async function GL(e,t){return(await Iv(e,"image",[t]))[0]}async function Tv(e,t){return(await Iv(e,"volume",[t]))[0]}async function pp(e,t){return Iv(e,"volume",t)}async function Iv(e,t,r){if(!r.length)return[];let n=hp(e),o=await Oe({...n,args:(n.args||[]).concat(["inspect","--type",t,...r])});try{return JSON.parse(o.stdout.toString())}catch(i){throw console.error({stdout:o.stdout.toString(),stderr:o.stderr.toString()}),i}}async function ss(e,t=!1,r=[]){let n=[];t&&n.push("-a");for(let i of r)n.push("--filter",`label=${i}`);return(await ot(e,"ps","-q",...n)).stdout.toString().split(/\r?\n/).filter(i=>!!i)}async function Co(e,t=[]){let r=[];for(let o of t)r.push("--filter",`label=${o}`);return(await ot(e,"volume","ls","-q",...r)).stdout.toString().split(/\r?\n/).filter(o=>!!o)}async function KS(e){return(await ot(e,"volume","ls","-q","-f","dangling=true")).stdout.toString().split(/\r?\n/).filter(r=>!!r)}async function zL(e){return(await ot(e,"volume","prune","-f")).stdout.toString()}async function Dv(e,t,r){let n=[];for(let o of r||[])n.push("--label",o);await ot(e,"volume","create",...n,t)}async function XS(e,t){let{exec:r,cmd:n,args:o,env:i,output:s}=hp(e),a=[];for(let f in t)for(let p of t[f])a.push("--filter",`${f}=${p}`);let c=await JS(e)?"json":"{{json .}}",u=(o||[]).concat(["events","--format",c,...a]),l=await r({cmd:n,args:u,env:i,output:s}),d=[];return l.stderr.on("data",f=>d.push(f)),l.exit.then(({code:f,signal:p})=>{d.length&&s.write(dt(Buffer.concat(d).toString())),(f||p&&p!=="SIGKILL")&&s.write(dt(`Docker events terminated (code: ${f}, signal: ${p}).`))},f=>{s.write(dt(f&&(f.stack||f.message)))}),l}async function ot(e,...t){let r=hp(e);return Oe({...r,args:(r.args||[]).concat(t)})}async function QS(e){var t;try{let{stdout:r}=await ot(e,"context","ls","--format","{{json .}}"),n=`[${r.toString().trim().split(/\r?\n/).join(",")}]`;return(t=JSON.parse(n).find(s=>s.Current))==null?void 0:t.Name}catch{return}}async function JS(e){if(("cliHost"in e?e.cliHost:e.common.cliHost).platform!=="linux")return!1;try{let{stdout:r}=await ot(e,"-v");return r.toString().toLowerCase().indexOf("podman")!==-1}catch{return!1}}async function YL(e,...t){let r=QL(e);return pl({...r,args:(r.args||[]).concat(t)})}async function mp(e,...t){let r=hp(e,"dockerComposeCLI"in e?await e.dockerComposeCLI():void 0);return Oe({...r,args:(r.args||[]).concat(t)})}function Bo(e,t,r){return async function(n){let{exec:o,cmd:i,args:s,env:a}=hp(e),{argsPrefix:c,args:u}=XL(t,r,n,!1);return o({cmd:i,args:(s||[]).concat(u),env:a,output:KL(n.output,i,c)})}}async function ki(e,t,r,n){if(!await n("node-pty"))throw new Error("Missing node-pty");return async function(i){let{ptyExec:s,cmd:a,args:c,env:u}=QL(e),{argsPrefix:l,args:d}=XL(t,r,i,!0);return s({cmd:a,args:(c||[]).concat(d),env:u,output:KL(i.output,a,l)})}}function KL(e,t,r){return VK(e,`Run: ${t} ${(r||[]).join(" ").replace(/\n.*/g,"")}`,"Run in container:")}function VK(e,t,r){let n=new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");return ao({...e,get dimensions(){return e.dimensions},event:i=>e.event("text"in i?{...i,text:i.text.replace(n,r)}:i)})}function XL(e,t,r,n){let{env:o,cwd:i,cmd:s,args:a}=r,c=["exec","-i"];n&&c.push("-t"),t&&c.push("-u",t),o&&Object.keys(o).forEach(l=>c.push("-e",`${l}=${o[l]}`)),i&&c.push("-w",i),c.push(e);let u=c.slice();return c.push(s),a&&c.push(...a),{argsPrefix:u,args:c}}function hp(e,t){return"dockerEnv"in e?{exec:e.common.cliHost.exec,cmd:t?t.cmd:e.dockerCLI,args:t?t.args:[],env:{...e.dockerEnv,...Kt(e.dockerEnv)},output:e.common.output}:"cliHost"in e?{exec:e.cliHost.exec,cmd:t?t.cmd:e.dockerCLI,args:t?t.args:[],env:{...e.env,...Kt(e.env)},output:e.output}:{...e,env:{...e.env,...Kt(e.env)}}}function QL(e,t){return"dockerEnv"in e?{ptyExec:e.common.cliHost.ptyExec,cmd:t?t.cmd:e.dockerCLI,args:t?t.args:[],env:{...e.dockerEnv,...Kt(e.dockerEnv)},output:e.common.output}:"cliHost"in e?{ptyExec:e.cliHost.ptyExec,cmd:t?t.cmd:e.dockerCLI,args:t?t.args:[],env:{...e.env,...Kt(e.env)},output:e.output}:{...e,env:{...e.env,...Kt(e.env)}}}function JL(e){return e.toLowerCase().replace(/[^a-z0-9\._-]+/g,"").replace(/(\.[\._-]|_[\.-]|__[\._-]|-+[\._])[\._-]*/g,(t,r)=>r.substr(0,r.length-1))}var ZL="com.docker.compose.project",WK="com.docker.compose.service";async function eF(e,t,r,n,o,i,s,a,c,u,l,d,f,p,m){return GK(e,t,r,n,o,i,zK(n),s,a,c,u,l,d,f,p,m)}async function GK(e,t,r,n,o,i,s,a,c,u,l,d,f,p,m,h){var E,C;let{common:g}=e,{cliHost:v}=t,w;try{let S=await na(v,n,v.env,v.cwd),x=v.path.join(v.cwd,".env"),I=Array.isArray(n.dockerComposeFile)&&n.dockerComposeFile.length===0&&await v.isFile(x)?x:void 0,P=await ZS(t,r,S),T=!u,D={...t.env,...Kt(t.env)},R={cliHost:v,dockerPath:t.dockerCLI,dockerComposePath:t.dockerComposePath,env:D,extensionPath:g.extensionPath,appRoot:g.appRoot,package:g.package,output:g.postCreate.output},{mergedConfiguration:k}=await sa(R,i,p,g.getLogLevel(),h,f,a.Id,m,g.cliMode),U=k.remoteUser;w=await Fl(e,a.Id,s,U),d&&u&&w.user!=="root"&&(w.launchRootShellServer?await lv(w,w.launchRootShellServer,s,n.configFilePath.path):g.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."));let W=vr(v,w.shellServer);T||await xv(e.configurationTracking,v,W,n,g.output);let j=k.shutdownAction;j==="stopContainer"&&(j="stopCompose");let $={cwd:o,dockerCLI:e.dockerCLI,dockerComposeCLI:await e.dockerComposeCLI(),env:g.env,containerId:a.Id,user:w.user,sessionId:g.sessionId,shutdownAction:j,projectName:P,composeFiles:S,envFile:I,buildContainerRunArgs:l,service:n.service,runServices:n.runServices,logLevel:g.getLogLevel(),delay:1e4},{shutdownArgs:O,doneWithDocuments:H}=await kv(e,v,W,"dockerCompose",$,T?n:void 0);g.backgroundTasks.push(H);let Q=((C=(((E=k.customizations)==null?void 0:E.vscode)||[]).slice().reverse().find(ye=>typeof ye.devPort=="number"))==null?void 0:C.devPort)||Js,{hostOrContainerPort:M,hostPortServer:Z,connectionToken:re,webConnectionToken:K,remoteEnv:fe,serverDownloaded:_e}=await Il(g,w,n,k,Q,Ml(e,t,i,f,a.Id,c,p,m));return O.hostPortServer=Z,Nl(g,w,M,re,K,a,r),{params:g,properties:w,config:n,resolvedAuthority:{host:ia,port:M,connectionToken:re,extensionHostEnv:fe},webConnectionToken:K,tunnelInformation:g.isLocalContainer?Ll(a):{},dockerParams:e,dockerContainerId:a.Id,serverDownloaded:_e}}catch(S){let x=S instanceof Me?S:new Me({description:"An error occurred setting up the container.",originalError:S});throw a&&(x.manageContainer=!0,x.params=e.common,x.containerId=a.Id,x.dockerParams=e),w&&(x.containerProperties=w),x.config=n,x}}function zK(e){return e.workspaceFolder||"/"}async function tF(e,t,r){let n=await ss(e,!0,[`${ZL}=${t}`,`${WK}=${r}`]);return n&&n[0]}async function ZS(e,t,r){let{cliHost:n}="cliHost"in e?e:e.common,o=await YK(e),i=Rv(n.env.COMPOSE_PROJECT_NAME||"",o);if(i)return i;try{let c=n.path.join(n.cwd,".env"),u=await n.readFile(c),l=/^COMPOSE_PROJECT_NAME=(.+)$/m.exec(u.toString()),d=l&&l[1].trim(),f=Rv(d||"",o);if(f)return f}catch(c){if(!(c&&(c.code==="ENOENT"||c.code==="EISDIR")))throw c}let s=t.configFolderPath,a=r[0]?n.path.dirname(r[0]):n.cwd;return zO(n.platform,a,n.path.join(s,".devcontainer"))?Rv(`${n.path.basename(s)}_devcontainer`,o):Rv(n.path.basename(a),o)}function eb(e){let t=(e.Config.Labels||{})[ZL];return t||void 0}function Rv(e,t){return t?e.toLowerCase().replace(/[^-_a-z0-9]/g,""):e.toLowerCase().replace(/[^a-z0-9]/g,"")}async function YK(e){try{let t=Sl((await e.dockerComposeCLI()).version);return t?!bl(t,[1,21,0]):!0}catch{return!0}}function Ai(e,t,r){let n;return()=>n||(n=(async()=>{let o=!1,i;try{i=(await mp({...e,cmd:r},"version","--short")).stdout}catch(s){if((s==null?void 0:s.code)!=="ENOENT")throw s;i=(await mp({...e,cmd:t},"compose","version","--short")).stdout,o=!0}return{version:i.toString().trim(),cmd:o?t:r,args:o?["compose"]:[]}})())}var Oi=ce(require("url")),rF=ce(require("https"));function Ni(e){return e.toLowerCase().indexOf("github.com")>=0?ZK(e):e.toLowerCase().indexOf("visualstudio.com")>=0?QK(e):e.toLowerCase().indexOf("dev.azure.com")>=0?XK(e):e.toLowerCase().indexOf("gitlab.com")>=0?JK(e):KK(e)}function as(e){let t="owner",r="repository";return{repository:"unknown",repositoryUrl:e,ref:void 0,commit:!1,repositoryOwner:t,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${t}/${r}`}}function KK(e){var s;let t="unknown-owner",r,n=e,o;o=(s=Oi.parse(e))==null?void 0:s.path;let i=o==null?void 0:o.split("/");return!i||i.length<1?as(e):(r=i[i.length-1],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),{repository:"unknown",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:t,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${t}/${r}`})}function XK(e){var i,s;let t,r,n=e,o;if(Ov(e)){let a=`http://${e}`;o=(i=Oi.parse(a))==null?void 0:i.path;let c=o==null?void 0:o.split("/");if(!c||c.length<5)return as(e);t=c[3],r=c[4]}else{o=(s=Oi.parse(e))==null?void 0:s.path;let a=o==null?void 0:o.split("/");if(!a||a.length<5)return as(e);t=a[2],r=a[4],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf(".")))}return{repository:"ado",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:t,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${t}/${r}`}}function QK(e){var i,s;let t,r,n=e,o;if(Ov(e)){let a=`http://${e}`;o=(i=Oi.parse(a))==null?void 0:i.path;let c=o==null?void 0:o.split("/");if(!c||c.length<5)return as(e);t=c[3],r=c[4]}else{o=(s=Oi.parse(e))==null?void 0:s.path;let a=o==null?void 0:o.split("/");if(!a||a.length<5)return as(e);t=a[2],r=a[4],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf(".")))}return{repository:"vso",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:t,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${t}/${r}`}}function JK(e){var i,s;let t,r,n=e,o;if(Ov(e)){let a=`http://${e}`;o=(i=Oi.parse(a))==null?void 0:i.path,o&&(o=o.replace("/:","/"));let c=o==null?void 0:o.split("/");if(!c||c.length<3)return as(e);t=c[c.length-2],r=c[c.length-1]}else{o=(s=Oi.parse(e))==null?void 0:s.path;let a=o==null?void 0:o.split("/");if(!a||a.length<3)return as(e);t=a[a.length-2],r=a[a.length-1]}return r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),{repository:"gitlab",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:t,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${t}/${r}`}}function ZK(e){var c,u;let t,r,n=e,o,i,s;if(Ov(e)){let l=`http://${e}`;s=(c=Oi.parse(l))==null?void 0:c.path,s&&(s=s.replace("/:","/"))}else s=(u=Oi.parse(e))==null?void 0:u.path;let a=s==null?void 0:s.split("/");if(!a||a.length<=2)return as(e);if(t=a[1],r=a[2],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),a.length>=3){if(a[3]==="commit"||a[3]==="tree"){let l=e.match(/\/tree\/|\/commit\//);l&&l.index&&(n=e.substring(0,l.index),o=e.substring(l.index+l[0].length))}if(a[3]==="pull"){i=a[4];let l=e.match(/\/pull\//);l&&l.index&&(n=e.substring(0,l.index))}}return{repository:"github",repositoryUrl:n,ref:o,commit:a[3]==="commit",repositoryOwner:t,repositoryName:r,pullRequestId:i,fullRepositoryName:`${t}/${r}`}}function Ov(e){return e=e.toLowerCase(),e.indexOf("://")<0?e.indexOf("@")<e.indexOf(":"):!1}var gp=class extends Error{constructor(r,n){super();this.code=r,this.description=n}},vp=class{constructor(t){this.inputUrl=t,this.gitUrlInfo=Ni(this.inputUrl)}repositoryName(){return this.gitUrlInfo.repositoryName}repositoryOwner(){return this.gitUrlInfo.repositoryOwner}async postClone(t,r,n,o){}installExtension(){return null}},tb=class extends vp{constructor(t){super(t)}async parseUrl(t){var i,s,a;let r=(i=this.gitUrlInfo)==null?void 0:i.repositoryOwner,n=(s=this.gitUrlInfo)==null?void 0:s.repositoryName,o=(a=this.gitUrlInfo)==null?void 0:a.pullRequestId;return this.getPullRequestInfo(t,r,n,o)}async getPullRequestInfo(t,r,n,o){var l,d,f,p,m,h,g,v,w,E,C;let i=await this.fetchPullRequestInfo(t,r,n,o),s=(d=(l=i.head)==null?void 0:l.repo)==null?void 0:d.clone_url,a=(p=(f=i.base)==null?void 0:f.repo)==null?void 0:p.clone_url;if(!a)throw new gp(2,"Cannot access the head repository of the Pull Request.");let c=(m=i.head)==null?void 0:m.ref,u=((v=(g=(h=i.head)==null?void 0:h.repo)==null?void 0:g.owner)==null?void 0:v.login)===r?null:(C=(E=(w=i.head)==null?void 0:w.repo)==null?void 0:E.owner)==null?void 0:C.login;return{urlToClone:a,prRepositoryUrl:s,ref:c,sourceOwner:u}}async fetchPullRequestInfo(t,r,n,o){let i=`/repos/${r}/${n}/pulls/${o}`,s={"user-agent":"vscode-remote-containers"};t&&(s.authorization=`token ${t}`);let a={hostname:"api.github.com",port:443,path:i,method:"GET",headers:s};return new Promise((c,u)=>{let l="",d=rF.request(a,f=>{if(f.statusCode<200||f.statusCode>=300)return u(new Error(`Status Code: ${f.statusCode}`));f.on("data",p=>{l+=p}),f.on("end",()=>{let p=JSON.parse(l.toString());c(p)})});d.on("error",u),d.end()})}cloneOptions(t){return{url:t.urlToClone,fullClone:!0}}async postClone(t,r,n,o){if(t.sourceOwner){let u=t.prRepositoryUrl.replace(/\.[^/.]+$/,"");await Oe({exec:r.exec,cmd:"git",args:["remote","add",t.sourceOwner,u],cwd:n,output:o}),await Oe({exec:r.exec,cmd:"git",args:["fetch",t.sourceOwner,t.ref],cwd:n,output:o});try{await Oe({exec:r.exec,cmd:"git",args:["checkout","-t",`${t.sourceOwner}/${t.ref}`],cwd:n,output:o})}catch(l){if(!(l.stderr&&l.stderr.startsWith(`fatal: A branch named '${t.ref}' already exists`)))throw l}await Oe({exec:r.exec,cmd:"git",args:["config","--local",`remote.${t.sourceOwner}.github-pr-remote`,"true"],cwd:n,output:o})}else await Oe({exec:r.exec,cmd:"git",args:["checkout",t.ref],cwd:n,output:o});let i=this.gitUrlInfo.repositoryOwner,s=this.gitUrlInfo.repositoryName,a=this.gitUrlInfo.pullRequestId,c=`${i}#${s}#${a}`;await Oe({exec:r.exec,cmd:"git",args:["config","--local",`branch.${t.ref}.github-pr-owner-number`,c],cwd:n,output:o})}installExtension(){return"GitHub.vscode-pull-request-github"}},rb=class extends vp{constructor(t){super(t)}async parseUrl(t){var r,n;return{urlToClone:(r=this.gitUrlInfo)==null?void 0:r.repositoryUrl,ref:(n=this.gitUrlInfo)==null?void 0:n.ref}}cloneOptions(t){let r=this.gitUrlInfo.commit;return{url:t.urlToClone,branch:!r&&t.ref||void 0,fullClone:r}}async postClone(t,r,n,o){this.gitUrlInfo.commit&&await Oe({exec:r.exec,cmd:"git",args:["checkout",t.ref],cwd:n,output:o})}},Av=class extends vp{constructor(r,n){super(r);this.branch=n}async parseUrl(r){return{urlToClone:this.inputUrl,ref:this.branch}}cloneOptions(r){return{url:r.urlToClone,branch:r.ref||void 0}}};function $l(e,t){if(t)return new Av(e,t);let r=Ni(e);if(r.repository==="github"){if(r.pullRequestId)return new tb(e);if(r.ref)return new rb(e)}return new Av(e)}var yp=Gt.join(__dirname,"..","node_modules","vscode-dev-containers","repository-containers");async function nF(e,t,r,n){if(t&&!/\/\.?devcontainer\.json$/.test(t.path))throw new Error(`Filename must be devcontainer.json or .devcontainer.json (${qe(t,e.common.cliHost.platform)}).`);let o=e.parsedAuthority;if(!o||yr(o))return e9(e,o,t,r,n);if(Kr(o))return o.inspectVolume?nb(e,o):t9(e,o,t);if(cs(o))return o.inspectVolume?nb(e,o):r9(e,o,t);if(_p(o))return nb(e,o);throw new Error(`Unexpected authority: ${JSON.stringify(o)}`)}async function e9(e,t,r,n,o){let{common:i,dockerCLI:s,dockerComposeCLI:a,dockerComposePath:c}=e,{cliHost:u,env:l,output:d}=i,f=u.cwd,p=e.originalCwd||f,m=t&&St(u.path,$f(t.hostPath)?u.path.join(f,Gt.basename(t.hostPath)):f);(t==null?void 0:t.configFile)&&!r&&(r=t.configFile);let h;m&&(h=await a9(e,m),h&&(i.backgroundTasks.push(h==null?void 0:h.gitUnshallow),await h.gitClone()));let g={cliHost:u,dockerCLI:s,dockerComposeCLI:a,dockerComposePath:c,env:l,output:d},v=o?void 0:[`${fb}=${p}`],w=o||[`${pb}=${p}`,`${$v}=${i.product.quality}`];return sb(e,g,v,w,p,f,r,n,void 0,m,t==null?void 0:t.settings,[],i.cliMode?"never":"on")}async function t9(e,t,r){let{repositoryPath:n,volumeName:o,folder:i}=t,s=_o(n);o=await lF(e,s,o);let{labels:a,remoteWorkspaceFolder:c}=dF(s,n,i,o),u=[...a],l=[...a,`${$v}=${e.common.product.quality}`],{containerId:d,shellServer:f,remoteContainersEnv:p,config:m,preInstalledExtensions:h}=await s.cloneAndInitializeRepository(e,t,s,o,r),g=i?s.workspaceFolder(i):s.fullRepositoryName,v=ub(s,o,i);return oF(e,t,r,m,h,d,f,p,o,g,c,u,l,v)}async function r9(e,t,r){let{common:n}=e,{extensionPath:o,appRoot:i,loadNativeModule:s,output:a}=n,{volumeName:c,folder:u}=t,l=[`${aF}=${c}`,`${cF}=${u}`],d=l;await db(e);let f=lb(c,aa()),{stdout:p}=await ot(e,...f),m=p.toString().trim(),h=Bo(e,m,"root"),g=await ho(h,a),v=[],w=Ul(u),E=w,C=await ki(e,m,"root",s),S=jn("container",w,{},h,C,()=>{throw new Error("not implemented")},"node",a),{configuration:x}=await Ep({cliHost:S,dockerPath:"docker",dockerComposePath:"docker-compose",env:{},extensionPath:o,appRoot:i,package:n.package,output:a},w,r,e.common.getLogLevel(),l);return oF(e,t,r,x,v,m,g,{},c,w,E,l,d,f)}async function oF(e,t,r,n,o,i,s,a,c,u,l,d,f,p){var P,T,D;let m=St(Gt.posix,u),h=[`type=volume,source=${c},target=${Gt.posix.dirname(m.rootFolderPath)},external=true`],g=await fF(e,i,a,l),v={},{HOME:w,USERPROFILE:E}=e.common.env;w!==void 0&&(v.HOME=w,await s.exec(`test -e "${w}" || (mkdir -p "$(dirname "${w}")" && ln -s ~ "${w}")`)),E!==void 0&&(v.USERPROFILE=E);let C=g.cliHost,S,x,I=jr(n)||"image"in n;if(I||"dockerComposeFile"in n&&n.workspaceFolder||o.length){let R=o.length?{...n.customizations,vscode:{...(P=n.customizations)==null?void 0:P.vscode,extensions:[...((D=(T=n.customizations)==null?void 0:T.vscode)==null?void 0:D.extensions)||[],...o]}}:n.customizations;x=I?j=>({...j,workspaceFolder:void 0,workspaceMount:"",customizations:R}):j=>({...j,workspaceFolder:m.rootFolderPath,customizations:R});let k=C.path.join(await C.tmpdir(),`devcontainer-${Mr()}.json`),U=`EOF-${k}`,W=`${k}_${Date.now()}`;await s.exec(`cat <<'${U}' >${W}
${JSON.stringify({...x(n),configFilePath:void 0})}
${U}
mv ${W} ${k}`),S=Ue.from({scheme:wt.scheme,path:k})}try{return await sb(e,g,d,f,e.common.cliHost.cwd,C.cwd,r,S,x,m,t.settings,h,"off",p,!0,void 0,v)}finally{Promise.all(e.common.backgroundTasks.filter(R=>typeof R!="function").map(R=>R.catch(()=>{}))).then(()=>ot(e,"rm","-f",i))}}async function nb(e,t){let{common:r,dockerCLI:n,dockerComposeCLI:o,dockerComposePath:i}=e,{cliHost:s,env:a,output:c}=r,{volumeName:u}=t,l,d,f=_p(t);f?(l=Mv,d="Inspect Volume"):(l=_o(t.repositoryPath).volumeDestination,d="Recovery Container");let p=[`${Lv}=${u}`],m=[`${Lv}=${u}`,`${$v}=${r.product.quality}`],h=await uF(e),g=[`type=volume,source=${u},target=${l},external=true`],v={cliHost:s,dockerCLI:n,dockerComposeCLI:o,dockerComposePath:i,env:a,output:c},w=St(s.path,h);return sb(e,v,p,m,h,h,void 0,void 0,void 0,w,t.settings,g,"never",void 0,!f,d)}async function sb(e,t,r,n,o,i,s,a,c,u,l,d,f,p,m,h,g){let{common:v,userRepositoryConfigurationPaths:w}=e,{output:E,extensionPath:C,appRoot:S,postCreate:x,localWaylandSocket:I}=v,{cliHost:P}=t,T=[...d];if(e.cacheMount==="bind"&&(await Lo(v.localCacheFolder),T.push(`type=bind,source=${v.localCacheFolder},target=/vscode`)),e.cacheMount==="volume"){let Ee="vscode";(await Co(t)).indexOf(Ee)===-1&&await Dv(t,Ee),T.push("type=volume,source=vscode,target=/vscode,external=true")}if(I){let Ee=await AO(void 0);T.push(`type=bind,source=${I},target=${Ee}`)}let D=s?{uri:s,location:n9(v,P,u,s)}:u?await Fv(P,u,w,!a,E):void 0,R=D==null?void 0:D.uri;if((R==null?void 0:R.scheme)==="file"&&P.type!=="local"){let Ee=Gt.dirname(R.fsPath),Te=Gt.basename(R.fsPath),Je=Te===".devcontainer.json"?Ee:Gt.dirname(Ee),Ge=P.path.join(await P.tmpdir(),`devcontainer-config-${Mr()}`);await xc(Je,P,Ge,E),R=Ue.from({scheme:wt.scheme,path:P.path.join(Ge,...Te===".devcontainer.json"?[Te]:[Gt.basename(Ee),Te])})}typeof e.removeOnStartup=="string"&&await qn(e,e.removeOnStartup)&&await ot(e,"rm","-f",e.removeOnStartup);let k=await Nv(t,n);k&&e.removeOnStartup===!0&&r&&(await ot(e,"rm","-f",k.Id),k=void 0);let U=!!k||!r,W=U?n:await o9(e,t,D,r),j=e.removeOnStartup===!0||!(k||r&&await Nv(t,r)),$={...g,...t.env,...Kt(t.env)},O={cliHost:P,dockerPath:t.dockerCLI,dockerComposePath:t.dockerComposePath,env:$,extensionPath:C,appRoot:S,package:v.package,postCreate:x,output:v.postCreate.output},H=v.postCreate.output.dimensions||v.output.dimensions,Q=v.additionalFeaturesToInstall,M=await Di(O,["up",...t.cliHost.type==="local"&&v.persistedFolder?["--user-data-folder",v.persistedFolder]:[],...t.dockerCLI!=="docker"?["--docker-path",t.dockerCLI]:[],...t.dockerComposePath!=="docker-compose"?["--docker-compose-path",t.dockerComposePath]:[],...v.containerSessionDataFolder?["--container-session-data-folder",v.containerSessionDataFolder]:[],...U?["--container-data-folder",go(e.common.product.serverDataFolderName)]:[],...U?["--container-system-data-folder",Tl(e.common.product.serverDataFolderName)]:[],"--workspace-folder",i,...e.workspaceMountConsistencyDefault?["--workspace-mount-consistency",e.workspaceMountConsistencyDefault]:[],...[].concat(...W.map(Ee=>["--id-label",Ee])),"--log-level",Ei(v.getLogLevel()),"--log-format","json",...R?["--config",qe(R,P.platform)]:[],...a?["--override-config",qe(a,P.platform)]:[],"--default-user-env-probe",v.defaultUserEnvProbe,...e.buildNoCache?["--build-no-cache"]:[],...e.removeOnStartup===!0?["--remove-existing-container"]:[],...e.expectExistingContainer?["--expect-existing-container"]:[],...[].concat(...T.map(Ee=>["--mount",Ee])),"--skip-post-create","--update-remote-user-uid-default",f,"--mount-workspace-git-root",String(!v.cliMode),...H?["--terminal-columns",String(H.columns),"--terminal-rows",String(H.rows)]:[],...Object.keys(Q).length>0?["--additional-features",JSON.stringify(Q)]:[]]);if((M==null?void 0:M.outcome)!=="success")throw new Me({description:`devcontainer command failed: ${M?JSON.stringify(M):"data missing"}`});let Z=await qn(e,M.containerId);if(!Z)return mF(v.output,"Dev container not found.");let re=await Ep(O,i,R,v.getLogLevel(),W,Z.Id,a,v.cliMode),K=re.configuration,fe=jl(l),_e=h||(K.name?`Dev Container: ${K.name}${fe}`:`Dev Container${fe}`);v.setWorkspaceName(_e);let ye;if(jr(K)||"image"in K)ye=await pF(e,t,u,K,re.workspace,o,i,Z,U,j,m,W,R,a,v.additionalFeaturesToInstall);else if("dockerComposeFile"in K){if(!u)throw new Me({description:"A Dev Container using Docker Compose requires a workspace folder."});ye=await eF(e,t,u,K,o,i,Z,U,j,p,m,W,R,a,v.additionalFeaturesToInstall)}else throw new Me({description:`Dev container config (${K.configFilePath}) is missing one of "image", "dockerFile" or "dockerComposeFile" properties.`});return i9(e,O,K,a,c,Z,p,i,R,W,ye.properties),ye.configLocation=D==null?void 0:D.location,ye}function n9(e,t,r,n){return(n.scheme==="file"||n.scheme===wt.scheme&&t.type==="local")&&hh(Gt,e.extensionPath,n.fsPath)?"builtin":r&&(n.scheme===wt.scheme||n.scheme==="file"&&t.type==="local")&&hh(Gt,r.rootFolderPath,qe(n,t.platform))?"workspace":n.scheme==="file"?"user":"unknown"}async function o9(e,t,r,n){var s;let{cliHost:o}=t,i;if(r){let{uri:a}=r,c;if(r.location==="builtin"){let l=Gt.relative(e.common.extensionPath,a.fsPath);c=Ue.file(l).with({scheme:"vscode-dev-containers-builtin"}).toString()}else a.scheme===wt.scheme||a.scheme==="file"&&o.type==="local"?c=qe(a,o.platform):c=a.toString();let u=[...n,`${ib}=${c}`];if(await Nv(t,u))i=u;else{let l=await Nv(t,n);l&&!((s=l.Config.Labels)!=null&&s[ib])?e.removeOnStartup===!0?(await ot(t,"rm","-f",l.Id),i=u):i=n:i=u}}else i=n;return i}function i9(e,t,r,n,o,i,s,a,c,u,l){let{common:d}=e,{output:f,extensionPath:p,appRoot:m}=d,{cliHost:h}=t;if(e.watch){let g,v=r.configFilePath;if(v.scheme===wt.scheme)if(h.type==="local")g=v.with({scheme:"file"});else if(h.type==="container")g=v.with({scheme:pn.scheme,authority:d.authority});else{let w=qe(v,h.platform),E=i.Mounts.find(C=>hh(h.path,C.Source,w));if(E){let C=h.path.relative(E.Source,w),S=h.platform==="win32"?C.replace(/\\/g,"/"):C;g=Ue.from({scheme:pn.scheme,authority:d.authority,path:Gt.posix.join(E.Destination,S)})}}else(v.scheme==="file"||v.scheme===pn.scheme)&&(g=v);if(g){let x=function(){w||(C=E().finally(async()=>{await yo(h.type==="container"?5e3:1e3),C=void 0,S&&(S=!1,x())}))},w=!1;async function E(){let P=t,T;try{if(h.type==="container"){let{stdout:k}=await ot(e,...s);T=k.toString().trim();let U=Bo(e,T,"root");if(n&&o){let $=n.path,O=`EOF-${$}`,H=`${$}_${Date.now()}`,Q=await ho(U,f),M=yt((await Q.exec(`cat '${v.path}'`)).stdout);await Q.exec(`cat <<'${O}' >${H}
${JSON.stringify({...o(M),configFilePath:void 0})}
${O}
mv ${H} ${$}`)}let W=await ki(e,T,"root",d.loadNativeModule);P={cliHost:jn("container",a,{},U,W,()=>{throw new Error("not implemented")},"node",f),dockerPath:"docker",dockerComposePath:"docker-compose",env:{},extensionPath:p,appRoot:m,package:d.package,output:f}}let D=await Ep(P,a,c,d.getLogLevel(),u,i.Id,n,d.cliMode),R=vr(P.cliHost,l.shellServer);await bv({...e.configurationTracking,containerOutdated:async k=>{w=!0;let U=await e.configurationTracking.containerOutdated(k);return U==="ignore"&&(w=!1),U}},P.cliHost,R,D.configuration)}finally{T&&await ot(e,"rm","-f",T)}}let C,S=!1,I=e.watch(g,()=>{C?S=!0:x()});e.common.shutdowns.push(async()=>(await I).dispose())}}}async function Nv(e,t){let r=await ss(e,!0,t);return(await oa(e,r)).filter(o=>o.State.Status!=="removing")[0]}async function Ep(e,t,r,n,o,i,s,a=!1){let{cliHost:c,output:u}=e,l=await Di(e,["read-configuration",...e.dockerPath!=="docker"?["--docker-path",e.dockerPath]:[],...e.dockerComposePath!=="docker-compose"?["--docker-compose-path",e.dockerComposePath]:[],"--workspace-folder",t,...(o||[]).map(d=>["--id-label",d]).flat(),...i?["--container-id",i]:[],"--log-level",Ei(n),"--log-format","json",...r?["--config",qe(r,c.platform)]:[],...s?["--override-config",qe(s,c.platform)]:[],"--mount-workspace-git-root",String(!a),...u.dimensions?["--terminal-columns",String(u.dimensions.columns),"--terminal-rows",String(u.dimensions.rows)]:[]]);return l.configuration.configFilePath=Ue.revive(l.configuration.configFilePath).with({scheme:c.type==="local"?"file":wt.scheme}),l}async function Cp(e,t,r,n,o){let i=await Fv(e,t,r,n,o);return i==null?void 0:i.uri}async function Fv(e,t,r,n,o){let i=await hA(e,t,ut),s=i&&await wp(i,r);if(s)return{uri:s,location:"user"};let a=await wv(e,t.configFolderPath);if(a)return{uri:a,location:"workspace"};let c=i&&await wp(i,[yp]);if(c)return{uri:c,location:"builtin"};n&&o&&(i!=null&&i.length?o.write(`No dev container config found. Additional locations checked:
${[...ob(i,r),...ob(i,[yp])].map(u=>`- ${Gt.join(u,".devcontainer","devcontainer.json")}`).join(`
`)}`):o.write("No dev container config found. No repository connection string found."))}async function wp(e,t){let r=ob(e,t);for(let n of r){let o=await OL(n);if(o)return Ue.file(o)}}function ob(e,t){let r=[],n=new Set(e.map(s9).filter(o=>!!o));for(let o of n)for(let i of t){let s=Gt.join(i,o);r.push(s)}return r}function iF(e,t,r){let n=e.path.relative(t.rootFolderPath,qe(r,e.platform));return n&&!n.startsWith("..")&&!e.path.isAbsolute(n)}function sF(e){if(e.scheme!=="file")return;let t=Gt.relative(yp,e.fsPath);if(t&&!t.startsWith("..")&&!Gt.isAbsolute(t))return t}function s9(e){let t;if(e.startsWith("https://"))t=e.substr(8);else{let r=/[^@:]+@([^:]+):(.+)/.exec(e);if(r)t=`${r[1]}/${r[2]}`;else return}if(!(t.toLowerCase().startsWith("github.com")&&(t=(/^[^/]+\/[^/]+\/[^/]+/.exec(t)||[])[0],!t)))return t.endsWith(".git")&&(t=t.substr(0,t.length-4)),t}async function a9(e,t){var p;let{common:r,gitClone:n}=e,{cliHost:o}=r;if(!n)return;let i=Jf(r),s=Jf(r),a=$l(n.url,n.branch),c=await a.parseUrl(n.tokenEnvVar?o.env[n.tokenEnvVar]:void 0),u=a.cloneOptions(c),l={...n,...u,env:{...n.env,...u.env}},d=await Rg(r,r.cliHost,t.rootFolderPath,l,i.output,s.output),f=(p=d.gitClone)==null?void 0:p.then(()=>a.postClone(c,o,t.rootFolderPath,i.output));return{gitClone:async()=>{i.flush(),await f},gitUnshallow:async()=>{i.flush(),s.flush(),await d.gitUnshallow}}}var aF="vsc.devcontainer.volume.name",cF="vsc.devcontainer.volume.folder";function ab(e){return e?`${e.volumeName}:${e.folder}`:void 0}function Pc(e){let t=(e.Config.Labels||{})[aF],r=(e.Config.Labels||{})[cF];return t&&r?{volumeName:t,folder:r}:void 0}function _o(e){return{repositoryPath:e,fullRepositoryName:jv(e),repositoryName:u9(e),workspaceFolder:Ul,volumeDestination:aa(),oldVolumeName:l9(e),alreadyCloned:!1,imageName:d9(e),uniqueVolumeName:f9(e),getWorkspaceConfiguration:(t,r)=>p9(t,r),getOldWorkspacePath:yF,cloneAndInitializeRepository:m9,getConfigurationFromImage:vF,gitUrlHandler:$l(e),gitUrlInfo:Ni(e)}}function jv(e){let t=Ni(e);return t==null?void 0:t.fullRepositoryName}function u9(e){let t=Ni(e);return t==null?void 0:t.repositoryName}function aa(){return"/workspaces"}function l9(e){let t=jv(e);return`vsc-${Vo.posix.basename(t)}-${gb(e)}`}function d9(e){let t=jv(e),r=gb(e),n=Vo.posix.basename(t);return JL(`vsc-${n}-${r}`)}function f9(e){let t=Ni(e),r="";t&&t.repositoryName&&(r=t.repositoryName,t.ref?r=`${r}-${t.ref.replace(/\//g,"-")}`:t.pullRequestId&&(r=`${r}-pull-${t.pullRequestId}`));let n=gb(e);return`${r}-${n}`}function gb(e){return hF.createHash("md5").update(e).digest("hex")}function p9(e,t){let r=Ul(e),n=`type=volume,src=${t},dst=${aa()}`;return{workspaceFolder:r,workspaceMount:n}}function Ul(e){return Vo.posix.join(`${aa()}`,`${e}`)}async function m9(e,{folder:t,cloneInfo:r},n,o,i){var d;await db(e);let{containerId:s,shellServer:a,remoteContainersEnv:c}=await h9(e,n,o,t,i,e.configProvider,r),{config:u}=await vF(e,n,t,i,a),l=(d=n.gitUrlHandler)==null?void 0:d.installExtension();return{repository:n,volumeName:o,containerId:s,shellServer:a,remoteContainersEnv:c,config:u,preInstalledExtensions:l?[l]:[]}}async function h9(e,t,r,n,o,i,s){let{common:a}=e,{output:c,loadNativeModule:u}=a,l=t.fullRepositoryName,d,f,p,m;e.common.progress(1);let h=ub(t,r,n,e.buildContainerRunArgs);n?(c.write(`Cloning Github repository: ${l} into ${t.workspaceFolder(n)}
\r`),d=`fatal: destination path '${t.workspaceFolder(n)}' already exists`,m=t.workspaceFolder(n),p=`Repository '${l}' was already cloned into '${t.workspaceFolder(n)}'.
\r`):(c.write(`Cloning Github repository: ${l} into volume ${r}
\r`),d=`fatal: destination path '${l}' already exists`,m=`${l}`,p=`Repository '${l}' was already cloned into volume.`);let g=t.gitUrlHandler;if(!g)throw new Me({description:"Could not analyze the URL."});s?f=g.cloneOptions(s):f={url:t.repositoryPath};let{stdout:v}=await ot(e,...h),w=v.toString().trim(),E=Bo(e,w,"root"),C=await ho(E,c),S,x={},I=Promise.resolve(),P;if(!a.cliMode){let k=await Wf(a,{remoteExec:E,user:"root",nodeExecutable:"node",shellServer:C,launchRootShellServer:async()=>C});S=k.remoteContainersCLI,x=k.remoteEnv,I=k.ready,P=k.mrpcExec}let T=await ki(e,w,"root",u),D=jn("container",m,{},await P||E,T,()=>{throw new Error("not implemented")},void 0,c);try{a.cliMode||(e.common.isCopyGitConfigEnabled&&(await Cc(e.common,{homeFolder:"/root",shellServer:C},[".gitconfig"],"git"),await dv(e.common,{homeFolder:"/root",shellServer:C},{})),await Pl({shellServer:C,nodeExecutable:"node"},S,c,"global"),await Cc(e.common,{homeFolder:"/root",shellServer:C},[".ssh","known_hosts"],"ssh"),await I);let k=Jf(a),U=await Rg(a,D,m,{...f,env:{...x,...f.env}},c,k.output);if(await U.gitClone,U.gitUnshallow&&(a.backgroundTasks.push(U.gitUnshallow.then(()=>{})),U.gitUnshallow.then(k.flush,k.flush)),U.gitClone&&s)try{await g.postClone(s,D,m,c)}catch{return mb(e,w,`Failed to checkout the repository ${s.urlToClone}.`)}}catch(k){let U=k&&(k.cmdOutput||k.stack||k.message)||String(k);if(U=U.replace(Lu,""),U.replace(/[\r\n]+/gm,"").includes(d))c.write(p),t.alreadyCloned=!0;else return mb(e,w,`Git clone failed. ${U}`)}let{configRaw:R}=await gF(e,t,n,o,C);if(!_v(R)&&i){c.write(`Repository ${l} has no dev container files.
\r`);let k=!0;for(;k;){let U=await i.createConfiguration(m,D);if(U)k=!1;else if(U=await i.showError("You must select a container configuration since the repository does not contain a dev container configuration. Without a dev container configuration the container cannot be started.","Select Configuration"),U!=="Select Configuration")return mb(e,w,"Cancelled container configuration selection.")}}return{containerId:w,shellServer:C,remoteContainersEnv:x}}function ub(e,t,r,n=[]){let o=r?e.volumeDestination:e.fullRepositoryName;return lb(t,o,n)}function lb(e,t,r=[]){return["run","-d","--mount",`type=volume,src=${e},dst=${t}`,"-v","/var/run/docker.sock:/var/run/docker.sock",...r,`${wF}`,"sleep","infinity"]}function mb(e,t,r){throw t&&ot(e,"rm","-f",t),new Me({description:r})}async function gF(e,t,r,n,o){let i,s;if(r?s=t.workspaceFolder(r):s=`${yF(t.repositoryPath)}`,n)return i=(await o.exec(`cat ${n.path} 2>/dev/null`,{logOutput:!1})).stdout,{configRaw:i&&yt(i),configFile:n,workspaceFolder:s};if(n=await wp([t.repositoryPath],e.userRepositoryConfigurationPaths),n&&(i=(await pt(n.fsPath)).toString()),!n)for(let a of Ol(Vo.posix,s))try{i=(await o.exec(`cat ${a} 2>/dev/null`,{logOutput:!1})).stdout,n=Ue.from({scheme:"vscode-remote",path:a});break}catch{}return n||(n=await wp([t.repositoryPath],[yp]),n&&(i=(await pt(n.fsPath)).toString())),{configRaw:i&&yt(i),configFile:n,workspaceFolder:s}}async function vF(e,t,r,n,o){let{configRaw:i,configFile:s,workspaceFolder:a}=await gF(e,t,r,n,o);if(!s||!i)throw new Me({description:"The repository does not have a 'devcontainer.json' configuration file."});let{common:c,configUpdater:u}=e,{cliHost:l,output:d}=c,f=dp({...i}),p=f;u&&(f.configFilePath=s,p=u(f),delete p.configFilePath);let m=ov({platform:l.platform,configFile:s,env:l.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:a},p);return m.configFilePath=s,("workspaceMount"in m||"workspaceFolder"in m)&&d.write("The options 'workspaceMount' or 'workspaceFolder' are ignored when cloning a repository into a volume."),{workspaceFolder:a,config:m}}function yF(e){return`/workspaces/${Vo.posix.basename(jv(e))}`}var wF="vsc-volume-bootstrap";var hb="bootstrap.Dockerfile",g9="volume.Dockerfile";async function db(e,t,r,n){let{cliHost:o,output:i}="cliHost"in e?e:e.common;"cliHost"in e||(t=e.common.extensionPath,r=e.common.package.version,n=e.development);let s=o.path.join(await wb(o),"bootstrap-image",n?`${r}-dev-${Date.now()}`:r),a=o.path.join(s,hb),c=!await o.isFolder(s);if(!c&&!await o.isFile(a)){let l="Removing incomplete bootstrap-image folder.",d=i.start(l),f=`${s}-${Mr()}`;await o.rename(s,f),await o.rm(f,{recursive:!0,force:!0}),c=!await o.isFolder(s),i.stop(l,d)}if(c){let l=`${s}-${Mr()}`,d=o.path.join(l,".vscode-remote-containers","dist",`dev-containers-cli-${r}`);await o.mkdirp(o.path.join(d,"dist","spec-node")),await o.writeFile(o.path.join(l,hb),await pt(Vo.join(t,"scripts",hb))),await o.writeFile(o.path.join(d,"package.json"),await pt(Vo.join(t,"package.json"))),await o.writeFile(o.path.join(d,"dist","spec-node","devContainersSpecCLI.js"),await pt(Vo.join(t,"dist","spec-node","devContainersSpecCLI.js")));let f=Ev(t),p=o.path.join(d,"dist","node_modules","vscode-dev-containers","container-features");await xc(f,o,p,i),await o.rename(l,s)}await YL(e,...["build","-f",a,"-t",wF,s])}async function uF(e){let{common:t}=e,{cliHost:r,output:n}=t,o=await v9(e),i=r.path.join(o,g9),s=!await r.isFolder(o);if(!s&&!await r.isFile(i)){let a="Removing incomplete inspect-volume folder.",c=n.start(a),u=`${o}-${Mr()}`;await r.rename(o,u),await r.rm(u,{recursive:!0,force:!0}),s=!await r.isFolder(o),n.stop(a,c)}if(s){let a=`${o}-${Mr()}`;await xc(Vo.join(t.extensionPath,"scripts","inspect-volume"),r,a,n),await r.rename(a,o)}return o}async function v9(e){let{common:t,development:r}=e,{cliHost:n}=t,o=t.package.version;return n.path.join(await wb(n),"inspect-volume",r?`${o}-dev-${Date.now()}`:o)}async function lF(e,t,r){let n=[`vsch.local.repository=${t.repositoryPath}`];return r?r===So?(r=t.uniqueVolumeName,n.push("vsch.local.repository.unique=true")):n.push("vsch.local.repository.unique=false"):(r=t.oldVolumeName,n.push("vsch.local.repository.unique=false")),t.gitUrlInfo.ref&&n.push(`vsch.local.repository.branch=${t.gitUrlInfo.ref}`),t.gitUrlInfo.pullRequestId&&n.push(`vsch.local.repository.pullRequestId=${t.gitUrlInfo.pullRequestId}`),(await Co(e)).indexOf(r)===-1&&await Dv(e,r,n),r}var Uv="vsch.local.repository",vb="vsch.local.repository.volume",yb="vsch.local.repository.folder";function dF(e,t,r,n){return r?{labels:[`${Uv}=${t}`,`${vb}=${n}`,`${yb}=${r}`],remoteWorkspaceFolder:e.workspaceFolder(r)}:{labels:[`${Uv}=${t}`],remoteWorkspaceFolder:e.getOldWorkspacePath(t)}}async function fF(e,t,r,n){let{loadNativeModule:o,output:i}=e.common,s=Bo(e,t,"root"),a=await ki(e,t,"root",o),c=jn("container",n,r,s,a,()=>{throw new Error("not implemented")},"node",i);return{cliHost:c,dockerCLI:"docker",dockerComposeCLI:Ai({exec:c.exec,env:r,output:i},"docker","docker-compose"),dockerComposePath:"docker-compose",env:r,output:i}}var fb="devcontainer.local_folder",ib="devcontainer.config_file",Lv="vsch.local.volume",Mv="/volume",$v="vsch.quality",pb="vsch.local.folder";async function pF(e,t,r,n,o,i,s,a,c,u,l,d,f,p,m){let{common:h}=e,g;try{let v=!u,w={...t.env,...Kt(t.env)},E={cliHost:t.cliHost,dockerPath:t.dockerCLI,dockerComposePath:t.dockerComposePath,env:w,extensionPath:h.extensionPath,appRoot:h.appRoot,package:h.package,output:h.postCreate.output},{mergedConfiguration:C}=await sa(E,s,f,h.getLogLevel(),m,d,a.Id,p,h.cliMode),S=C.remoteUser;g=await Fl(e,a.Id,o.workspaceFolder,S),l&&u&&o.workspaceFolder&&g.user!=="root"&&(g.launchRootShellServer?await lv(g,g.launchRootShellServer,o.workspaceFolder,n.configFilePath.path):h.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."));let x=await _F(h,u,o,g);return await w9(a,c,e,t,g,n,C,r,v,i,s,d,f,p,x)}catch(v){throw y9(v,a,e,g,n)}}function y9(e,t,r,n,o){let i=e instanceof Me?e:new Me({description:"An error occurred setting up the container.",originalError:e});return t&&(i.manageContainer=!0,i.params=r.common,i.containerId=t.Id,i.dockerParams=r),n&&(i.containerProperties=n),o&&(i.config=o),i}async function w9(e,t,r,n,o,i,s,a,c,u,l,d,f,p,m){var k,U;let{common:h}=r,g=vr(n.cliHost,o.shellServer);c||await xv(r.configurationTracking,n.cliHost,g,i,h.output);let v=s.shutdownAction;v==="stopCompose"&&(v="stopContainer");let w={cwd:u,dockerCLI:r.dockerCLI,env:h.env,containerId:e.Id,user:o.user,sessionId:h.sessionId,shutdownAction:v,logLevel:h.getLogLevel(),delay:1e4},{shutdownArgs:E,doneWithDocuments:C}=await kv(r,n.cliHost,g,"singleContainer",w,c?i:void 0);h.backgroundTasks.push(C);let S=((U=(((k=s.customizations)==null?void 0:k.vscode)||[]).slice().reverse().find(W=>typeof W.devPort=="number"))==null?void 0:U.devPort)||Js,{hostOrContainerPort:x,hostPortServer:I,connectionToken:P,webConnectionToken:T,remoteEnv:D,serverDownloaded:R}=await Il(h,o,i,s,S,Ml(r,n,l,d,e.Id,t,f,p),m);return E.hostPortServer=I,Nl(h,o,x,P,T,e,a),{params:h,properties:o,config:i,resolvedAuthority:{host:ia,port:x,connectionToken:P,extensionHostEnv:D},webConnectionToken:T,tunnelInformation:h.isLocalContainer?Ll(e):{},dockerParams:r,dockerContainerId:e.Id,serverDownloaded:R}}function Tc(e){let t=e.Config.Labels||{},r=t[fb]||t[pb];return r||void 0}function Ic(e){let t=(e.Config.Labels||{})[Uv];return t||void 0}function Hv(e){let t=(e.Config.Labels||{})[vb];return t||void 0}function EF(e){let t=(e.Config.Labels||{})[Lv];return t||void 0}function CF(e){let t=(e.Config.Labels||{})[yb];return t||void 0}function mF(e,t){throw e.write(dt(t)),new Error(t)}var SF=ce(require("path"));async function bF(e,t,r,n,o,i){let s,a=new Promise(m=>s=m),c=new Pv,u=[],l=await BL("vscode-remote-containers",async(m,h)=>{let g=await VL(m),v=[];if(g.type==="poll")try{v=await c.dequeue(6e4)}catch{}else if(g.type==="reply"){let w=u[g.sequence];w&&(w(g.reply),delete u[g.sequence])}else g.type==="done"&&s?s():g.type==="log"&&n.event(g.event);h.write(JSON.stringify(v)),h.end()});l.server.unref();let d=SF.join(r,"dist","shutdown","shutdownMonitorProcess"),f=[l.ipcHandlePath,e,kn[t],o||"",i.getTime().toString()];n.write(`Forking shutdown monitor: ${d} ${f.join(" ")}\r
`);let p=KO(d,f,{stdio:["ignore","ignore","ignore","ipc"],detached:!0,execArgv:[]});return p.on("error",m=>{console.error(m)}),p.unref(),{queue:c,sequence:0,replies:u,done:a}}async function qv(e,t,r){let n=e.sequence++,o=new Promise(s=>e.replies[n]=s);return e.queue.push({type:"configure",sequence:n,options:t}),await o}async function xF({queue:e,done:t}){e.push({type:"cleanup"}),await t}var PF=require("util");var So="__UNIQUE__",ia="127.0.0.1";function ql(e,t){let r=e.platform==="win32"&&!e.env.SSH_AUTH_SOCK?Hg:e.type==="wsl"?e.env.SSH_AUTH_SOCK:void 0,n={DOCKER_CONTEXT:"default"};return t&&("context"in t?n.DOCKER_CONTEXT=t.context:(t.host&&(t.host.startsWith("ssh://")&&e.type==="ssh"?n.VSCODE_DOCKER_HOST=t.host:n.DOCKER_HOST=t.host),t.certPath&&(n.DOCKER_CERT_PATH=t.certPath),t.tlsVerify&&(n.DOCKER_TLS_VERIFY=t.tlsVerify))),r&&(n.SSH_AUTH_SOCK=r),n}function wr(e){let t;if(e.DOCKER_CONTEXT&&e.DOCKER_CONTEXT!=="default")t={context:e.DOCKER_CONTEXT};else{t={};let r=e.VSCODE_DOCKER_HOST||e.DOCKER_HOST;r&&(t.host=r),e.DOCKER_CERT_PATH&&(t.certPath=e.DOCKER_CERT_PATH),e.DOCKER_TLS_VERIFY&&(t.tlsVerify=e.DOCKER_TLS_VERIFY),Object.keys(t).length||(t=void 0)}return t}function Bv(e,t){t&&("context"in t&&t.context&&e.write(`Context: ${t.context}\r
`),"host"in t&&t.host&&e.write(`Host: ${t.host}\r
`),"certPath"in t&&t.certPath&&e.write(`CertPath: ${t.certPath}\r
`),"tlsVerify"in t&&t.tlsVerify&&e.write(`TLSVerify: ${t.tlsVerify}\r
`))}function Vv(e){return!e.VSCODE_DOCKER_HOST&&!e.DOCKER_HOST&&(!e.DOCKER_CONTEXT||e.DOCKER_CONTEXT==="default")}function jl(e){return e&&("context"in e||e.host)?` @ ${"context"in e?e.context:e.host}`:""}async function qn(e,t){try{return await mn(e,t)}catch{return}}function Nl(e,t,r,n,o,i,s){let a=i.Ports.filter(f=>!!f.PublicPort),c="";if(e.authority&&s){let f=s.isWorkspaceFile?"workspace":"folder",p=t.remoteWorkspaceFolder||"/",m=s.isWorkspaceFile?Hl.posix.join(p,e.cliHost.path.basename(s.workspaceOrFolderPath)):p;c=`&${f}=${encodeURIComponent(`vscode-remote://${e.authority}${m}`)}`}let u=[...a.length?["Published Ports:"]:[],...a.map(f=>`${f.PrivatePort}/${f.Type} -> ${f.IP}:${f.PublicPort}`),...a.length?[""]:[],...e.web?[`VS Code Web: http://localhost:${r}?tkn=${n||o}${c}`,""]:[]],l=u.reduce((f,p)=>Math.max(p.length,f),0),d="-".repeat(l);l>0&&e.output.write(`\r
\r
${d}\r
${u.join(`\r
`)}${d}\r
\r
`)}async function Wv(e){let{common:t}=e,{output:r}=t,n="Check Docker is running",o=r.start(n);try{let{stdout:i}=await ot(e,"version","--format","{{.Server.APIVersion}}"),s=i.toString();if(s.toLowerCase().indexOf("cannot connect")!==-1)throw new Error(s);r.write(`Server API version: ${s.trim()}`)}catch(i){console.error(i);let s=i&&(i.stderr?i.stderr.toString():i.message)||"";s&&r.write(dt(s));let a="Docker returned an error. Make sure the Docker daemon is running and select an option how to proceed.",c=i&&(i.stderr?i.stderr.toString().toLowerCase():i.message)||"";throw c.indexOf("permission denied")!==-1?c.indexOf("ssh")!==-1?a="Cannot connect to Docker daemon using 'ssh'. Make sure public/private keys are set up for connecting without keyboard interaction.":a="Current user does not have permission to run 'docker'. Try adding the user to the 'docker' group.":c.indexOf("ENOENT")!==-1&&(a="The 'docker' command was not found. Make sure Docker is installed."),new Me({description:a,originalError:`Docker returned an error code ${i.code}, message: ${i.message}`})}finally{r.stop(n,o)}}function yr(e){return e.hostPath!==void 0}function Kr(e){return e.repositoryPath!==void 0}function cs(e){return!Kr(e)&&!!e.folder}function _p(e){return!Kr(e)&&!cs(e)&&e.volumeName!==void 0}function Bn(e){let t=IF("dev-container",e);if(!!t)return typeof t=="string"?{hostPath:t}:"repositoryPath"in t?t.dockerHost?{repositoryPath:t.repositoryPath,settings:{host:`tcp://${t.dockerHost.host}:${t.dockerHost.port}`,cloneInfo:t.cloneInfo}}:t:("hostPath"in t&&t.configFile&&(t.configFile=Ue.revive(t.configFile)),"hostPath"in t&&t.dockerHost?{hostPath:t.hostPath,settings:{host:`tcp://${t.dockerHost.host}:${t.dockerHost.port}`}}:t)}function Sp(e,t,r,n,o){let i=r||o?JSON.stringify({hostPath:e,localDocker:n,settings:r,configFile:o}):e;return`vscode-remote://dev-container+${Buffer.from(i,"utf8").toString("hex")}${t}`}function Wo(e,t,r,n,o,i){if(e){let a=_o(e);if(!t){let u=JSON.stringify({repositoryPath:e,settings:o,cloneInfo:i,inspectVolume:n});return`vscode-remote://dev-container+${Buffer.from(u,"utf8").toString("hex")}${a.getOldWorkspacePath(e)}`}let c=JSON.stringify({repositoryPath:e,volumeName:t,folder:r,settings:o,cloneInfo:i,inspectVolume:n});return`vscode-remote://dev-container+${Buffer.from(c,"utf8").toString("hex")}${a.workspaceFolder(r)}`}if(r){let a={volumeName:t,folder:r,settings:o};return`vscode-remote://dev-container+${Buffer.from(JSON.stringify(a),"utf8").toString("hex")}${Ul(r)}`}let s=JSON.stringify({volumeName:t,settings:o});return`vscode-remote://dev-container+${Buffer.from(s,"utf8").toString("hex")}${Mv}`}function Bl(e){let t=IF("attached-container",e);if(!!t)return typeof t=="string"?{containerId:t}:(t.dockerHost&&(t.settings={host:`tcp://${t.dockerHost.host}:${t.dockerHost.port}`},delete t.dockerHost),t)}function TF(e,t,r){let n=JSON.stringify({containerName:e,settings:t,cwd:r});return`attached-container+${Buffer.from(n,"utf8").toString("hex")}`}function IF(e,t){try{let[r,n]=t.split("+"),o=r===e&&n?Buffer.from(n,"hex").toString("utf8"):void 0;return o?o.startsWith("{")?JSON.parse(o):o:void 0}catch(r){console.warn(r);return}}async function DF(e,t,r,n=!1){return!n&&await Hf(e,t,r)||t}function RF(e,t,r){let n=e.path.relative(e.path.dirname(t),r);return`/workspaces/${e.platform==="win32"?n.replace(/\\/g,"/"):n}`}function kF(e,t,r){if(e==="win32")return t;let n=`${E9(r,"/")}/`;return(e==="linux"?t.startsWith(n):t.toLowerCase().startsWith(n.toLowerCase()))&&(t=`~/${t.substr(n.length)}`),t}function E9(e,t){if(t.length===0)return e;for(;e.endsWith(t);)e=e.substr(0,e.length-t.length);return e}function jL(e,t){return e.with({path:Hl.posix.resolve(e.path,t)})}async function kv(e,t,r,n,o,i){let{common:s,onRemoveOnShutdownChanged:a}=e;if(s.cliMode)return{shutdownArgs:{},doneWithDocuments:Promise.resolve()};let c=s.output.start("Setup shutdown monitor"),u=await bF(n,s.getLogLevel(),s.extensionPath,s.output,s.logFilePath?Hl.dirname(s.logFilePath):void 0,s.sessionStart);qv(u,o,s.output).catch(p=>console.error(p)),a&&a(async p=>{o.rebuild=!!p,o.delay=0,await qv(u,o,s.output)}),s.onDidChangeLogLevel(async p=>{o.logLevel=p,await qv(u,o,s.output)});let l={},d=async()=>{let p=xF(u);l.hostPortServer&&await(0,PF.promisify)(l.hostPortServer.close.bind(l.hostPortServer))(),await p};s.shutdowns.push(d);let f=i?bv(e.configurationTracking,t,r,i).catch(console.error):Promise.resolve();return s.output.stop("Setup shutdown monitor",c),{monitor:u,shutdownArgs:l,doneWithDocuments:f}}function Ll(e){return{environmentTunnels:e.Ports.filter(t=>!!t.PublicPort).map(t=>({remoteAddress:{port:t.PrivatePort,host:t.IP},localAddress:t.IP+":"+t.PublicPort}))}}async function Fl(e,t,r,n,o){var C;let{common:i}=e,s="Inspecting container",a=i.output.start(s),c=await mn(e,t);i.output.stop(s,a);let u=n||c.Config.User||"root",[,l,,d]=/([^:]*)(:(.*))?/.exec(u),f=C9(c.Config.Env),p=Bo(e,t,u),m=await ki(e,t,u,i.loadNativeModule),h=Bo(e,t,"root"),g=c.Mounts.find(S=>S.Type==="volume"&&S.Name==="vscode"),v=c.Mounts.find(S=>S.Type==="bind"&&S.Source===i.localCacheFolder),w=g&&Hl.posix.join(g.Destination,/^\.*(.*)$/.exec(i.product.serverDataFolderName)[1])||(v==null?void 0:v.Destination),E=(C=c.Mounts.find(S=>S.Type==="bind"&&S.Destination.startsWith("/tmp/vscode-wayland-")))==null?void 0:C.Destination;return cv({params:i,createdAt:c.Created,startedAt:c.State.StartedAt,sharedDataFolder:w,sharedDataFolderIsLocalCacheFolder:!g&&!!v,remoteWorkspaceFolder:r,containerUser:l==="0"?"root":l,containerGroup:d,containerEnv:f,remoteExec:p,remotePtyExec:m,remoteExecAsRoot:h,rootShellServer:o,remoteWaylandSocket:E})}function C9(e){return(e||[]).reduce((t,r)=>{let n=r.indexOf("=");return n!==-1&&(t[r.substr(0,n)]=r.substr(n+1)),t},{})}async function wb(e){return e.path.join(await e.tmpdir(),e.platform==="linux"?`vsch-${await e.getUsername()}`:"vsch")}async function AF(e){let{common:t,dockerCLI:r,dockerComposeCLI:n,dockerComposePath:o,dockerEnv:i}=e,{cliHost:s,output:a}=t;return{cliHost:s,dockerCLI:r,dockerComposeCLI:n,dockerComposePath:o,env:i,output:a}}async function OF(e,t){return e.type==="local"&&t?e.path.join(t,"data"):e.path.join(await e.homedir(),".vscode-remote-containers","data")}function Ml(e,t,r,n,o,i,s,a){return async(c,u,l,d)=>{let{common:f}=e,{cliHost:p}=t,m={...t.env,...Kt(t.env)},h={cliHost:t.cliHost,dockerPath:t.dockerCLI,dockerComposePath:t.dockerComposePath,env:m,extensionPath:f.extensionPath,appRoot:f.appRoot,package:f.package,postCreate:f.postCreate,output:f.postCreate.output},g=f.postCreate.output.dimensions||f.output.dimensions,v=await Di(h,["run-user-commands",...t.cliHost.type==="local"&&f.persistedFolder?["--user-data-folder",f.persistedFolder]:[],...t.dockerCLI!=="docker"?["--docker-path",t.dockerCLI]:[],...t.dockerComposePath!=="docker-compose"?["--docker-compose-path",t.dockerComposePath]:[],...f.containerSessionDataFolder?["--container-session-data-folder",f.containerSessionDataFolder]:[],...i?["--container-data-folder",go(e.common.product.serverDataFolderName)]:[],...i?["--container-system-data-folder",Tl(e.common.product.serverDataFolderName)]:[],...r?["--workspace-folder",r]:[],...(n||[]).map(w=>["--id-label",w]).flat(),"--container-id",o,"--log-level",Ei(f.getLogLevel()),"--log-format","json",...s?["--config",qe(s,p.platform)]:[],...a?["--override-config",qe(a,p.platform)]:[],"--default-user-env-probe",f.defaultUserEnvProbe,"--skip-non-blocking-commands",String(c),...f.skipPostAttach?["--skip-post-attach"]:[],"--prebuild",String(l),"--stop-for-personalization",String(u),...[].concat(...Object.keys(d).map(w=>["--remote-env",`${w}=${d[w]}`])),"--mount-workspace-git-root",String(!f.cliMode),...g?["--terminal-columns",String(g.columns),"--terminal-rows",String(g.rows)]:[]]);if((v==null?void 0:v.outcome)!=="success")throw new Me({description:`devcontainer command failed: ${v?JSON.stringify(v):"data missing"}`});return v.result}}async function sa(e,t,r,n,o,i,s,a,c=!1){let{cliHost:u,output:l}=e,d=await Di(e,["read-configuration",...e.dockerPath!=="docker"?["--docker-path",e.dockerPath]:[],...e.dockerComposePath!=="docker-compose"?["--docker-compose-path",e.dockerComposePath]:[],...t?["--workspace-folder",t]:[],...(i||[]).map(f=>["--id-label",f]).flat(),...s?["--container-id",s]:[],"--log-level",Ei(n),"--log-format","json",...r?["--config",qe(r,u.platform)]:[],...a?["--override-config",qe(a,u.platform)]:[],"--include-merged-configuration","--mount-workspace-git-root",String(!c),...l.dimensions?["--terminal-columns",String(l.dimensions.columns),"--terminal-rows",String(l.dimensions.rows)]:[],...Object.keys(o).length>0?["--additional-features",JSON.stringify(o)]:[]]);return d.configuration.configFilePath=d.configuration.configFilePath&&Ue.revive(d.configuration.configFilePath).with({scheme:u.type==="local"?"file":wt.scheme}),d}async function _F(e,t,r,n){if(!e.cliMode&&t&&r.workspaceMount)try{let o=NL(r.workspaceMount);if(o.type==="bind")return await n.shellServer.exec(`command -v git >/dev/null 2>&1 && cd '${o.target}' && test -d .git && test "$(stat -c %u .)" != "$(id -u)"`),e.cliHost.platform==="win32"?await Oe({exec:e.cliHost.exec,cmd:"powershell",args:["-NoProfile","-NonInteractive","-Command",'if (-not (Get-Acl . | foreach { $_.Owner }).Equals("$env:UserDomain\\$env:UserName")) { exit 1 }'],cwd:o.source,output:e.output}):await Oe({exec:e.cliHost.exec,cmd:"/bin/sh",args:["-c",`cd '${o.source}' && test "$(stat -${e.cliHost.platform==="darwin"?"f":"c"} %u .)" = "$(id -u)"`],output:e.output}),async()=>{await n.shellServer.exec(`git config --global --add safe.directory '${o.target}'`)}}catch{}}var $t=ce(require("vscode"));var Dc={id:"openDocumentation",title:"Open Documentation",isLastAction:!1,applicable:(e,t)=>!t,execute:async e=>{await $t.env.openExternal($t.Uri.parse("https://aka.ms/vscode-remote/container/resolve-failed"))}},Rc={id:"reloadWindow",title:"Reload Window",isLastAction:!0,applicable:(e,t)=>!t&&e.data.reload!==!1,execute:async e=>{e.manageContainer&&e.dockerParams&&e.containerId&&await ot(e.dockerParams,"stop","-t","0",e.containerId),await $t.commands.executeCommand("workbench.action.reloadWindow")}},LF={id:"rebuildContainer",title:"Rebuild Container",isLastAction:!0,applicable:(e,t)=>e.manageContainer&&!!e.dockerParams&&!!e.containerId&&!t,execute:async e=>{await ot(e.dockerParams,"rm","-f",e.containerId),await $t.commands.executeCommand("workbench.action.reloadWindow")}},Vl={id:"openRecent",title:"Open Recent...",isLastAction:!0,applicable:(e,t)=>!t,execute:async e=>{await $t.commands.executeCommand("workbench.action.openRecent")}},FF={id:"startContainer",title:"Start Container",isLastAction:!0,applicable:e=>!!e.dockerParams&&!!e.containerId&&e.data.start===!0,execute:async e=>{await ot(e.dockerParams,"start",e.containerId),await $t.commands.executeCommand("workbench.action.reloadWindow")}},MF={id:"chooseContainer",title:"Choose Container",isLastAction:!0,applicable:e=>e.data.attach===!0,execute:async()=>{await $t.commands.executeCommand("remote-containers.attachToRunningContainer")}},ca={id:"closeRemote",title:"Close Remote",isLastAction:!0,applicable:(e,t)=>{if(!t)return!1;let r=$t.workspace.workspaceFile;return!(r&&r.scheme==="untitled"||$t.workspace.textDocuments.some(o=>o.isDirty))},execute:async e=>{await $t.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null})}},Wl=[{id:"retry",title:"Retry",isLastAction:!0,applicable:(e,t)=>t&&e.data.reload!==!1,execute:Rc.execute},{id:"moreActions",title:"More Actions...",isCloseAffordance:!0,isLastAction:!1,applicable:(e,t)=>t,execute:async e=>{}},{id:"learnMore",title:"Learn More",isLastAction:!1,applicable:(e,t)=>t&&!!e.data.learnMoreUrl,async execute(e){await $t.env.openExternal($t.Uri.parse(e.data.learnMoreUrl))}}];async function ua(e,t,r,n=!1,o){var f,p,m,h,g,v;let i=e instanceof Me?e:new Me({description:"An error occurred setting up the container.",originalError:e});if(o){o.show();let w=i.originalError&&(i.originalError.stack||i.originalError.message)||i.originalError;if(w!==void 0){o.log.write(dt(String(w)));let E=(p=(f=i.originalError)==null?void 0:f.stdout)==null?void 0:p.toString().trim();E&&o.log.write(E);let C=(h=(m=i.originalError)==null?void 0:m.stderr)==null?void 0:h.toString().trim();C&&o.log.write(dt(C)),(g=i.originalError)!=null&&g.code&&o.log.write(`Exit code ${(v=i.originalError)==null?void 0:v.code}`)}}if(e.message.indexOf("Cancelled container configuration selection")!==-1)throw await $t.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),$t.RemoteAuthorityResolverError.NotAvailable(void 0,!1);let s=i.actions;s.length||(s=[Dc]);let a=await s.reduce(async(w,E)=>await E.applicable(i,!0)?[...await w,E]:w,Promise.resolve([])),c=await $t.window.showErrorMessage(i.description,{modal:!0},...a);if(c&&(NF(r,t,c.id),await c.execute(i)),c&&c.isLastAction){if(n)throw $t.RemoteAuthorityResolverError.NotAvailable(void 0,!0);return}let u=await s.reduce(async(w,E)=>await E.applicable(i,!1)?[...await w,E]:w,Promise.resolve([])),l=u.map(w=>({label:w.title,action:w}));async function d(){let E=await(u.length?$t.window.showQuickPick(l,{ignoreFocusOut:!0,placeHolder:"Pick an action to help resolve the problem."}):Promise.resolve(void 0));E&&(NF(r,t,E.action.id),E.action.execute(i).catch(console.error),E.action.isLastAction||await d())}if(d().catch(console.error),n)throw $t.RemoteAuthorityResolverError.NotAvailable(void 0,!0)}function NF(e,t,r){e.sendTelemetryEvent("errorAction",{resolver:t,action:r})}var me=ce(require("vscode")),Wd=ce(require("path"));var tH=ce(yU()),Fa=ce(Yj());var Kj=ce(require("vscode"));function Zr(e){let t=Kj.workspace.getConfiguration(),r=Zf(e),n=t.get(r),o=Xs(e),i=t.get(o);if(i!=null&&i!==n){let s=t.inspect(r);if(!s||s.globalValue===void 0&&s.workspaceValue===void 0&&s.workspaceFolderValue===void 0)return i}return n}function oP(e,t){return e.affectsConfiguration(Zf(t))||e.affectsConfiguration(Xs(t))}var Tw=ce(require("path"));var Jn=ce(require("vscode"));async function Iw(){await Jn.window.showInformationMessage("You need to first save your workspace in a folder containing all its workspace folders.",{modal:!0})}var Dw="{.devcontainer.json,.devcontainer/devcontainer.json,.devcontainer/*/devcontainer.json}";async function gu(e,t){let r;if(t.length>1){let n=Jn.window.createQuickPick();n.placeholder="Select a devcontainer.json file.",n.busy=!0,n.enabled=!1,n.show(),n.items=await Promise.all(t.map(async i=>{let s=qe(i,e.platform),a=yt((await e.readFile(s)).toString()),c,u,l=e.path.dirname(s),d=e.path.dirname(l);return e.path.basename(l)===".devcontainer"?(c="Main",u=d):e.path.basename(d)===".devcontainer"?(c=e.path.basename(l),u=e.path.dirname(d)):(c="Project Root",u=l),{label:a.name||c,description:e.path.relative(u,s),uri:i,buttons:[{iconPath:new Jn.ThemeIcon("go-to-file"),tooltip:"Open File"}]}})),n.busy=!1,n.enabled=!0;let o=await new Promise(i=>{n.onDidAccept(()=>i(n.selectedItems[0])),n.onDidHide(()=>i(void 0)),n.onDidTriggerItemButton(({item:s})=>{Jn.commands.executeCommand("vscode.open",s.uri),i(void 0)})});n.dispose(),r=o?Ue.from(o.uri):"cancelled"}else t.length===1&&(r=t[0]);return r}function Vd(e,t){let r=Jn.workspace.fs;return{platform:e,path:e==="win32"?Tw.win32:Tw.posix,async isFile(n){try{return((await r.stat(Ts(e,t,n))).type&Jn.FileType.File)!==0}catch(o){if((o==null?void 0:o.code)==="FileNotFound"||(o==null?void 0:o.code)==="FileNotADirectory")return!1;throw o}},async readFile(n){try{let o=await r.readFile(Ts(e,t,n));return Buffer.from(o)}catch(o){if((o==null?void 0:o.code)==="FileNotFound"){let i=new Error(`Could not read file: ${n}`);throw i.originalError=o,i.code="ENOENT",i}throw o}},async rename(n,o){try{let i=Ts(e,t,n),s=Ts(e,t,n);await r.rename(i,s)}catch(i){if((i==null?void 0:i.code)==="FileNotFound"){let s=new Error(`Could not rename  ${n} -> ${o}`);throw s.originalError=i,s.code="ENOENT",s}throw i}},async writeFile(n,o){await r.writeFile(Ts(e,t,n),o)},async readDir(n){return(await r.readDirectory(Ts(e,t,n))).map(i=>i[0])},async readDirWithTypes(n){return r.readDirectory(Ts(e,t,n))},async mkdirp(n){await r.createDirectory(Ts(e,t,n))},async toCommonURI(n){return Ts(e,t,n)}}}function Ts(e,t,r){let n=e==="win32"?"/"+r.replace(/\\/g,"/"):r;return t.with({path:n})}var Rm=class{async readDocument(t){try{let r=await Jn.workspace.fs.readFile(t);return Buffer.from(r).toString()}catch{return}}async applyEdits(t,r,n){let o=sn(n,r);await Jn.workspace.fs.writeFile(t,Buffer.from(o))}};var tn="remote-containers.revealLogTerminal",dP="remote-containers.revealPostCreateTerminal",yu="remote-containers.openDevContainerFile",rH="remote-containers.openRepositoryInVolume",kw="remote-containers.openRepositoryInUniqueVolume",nH="remote-containers.openRepositoryFromRemoteHubWithEditSession",oH="remote-containers.openPullRequestInVolume",wu=me.Uri.parse("https://aka.ms/vscode-remote/containers/folder-setup"),Eu=me.Uri.parse("https://aka.ms/vscode-dev-containers"),Xj=new gh,en={onRemoveOnShutdownChangedEmitter:Xj,onRemoveOnShutdownChanged:Xj.event,results:new Map},vu,ko=e=>Jg(e,me.env.appRoot);function Aw(e,t,r,n,o){return async(i,s)=>{if(me.commands.executeCommand("setContext","forwardedPortsViewEnabled",!0),s.resolveAttempt>1){let a=r.get(i);if(!a)throw new Error("Reconnect attempt without old result.");let c=`Reconnection attempt ${s.resolveAttempt-1}`,u=e.log.start(c),{cliHost:l}=a.params;if(l.reconnect)try{await l.reconnect()}catch(d){throw e.log.write(dt(String(d&&(d.stack||d.message)||d))),me.RemoteAuthorityResolverError.TemporarilyNotAvailable("Cannot reconnect to remote host.")}if(a.dockerContainerId){let d=await qn(a.dockerParams,a.dockerContainerId);if(!d)throw me.RemoteAuthorityResolverError.NotAvailable("Container no longer exists.");if(d.State.Status==="paused")throw me.RemoteAuthorityResolverError.TemporarilyNotAvailable("Container is paused.");if(d.State.Status!=="running")throw me.RemoteAuthorityResolverError.NotAvailable("Container is no longer running.")}return e.log.stop(c,u),{...a.resolvedAuthority,isTrusted:a.isTrusted}}else{let a="Resolving Remote",c=e.log.start(a),u=await o(i,e,t);return bZ(u.params,u.properties).catch(l=>{}),r.set(i,u),n(),e.log.stop(a,c),me.window.withProgress({location:me.ProgressLocation.Window,title:qZ,cancellable:!1},async l=>{await qN(u.params.backgroundTasks)}).then(void 0,l=>{e.log.write(dt(String(l&&(l.stack||l.message)||l)))}),{...u.resolvedAuthority,...u.tunnelInformation,isTrusted:u.isTrusted}}}}async function bZ(e,t){if(!t.nodeExecutable)return;let r=await pt(Wd.join(e.extensionPath,"dist","node","remoteCloudGuesser.js"),{encoding:"utf8"}),{stdout:n}=await ns(e,t,[t.nodeExecutable,"-e",r],void 0,{silent:!0}),o=n.toString().trim();e.sendTelemetryEvent("extraInfo",{remoteCloud:o})}var iP;async function xZ(e){return iP||(iP=Ri(Wd.join(__dirname,"..",".."),Is,e)),iP}var km={};async function Is(e,t=!0){var r;if(e.counter&&((r=km[e.prompt])==null?void 0:r.from)===e.counter&&delete km[e.prompt],!km[e.prompt]){if(!t)return"";km[e.prompt]={result:Promise.resolve(me.window.showInputBox({prompt:e.prompt||"Enter password",password:!0,ignoreFocusOut:!0}).then(n=>n||"")),from:e.counter}}return km[e.prompt].result}async function ft(e,t,r,n=!0,o=xZ(t),i=!0){var g;let s=!r;if(s){if(en.results.size){let v=[...en.results.values()].filter(w=>w.dockerParams)[0];return AF(v.dockerParams)}if(vu)return vu}r&&typeof r!="string"&&"scheme"in r&&(r.scheme==="file"?r=r.fsPath:r=wl(r));let a;if(!r){let v=(me.workspace.workspaceFolders||[])[0];if(me.env.remoteName==="wsl")v?r=wl(v.uri):r={wslDistro:Yg(me.env.remoteAuthority),wslPath:"/"};else if(me.env.remoteName==="ssh-remote"){let w=PZ(me.env.remoteAuthority);if(w){let{user:E,hostName:C,port:S}=w;a={host:`ssh://${E?`${E}@`:""}${C}${S?`:${S}`:""}`},v?r=v.uri.path:r="/"}}else me.env.remoteName==="attached-container"?a=(g=Bl(me.env.remoteAuthority))==null?void 0:g.settings:(v==null?void 0:v.uri.scheme)==="file"&&(r=v.uri.fsPath);r||(r=process.cwd())}let c=a&&"host"in a&&a.host||void 0,u=n?hi():{executeInWSL:"never",defaultDistro:void 0},l=Hn(c,r,ko,u,e.extensionPath,await Eo(),await Yf(me.env.appRoot),t,Hi,{sshAskpassEnv:o,settings:Gd()});i&&!await Promise.race([l,yo(1e3)])&&await me.window.withProgress({location:me.ProgressLocation.Notification,title:`[Setting up Dev Containers (show log)](command:${tn} "Show details in terminal")`,cancellable:!1},async()=>{await l});let d=await l,f=mi(),p=ji();if(!a){let v=me.workspace.getConfiguration("docker"),w=v.get("environment")||{},E=w.DOCKER_CONTEXT||v.get("context")||d.env.DOCKER_CONTEXT;if(!E){let C={cliHost:d,dockerCLI:f,dockerComposeCLI:Ai({exec:d.exec,env:{},output:ut},f,p),dockerComposePath:p,env:{},output:ut};E=await QS(C)||"default"}E&&E!=="default"?a={context:E}:(a={...wr(d.env),...["host","certPath","tlsVerify"].reduce((C,S)=>TZ(C,v,S),{}),...wr(w)},Object.keys(a).length||(a=void 0))}let m={...await o,...ql(d,a)},h={cliHost:d,dockerCLI:f,dockerComposeCLI:Ai({exec:d.exec,env:m,output:t},f,p),dockerComposePath:p,env:m,output:t};return s&&(vu=h,fP(e)),h}var Rw;function fP(e){if(Rw)return Rw;let t=RZ(e);return e.subscriptions.push(t),e.subscriptions.push(t.event(()=>{let r=vu==null?void 0:vu.cliHost;vu=void 0,r!=null&&r.terminate&&r.terminate()})),Rw=t.event,Rw}function PZ(e){let t=/^ssh-remote\+(.*)$/.exec(e);if(!t)return;let r=t[1];try{let n=JSON.parse(Buffer.from(r,"hex").toString("utf8"));if(n&&n.hostName)return n}catch{}return{hostName:r}}function TZ(e,t,r){let n=t.get(r);return n&&(e[r]=n),e}var IZ=["docker.context","docker.host","docker.certPath","docker.tlsVerify","docker.environment"],DZ=["dockerComposePath","executeInWSL","executeInWSLDistro"];function RZ(e){let t=new me.EventEmitter,r=me.workspace.onDidChangeConfiguration(async c=>{(IZ.some(u=>c.affectsConfiguration(u))||DZ.some(u=>oP(c,u)))&&t.fire()}),n,o,i,s=()=>{(async()=>{o||(o=await Hn(void 0,process.cwd(),ko,hi(),e.extensionPath,await Eo(),void 0,ut,Hi));let c={cliHost:o,dockerCLI:mi(),dockerComposeCLI:Ai({exec:o.exec,env:{},output:ut},mi(),ji()),dockerComposePath:ji(),env:{},output:ut},u=await QS(c);u===void 0?i=setTimeout(s,2*60*1e3):(u!==n&&(n!==void 0&&t.fire(),n=u),i=setTimeout(s,2*1e3))})().catch(console.error)};s();let a=t.dispose;return t.dispose=()=>{r.dispose(),i&&clearTimeout(i),a.call(t)},t}async function Cu(){let e=me.workspace.workspaceFolders;if((e==null?void 0:e.length)===1){let t=e[0].uri;return pP(t)}return null}async function pP(e){if(e&&e.scheme==="vscode-remote"&&/dev-container\+(.*)/.exec(e.authority)){let r=Bn(e.authority);if(yr(r))return null;if(Kr(r)&&r.inspectVolume&&r.inspectVolume===!0)return r}return null}function Ow(e){return{getConfigurationState:()=>e.get("configurationState"),updateConfigurationState:async t=>e.update("configurationState",t),containerOutdated:kZ}}async function kZ(e){let t="Rebuild",r="Ignore",n=await me.window.showInformationMessage(`Configuration file(s) changed: ${e.join(", ")}. The container might need to be rebuilt to apply the changes.`,t,r);if(n===t)return me.commands.executeCommand("remote-containers.rebuildContainer");if(n===r)return"ignore"}async function AZ(e){return e?Qj():Array.from(new Set([...Zr("defaultExtensions")||[],...Qj()]))}function iH(){return Zr("defaultFeatures")||{}}function Qj(){let e=me.env.language,t=e.indexOf("-"),r=Jj(e)||(t!==-1?Jj(e.substr(0,t)):void 0);return r?[r]:[]}function Jj(e){let t=e.toLowerCase();return me.extensions.all.filter(r=>{var o;let n=r.packageJSON&&r.packageJSON.contributes;return(o=n==null?void 0:n.localizations)!=null&&o.length?!!n.localizations.find(i=>{var s;return((s=i==null?void 0:i.languageId)==null?void 0:s.toLowerCase())===t}):!1}).map(r=>r.id)[0]}function Zj(){return!!me.workspace.getConfiguration().get("workbench.enableExperiments")}function OZ(){return!!Zr("enableWebAccess")}function Nw(){return Zr("workspaceMountConsistency")||"cached"}function Lw(){return!!Zr("experimentalUpdateRemoteUserUIDOnMacOS")}function Fw(){return Zr("cacheVolume")??!0}function NZ(){let e=Zr("copyGitConfig");return typeof e=="boolean"?e:!0}function LZ(){return Zr("gitCredentialHelperConfigLocation")||"global"}function mi(){return Zr("dockerPath")||"docker"}function hi(){return{executeInWSL:mP(),defaultDistro:hP()}}function mP(){return process.platform!=="win32"?"never":Zr("executeInWSL")?"always":"forWSLPath"}function hP(){if(process.platform==="win32")return Zr("executeInWSLDistro")||void 0}function ji(){return Zr("dockerComposePath")||"docker-compose"}function Om(){let e=Zr("logLevel")||"debug";return WT(e)}var FZ=e=>me.workspace.onDidChangeConfiguration(t=>{oP(t,"logLevel")&&e(Om())});function MZ(){let e=me.workspace.getConfiguration(),t=r=>(e.get(Xs(r),"")||e.get(r,"")).trim();return{repository:t("dotfiles.repository")||void 0,installCommand:t("dotfiles.installCommand")||void 0,targetPath:t("dotfiles.targetPath")||"~/dotfiles"}}function Gd(){let e=me.workspace.getConfiguration();return{executablePath:e.get("remote.SSH.path"),configFilePath:e.get("remote.SSH.configFile")}}function Ds(e,t,r,n,o,i,s,a){var d,f;let c={resolver:t,outcome:r};n&&(c.hostType=n.cliHost.type),o&&(c.configProperties=JSON.stringify(Object.keys(o)),c.configExtensions=JSON.stringify(((f=(d=o.customizations)==null?void 0:d.vscode)==null?void 0:f.extensions)||[]),c.configFeatures=JSON.stringify(Object.keys(o.features||{})),"image"in o?c.configType="image":jr(o)?c.configType="dockerfile":"dockerComposeFile"in o&&(c.configType="dockerCompose")),i&&(c.configLocation=i),s&&(c.hardwareId=s.osRelease.hardware,c.osReleaseId=s.osRelease.id,c.osReleaseVersion=s.osRelease.version);let u=a&&a.originalError,l=u&&(u.stack||u.message||String(u))||a&&a.description;l&&(c.errorMessage=l),e.sendTelemetryEvent("resolver",c)}var sP=class{constructor(t){this.onClose=t;this.writeEmitter=new me.EventEmitter;this.onDidWrite=this.writeEmitter.event;this.inputEmitter=new me.EventEmitter;this.onDidInput=this.inputEmitter.event;this.queue=[];this.ready=!1}open(){this.ready=!0,this.queue.forEach(t=>this.writeEmitter.fire(t))}close(){this.ready=!1,this.onClose()}write(t){this.queue.push(t),this.ready&&this.writeEmitter.fire(t)}handleInput(t){this.inputEmitter.fire(t)}},Am=class{constructor(t,r,n=void 0){this.sessionStart=r;this.outputTerminal=new sP(()=>this._terminal=void 0);this.onDidInput=this.outputTerminal.onDidInput;this._name="Dev Containers";this._revealOnNextOutput=!1;let o=i=>{this.outputTerminal.write(i),this.revealOnNextOutput&&(this.revealOnNextOutput=!1,this.show())};this.logFilePath=t?Wd.join(t,`remoteContainers-${r.toISOString().replace(/:/g,"-")}.log`):void 0,this.log=$Z(o,Om,this.logFilePath,r,n),Object.defineProperty(this.log,"dimensions",{get:()=>{var i;return(i=this._terminal)==null?void 0:i.dimensions}}),this.log.onDidChangeDimensions=i=>me.window.onDidChangeTerminalDimensions(s=>{s.terminal===this._terminal&&i(s.dimensions)})}get name(){return this._name}set name(t){this._name=t}get revealOnNextOutput(){return this._revealOnNextOutput}set revealOnNextOutput(t){this._revealOnNextOutput=t}show(){this._terminal||(this._terminal=me.window.createTerminal({name:this.name,pty:this.outputTerminal})),this._terminal.show()}dispose(){this._terminal&&this._terminal.dispose()}get shown(){return!!this._terminal}};function $Z(e,t,r,n,o=void 0){let i=[];return r&&i.push(zT(r,()=>Math.min(2,t()))),i.push(YT(e,t,n)),ao(GT(i,o))}async function gP(e,t){let r=await qn(e,t.Id);if(r&&r.State.Status==="running")try{await ot(e,"stop",r.Id)}catch(n){me.window.showErrorMessage(`Error stopping container: ${n.message}`)}}async function Mw(e,t){let r=await qn(e,t.Id);if(r&&r.State.Status!=="running")try{await ot(e,"start",r.Id)}catch(n){me.window.showErrorMessage(`Error starting container: ${n.message}`)}}async function sH(e,t){try{await ot(e,"rm",t)}catch(r){me.window.showErrorMessage(`Error removing container: ${r.message}`)}}async function vP(e,t){try{await ot(e,"volume","rm","--force",t)}catch(r){me.window.showErrorMessage(`Error removing volume: ${r.message}`)}}function UZ(){return me.env.sessionId!=="someValue.sessionId"?me.env.sessionId:`${me.env.sessionId}_${Date.now()}`}function jZ(e,t){let r=me.workspace.registerResourceLabelFormatter({scheme:"vscode-remote",authority:e.authority,formatting:{label:"${path}",separator:"/",workspaceSuffix:t,tildify:!0}});e.shutdowns.push(r.dispose.bind(r))}async function aH(e,t){if(e.globalState.get("removeOnStartup")===t)return await e.globalState.update("removeOnStartup",null),!0;let r=e.workspaceState.get("removeOnStartup",!1);return r&&await e.workspaceState.update("removeOnStartup",null),r}async function cH(e,t){await e.workspaceState.update("removeOnStartup",t)}async function yP(e,t){await e.globalState.update("removeOnStartup",t)}async function uH(e,t){return e.globalState.get("buildNoCache")===t?(await e.globalState.update("buildNoCache",null),!0):!1}async function Nm(e,t){await e.globalState.update("buildNoCache",t)}async function Lm(e,t,r,n,o){await e.globalState.update("openEditorsOnStartup",{workspaceFolder:t,fileWithError:r==null?void 0:r.toString(),logFile:n,openLog:o})}async function lH(e){var r;let t=e.globalState.get("openEditorsOnStartup");if(t){await e.globalState.update("openEditorsOnStartup",void 0);let n=(r=me.workspace.workspaceFolders)==null?void 0:r.some(i=>i.uri.fsPath===t.workspaceFolder||i.uri.path===t.workspaceFolder),o=await Cu();if(n||o&&o.repositoryPath===t.workspaceFolder&&(n=!0),n){let i=t.fileWithError?Ue.parse(t.fileWithError):void 0;if(t.openLog==="onTheSide"&&await eH(i),t.openLog&&t.logFile){let s={viewColumn:t.openLog==="onTheSide"?me.ViewColumn.Beside:me.ViewColumn.One,preserveFocus:!0},a=await me.window.showTextDocument(me.Uri.file(t.logFile),s),c=new me.Position(a.document.lineCount-1,0);a.selection=new me.Selection(c,c),a.revealRange(a.selection)}return t.openLog!=="onTheSide"&&await eH(i),!0}}return!1}function dH(e){return[`vscode-remote:/workspaces/${e}/.devcontainer/devcontainer.json`,`vscode-remote:/workspaces/${e}/.devcontainer.json`]}async function eH(e){return e?me.commands.executeCommand("vscode.open",me.Uri.parse(e.toString()),{viewColumn:me.ViewColumn.One}):me.commands.executeCommand("remote-containers.openDevContainerFile",void 0,{viewColumn:me.ViewColumn.One})}async function wP(){return en.results.size?[...en.results.values()].filter(e=>e.config).map(e=>e.config.configFilePath):me.workspace.findFiles(Dw)}function Ma(){return Zr("repositoryConfigurationPaths")||[]}async function HZ(e,t,r="localhost"){await me.workspace.openTunnel({remoteAddress:{host:r,port:t}})}function fH(e,t){let r=new Am(void 0,t);r.name="Configuring...",r.revealOnNextOutput=!0;let n=!1;r.onDidInput(()=>{n&&(n=!1,r.dispose())});let o,i={enabled:!0,skipNonBlocking:!1,output:XO(r.log,"postCreate",e),onDidInput:r.onDidInput,done:()=>{r.shown&&(r.log.raw("\x1B[1mDone. Press any key to close the terminal.\x1B[0m"),n=!0),o()},promise:new Promise(s=>o=s)};return{channel:r,postCreate:i}}async function zd(e){let{authority:t,extensionContext:r,sessionStart:n,progress:o,cliHost:i,env:s,cwd:a,isLocalContainer:c,telemetry:u,output:l,logFilePath:d,allowSystemConfigChange:f,postCreate:p}=e,m=OZ(),h=UZ(),g={computeExtensionHostEnv:!0,...u,appRoot:me.env.appRoot,localCacheFolder:await Eo(),containerSessionDataFolder:Wd.posix.join("/tmp",`devcontainers-${h}`),extensionPath:r.extensionPath,webConnectionToken:void 0,sessionId:h,sessionStart:n,authority:t,cliHost:i,env:s,cwd:a,isLocalContainer:c,getAdditionalExtensionsToInstall:AZ,additionalFeaturesToInstall:iH(),isCopyGitConfigEnabled:NZ(),credentialHelperConfigLocation:LZ(),dotfilesConfiguration:MZ(),progress:WZ(o),output:l,logFilePath:d,allowSystemConfigChange:f,defaultUserEnvProbe:"loginInteractiveShell",postCreate:p,getTelemetryLevel:()=>u.getTelemetryLevel(),forwardServerPort:!0,web:m,getLogLevel:Om,onDidChangeLogLevel:FZ,loadNativeModule:ko,shutdowns:[],forwardedPorts:new Set,backgroundTasks:[],setWorkspaceName:v=>jZ(g,v),openTunnel:HZ,getTunnels:()=>Promise.resolve(me.workspace.tunnels),onAdoptProcess:me.window.onDidOpenTerminal,persistedFolder:await OF(i,r.globalStoragePath),alternateDownload:Hi,skipPostAttach:!1,localWaylandSocket:c?await kO(i):void 0};return g}async function Hi(e,t){let r=await me.commands.executeCommand("_workbench.downloadResource",me.Uri.parse(e));if(!r)throw new Me({description:"Downloading the VS Code Server failed. Please try again later."});await Wi(r.fsPath,t)}var Yd=`[Starting Dev Container (show log)](command:${tn} "Show details in terminal")`,qZ=`[Configuring Dev Container (show log)](command:${dP} "Show details in terminal")`,BZ=`[Reading Dev Container Configuration (show log)](command:${tn} "Show details in terminal")`,VZ={[0]:"",[1]:"Cloning Repository",[2]:"Building image",[3]:"Starting container",[4]:"Installing server",[5]:"Starting server",[6]:""};function WZ(e){let t=0;return r=>{let n=6-r,o=(100-t)/(n+1);e.report({message:VZ[r],increment:o}),t+=o}}async function pH(e,t,r){let{name:n,publisher:o,version:i,aiKey:s}=t;if(!s)return jT(t,r);let a=o?`${o}.${n}`:n,c=new tH.default(a,i,s);e.subscriptions.push(c);let u=new aP(c),l=GZ(r),d=Zj()?(0,Fa.getExperimentationService)(a,i,l,u,e.globalState):void 0;return{sendTelemetryEvent:u.sendTelemetryEvent.bind(u),isCachedFlightEnabled:async f=>d&&Zj()?d.isCachedFlightEnabled(f):!1,product:r,package:t,getTelemetryLevel:()=>c.telemetryLevel}}var aP=class{constructor(t){this.baseReporter=t;this.sharedProperties={}}sendTelemetryEvent(t,r,n){this.baseReporter.sendTelemetryEvent(t,{...this.sharedProperties,...r},n)}setSharedProperty(t,r){this.sharedProperties[t]=r}postEvent(t,r){let n={};for(let[o,i]of r)n[o]=i;this.sendTelemetryEvent(t,n)}};function GZ(e){switch(e.quality){case"stable":return Fa.TargetPopulation.Public;case"insider":return Fa.TargetPopulation.Insiders;case"exploration":return Fa.TargetPopulation.Internal;case void 0:return Fa.TargetPopulation.Team;default:return Fa.TargetPopulation.Public}}var Fm="Opening a folder in a Dev Container may execute arbitrary code both inside and outside the container.",cP="userConfirmedCloneRepositoryInDevContainerRequiresTrust";async function Mm(e,t){if(t!=null&&t.toLowerCase().startsWith("https://github.com/microsoft/vscode-remote-try-")||e.globalState.get(cP))return!0;let r="Got It",n="Learn More",o=await me.window.showWarningMessage("Cloning a repository in a Dev Container may execute arbitrary code. ",{modal:!0,detail:"Only clone a repository in a Dev Container if you trust its authors."},r,n);return o===r?(await e.globalState.update(cP,!0),!0):(o===n&&me.env.openExternal(me.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}var uP="userConfirmedAttachToContainerRequiresTrust";async function $a(e){if(e.globalState.get(uP))return!0;let t="Got It",r="Learn More",n=await me.window.showWarningMessage("Attaching to a container may execute arbitrary code.",{modal:!0,detail:"Only attach to a container if you trust its origin."},t,r);return n===t?(await e.globalState.update(uP,!0),!0):(n===r&&me.env.openExternal(me.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}function mH(e){e.globalState.setKeysForSync([cP,uP,lP])}function hH(){let e=process.env.PATH||"";process.platform==="darwin"&&!/(^|:)\/usr\/local\/bin(:|$)/i.test(e)&&(process.env.PATH=`${e}:/usr/local/bin`)}var lP="updatedToPreRelease2",zZ="2022-01-19T05:14:31.474Z";async function gH(e,t){try{t.quality==="insider"&&t.date&&t.date.localeCompare(zZ)>=0&&!e.globalState.get(lP,!1)&&(await e.globalState.update(lP,!0),await me.commands.executeCommand("workbench.extensions.installExtension","ms-vscode-remote.remote-containers",{installPreReleaseVersion:!0}))}catch(r){console.error(r)}}async function $m(e,t,r,n,o=!1){try{return Ep(e,t,r,Om(),void 0,void 0,n,o)}catch{return}}async function EP(e,t,r,n,o=!1){let i=(async()=>{try{return sa(e,t,r,Om(),iH(),void 0,void 0,n,o)}catch{return}})(),s=await Promise.race([i,new Promise(a=>setTimeout(()=>a("timeout"),1e3))]);return s!=="timeout"?s:me.window.withProgress({location:me.ProgressLocation.Notification,title:BZ,cancellable:!0},async(a,c)=>Promise.race([i,new Promise(u=>{let l=c.onCancellationRequested(()=>{l.dispose(),u("canceled")})})]))}async function _u(e){return me.commands.executeCommand("_workbench.addToRecentlyOpened",e)}var to=ce(require("vscode")),Bi=ce(require("path"));var Ce=ce(require("vscode"));var SB=ce(uB());var Zw=ce(require("path"));var lB=ce(ju()),dB=ce(require("url"));function fB(e,t){return new Promise((r,n)=>{let o=new dB.URL(e.url),i={hostname:o.hostname,port:o.port,path:o.pathname+o.search,method:e.type,headers:e.headers},s=lB.https.request(i,a=>{if(a.statusCode<200||a.statusCode>299)n(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`)),t&&t.write(`HTTP request failed with status code ${a.statusCode}: : ${a.statusMessage}`,5);else{a.on("error",n);let c=[];a.on("data",u=>c.push(u)),a.on("end",()=>r(Buffer.concat(c)))}});s.on("error",n),e.data&&s.write(e.data),s.end()})}async function ja(e){let n=await fB({type:"GET",url:"https://containers.dev/static/devcontainer-index.json",headers:{"user-agent":"devcontainers-vscode",Accept:"application/json"}},e),o=yt(n.toString());if(o.collections.length===0||o.collections[0].features.length===0){e.write("No container features retrieved from index.",5);return}return o}var cr=ce(require("vscode")),MP=ce(require("os"));var Qm=ce(require("path"));var _r=ce(require("vscode"));var pB="Keep Defaults",Fre="Configure Options",Km={iconPath:new _r.ThemeIcon("check-all"),tooltip:"Finish"};async function Xm(e,t,r,n=[],o=!0,i=!1){if(!t.length)return{};let s={iconPath:new _r.ThemeIcon("info"),tooltip:"Open Documentation"},a=e.quickPick.onDidTriggerItemButton(h=>{let g=h.item.feature.documentationURL;_r.env.openExternal(_r.Uri.parse(g))}),c=t.map(h=>{let g=n.indexOf(h)!==-1,v;if(g)v="$(lock) Feature is included in base image and cannot be removed";else if(h.owner){let w=h.owner==="devcontainers"?"$(verified)":"";v=`${h.owner||"Unknown Publisher"} ${w}`}else v=void 0;return{label:h.name,detail:h.description,description:v,picked:r.indexOf(h)!==-1,buttons:h.documentationURL?[s]:void 0,feature:h,isAlreadyInstalledViaBaseImage:g,kind:_r.QuickPickItemKind.Default}}).sort((h,g)=>h.label.localeCompare(g.label)).sort((h,g)=>h.isAlreadyInstalledViaBaseImage===g.isAlreadyInstalledViaBaseImage?0:h.isAlreadyInstalledViaBaseImage?1:-1),u,l=e.quickPick,{matchOnDetail:d}=l;try{l.matchOnDetail=!0;let h=[];i&&h.push(_r.QuickInputButtons.Back),o&&h.push(Km),u=await eo(l,c,"Select additional features to install","Select Features",!0,h)}finally{l.matchOnDetail=d}if(a.dispose(),!u)return;if(u.button===_r.QuickInputButtons.Back)return"back";let f=u.pick.filter(h=>!h.isAlreadyInstalledViaBaseImage).map(h=>h.feature),p={};if(!f||!f.length)return p;for(let h of t){let g=f.indexOf(h)!==-1;p[h.id]=g?{}:!1}return u.button===Km||!o||await _r.window.showQuickPick([pB,Fre],{title:"Keep Feature defaults or configure options?",canPickMany:!1})===pB?p:Mre(e,p,f,()=>Xm(e,t,r,n))}async function Mre(e,t,r,n){return async function o(i,s,a){if(!s.length)return i;let c=s[0],u=i;if(!(c!=null&&c.options))return o(u,s.slice(1),a);let l,d;return l=await $re(e,u,c),l&&(d=await Ure(e,l,c,a)),!l||!d?await a():o(d,s.slice(1),a)}(t,r,n)}async function $re(e,t,r){let n=r==null?void 0:r.options;if(!n)return t;let i=Object.keys(n).filter(u=>{var l;return((l=n[u])==null?void 0:l.type)==="boolean"}).map(u=>{let l=n[u];return{label:u,description:l.description,key:u,value:!0,picked:!!(l!=null&&l.default)}});if(!i.length)return t;let s=r.id,a=r.name||s,c=await eo(e.quickPick,i,`Select boolean options for ${a}`,`Select boolean options for '${a}'`,!0,[_r.QuickInputButtons.Back,Km]);if(!(!c||c.button===_r.QuickInputButtons.Back))return c.pick.reduce((u,l)=>({...u,[s]:{...u==null?void 0:u[s],[l.key]:l.value}}),t)}async function Ure(e,t,r,n){let o=r==null?void 0:r.options;if(!o)return t;let i=r.id,s=r.name||i;return async function a(c,u,l){if(!u.length)return c;let d=u[0],f=o[d],p=("enum"in f&&f.enum||"proposals"in f&&f.proposals||[]).map(g=>({label:String(g),value:g,description:f.default===g?"(default)":void 0,picked:!1}));if(p.length===0)return a(c,u.slice(1),l);let m=p.length===1?{pick:p[0],button:"ok"}:await eo(e.quickPick,p,f.description||"Select a value",`Select options for '${s}'`,void 0,[_r.QuickInputButtons.Back,Km]);if(!m||m.button===_r.QuickInputButtons.Back)return;let h={...c,[i]:{...c==null?void 0:c[i],[d]:m.pick.value}};return m.button===Km?h:a(h,u.slice(1),l)}(t,Object.keys(o).filter(a=>{var c;return((c=o[a])==null?void 0:c.type)==="string"}),n)}var jre=["png","md","json","txt","map"],Hre=["node_modules",".git","bin","out","dist",".vscode-test"],qre=[{tag:"function.json",pattern:/^function\.json$/i},{tag:"package.json",pattern:/^package\.json$/i},{tag:"sln",pattern:/^.+\.sln$/i},{tag:"project.json",pattern:/^project\.json$/i},{tag:"csproj",pattern:/^.+\.csproj$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"amlignore",pattern:/^.+\.amlignore$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"environment.yml",pattern:/^environment\.yml$/i},{tag:"_config.yml",pattern:/^_config\.yml$/i},{tag:"_config.toml",pattern:/^_config\.toml$/i},{tag:"server.xml",pattern:/^server\.xml$/i},{tag:"web.xml",pattern:/^web\.xml$/i}],mB={"Node.js":["package.json"],".NET Core":["sln","project.json","csproj"],"Azure Functions":["function.json"],"Azure Machine Learning":["azureml","amlignore"],Anaconda:["environment.yml"],Jekyll:["_config.yml","_config.toml"],Tomcat:["server.xml","web.xml"],Dapr:[]},hB={"C#":["cs"],"C++":["cpp","cxx",".cc","c++"],"F#":["fs"],JavaScript:["js"],TypeScript:["ts"],Java:["java"],Elm:["elm"],Go:["go"],Python:["py","ipynb"],Ruby:["rb"],Perl:["pl"],PHP:["php"],R:["r"],PowerShell:["ps1"],Dart:["dart"],Rust:["rs"],Swift:["swift"],ReasonML:["re"],TerraForm:["tf"]},Bre=["ghcr.io/devcontainers/templates/docker-existing-docker-compose","ghcr.io/devcontainers/templates/docker-existing-dockerfile","ghcr.io/devcontainers/templates/codespaces-linux"];function gB(e,t){let r=new Map;for(let n of t)if(n.platforms){if(Bre.indexOf(n.id)>-1)continue;let o=0,i=0,s=n.platforms;if(s[0]==="Any")o+=5;else for(let a of s)if(hB[a]){let c=hB[a];for(let u of c)e.fileTypes.get(u.toLowerCase())&&(o+=10),e.mostPopularFileType===u&&(o+=10)}else if(mB[a]){let c=mB[a],u=!1;for(let l of c)e.configFiles.get(l)&&(u=!0,i+=20);u||(i-=20)}r.set(n,o+(i<0?-4:i))}return r}async function vB(e,t){return Vre(e,t.rootFolderPath,Hre,jre)}async function Vre(e,t,r,n){let o=new Map,i=new Map,s=500;function a(p,m,h,g){let v=[];(e.readDirWithTypes||e.readDir)(p).then(E=>{if(h.count>=s)return h.count+=E.length,h.maxReached=!0,g(v);let C=E.length;if(C===0)return g(v);let S=E;h.count+E.length>s&&(h.maxReached=!0,C=s-h.count,S=E.slice(0,C)),h.count+=E.length;for(let x of S){let I=Array.isArray(x)?x[0]:x;(Array.isArray(x)?Promise.resolve((x[1]&1)!==0):e.isFile(e.path.join(p,I))).then(T=>{T?(v.push(I),--C===0&&g(v)):m.indexOf(I)===-1?a(e.path.join(p,I),m,h,D=>{if(v=v.concat(D),--C===0)return g(v)}):--C===0&&g(v)},()=>{if(--C===0)return g(v)})}},()=>g(v))}let c=p=>{o.has(p)?o.set(p,o.get(p)+1):o.set(p,1)},u=p=>{for(let m of qre)m.pattern.test(p)&&(i.has(m.tag)?i.set(m.tag,i.get(m.tag)+1):i.set(m.tag,1))},l=p=>{if(p.lastIndexOf(".")>=0){let m=p.split(".").pop();m&&!n.includes(m)&&c(m.toLowerCase())}u(p)},d=p=>[...p.entries()].reduce((m,h)=>h[1]>m[1]?h:m,["",0])[0],f={count:0,maxReached:!1};return new Promise((p,m)=>{a(t,r,f,async h=>{h.forEach(l),p({configFiles:i,fileTypes:o,fileCount:f.count,mostPopularFileType:d(o)})})})}var FP=Qm.default.join(__dirname,"..",".."),yB=cr.env.appRoot,Wre=e=>Jg(e,yB);async function Zd(e){let{fileHost:t,output:r}=e;r.write(" -- CREATEDEVCONTAINER v2");let n=await _B();if(n){let o=qe(n,t.platform),i=St(t.path,o),s=await Pg(t,i);if(s){let c="Continue";if(await cr.window.showInformationMessage(`The workspace could fail to open in a container: ${s}`,{modal:!0},c)!==c)return!1}let a=await jP(e,i);if(a){let c=await t.toCommonURI(a);c&&cr.window.showTextDocument(cr.Uri.parse(c.toString()))}return!!a}return!1}async function Xw(e,t,r,n,o=(i,s)=>s){return cr.window.withProgress({location:cr.ProgressLocation.Notification,title:"Adding Dev Container Configuration Files...",cancellable:!1},async()=>UP(e,t,r,n,o))}async function UP(e,t,r,n,o=(i,s)=>s){let{output:i}=e,s=Qm.default.join(MP.tmpdir(),`tmp-output-dir-${Date.now()}`),a=Qm.default.join(MP.tmpdir(),`tmp-dir-${Date.now()}`);e.quickPick.busy=!0,e.quickPick.enabled=!1;let c={executeInWSL:"forWSLPath",defaultDistro:void 0},u=await Eo(),l=process.cwd(),f={cliHost:await Hn(void 0,l,Wre,c,FP,u,void 0,i,void 0,void 0),dockerPath:"",dockerComposePath:"",extensionPath:FP,appRoot:yB,output:i,package:await ln(FP)},p=await Di(f,["templates","apply","--workspace-folder",s,"--template-id",n.id,"--template-args",n.options?JSON.stringify(n.options):"{}","--features",n.features?JSON.stringify(n.features):"[]","--tmp-dir",a]),m="Skip",h;for(let g of p.files){let v=t.path.join(r.configFolderPath,g);if(await t.isFile(v)){let C=await cr.window.showInformationMessage(`File '${g}' already exists, overwrite?`,{modal:!0},m,"Overwrite");if(!C)return;if(C===m)continue}await t.mkdirp(t.path.dirname(v));let w=await pt(Qm.default.join(s,g)),E=o(g,w);await t.writeFile(v,E),!h&&cp(t.path,g)&&(h=v)}return await Fs(s,{recursive:!0,force:!0}),await Fs(a,{recursive:!0,force:!0}),e.quickPick.busy=!1,e.quickPick.enabled=!0,h}async function jP(e,t,r){let{fileHost:n,telemetry:o}=e,i=await Jw(n,t);if(i){qi(await o,"exists");let c=qe(i.uri,n.platform);if(!await cr.window.showWarningMessage(`Dev Container configuration '${n.path.relative(t.configFolderPath,c)}' file already exists.`,{modal:!0},"Continue")){let l=await n.toCommonURI(c);l&&cr.window.showTextDocument(cr.Uri.parse(l.toString()));return}}let s=await HP(e,r,!1),a=await Jm(s,n,t,qP);return s.quickPick.hide(),a}async function HP(e,t,r){let n=cr.window.createQuickPick();n.ignoreFocusOut=!0,t&&(n.title=t);let o=await ja(e.output);return{...e,quickPick:n,replaceExistingConfig:!0,existingConfig:void 0,telemetry:await e.telemetry,index:o,skipOptions:r}}async function qP(e,t,r,n){if(!e.index)return;let i=await Qw(e,t,r);if(!!i)return i==="back"?n?n():void 0:Xw(e,t,r,i)}var wB=["ghcr.io/devcontainers/templates/docker-existing-docker-compose","ghcr.io/devcontainers/templates/docker-existing-dockerfile"];async function Qw(e,t,r){let{index:n,predefinedDefinitionsLearnMoreLink:o}=e,i=((n==null?void 0:n.collections.map(u=>u.templates).flat())||[]).filter(u=>!wB.includes(u.id));if(!(i!=null&&i.length))return;let s=()=>Qw(e,t,r),a=await Gre(e,t,r,i);if(!(a!=null&&a.length))return $P(e,[],i,s);let c=[{label:"Show All Definitions...",detail:"Show all available predefined container definitions.",alwaysShow:!0,type:"showAll"},...o?[BP]:[]];return $P(e,c,a,s)}async function Gre(e,t,r,n){n=n.filter(a=>a.owner==="devcontainers");let o=e.stats||t&&r&&(e.stats=await vB(t,r));if(!(o!=null&&o.mostPopularFileType.length))return;let i=gB(o,n);return n.filter(a=>(i.get(a)||0)>0).sort(zre.bind(null,i))}function zre(e,t,r){let n=e.get(r)||0,o=e.get(t)||0;return n-o}async function $P(e,t,r,n){let{index:o,predefinedDefinitionsLearnMoreLink:i,telemetry:s}=e,a={iconPath:new cr.ThemeIcon("info"),tooltip:"Open Documentation"},c=e.quickPick.onDidTriggerItemButton(d=>{let f=d.item.template.documentationURL;cr.env.openExternal(cr.Uri.parse(f))}),u=r.map(d=>{let f;if(d.owner){let p=(d==null?void 0:d.owner)==="devcontainers"?"$(verified)":"";f=`${((d==null?void 0:d.owner)==="microsoft"&&d.id.includes("microsoft/vscode-dev-containers")?"community":d==null?void 0:d.owner)||"Unknown Publisher"} ${p}`}return{label:d.name,picked:r.indexOf(d)!==-1,detail:d==null?void 0:d.description,description:f,buttons:[a],template:d}}).sort((d,f)=>d.label.localeCompare(f.label)),l=await eo(e.quickPick,[...t,...u],"Select a container configuration template",void 0,void 0,!1);if(c.dispose(),!l){qi(s,"canceled");return}if(l.type==="help"){qi(s,"help"),cr.env.openExternal(i);return}if(l.type==="showAll"){let d=((o==null?void 0:o.collections.map(f=>f.templates).flat())||[]).filter(f=>!wB.includes(f.id));return $P(e,[],d,n)}if(l.template)return ef(e,l.template,n)}async function ef(e,t,r){let n={id:`${t.id}:latest`,options:{},features:[],metadata:{template:t,features:[]}};if(e.skipOptions)return n;if(!t.options){let c=await CB(e,n,r);return c?c==="back"?r():c:void 0}let o=t.options,i=[],s=[];for(let c in o){let u=o[c];u.name=c,u.type==="boolean"?i.push(u):u.type==="string"&&s.push(u)}let a=await Yre(e,s,n,async()=>"back",(c,u)=>EB(e,i,t.name,c,u));if(a==="back")return r();if(!!a)return a}async function Yre(e,t,r,n,o){let i=t.map(s=>{let a=[];s.proposals&&s.proposals.length>0?a=s.proposals:s.enum&&s.enum.length>0&&(a=s.enum);let c=s.default,u=a.map(d=>({label:d,description:d===c?"(default)":void 0,value:d})),l=u.findIndex(d=>d.value===c);return l!==-1&&u.unshift(...u.splice(l,1)),{placeholder:s.description||s.name,name:s.name,default:s.default,items:u}});return async function s(a,c,u){if(!a.length)return o(c,u);let l=a[0],d=await eo(e.quickPick,l.items,l.placeholder,void 0,void 0,!0);if(!d)return;if(d==="back")return u();let f={...c.options};return f[l.name]=d.value,c.options={...f},s(a.slice(1),c,()=>s(a,c,u))}(i,r,n)}async function EB(e,t,r,n,o){let i=n,s=t.map(u=>{let l=u.default==="true";return{label:u.description||u.name,picked:l,name:u.name,default:l}}),a=s.length?await eo(e.quickPick,s,`Select the options for the '${r}' dev container`,void 0,!0,!0):[];if(!a)return n;if(a==="back")return o();for(let u of s){let l=a.indexOf(u)!==-1,d={...n.options};d[u.name]=l.toString(),n.options={...d}}let c=await CB(e,n,()=>t.length>0?EB(e,t,r,i,o):o());if(!!c)return c==="back"?o():c}async function CB(e,t,r){let{quickPick:n,telemetry:o,output:i,index:s}=e,a=s==null?void 0:s.collections.reduce((f,p)=>f.concat(p.features),[]);if(!(a!=null&&a.length))return t;let u=await Xm({quickPick:n,telemetry:o,output:i},a,[],[],!0,!0);if(!u)return;if(u==="back")return r();let l=[],d=[];for(let f in u)if(u[f]){let p=a.find(m=>m.id===f);if(p){d.push(p);let m=p.majorVersion||"latest",h={id:`${f}:${m}`,options:u[f]};l.push(h)}}return t.features=l,t.metadata.features=d,t}function bB(e){return{provideCompletionItems(t,r,n){let o=LT(t.getText(),t.offsetAt(r)),i=t.getWordRangeAtPosition(r)||new Ce.Range(r,r);if(o.path[0]==="extensions"||o.path[0]==="vscode"&&o.path[1]==="extensions"){let s=yt(t.getText());return s.configFilePath=t.uri,Kre(s,i)}if(o.path[0]==="features"){let s=yt(t.getText());s.configFilePath=t.uri;try{return Xre(e,s,o,i)}catch(a){console.error(a)}}return[]}}}function Kre(e,t){var n,o;let r=((e==null?void 0:e.extensions)||[]).concat(((o=(n=e==null?void 0:e.customizations)==null?void 0:n.vscode)==null?void 0:o.extensions)||[]);if(Array.isArray(r)){let i=Ce.extensions.all.filter(s=>!(s.id.startsWith("vscode.")||s.id==="Microsoft.vscode-markdown"||r.indexOf(s.id)>-1));if(i.length)return i.map(s=>{let a=new Ce.CompletionItem(s.id),c=`"${s.id}"`;return a.kind=Ce.CompletionItemKind.Value,a.insertText=c,a.range=t,a.filterText=c,a})}}async function Xre(e,t,r,n){var i;let o=t&&t.features||{};if(typeof o=="object"){if(t.configFilePath.scheme==="vscode-remote"&&e.fileHost.type==="local"){t={...t,configFilePath:t.configFilePath.with({scheme:wt.scheme,authority:""})};let c=Ce.env.remoteName&&Ce.env.remoteName!=="test"?"linux":process.platform,u=((i=(Ce.workspace.workspaceFolders||[])[0])==null?void 0:i.uri)||Ue.file(process.cwd());e={...e,fileHost:await Vd(c,u)}}let s=await ja(e.output),a=(s==null?void 0:s.collections.map(c=>c.features).flat())||[];if(r.path.length===2)if(r.isAtPropertyKey){let c=a.filter(u=>!(u.id in o));if(c.length)return c.map(u=>{let l=new Ce.CompletionItem(u.id),d=`"${u.id}": `;return l.kind=Ce.CompletionItemKind.Property,l.insertText=d,l.range=n,l.filterText=d,l})}else{let c=r.path[1],u=a.find(l=>l.id===c);if(u){let l=LL(u),d=l&&(u.options||{})[l]||{type:"boolean",description:"Set to true to install."},f=(d.type==="string"?("enum"in d&&d.enum||"proposals"in d&&d.proposals||[""]).map(p=>`"${p}"`):["true","false"]).map(p=>({label:p,text:p}));return f.push({label:"{}",text:new Ce.SnippetString(`{
	$1
}$0`)}),f.map(({label:p,text:m},h)=>{let g=new Ce.CompletionItem(p);return g.kind=Ce.CompletionItemKind.Value,g.insertText=m,g.range=n,g.sortText=`${h}_${p}`,g})}}else if(r.path.length===3){let c=r.path[1],u=a.find(l=>l.id===c);if(u){let l=u.options||{};if(r.isAtPropertyKey)return Object.keys(l).filter(d=>!(d in(o[c]||{}))).map(d=>{let f=new Ce.CompletionItem(d),p=`"${d}": `;return f.kind=Ce.CompletionItemKind.Property,f.insertText=p,f.range=n,f.filterText=p,f.detail=l[d].description,f});{let d=r.path[2],f=l[d];if(f)return(f.type==="string"?("enum"in f&&f.enum||"proposals"in f&&f.proposals||[""]).map(m=>`"${m}"`):["true","false"]).map((m,h)=>{let g=new Ce.CompletionItem(m),v=m;return g.kind=Ce.CompletionItemKind.Value,g.insertText=v,g.range=n,g.filterText=v,g.sortText=`${h}_${m}`,g})}}}}}async function xB(e){let t=await WP(e);if((t==null?void 0:t.scheme)===wt.scheme){let r=qe(t,e.fileHost.platform);t=await e.fileHost.toCommonURI(r)}t&&await Ce.window.showTextDocument(Ce.Uri.parse(t.toString()))}async function WP(e){let t=await e.findDevContainerFiles();if(!t.length){let n="Add Files...";await Ce.window.showInformationMessage("No container configuration file found.",{modal:!0},n)===n&&await Zd(e)&&(t=await e.findDevContainerFiles())}let r=await gu(e.fileHost,t);return r!=="cancelled"?r:void 0}async function PB(e,t){var n,o,i,s,a,c,u;let r=await WP(e);if(r){let l=vr(e.fileHost);r.scheme==="file"&&!await lr(r.fsPath)?await wo(Ho,r,[],is):r.scheme==="vscode-remote"&&(l=new Rm);let d=await l.readDocument(r);if(d){let f=!/\.?devcontainer\.json/.test(Zw.default.posix.basename(r.path)),p=yt(d),m=!f&&(((o=(n=p.customizations)==null?void 0:n.vscode)==null?void 0:o.extensions)||!p.extensions),h=(m?(s=(i=p.customizations)==null?void 0:i.vscode)==null?void 0:s.extensions:p.extensions)||[],g=e.openConfigurationCommandId?`[Dev Container configuration](command:${e.openConfigurationCommandId})`:"Dev Container configuration";if((p.extensions||[]).concat(((c=(a=p.customizations)==null?void 0:a.vscode)==null?void 0:c.extensions)||[]).indexOf(t)===-1){h.push(t);let v;m?(u=p.customizations)!=null&&u.vscode?v=Zt(d,["customizations","vscode","extensions"],h,{formattingOptions:{}}):p.customizations?v=Zt(d,["customizations","vscode"],{extensions:h},{formattingOptions:{}}):v=Zt(d,["customizations"],{vscode:{extensions:h}},{formattingOptions:{}}):v=Zt(d,["extensions"],h,{formattingOptions:{}}),await l.applyEdits(r,v,d),await Ce.window.showInformationMessage(`Extension has been added to the ${g}.`)}else await Ce.window.showInformationMessage(`Extension is already included in the ${g}.`)}}}async function TB(e,t){let r=await Ce.commands.executeCommand("remote.tunnel.label",t);if(r===void 0)return;let n=r.label,o=r.port,i=await WP(e);if(i){let s=vr(e.fileHost);i.scheme==="file"&&!await lr(i.fsPath)?await wo(Ho,i,[],is):i.scheme==="vscode-remote"&&(s=new Rm);let a=await s.readDocument(i);if(a){let u=yt(a).portsAttributes??{},l=u[`${o}`]??{},d=e.openConfigurationCommandId?`[Dev Container configuration](command:${e.openConfigurationCommandId})`:"Dev Container configuration";if(u&&l&&l.label===n)await Ce.window.showInformationMessage(`Port attributes are already included in the ${d}.`);else{l.label=n,u[`${o}`]=l;let f=Zt(a,["portsAttributes"],u,{formattingOptions:{}});await s.applyEdits(i,f,a),await Ce.window.showInformationMessage(`Port attributes have been added to the ${d}.`)}}}}function IB(e,t,r){let n=Ce.languages.createDiagnosticCollection("devcontainer");return Ce.window.activeTextEditor&&VP(Ce.window.activeTextEditor.document,n,t.output,r),e.subscriptions.push(Ce.workspace.onDidChangeTextDocument(o=>{o&&VP(o.document,n,t.output,r)})),e.subscriptions.push(Ce.workspace.onDidOpenTextDocument(o=>{o&&VP(o,n,t.output,r)})),n.dispose}function DB(e,t,r){let n=async(s,a,c)=>{let u=Zw.default.basename(s.uri.fsPath);if(/\.?devcontainer\.json/.test(u)){let l=pf(s.getText());if(!l)return;if((mf(l)||{}).features){let f=s.getText(s.getWordRangeAtPosition(a,/"[^"]*"/)).replace(/"/g,""),p=Jre(f,t.output,r);if(p)return{contents:[p],range:s.getWordRangeAtPosition(a,/"[^"]*"/)}}}},o=Ce.languages.registerHoverProvider({pattern:"**/devcontainer.json"},{provideHover:n}),i=Ce.languages.registerHoverProvider({pattern:"**/.devcontainer.json"},{provideHover:n});return e.subscriptions.push(o),e.subscriptions.push(i),[o,i]}function VP(e,t,r,n){let o=Zw.default.basename(e.uri.fsPath);if(/\.?devcontainer\.json/.test(o)){let i=pf(e.getText());if(!i)return;let s=mf(i)||{},a=[...Zre(e,s,r,n),...ene(i,e)];t.set(e.uri,a)}}function Qre(e,t,r){let n=new RegExp("^[a-zA-Z0-9_-]*$");if(!e)return{type:void 0,tooltip:"Empty feature id"};let o={};if(!e.includes("/")&&!e.includes("\\")&&n.test(e))return{...o,type:"local-cache",isLegacy:!0,level:Ce.DiagnosticSeverity.Warning};if(e.startsWith("http://"))return{...o,type:void 0,tooltip:"Direct tarball references must be served over HTTPS.",level:Ce.DiagnosticSeverity.Error};if(e.startsWith("https://"))try{return Ce.Uri.parse(e,!0).scheme==="https"?{...o,type:"direct-tarball",level:void 0}:{...o,type:void 0,level:Ce.DiagnosticSeverity.Error,tooltip:"Failed to parse scheme of URI"}}catch{return{...o,type:void 0,level:Ce.DiagnosticSeverity.Error,tooltip:"Invalid URI"}}if(e.startsWith("/"))return{...o,type:void 0,tooltip:"Absolute file paths are not allowed.  Local file path must be indicated relative to the devcontainer.json.",level:Ce.DiagnosticSeverity.Error};if(e.startsWith("./")||e.startsWith("../"))return{...o,type:"file-path"};if(e.split("/").length===3&&e.length>=5&&!e.includes("."))return new RegExp("^[a-zA-Z0-9_/@-]*$").test(e)?{...o,type:"github-repo",isLegacy:!0,level:Ce.DiagnosticSeverity.Warning}:{...o,type:void 0,tooltip:"GitHub release feature id contains invalid characters",level:Ce.DiagnosticSeverity.Error};let s=e.split("/");return e.includes(".")&&s.length>1&&s[1].length>=1?new RegExp("^[a-zA-Z0-9_/:.-]*$").test(e)?{...o,type:"oci"}:{...o,type:void 0,level:Ce.DiagnosticSeverity.Error,tooltip:"OCI Feature id contains invalid characters"}:{...o,type:void 0,level:Ce.DiagnosticSeverity.Error,tooltip:"Failed to parse feature identifier."}}function Jre(e,t,r){var i;if(!r){t.write("No index found.",5);return}let o=(r==null?void 0:r.collections.map(s=>s.features).flat()).find(s=>e.startsWith(s.id));if(o){let s=`${o.name}
`??"",a=o.description?`
${o.description}
`:"",c=o.documentationURL?`
${o.documentationURL}
`:"",u="";if(o.majorVersion){let l=e.split(":");if(l.length===2){let d=l[1];if(d&&d!=="latest")try{let f=(i=SB.parse(d,{loose:!0}))==null?void 0:i.major,p=Number.parseInt(o.majorVersion),m=`
\u26A0\uFE0F New major version "${p}" published.
`;if(f&&f<p)u=m;else{let h=Number.parseInt(d);h!==void 0&&h<p&&(u=m)}}catch{}}}return new Ce.MarkdownString(`${s}${a}${c}${u}`)}}function Zre(e,t,r,n){let o=t==null?void 0:t.features;if(!o)return[];let i=[];return Object.keys(o).forEach(s=>{let a=Qre(s,r,n);for(let c=0;c<e.lineCount;c++){let u=e.lineAt(c);if(u.text.includes(`"${s}"`)){let l=u.text.indexOf(s),d=l+s.length;if(a.hint){let p={message:a.hint,severity:Ce.DiagnosticSeverity.Hint,range:new Ce.Range(new Ce.Position(c,l),new Ce.Position(c,d))};i.push(p)}if(a.level!==void 0){let f=a.tooltip??"",p=a.level,m={message:f,severity:p,range:new Ce.Range(new Ce.Position(c,l),new Ce.Position(c,d)),code:{target:Ce.Uri.parse("https://containers.dev/implementors/features/#referencing-a-feature"),value:"referencing-a-feature"}};i.push(m)}break}}}),i}function ene(e,t){return["extensions","settings","devPort"].filter(r=>Ns(e,[r])&&Ns(e,["vscode",r])).map(r=>{var s,a;let n=(((a=(s=Ns(e,[r]))==null?void 0:s.parent)==null?void 0:a.children)||[])[0],o=t.positionAt(n.offset),i=t.positionAt(n.offset+n.length);return{message:`Legacy "${r}" property when "${r}" property under "vscode" is also present.`,range:new Ce.Range(o,i),severity:Ce.DiagnosticSeverity.Warning}})}var GP=ce(require("vscode"));async function RB(e,t){let r=await tne(e);if(!r){e.output.write("Failed to find configuration.  Cannot configure container features.",5);return}await rne(e,r,(t==null?void 0:t.preInstalledInBaseImageFeatureIds)||[])}async function tne(e){let t=await e.findDevContainerFiles();if(t.length){let r=await gu(e.fileHost,t);if(!r||r==="cancelled")return;let n=r.scheme==="file"?Vd(process.platform,ta(r)):e.fileHost,o=n.path.dirname(qe(r,n.platform)),i=n.path.basename(o)===".devcontainer"?n.path.dirname(o):o,s=St(n.path,i),a=await Jw(n,s,r);if(a)return{fileHost:n,workspace:s,config:a}}else{let r="Add Files...";await GP.window.showInformationMessage("No container configuration file found.",{modal:!0},r)===r&&await Zd(e)}}async function rne(e,t,r){var p;let{fileHost:n,workspace:o,config:i}=t,s=GP.window.createQuickPick();s.ignoreFocusOut=!0;let a={workspace:o,quickPick:s,telemetry:await e.telemetry,output:e.output},c=await ja(e.output);if(!c)return;let u=c.collections.reduce((m,h)=>m.concat(h.features),[]),l=u.filter(m=>r.includes(m.id)),d=[];if(i.object.features&&Object.entries(i.object.features).length>0){let m=Object.keys(i.object.features);d=u.filter(h=>m.some(g=>g.split(":")[0]===h.id))}let f=await Xm(a,u,d,l,!0,!1);if(!!f)try{if(f){let m=i.text,h=i.text;for(let g of u){let v=[],w=g.majorVersion?`${g.id}:${g.majorVersion}`:g.id,E=["features",w];if(!f[g.id]&&((p=i.object.features)==null?void 0:p[w]))v=v.concat(Zt(h,E,void 0,{formattingOptions:{}}));else if(f[g.id]){let S=f[g.id];v=v.concat(Zt(h,E,S,{formattingOptions:{}}))}v.length&&(h=sn(h,v))}m!==h&&await vr(n,n).applyEdits(i.uri,[{content:h,offset:0,length:i.text.length}],i.text)}}catch(m){e.output.write(`Error in selecting dev container features: ${m}`,5),console.log("Error in selecting dev container features: ",m)}finally{s.dispose()}}async function AB(e,t){let r=await ja(t.output);return IB(e,t,r),DB(e,t,r),{async openConfiguration(){return xB(t)},async createConfiguration(n){return Zd(t)},async addExtensionToConfiguration(n){return PB(t,n)},async addPortLabelToConfiguration(n){return TB(t,n)},async configureContainerFeatures(n){return RB(t,n)},createCompletionItemProvider(){return bB(t)}}}async function _B(){let e=to.workspace.workspaceFile,t=to.workspace.workspaceFolders,r;if(e){if(e.scheme==="untitled"){await Iw();return}r=e}else if(t&&t.length)if(t.length>1){let n=await to.window.showWorkspaceFolderPick({placeHolder:"Select a folder to create a container configuration for"});n&&(r=n.uri)}else r=t[0].uri;return r}function eo(e,t,r,n,o,i,s){if(e.value="",e.title=n||e.title||"Add Dev Container Configuration Files",e.placeholder=r,e.canSelectMany=!!o,Array.isArray(t))if(e.items=t,o)e.selectedItems=t.filter(f=>f.picked);else{let f=t.find(p=>p.picked);f&&(e.activeItems=[f])}e.buttons=i?Array.isArray(i)?i:[to.QuickInputButtons.Back]:[];let a=[],c=e.items,u=c.filter(f=>f.isAlreadyInstalledViaBaseImage===!0),l={kind:to.QuickPickItemKind.Separator,label:"pre-installed features"};u.length&&(e.items=e.items.slice(0,c.length-u.length).concat(l).concat(e.items.slice(c.length-u.length)));let d=new Promise((f,p)=>{if(Array.isArray(t)||(e.busy=!0,t.then(m=>{if(e.busy=!1,e.items=m,o)e.selectedItems=m.filter(h=>h.picked);else{let h=m.find(g=>g.picked);h&&(e.activeItems=[h])}},m=>{e.busy=!1,p(m)})),a.push(e.onDidAccept(()=>{let m=o?e.selectedItems.slice():e.selectedItems[0];f(Array.isArray(i)?{pick:m,button:"ok"}:m),a.forEach(h=>h.dispose())})),a.push(e.onDidChangeSelection(m=>{if(!o)return;let h=u.filter(g=>!e.selectedItems.includes(g));h.length&&(e.selectedItems=e.selectedItems.concat(h))})),e.buttons.length&&a.push(e.onDidTriggerButton(m=>{let h=o?e.selectedItems.slice():e.activeItems[0];f(i===!0?"back":{pick:h,button:m}),a.forEach(g=>g.dispose())})),a.push(e.onDidHide(()=>{a.forEach(m=>m.dispose()),e.dispose(),f(void 0)})),s){let m;a.push(e.onDidChangeValue(h=>{let g=h.trim().toLowerCase(),v=!g||e.items.find(w=>w.label.toLowerCase()===g);if(v&&m)e.items=e.items.filter(w=>w!==m),m=void 0;else if(!v){let w=e.items.filter(E=>E!==m);w.push(m={label:`Other: ${h}`,value:h}),e.items=w}}))}});return e.show(),d}var BP={label:"Learn More",description:"Documentation on predefined container definitions",alwaysShow:!0,type:"help"};async function eE(e,t,r){return jP(e,t,r)}async function Jm(e,t,r,n=qP){let{telemetry:o,existingFilesLearnMoreLink:i,index:s}=e,a=s==null?void 0:s.collections.find(w=>w.sourceInformation.ociReference==="ghcr.io/devcontainers/templates"),c=a==null?void 0:a.templates.find(w=>w.id==="ghcr.io/devcontainers/templates/docker-existing-docker-compose"),u=a==null?void 0:a.templates.find(w=>w.id==="ghcr.io/devcontainers/templates/docker-existing-dockerfile"),l=await t.readDir(r.rootFolderPath),d=c?l.filter(w=>/docker.*compose/i.test(w)).map(w=>t.path.join(r.rootFolderPath,w)):[],f=u?l.filter(w=>/dockerfile/i.test(w)).map(w=>t.path.join(r.rootFolderPath,w)):[],p=f.map(w=>{let E=t.path.basename(w);return{label:`From '${E}'`,description:kB(t,w),dockerfile:E,dockerfilePath:w,detail:`Refer to the existing '${E}' in the container configuration`,type:"dockerfile"}}),m=d.map(w=>{let E=t.path.basename(w);return{label:`From '${E}'`,description:kB(t,w),dockerComposeFile:E,dockerComposePath:w,detail:`Refer to the existing '${E}' in the container configuration`,type:"dockerComposeFile"}});if(!(f.length>0||d.length>0))return n(e,t,r,void 0);let g={label:"From a predefined container configuration definition...",detail:"Use a base configuration from the container definition registry",alwaysShow:!0,type:"predefined"},v=await eo(e.quickPick,[g,...p,...m,...i?[BP]:[]],"How would you like to create your container configuration?");if(!v){qi(o,"canceled");return}if(v.type==="help"){qi(o,"help"),to.env.openExternal(i);return}if(v.type==="predefined")return n(e,t,r,()=>Jm(e,t,r));if(v.type==="dockerComposeFile")return one(e,t,r,v.dockerComposePath,c,()=>Jm(e,t,r));if(v.type==="dockerfile")return nne(e,t,r,v.dockerfilePath,u,()=>Jm(e,t,r))}function kB(e,t){let r=to.workspace.workspaceFolders||[];if(r.length<2)return;let n=r.find(o=>e.platform==="win32"?t.toLowerCase().startsWith(o.uri.fsPath.toLowerCase()):t.startsWith(o.uri.fsPath));return n&&n.name}async function nne(e,t,r,n,o,i){let{telemetry:s}=e,a=await ef(e,o,async()=>{});if(!a){qi(s,"canceled");return}if(a==="back")return i();let c=await Xw(e,t,r,a,(u,l)=>{if(!cp(t.path,u))return l;let d=t.path.sep!==Bi.sep?u.replace(Bi.sep===Bi.win32.sep?/\\/g:/\//g,t.path.sep):u,f=t.path.resolve(r.configFolderPath,d),p=t.path.relative(t.path.dirname(f),n),m=t.platform==="win32"?p.replace(/\\/g,"/"):p,h=l.toString(),g="dockerFile"in yt(h)?["dockerFile"]:["build","dockerfile"],v=Zt(h,g,m,{formattingOptions:{}}),w=sn(h,v);return Buffer.from(w)});return c&&qi(s,"dockerFile"),c}async function one(e,t,r,n,o,i){let{telemetry:s}=e,a=(await t.readFile(n)).toString(),c=sp(a);if(!c){await to.window.showErrorMessage(`Invalid docker-compose file "${n}"`,{modal:!0});return}let u=c.version,l=Object.keys(c&&c.services||{}),d=l.length<2?l[0]||"":await eo(e.quickPick,l.map(h=>({label:h,type:"service"})),"Select a service",void 0,void 0,!0);if(d==="back")return i();if(d===void 0){qi(s,"canceled");return}let f=typeof d=="string"?d:d.label,p=await ef(e,o,async()=>{});if(!p)return;if(p==="back")return i();let m=await Xw(e,t,r,p,(h,g)=>{if(cp(t.path,h)){let v=t.path.sep!==Bi.sep?h.replace(Bi.sep===Bi.win32.sep?/\\/g:/\//g,t.path.sep):h,w=t.path.resolve(r.configFolderPath,v),E=t.path.relative(t.path.dirname(w),n),C=t.platform==="win32"?E.replace(/\\/g,"/"):E,S=g.toString(),x=yt(S).dockerComposeFile,I=Array.isArray(x)?x.slice(1):[],P=[C,...I],T=Zt(S,["dockerComposeFile"],P,{formattingOptions:{}}),D=sn(S,T),R=Zt(D,["service"],f,{formattingOptions:{}}),k=sn(D,R);return Buffer.from(k)}if(/compose.*\.ya?ml$/.test(Bi.posix.basename(h))){let v=g.toString(),w=sp(v);w.version&&u&&w.version!==u&&(v=v.replace(new RegExp(`^(version:.*)(${w.version.replace(/\./g,"\\.")})`,"m"),`$1${u}`));let E=Object.keys(w&&w.services||{});return E.length&&(v=v.replace(new RegExp(`\\b${E[0]}\\b`),f)),Buffer.from(v)}return g});return m&&qi(s,"dockerComposeFile"),m}function qi(e,t,r){let n={outcome:t};r&&(n.definitionName=r),e.sendTelemetryEvent("createConfiguration",n)}async function Jw(e,t,r){if(r||(r=await wv(e,t.configFolderPath)),!r)return;let n=await vr(e,e).readDocument(r);if(!n)return;let o=yt(n);return{uri:r,text:n,object:o}}async function OB(e,t,r,n,o,i){let s=Bn(r);if(yr(s)&&!await rt.workspace.requestWorkspaceTrust({message:Fm}))return zr(s.hostPath)?(await rt.window.showInformationMessage("The WSL folder is currently not trusted.",{modal:!0,detail:"Trust is required to build a dev container from it. The folder will now reopen in WSL."}),await rt.commands.executeCommand("remote-containers.reopenInWSL")):(await rt.window.showInformationMessage("The local folder is currently not trusted.",{modal:!0,detail:"Trust is required to build a dev container from it. The folder will now reopen locally."}),await rt.commands.executeCommand("remote-containers.reopenLocally")),new Promise(()=>{});let a=Kr(s);if(a&&!await Mm(e,s.repositoryPath))return await rt.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{});let c=cs(s);return{...await ine(s,e,o,i,t,r,n),isTrusted:a||c||void 0}}async function ine(e,t,r,n,o,i,s){let{log:a,logFilePath:c}=r,u="hostPath"in e&&zr(e.hostPath)&&!!rt.extensions.getExtension("ms-vscode-remote.remote-wsl");u&&rt.commands.executeCommand("setContext","canReopenInWSL",!0);let l=e.settings,d="localDocker"in e&&e.localDocker,f=!!(l&&"host"in l&&l.host&&l.host.startsWith("ssh://")&&!d)&&(!!rt.extensions.getExtension("ms-vscode-remote.remote-ssh")||!!rt.extensions.getExtension("ms-vscode-remote.remote-ssh-nightly"));f&&rt.commands.executeCommand("setContext","canReopenInSSH",!0);let p=!(l&&"host"in l&&l.host&&l.host.startsWith("ssh://")&&!d);p&&rt.commands.executeCommand("setContext","canReopenLocally",!0);let m;return rt.window.withProgress({location:rt.ProgressLocation.Notification,title:Yd,cancellable:!1},async h=>{let g=Ri(t.extensionPath,Is,a),{cliHost:v,originalCwd:w}=await sne(e,t.extensionPath,await Eo(),g,o.product,a),E={...await g,...ql(v,e.settings)},C={...v.env,...E},S=await zd({authority:i,extensionContext:t,sessionStart:r.sessionStart,progress:h,cliHost:v,env:C,cwd:v.cwd,isLocalContainer:Vv(E),telemetry:o,output:a,logFilePath:c,allowSystemConfigChange:!0,postCreate:n}),x={async createConfiguration(I,P){return eE({fileHost:P,telemetry:o,output:a,existingFilesLearnMoreLink:wu,predefinedDefinitionsLearnMoreLink:Eu,openConfigurationCommandId:yu},St(Zm.posix,I))},async showError(I,...P){return await rt.window.showErrorMessage(I,{modal:!0},...P)}};return m={common:S,parsedAuthority:e,dockerCLI:mi(),dockerComposePath:ji(),dockerComposeCLI:Ai({exec:S.cliHost.exec,env:{...E,...Kt(E)},output:S.output},mi(),ji()),dockerEnv:E,workspaceMountConsistencyDefault:Nw(),updateRemoteUserUIDOnMacOS:Lw(),cacheMount:Fw()?"volume":"none",configurationTracking:Ow(t.workspaceState),removeOnStartup:await aH(t,i),buildNoCache:await uH(t,i),onRemoveOnShutdownChanged:s,userRepositoryConfigurationPaths:Ma(),originalCwd:w,configProvider:x,development:t.extensionMode===rt.ExtensionMode.Development,watch:async(I,P)=>{let T=rt.workspace.createFileSystemWatcher(new rt.RelativePattern(I,"*"));return T.onDidChange(P),T.onDidCreate(P),T.onDidDelete(P),T}},await Wv(m),nF(m)}).then(h=>(s(async g=>{await cH(t,g&&h.dockerContainerId||!1),await Nm(t,g==="rebuildNoCache"?i:!1)}),Ds(o,zP(e),"success",m==null?void 0:m.common,h.config,h.configLocation,h.properties),h),h=>{var I;let g=h instanceof Me?h:new Me({description:"An error occurred setting up the container.",originalError:h});Kr(e)&&(g.volumeName=e.volumeName,g.volumeName===So&&(g.volumeName=_o(e.repositoryPath).uniqueVolumeName),g.repositoryPath=e.repositoryPath,g.folderPath=e.folder),Ds(o,zP(e),"failure",m==null?void 0:m.common,g.config,void 0,g.containerProperties,g);let v="onTheSide",w=(I=g.data)==null?void 0:I.fileWithError;!w&&m.parsedAuthority&&yr(m.parsedAuthority)&&m.parsedAuthority.configFile&&(w=qe(m.parsedAuthority.configFile,m.common.cliHost.platform));let E=w&&(m==null?void 0:m.common.cliHost.path.basename(w))||"devcontainer.json",C=yr(e)?[{id:"openFileWithErrorLocally",title:`Edit ${E} Locally`,isLastAction:!0,applicable:async(P,T)=>p&&!(T&&u),async execute(){let P=m==null?void 0:m.common.cliHost,T=w?P.type==="wsl"?await P.toCommonURI(w):Ue.file(w):void 0;await Lm(t,e.hostPath,T,c,v);let D=rt.Uri.file(e.hostPath);await rt.commands.executeCommand("vscode.openFolder",D)}},{id:"openFileWithErrorinWSL",title:`Edit ${E} in WSL`,isLastAction:!0,applicable:async()=>u,async execute(){let P=rt.Uri.parse((await yl(e.hostPath,a)).toString());await Lm(t,P.path,w?P.with({path:w}):void 0,c,v),await rt.commands.executeCommand("vscode.openFolder",P)}},{id:"openFileWithErrorinSSH",title:`Edit ${E} in SSH`,isLastAction:!0,applicable:async()=>f,async execute(){let P=e.settings,T=rt.Uri.parse(Qf(P.host,e.hostPath).toString());await Lm(t,T.path,w?T.with({path:w}):void 0,c,v),await rt.commands.executeCommand("vscode.openFolder",T)}}]:[],S=Kr(e)?e.inspectVolume?[ca]:[{id:"reopenInRecoveryContainer",title:`Edit ${E} in Recovery Container`,isLastAction:!0,applicable:(P,T)=>!0,execute:async P=>{await Lm(t,e.repositoryPath,w?Ue.file(w).with({scheme:"vscode-remote"}):void 0,c,v),await rt.commands.executeCommand("remote-containers.inspectVolume",P.volumeName,P.repositoryPath,P.folderPath)}},ca,{id:"openRepository",title:"Open Repository",isLastAction:!1,applicable:(P,T)=>!T,async execute(){rt.env.openExternal(rt.Uri.parse(e.repositoryPath))}}]:[],x=_p(e)?[ca]:[];return g.actions=[...Wl,Rc,LF,...C,...S,...x,Vl,Dc],ane(g),ua(g,zP(e),o,!0,r)})}async function sne(e,t,r,n,o,i){let{settings:s}=e,a=s&&"host"in s&&s.host||void 0;if(yr(e)){let c=St(Zm,e.hostPath),u=c.rootFolderPath,l=await Hn(a,c.rootFolderPath,ko,hi(),t,r,o,i,Hi,{sshAskpassEnv:n,settings:Gd(),localDocker:e.localDocker});return l.cwd!==c.rootFolderPath&&(c=St(l.path,c.isWorkspaceFile?l.path.join(l.cwd,Zm.basename(e.hostPath)):l.cwd)),i.write(`Setting up container for folder or workspace: ${c.workspaceOrFolderPath}\r
`),Bv(i,e.settings),e.localDocker&&i.write(`Local Docker: ${e.localDocker}\r
`),{cliHost:l,originalCwd:u}}else{let c=await Hn(a,void 0,ko,hi(),t,r,o,i,Hi,{sshAskpassEnv:n,settings:Gd()});return{cliHost:c,originalCwd:await c.homedir()}}}function zP(e){return yr(e)?"config":Kr(e)?e.inspectVolume?"volume":"repository":"volume"}function ane(e){let t=(e.originalError&&(e.originalError.cmdOutput||e.originalError.message)||"").toLowerCase();t&&t.indexOf("drive has not been shared")!==-1?e.description="The drive of the workspace folder is not shared. Share it in the Docker settings first.":t&&(t.indexOf("port is already allocated")!==-1||t.indexOf("address already in use")!==-1)?e.description="A port the container is setup to bind to is already in use. See the Dev Containers terminal for details.":t&&t.indexOf('invalid mount config for type "bind"')!==-1?e.description="A mount config is invalid. Make sure it has the right format and a source folder that exists on the machine where the Docker daemon is running.":t&&t.indexOf("deb.debian.org/debian/dists/jessie-updates")!==-1&&(e.description="The base image references the obsolete Debian 8 update repository.",e.actions.push({id:"learnMore",title:"Learn More",isLastAction:!1,applicable:(r,n)=>n,async execute(){rt.env.openExternal(rt.Uri.parse("https://aka.ms/vscode-remote/containers/troubleshooting/jessie"))}}))}var Vi=ce(require("vscode"));var LB=require("util");var vi=ce(require("path"));async function FB(e,t,r,n){var m,h;let{dockerCLI:o,dockerComposeCLI:i,dockerComposePath:s,common:a}=e,{cliHost:c,extensionPath:u,appRoot:l,postCreate:d,output:f}=a,p;try{let{commit:g}=a.product;if(!g)throw new Me({description:"Cannot attach without commit id for the remote extension host."});let v=n?r.configFilePath:void 0;if((v==null?void 0:v.scheme)==="file"&&c.type!=="local"){let O=c.path.join(await c.tmpdir(),`devcontainer-config-${Mr()}.json`);await c.writeFile(O,await pt(v.fsPath)),v=Ue.from({scheme:wt.scheme,path:O})}let w={...a.env,...Kt(a.env)},E={cliHost:c,dockerPath:o,dockerComposePath:s,env:w,extensionPath:u,appRoot:l,package:a.package,postCreate:d,output:f},C=a.postCreate.output.dimensions||f.dimensions,S=await Di(E,["set-up","--container-id",t.Id,...c.type==="local"&&a.persistedFolder?["--user-data-folder",a.persistedFolder]:[],...e.dockerCLI!=="docker"?["--docker-path",e.dockerCLI]:[],...a.containerSessionDataFolder?["--container-session-data-folder",a.containerSessionDataFolder]:[],"--log-level",Ei(a.getLogLevel()),"--log-format","json",...v?["--config",qe(v,c.platform)]:[],"--default-user-env-probe",a.defaultUserEnvProbe,"--skip-post-create",...C?["--terminal-columns",String(C.columns),"--terminal-rows",String(C.rows)]:[]]);if((S==null?void 0:S.outcome)!=="success")throw new Me({description:`devcontainer command failed: ${S?JSON.stringify(S):"data missing"}`});let{mergedConfiguration:x}=await sa(E,void 0,v,a.getLogLevel(),{},[],t.Id,void 0,a.cliMode),I=x.remoteUser;p=await Fl(e,t.Id,x.workspaceFolder,I);let P={cliHost:c,dockerCLI:o,dockerComposeCLI:i,dockerComposePath:s,env:w,output:d.output},T=((h=(((m=x.customizations)==null?void 0:m.vscode)||[]).slice().reverse().find(O=>typeof O.devPort=="number"))==null?void 0:h.devPort)||Js,{hostOrContainerPort:D,hostPortServer:R,connectionToken:k,webConnectionToken:U,remoteEnv:W,serverDownloaded:j}=await Il(a,p,r,x,T,Ml(e,P,void 0,void 0,t.Id,!1,v,void 0)),$=vr(a.cliHost,p.shellServer);if(cne(a,p,$,r.configFilePath),lne(a,p,$,r.configFilePath),Nl(a,p,D,k,U,t,St(vi.posix,"/")),R){let O=async()=>{await(0,LB.promisify)(R.close.bind(R))()};a.shutdowns.push(O)}return{params:a,properties:p,config:r,resolvedAuthority:{host:ia,port:D,connectionToken:k,extensionHostEnv:W},webConnectionToken:U,tunnelInformation:a.isLocalContainer?Ll(t):{},dockerParams:e,dockerContainerId:t.Id,serverDownloaded:j}}catch(g){let v=g instanceof Me?g:new Me({description:"An error occurred attaching to the container.",originalError:g});throw t&&(v.manageContainer=!1,v.params=e.common,v.containerId=t.Id,v.dockerParams=e),p&&(v.containerProperties=p),v.config=r,v}}function cne(e,t,r,n){t.installFolder&&MB(e,t,r,n).catch(console.error)}async function MB(e,t,r,n){try{await ns(e,t,["/bin/sh","-c",`# Watch installed extensions
			trap "exit 0" 15
			old=\`ls -A --full-time\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
			exit 2
		`],TN(t),{print:"off"});return}catch(o){(o==null?void 0:o.code)===1?await une(e,t,r,n):(o==null?void 0:o.code)!==2&&await yo(6e4)}return MB(e,t,r,n)}async function une(e,t,r,n){let o=await AN(e,t);await jS(n,async()=>{var s,a;let i=await tE(e.cliHost,r,n,t.remoteWorkspaceFolder);if(!fne(((a=(s=i.config.customizations)==null?void 0:s.vscode)==null?void 0:a.extensions)||[],o)){let c=Zt(i.text,["extensions"],o,{formattingOptions:{}});await wo(r,n,c,i.text)}})}function lne(e,t,r,n){$B(e,t,r,n).catch(console.error)}async function $B(e,t,r,n){try{let o=uv(t),i=vi.posix.dirname(o),s=vi.posix.basename(o);await ns(e,t,["/bin/sh","-c",`# Watch machine settings
			trap "exit 0" 15
			old=\`ls -A --full-time ${s} 2>/dev/null || true\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time ${s} 2>/dev/null || true\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
			exit 2
		`],i,{print:"off"});return}catch(o){(o==null?void 0:o.code)===1?await dne(e.cliHost,t,r,n):(o==null?void 0:o.code)!==2&&await yo(6e4)}return $B(e,t,r,n)}async function dne(e,t,r,n){let{stdout:o}=await t.shellServer.exec(`cat ${uv(t)}`),i=yt(o)||{};await jS(n,async()=>{var a,c;let s=await tE(e,r,n,t.remoteWorkspaceFolder);if(JSON.stringify(((c=(a=s.config.customizations)==null?void 0:a.vscode)==null?void 0:c.settings)||{})!==JSON.stringify(i)){let u=Zt(s.text,["settings"],i,{formattingOptions:{}});await wo(r,n,u,s.text)}})}function fne(e,t){let r=new Set(e),n=new Set(t);return r.size===n.size&&e.every(o=>n.has(o))}async function UB(e,t){let r=nE(e,t.Name),n=await NB(r);return n||(r=qB(e,t.Config.Image),n=await NB(r)),n}async function jB(e,t,r,n,o){let i=Ue.file(nE(r,n.Name)),s=await tE(e,t,i,o);return s.exists||(i=Ue.file(qB(r,n.Config.Image)),s=await tE(e,t,i,o)),s}function rE(e){return vi.join(e,"nameConfigs")}function nE(e,t){let r=t.startsWith("/")?t.substr(1):t;return vi.join(rE(e),`${VB(r)}.json`)}async function HB(e){try{let t=rE(e);return(await Ls(t)).filter(n=>n.endsWith(".json")).map(n=>({name:WB(n.substr(0,n.length-5)),uri:Ue.file(vi.join(t,n))}))}catch(t){if(t&&t.code==="ENOENT")return[];throw t}}function oE(e){return vi.join(e,"imageConfigs")}function qB(e,t){return vi.join(oE(e),`${VB(t)}.json`)}async function BB(e){try{let t=oE(e);return(await Ls(t)).filter(n=>n.endsWith(".json")).map(n=>({image:WB(n.substr(0,n.length-5)),uri:Ue.file(vi.join(t,n))}))}catch(t){if(t&&t.code==="ENOENT")return[];throw t}}function VB(e){return e.replace(/[:/%]/g,t=>`%${t.charCodeAt(0).toString(16)}`)}function WB(e){return e.replace(/%([0-9a-f]{2})/g,(t,r)=>String.fromCharCode(parseInt(r,16)))}async function NB(e){if(!await lr(e))return;let t=await pt(e),r=yt(t.toString())||{},n=dp(r);return n.configFilePath=Ue.file(e),n}async function tE(e,t,r,n){let o=await t.readDocument(r),i=o||is,s=yt(i)||{},a=dp(s),c=ov({platform:e.platform,configFile:r,env:e.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:n},a);return c.configFilePath=r,{exists:!!o,text:i,config:c}}async function GB(e,t,r,n,o){return await $a(e)?{...await pne(e,t,r,n,o),isTrusted:!0}:(await Vi.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function pne(e,t,r,n,o){let i,s;return Vi.window.withProgress({location:Vi.ProgressLocation.Notification,title:Yd,cancellable:!1},async a=>{var c,u;try{let l=Bl(r),{settings:d}=l,f="containerName"in l?l.containerName:l.containerId;n.log.write(`Setting up container: ${f}\r
`),Bv(n.log,d);let p=d&&"host"in d&&d.host||void 0,m=Ri(e.extensionPath,Is,n.log),h=await Hn(p,l.cwd,ko,hi(),e.extensionPath,await Eo(),t.product,n.log,Hi,{sshAskpassEnv:m,settings:Gd()}),g=mi(),v={...await m,...ql(h,d)},w=Ai({exec:h.exec,env:{...v,...Kt(v)},output:n.log},mi(),ji()),E={...h.env,...v},C=await qn({cliHost:h,dockerCLI:g,dockerComposeCLI:w,dockerComposePath:ji(),env:E,output:n.log},"containerName"in l?l.containerName:l.containerId);if(!C)throw new Me({description:`Cannot attach to the container with name/id ${f}, it no longer exists.`,data:{reload:!1,attach:!0}});let S=(u=(c=(Vi.workspace.workspaceFolders||[void 0])[0])==null?void 0:c.uri)==null?void 0:u.path,x=await jB(h,Ho,e.globalStoragePath,C,S);if(S&&x.config.workspaceFolder!==S){let D=Zt(x.text,["workspaceFolder"],S,{formattingOptions:{}});await wo(Ho,x.config.configFilePath,D,x.text)}i={common:await zd({authority:r,extensionContext:e,sessionStart:n.sessionStart,progress:a,cliHost:h,env:E,cwd:l.cwd||await h.homedir(),isLocalContainer:Vv(v),telemetry:t,output:n.log,logFilePath:n.logFilePath,allowSystemConfigChange:!1,postCreate:o}),parsedAuthority:l,dockerCLI:g,dockerComposePath:ji(),dockerComposeCLI:w,dockerEnv:v,workspaceMountConsistencyDefault:Nw(),updateRemoteUserUIDOnMacOS:Lw(),cacheMount:Fw()?"volume":"none",configurationTracking:Ow(e.workspaceState),userRepositoryConfigurationPaths:[],development:e.extensionMode===Vi.ExtensionMode.Development},await Wv(i);let I=jl(d),P=C.Name.startsWith("/")?C.Name.substr(1):C.Name,T=`Container ${C.Config.Image} (${P})${I}`;if(i.common.setWorkspaceName(T),C.State.Status!=="running")throw new Me({description:`Cannot attach to the container ${C.Config.Image} (${P})${I}, it is not running.`,params:i.common,containerId:C.Id,dockerParams:i,data:{reload:!1,start:!0}});return await FB(i,C,x.config,x.exists)}catch(l){let d=l instanceof Me?l:new Me({description:"An error occurred attaching to the container.",originalError:l});throw d.actions=[FF,MF,...Wl,Rc,ca,Vl,Dc],d}}).then(a=>(Ds(t,"attach","success",i==null?void 0:i.common,s,void 0,a.properties),a),a=>{let c=a instanceof Me?a:new Me({description:"An error occurred attaching to the container.",originalError:a});return Ds(t,"attach","failure",i==null?void 0:i.common,s,void 0,c.containerProperties,c),ua(c,"attach",t,!0,n)})}var Nt=ce(require("vscode"));var Wt=ce(require("vscode")),YB=ce(require("path")),Iu=ce(require("os")),eh=ce(require("fs")),KB=ce(require("child_process")),XB=ce(ju());async function sE(e){gne()?await new YP().downloadAndInstallDocker(e):QB()?await new KP().downloadAndInstallDocker(e):await Wt.env.openExternal(Wt.Uri.parse("https://aka.ms/download-docker-linux-vscode"))}var iE=class{async downloadAndInstallDocker(t){if(await this.preInstallCheck(t)){let n="Downloading Docker installer...",o="The Docker Desktop installation is started. Complete the installation and then start Docker Desktop.",i;try{i=await Wt.window.withProgress({location:Wt.ProgressLocation.Notification,title:n},async()=>this.downloadInstaller())}catch(a){let c="Downloading the Docker Desktop installer failed. Do you want to manually download and install?",u="Download";throw this.handleError(c,u,this.downloadUrl),a}let s=this.getInstallCommand(i);Wt.window.showInformationMessage(o);try{await this.install(i,s,t)}catch(a){let c=`Docker Desktop installation failed. ${a}`,u="Install Instruction";throw this.handleError(c,u,"https://aka.ms/AA37qtj"),a}}}async preInstallCheck(t){let r=!0;if(await new XP(t).isDockerInstalledRealTimeCheck()){let n="Docker Desktop is already installed. Would you like to reinstall?",o="Reinstall";r=await Wt.window.showInformationMessage(n,{modal:!0},o)!==void 0}return r}async downloadInstaller(){let t=`${hne()}.${this.fileExtension}`;return await yne(this.downloadUrl,t),t}handleError(t,r,n){Wt.window.showErrorMessage(t,{title:r}).then(o=>{o&&Wt.env.openExternal(Wt.Uri.parse(n))})}},YP=class extends iE{constructor(){super(...arguments);this.downloadUrl="https://aka.ms/download-docker-windows-vscode";this.fileExtension="exe"}getInstallCommand(r){return`"${r}"`}async install(r,n,o){try{o.write(`Executing command ${n}`),await JB(n,o)}finally{try{await eh.promises.stat(r),await eh.promises.unlink(r)}catch{}}}},KP=class extends iE{constructor(){super(...arguments);this.downloadUrl="https://aka.ms/download-docker-mac-vscode";this.fileExtension="dmg"}getInstallCommand(r){return`chmod +x '${r}' && open '${r}'`}async install(r){let n="Docker Install",o=this.getInstallCommand(r);await vne(o,n,{addDockerEnv:!1})}},mne=0;function hne(){return YB.join(Iu.tmpdir(),`${Wt.env.sessionId}-${mne++}.tmp`)}function gne(){return Iu.platform()==="win32"}function QB(){return Iu.platform()==="darwin"}async function vne(e,t,r){var a,c;let n;r=r??{},r.addDockerEnv&&(n={});let o=new Wt.Task({type:"shell"},r.workspaceFolder??Wt.TaskScope.Workspace,t,"Docker",new Wt.ShellExecution(e,{cwd:r.cwd||((c=(a=r.workspaceFolder)==null?void 0:a.uri)==null?void 0:c.fsPath)||Iu.homedir(),env:n}),[]);r.alwaysRunNew&&(o.definition.idRandomizer=Math.random()),r.focus&&(o.presentationOptions={focus:!0});let i=await Wt.tasks.executeTask(o);return new Promise((u,l)=>{let d=Wt.tasks.onDidEndTaskProcess(f=>{f.execution===i&&(d.dispose(),f.exitCode&&r.rejectOnError&&l(f.exitCode),u())})})}var XP=class{constructor(t){this.output=t;this.maxCacheTime=3e4;this.isDockerInstalledLazy=new JP(async()=>{let r=await this.isDockerInstalledRealTimeCheck();return r&&this.isDockerInstalledLazy.cacheForever(),r},this.maxCacheTime)}async isDockerInstalled(){return await this.isDockerInstalledLazy.getValue()}async isDockerInstalledRealTimeCheck(){try{return await JB("docker -v",this.output),!0}catch{return!1}}};async function yne(e,t){await new Promise((r,n)=>{let o=eh.createWriteStream(t);XB.https.get(e,s=>{if(s.statusCode<200||s.statusCode>299){n(new Error(`Failed to download Docker (${e}): HTTP ${s.statusCode} - ${s.statusMessage}`));return}s.on("error",n),s.pipe(o),s.on("end",r)}).on("error",n)})}var zB=10*1024;async function JB(e,t,r,n){let o=Buffer.alloc(r&&r.maxBuffer||zB),i=Buffer.alloc(r&&r.maxBuffer||zB);return await wne(e,t,r,n,o,n,i),{stdout:QP(o),stderr:QP(i)}}async function wne(e,t,r,n,o,i,s,a){return await new Promise((c,u)=>{let l,d=0,f=0;r=r||{},r.shell=!0,Ene(r,t);let p=KB.spawn(e,r);p.on("error",m=>(l&&(l.dispose(),l=void 0),u(m))),p.on("close",(m,h)=>{if(l&&(l.dispose(),l=void 0),a&&a.isCancellationRequested)return u(new Error("User canceled"));if(m){let g=`Process '${e.length>50?`${e.substring(0,50)}...`:e}' exited with code ${m}`;s&&(g+=`
Error: ${QP(s)}`);let v=new Error(g);return v.code=m,v.signal=h,v.stdErrHandled=i!==null,u(v)}return c()}),r!=null&&r.stdin&&(p.stdin.write(r.stdin),p.stdin.end()),(n||o)&&p.stdout.on("data",m=>{let h=m.toString();n&&n(h,p),o&&(d+=o.write(h,d))}),(i||s)&&p.stderr.on("data",m=>{let h=m.toString();i&&i(h,p),s&&(f+=s.write(h,f))}),a&&(l=a.onCancellationRequested(()=>{p.kill()}))})}function Ene(e,t){var r;!QB()||/(?<=^|:)\/usr\/local\/bin(?=$|:)/i.test(((r=e==null?void 0:e.env)==null?void 0:r.PATH)||process.env.PATH||"")||(e=e??{},e.env=e.env??{...process.env},t.write("WARNING: Adding '/usr/local/bin' to the PATH because it is missing."),e.env.PATH=`${e.env.PATH}:/usr/local/bin`)}function QP(e){return e.toString().replace(/[\x00-\x09\x0B-\x0C\x0E-\x1F]|\r?\n$/g,"")}var JP=class{constructor(t,r){this.valueFactory=t;this._valueLifetime=r;this._isValueCreated=!1}get isValueCreated(){return this._isValueCreated}cacheForever(){this._valueLifetime=void 0}clear(){this._isValueCreated=!1,this._valuePromise=void 0}async getValue(){if(this._isValueCreated)return this._value;let t=this._valuePromise===void 0;t&&(this._valuePromise=this.valueFactory());let r=await this._valuePromise;if(t&&(this._value=r,this._valuePromise=void 0,this._isValueCreated=!0),this._valueLifetime&&t){let n=setTimeout(()=>{this._valueLifetime&&this._valuePromise===void 0&&(this._isValueCreated=!1,this._value=void 0),clearTimeout(n)},this._valueLifetime)}return r}};async function on(e,t,r){var i;let n=(i=(Nt.workspace.workspaceFolders||[])[0])==null?void 0:i.uri;n&&(n.scheme==="file"&&zr(n.fsPath)||wl(n))&&(t=await ft(e,t.output,n));let o=await rh(t,r);if(o==="permission")return await Nt.window.showErrorMessage("Current user does not have permission to run 'docker'.",{modal:!0,detail:"Try adding the user to the 'docker' group."},"Documentation")&&Nt.env.openExternal(Nt.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079224")),!1;if(o==="ssh")return await Nt.window.showErrorMessage("Cannot connect to Docker daemon using 'ssh'.",{modal:!0,detail:"Make sure public/private keys are set up for connecting without keyboard interaction."},"Show Log")&&Nt.commands.executeCommand(tn),!1;if(o==="daemon")return await Nt.window.showErrorMessage("Docker returned an error.",{modal:!0,detail:"Make sure the Docker daemon is running."},"Show Log")&&Nt.commands.executeCommand(tn),!1;if(!o||o==="command"){if(t.cliHost.type==="wsl")await Nt.window.showErrorMessage("Docker Desktop WSL 2 backend required.",{modal:!0},"Read more on docker.com")&&Nt.env.openExternal(Nt.Uri.parse("https://docs.docker.com/docker-for-windows/wsl"));else{let s="Install",a="License",c="Ignore",u=o===!1?[s,a,c]:[s,a],l=await Nt.window.showErrorMessage("Docker version 17.12.0 or later required.",{modal:!0,detail:`${o==="command"&&t.dockerCLI!=="docker"?`Command not found: '${t.dockerCLI}'. `:""}Check the license for details.`},...u);if(l===s)sE(t.output).then(console.error);else if(l===a)Nt.env.openExternal(Nt.Uri.parse("https://aka.ms/docker-subscription-service-agreement"));else if(l===c)return!0}return!1}return o==="wsl1"?(await Nt.window.showErrorMessage("WSL 2 distro required.",{modal:!0,detail:"The WSL distro is running with WSL 1."},"Read more on docker.com")&&Nt.env.openExternal(Nt.Uri.parse("https://docs.docker.com/docker-for-windows/wsl")),!1):!0}async function rh(e,t){var s,a,c,u;let r;try{let l=await ot(e,"version","--format","{{.Server.APIVersion}}");r=l.stdout.toString(),e.output.write(r);let d=l.stderr.toString();d&&e.output.write(dt(d))}catch(l){console.error(l);let d=(s=l==null?void 0:l.stdout)==null?void 0:s.toString();d&&e.output.write(d);let f=l&&(l.stderr?l.stderr.toString():l.message)||"";f&&e.output.write(dt(f)),th(t,"error",void 0,f);let p=f.toLowerCase();return p.indexOf("permission denied")!==-1?p.indexOf("ssh")!==-1?"ssh":"permission":p.indexOf("enoent")!==-1||p.indexOf("not found")!==-1?(e.output.write(`CLI host's PATH: ${e.cliHost.env.PATH}`),"command"):e.cliHost.type==="wsl"&&((u=(c=(a=l==null?void 0:l.stdout)==null?void 0:a.toString())==null?void 0:c.toLowerCase())==null?void 0:u.indexOf("wsl 1"))!==-1?"wsl1":"daemon"}let n=r.trim(),o=Sl(n);if(!o&&n.toLowerCase().indexOf("error during connect")!==-1)return th(t,"error",void 0,n),"daemon";if(!o)return th(t,"unparsed",n),!0;let i=!bl(o,[1,35]);return!i&&await JS(e)?(th(t,"podman",n),!0):(th(t,i?"success":"failure",n),i)}function th(e,t,r,n){let o={outcome:t};r&&(o.version=r),n&&(o.errorMessage=n),e.sendTelemetryEvent("dockerVersion",o)}async function ZB(e){try{return await mp(e,"version"),!0}catch{return await Nt.window.showErrorMessage("Docker Compose required",{modal:!0},"Documentation")&&Nt.env.openExternal(Nt.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079610")),!1}}var tf=ce(require("vscode"));var aE=class{constructor(t){this.fileHost=t}async provideDocumentLinks(t,r){let n=[],o=pf(t.getText());if(!o)return n;let i=mf(o)||{};return i.configFilePath=t.uri,jr(i)&&this._linksForDockerfile(n,i,o,t),"dockerComposeFile"in i&&await this._linksForDockerCompose(n,i,o,t),n}_tryAddDocumentLinkToBucket(t,r,n,o,i){let s=t.positionAt(r),a=t.positionAt(n);s.compareTo(a)!==0&&i.push(new tf.DocumentLink(new tf.Range(s,a),o))}_linksForDockerfile(t,r,n,o){let i=Ns(n,["build","dockerfile"])||Ns(n,["dockerFile"]);i&&i.type==="string"&&this._tryAddDocumentLinkToBucket(o,i.offset+1,i.offset+i.length-1,ra(this.fileHost,r),t)}async _linksForDockerCompose(t,r,n,o){let s=(await na(this.fileHost,r)).map(c=>tf.Uri.file(c).path),a=Ns(n,["dockerComposeFile"]);if(s.length>0&&a)if(a.type==="array"&&a.children)for(let c=0;c<a.children.length;c++)this._tryAddDocumentLinkToBucket(o,a.children[c].offset+1,a.children[c].offset+a.children[c].length-1,o.uri.with({path:s[c]}),t);else a.type==="string"&&this._tryAddDocumentLinkToBucket(o,a.offset+1,a.offset+a.length-1,o.uri.with({path:s[0]}),t)}};var le=ce(require("vscode")),Du=ce(require("path"));var e2="Stop Container",t2="Reopen Folder locally",r2="Close Workspace";var Sr=class{static isGroupItem(t){return!!t&&t.type==="Group"}static isContainerItem(t){return!!t&&t.type==="Container"}static isFolderItem(t){return!!t&&t.type==="Folder"}};var cE=class extends Sr{constructor(r,n){super();this.label=r;this.groupType=n;this.type="Group"}async asTreeItem(r,n,o,i){return new le.TreeItem(this.label,le.TreeItemCollapsibleState.Expanded)}},yi=class extends Sr{constructor(r,n=[],o,i=!1){super();this.container=r;this.folders=n;this.parent=o;this.isDevContainer=i;this.type="Container";this._alreadyCheckedRepository=!1}async asTreeItem(r,n,o,i){let s=new le.TreeItem(this.getContainerLabel(),this.getCollapsibleState());s.description=this.containerDescription;let a=this.getContextBase();s.iconPath=uE(n,bne),s.contextValue="exited"+a;let c=!1;return o&&this.container.Id===o.Id?(s.iconPath=uE(n,Sne),s.contextValue="active"+a,c=!0):r&&await this.setTreeItemIconAndContext(r,a,s),s.tooltip=this.getHover(c,s.iconPath instanceof le.ThemeIcon?s.iconPath:new le.ThemeIcon("vm"),s.label),this.folders.length===1&&(s.contextValue+="Folder"),s}getContextBase(){return(this.isDevContainer?"Dev":"")+"Container"}getCollapsibleState(){return this.folders.length>1?le.TreeItemCollapsibleState.Expanded:le.TreeItemCollapsibleState.None}async setTreeItemIconAndContext(r,n,o){switch(this.container.State.Status){case"created":{o.iconPath=new le.ThemeIcon("vm"),o.contextValue="exited"+n;break}case"paused":{o.iconPath=new le.ThemeIcon("vm-outline"),o.contextValue="running"+n;break}case"restarting":{o.iconPath=new le.ThemeIcon("vm-outline"),o.contextValue="exited"+n;break}case"exited":{o.iconPath=new le.ThemeIcon("vm"),o.contextValue="exited"+n;break}case"running":{o.iconPath=new le.ThemeIcon("vm-running"),o.contextValue="running"+n;break}}}getTimeElapsed(r){if(!r)return"";let n="",o=r.State.Status,i=new Date(r.State.StartedAt),s=new Date(r.State.FinishedAt);if(i.getFullYear()>1&&s.getFullYear()>1){let a=new Date,c=new Date(i>s?r.State.StartedAt:r.State.FinishedAt),u,l,d=a.getTime()-c.getTime();(l=Math.round(d/yi.years))>0?l===1?u="year":u="years":(l=Math.round(d/yi.days))>0?l===1?u="day":u="days":(l=Math.round(d/yi.hours))>0?l===1?u="hour":u="hours":(l=Math.round(d/yi.minutes))>0?l===1?u="minute":u="minutes":(l=Math.round(d/yi.seconds),l===1?u="second":u="seconds"),n=` ${l} ${u}`+(o.endsWith("ing")?"":" ago")}return`${o.charAt(0).toUpperCase()+o.slice(1)}`+n}getContainerLabel(){if(Tc(this.container)&&this.folders.length>0)return`${Du.basename(this.folders[0].folder.path)}`;{let n=eb(this.container);if(n)return n;let o=this.repository;if(o)return o.repositoryName;let i=Pc(this.container);return i?i.volumeName:this.container.Config.Image}}get containerDescription(){return this.container.Name.substr(1)}getHover(r,n,o){let i=new le.MarkdownString(void 0,!0);if(i.appendMarkdown(`$(${n.id}) ${o} (${this.container.Name.substr(1)})  
`),this.repository){let a=this.repository.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)";i.appendMarkdown(`${a} [${this.repository.fullRepositoryName}](${this.repository.gitUrlInfo.repositoryUrl})  
`)}let s=Hv(this.container);return s&&i.appendMarkdown(`$(file-symlink-directory) ${s}  
`),r?i.appendMarkdown("$(remote) Connected"):i.appendMarkdown(`$(history) ${this.getTimeElapsed(this.container)}`),i}get repository(){if(!this._alreadyCheckedRepository){let r=Ic(this.container);r&&(this._repository=_o(r)),this._alreadyCheckedRepository=!0}return this._repository}inspect(r){return mn(r,this.container.Id)}},Br=yi;Br.seconds=1e3,Br.minutes=yi.seconds*60,Br.hours=yi.minutes*60,Br.days=yi.hours*24,Br.years=yi.days*365;var As=class extends Sr{constructor(r,n,o){super();this.container=r;this.folder=n;this.isDevContainer=o;this.type="Folder"}async asTreeItem(r,n,o,i){let s=new le.TreeItem(Du.basename(this.folder.path),le.TreeItemCollapsibleState.None);return s.description=this.folder.path,s.iconPath=uE(n,Pne),s.contextValue="attachedFolder",this.isDevContainer&&!Ic(this.container)&&!Pc(this.container)&&(s.contextValue="devFolder"),o&&this.container.Id===o.Id&&i===this.folder.path&&(s.iconPath=uE(n,xne),s.tooltip=`Active Folder ${s.label}`,s.contextValue=`active${s.contextValue}`),s}};function Cne(e,t,r,n){if(!(!le.env.remoteName||le.env.remoteName!=="attached-container"&&le.env.remoteName!=="dev-container"))return n2(e,t,r,n)}function n2(e,t,r,n){le.commands.executeCommand("setContext","remote-containers:showDetails",!0);let o=new oT(e,t,n,t.output),i=le.window.createTreeView("detailsContainers",{treeDataProvider:o});return o.setTitle=s=>{i.title=s},e.subscriptions.push(r.onDidChangeActiveContainer(s=>o.refresh(s))),o}function _ne(e,t){let r=[e2];return e&&e.Id===t.Id&&le.workspace.workspaceFolders&&le.workspace.workspaceFolders.length>0&&(r.push(r2),le.workspace.workspaceFolders[0].uri.authority.startsWith("dev-container")&&r.push(t2)),r}var ZP=class{constructor(t,r){this.dockerParams=t;this.containerId=r;this.writeEmitter=new le.EventEmitter;this.onDidWrite=this.writeEmitter.event;this.destroyables=[]}open(){let{cliHost:t,env:r,output:n}=this.dockerParams;t.exec({cmd:mi(),args:["logs","-f",this.containerId],env:r,output:n}).then(o=>{this.destroyables.push(o.stdout.on("data",i=>{this.write(i.toString())})),this.destroyables.push(o.stderr.on("data",i=>{this.write(i.toString())}))}).catch(console.error)}close(){this.writeEmitter.dispose(),this.destroyables.forEach(t=>{t.destroy()})}write(t){this.writeEmitter.fire(t.replace(/\n/g,`\r
`))}},eT=class{constructor(t,r,n,o,i,s){this.targetsTreeData=t;this.detailsTreeData=r;this.devVolumesTreeData=n;this.dockerParams=o;this.context=i;this.telemetry=s}updateDockerParameters(t){this.dockerParams=t}registerCommands(){let t=[];return t.push(le.commands.registerCommand("remote-containers.stopContainer",this.commandStopContainer,this)),t.push(le.commands.registerCommand("remote-containers.removeContainer",this.commandRemoveContainer,this)),t.push(le.commands.registerCommand("remote-containers.startContainer",this.commandStartContainer,this)),t.push(le.commands.registerCommand("remote-containers.removeRecentFolder",this.commandRemoveRecentFolder,this)),t.push(le.commands.registerCommand("remote-containers.showDetails",this.commandShowDetails,this)),t.push(le.commands.registerCommand("remote-containers.explorerDetailsRefresh",this.commandExplorerDetailsRefresh,this)),t.push(le.commands.registerCommand("remote-containers.attachToContainer",this.commandAttachToContainer,this)),t.push(le.commands.registerCommand("remote-containers.attachToContainerNewWindow",this.commandAttachToContainerNewWindow,this)),t.push(le.commands.registerCommand("remote-containers.inspectDockerResource",this.commandInspectDockerResource,this)),t.push(le.commands.registerCommand("remote-containers.inspectInBasicDevContainer",this.commandInspectInBasicDevContainer,this)),t.push(le.commands.registerCommand("remote-containers.cloneInVolume",this.commandCloneInVolume,this)),t.push(le.commands.registerCommand("remote-containers.removeVolume",this.commandRemoveVolume,this)),t.push(le.commands.registerCommand("remote-containers.pruneVolumes",this.commandPruneVolumes,this)),t.push(le.commands.registerCommand("remote-containers.explorerVolumesRefresh",this.commandExplorerVolumesRefresh,this)),t.push(le.commands.registerCommand("remote-containers.startAndOpenFolder",this.commandStartAndOpenFolder,this)),t.push(le.commands.registerCommand("remote-containers.newContainer",this.commandNewContainer,this)),t.push(le.commands.registerCommand("remote-containers.showContainerLog",this.commandShowContainerLog,this)),t}async commandStopContainer(t){if(!Sr.isContainerItem(t))return;let r=this.targetsTreeData.currentContainer&&this.targetsTreeData.currentContainer.Id===t.container.Id?"Stop active container? This will disconnect your current window.":`Stop ${t.getContainerLabel()}?`,n=await le.window.showWarningMessage(r,{modal:!0},..._ne(this.targetsTreeData.currentContainer,t.container));await this.targetsTreeData.withProgress(t,async()=>{switch(n){case e2:{await gP(this.dockerParams,t.container),t.container=await mn(this.dockerParams,t.container.Id);break}case r2:{await le.commands.executeCommand("workbench.action.closeFolder");break}case t2:{await le.commands.executeCommand("remote-containers.reopenLocally");break}}})}async commandRemoveContainer(t){if(!Sr.isContainerItem(t))return;let r=await qn(this.dockerParams,t.container.Id);if(!r)return;let n=await le.window.showWarningMessage("Remove this container?",{modal:!0,detail:"This action is not reversible and deletes the container permanently."},"Remove");await this.targetsTreeData.withProgress(t.parent,async()=>{n==="Remove"&&(await gP(this.dockerParams,t.container),await sH(this.dockerParams,r.Id),this.detailsTreeData&&await this.detailsTreeData.refresh(void 0),await this.tryRemoveVolume(t.container))})}async tryRemoveVolume(t){let r=Hv(t);if(r||(r=EF(t)),r){let n=await Tv(this.dockerParams,r);if((await KS(this.dockerParams)).indexOf(r)>=0){let s;(n==null?void 0:n.Labels)&&n.Labels["vsch.local.repository.unique"]==="true"?s="The container is using a volume with a cloned repository.":s=`This is the last container using '${r}'.`,await le.window.showInformationMessage(s,{modal:!0,detail:"Do you want to remove the volume and the data it contains?"},"Remove")==="Remove"&&await vP(this.dockerParams,r)}}}async commandPruneVolumes(t){let r="Are you sure you want to remove all unused volumes?";await le.window.showInformationMessage(r,{modal:!0},"Remove")==="Remove"&&await this.targetsTreeData.withProgress(t,async()=>{await zL(this.dockerParams)})}async commandExplorerVolumesRefresh(t){return await this.devVolumesTreeData.getDockerParams(),this.devVolumesTreeData.refresh(void 0)}async commandStartContainer(t){!Sr.isContainerItem(t)||await this.targetsTreeData.withProgress(t,async()=>{await Mw(this.dockerParams,t.container),t.container=await mn(this.dockerParams,t.container.Id)})}async commandRemoveRecentFolder(t){!Sr.isFolderItem(t)||(await le.commands.executeCommand("vscode.removeFromRecentlyOpened",t.folder.toString()),await this.targetsTreeData.refresh(void 0))}async commandShowDetails(t){!Sr.isContainerItem(t)||(this.detailsTreeData||(this.detailsTreeData=n2(this.context,this.dockerParams,this.targetsTreeData,this.telemetry)),await this.detailsTreeData.refresh(t))}async commandExplorerDetailsRefresh(){this.detailsTreeData&&await this.detailsTreeData.refresh(void 0)}async commandStartAndOpenFolder(t){let r,n;Sr.isFolderItem(t)?(n=t,r=t.container):Br.isContainerItem(t)&&(n=t.folders[0],r=t.container),r&&(await Mw(this.dockerParams,r),await le.commands.executeCommand("remote-containers.openFolder",n))}async commandAttachToContainer(t){return this.attachToContainerInternal(t)}async commandAttachToContainerNewWindow(t){return this.attachToContainerInternal(t,!0)}async attachToContainerInternal(t,r=!1){let n;Sr.isContainerItem(t)?n=t.container:this.detailsTreeData&&(n=this.detailsTreeData.container),n&&(await Mw(this.dockerParams,n),await lE(this.dockerParams,n,this.context,r))}async commandInspectDockerResource(t){let r;(Sr.isContainerItem(t)||Os.isImageItem(t)||Os.isVolume(t)||Os.isDevVolume(t))&&(r=await t.inspect(this.dockerParams)),r&&le.window.showTextDocument(await le.workspace.openTextDocument({language:"json",content:JSON.stringify(r,null,"	")}))}async commandInspectInBasicDevContainer(t){Os.isDevVolume(t)&&await t.inspectInBasicDevContainer()}async commandCloneInVolume(t){Os.isDevVolume(t)&&await t.cloneRepositoryInVolume()}async commandRemoveVolume(t){Os.isDevVolume(t)&&await t.removeVolume(this.dockerParams)}async commandNewContainer(){let t=[{label:"Open Current Folder in Container",command:"remote-containers.reopenInContainer"},{label:"Open Folder in Container...",command:"remote-containers.openFolder"},{label:"Open Workspace in Container...",command:"remote-containers.openWorkspace"},{label:"Create Dev Container...",command:"remote-containers.createDevContainer"},{label:"Clone Repository in Container Volume...",command:"remote-containers.openRepositoryInVolume"},{label:"Clone GitHub Pull Request in Container Volume...",command:"remote-containers.openPullRequestInVolume"},{label:"Try a Sample...",command:"remote-containers.trySample"}],r=await le.window.showQuickPick(t,{placeHolder:"Select an action to create a container"});if(r)return le.commands.executeCommand(r.command)}async commandShowContainerLog(t){if(!Sr.isContainerItem(t))return;let r=new ZP(this.dockerParams,t.container.Id);le.window.createTerminal({name:t.container.Config.Image,pty:r}).show()}};async function o2(e,t,r,n){le.commands.executeCommand("setContext","remote-containers:showDetails",!1);let o=new tT(e,t,s,r,n),i=le.window.createTreeView("targetsContainers",{treeDataProvider:o});o.setMessage=a=>i.message=a,e.subscriptions.push(le.commands.registerCommand("remote-containers.explorerTargetsRefresh",async()=>(await o.getDockerParams(!0),o.refresh(void 0))));function s(a){let c=Cne(e,a,o,r),u=new sT(e,r,n),l=le.window.createTreeView("devVolumes",{treeDataProvider:u});e.subscriptions.push(l);let d=new eT(o,c,u,a,e,r);e.subscriptions.push(...d.registerCommands()),e.subscriptions.push(fP(e)(async()=>{o.refresh(void 0),u.refresh(void 0);let f=await ft(e,n);c&&c.updateDockerParameters(f),d.updateDockerParameters(f)}))}}var tT=class{constructor(t,r,n,o,i){this.context=t;this.resolverResults=r;this.onFirstReveal=n;this.telemetry=o;this.output=i;this._onDidChangeTreeData=new le.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this._onDidChangeActiveContainer=new le.EventEmitter;this.onDidChangeActiveContainer=this._onDidChangeActiveContainer.event;this.refreshDockerParams=!1;this.needsSSHCredentials=!1;this.setTreeMessage=()=>{};this.devContainers=[];this.attachContainers=[];this.otherContainers=[];this.recentAttachEntries=new Map;this.recentAttachDevContainerEntries=new Map;this.recentDevComposeEntries=new Map;this.containerItems=new Map;this.action=Promise.resolve();this.needsDockerStartOrInstallContext=void 0;this.hasContainersContext=void 0}set setMessage(t){this.setTreeMessage=t}get currentContainer(){return this._currentContainer}async getDockerParams(t=!1){if(!this.dockerParams){this.passiveSSHAskpassEnv||(this.passiveSSHAskpassEnv=Ri(this.context.extensionPath,async r=>(this.needsSSHCredentials=!0,Is(r,!1)),this.output));try{this.dockerParams=await ft(this.context,this.output,void 0,void 0,t?void 0:this.passiveSSHAskpassEnv,!1),await rh(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0)}catch(r){if(!this.needsSSHCredentials)throw r}}return this.dockerParams}handleDockerEvent(t){try{let r=JSON.parse(t.toString());if(!r.Action)return;let n="exec_create: /root/.vscode-server";if(r.Action==="die"||r.Action==="destroy"||r.Action==="create")this._onDidChangeTreeData.fire();else if(!r.Action.startsWith("exec_create")&&r.Actor&&r.Actor.ID&&this.containerItems.has(r.Actor.ID)){let o=this.containerItems.get(r.Actor.ID);this.dockerParams&&o?(async()=>(o.container=await mn(this.dockerParams,o.container.Id),this._onDidChangeTreeData.fire(o)))():this._onDidChangeTreeData.fire(o);return}else if(r.Action.startsWith(n)){this._onDidChangeTreeData.fire();return}}catch{}}async tryEnsureDocker(){let t=await this.getDockerParams();if(!!t)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await XS(t,{event:["create","destroy","die","health-status","kill","pause","rename","resize","restart","start","stop","unpause","update","exec_create"]}),this.eventsProcess.stdout.on("data",r=>{this.handleDockerEvent(r)})}catch(r){r.code!=="ENOENT"&&console.log(r),this.dockerParams=void 0}}async getTreeItem(t){return t.asTreeItem(this.dockerParams,this.context,this._currentContainer,this.currentFolder)}async setDockerStartOrInstallContext(t){(this.needsDockerStartOrInstallContext===void 0||this.needsDockerStartOrInstallContext!==t)&&(this.needsDockerStartOrInstallContext=t,!this.needsDockerStartOrInstallContext&&this.hasContainersContext===!1&&this.setHasContainersContext(!0),await le.commands.executeCommand("setContext","remote-containers:needsDockerStartOrInstall",!this.needsDockerStartOrInstallContext&&!this.needsSSHCredentials),await le.commands.executeCommand("setContext","remote-containers:needsSSHCredentials",!this.needsDockerStartOrInstallContext&&this.needsSSHCredentials))}async setHasContainersContext(t){if(this.hasContainersContext===void 0||this.hasContainersContext!==t){this.hasContainersContext=t;let r=le.workspace.workspaceFolders&&le.workspace.workspaceFolders.length>0?"remote-containers:noContainersWithFolder":"remote-containers:noContainersWithoutFolder";await le.commands.executeCommand("setContext",r,!this.hasContainersContext)}}async getDockerOrShowMessage(t){return this.refreshDockerParams&&(this.refreshDockerParams=!1,this.dockerParams=void 0),!this.dockerParams&&(t===void 0&&await this.tryEnsureDocker(),!this.dockerParams)?(this.setDockerStartOrInstallContext(!1),this._onDidChangeActiveContainer.fire(void 0),!1):(this.setDockerStartOrInstallContext(!0),!0)}async getChildGroups(t){this.containerItems.clear(),await this.setCurrents(),await this.setContainerTypes(t);let r=[];return(this.devContainers.length>0||this.attachContainers.length>0)&&r.push(new cE("Dev Containers",0)),this.otherContainers.length>0&&r.push(new cE("Other Containers",2)),r}async getChildDevContainer(t,r){let n=await this.getWorkspaceFolderFromContainer(t),o=n?[new As(t,n,!0)]:[],i=Tc(t);i&&this.recentAttachDevContainerEntries.has(i)?o.push(...this.recentAttachDevContainerEntries.get(i).map(a=>new As(t,a,!1))):i&&this.recentAttachEntries.has(t.Id)?o.push(...this.recentAttachEntries.get(t.Id).map(a=>new As(t,a,!1))):(i=Ic(t))&&this.recentAttachDevContainerEntries.has(i)?o.push(...this.recentAttachDevContainerEntries.get(i).map(a=>new As(t,a,!1))):(i=ab(Pc(t)))&&this.recentAttachDevContainerEntries.has(i)?o.push(...this.recentAttachDevContainerEntries.get(i).map(a=>new As(t,a,!1))):i===void 0&&this.recentDevComposeEntries.has(t.Id)&&o.push(...this.recentDevComposeEntries.get(t.Id).map(a=>new As(t,a,!1)));let s=new Br(t,o,r,!0);return this.setContainerItems(s),s}setContainerItems(t){this.containerItems.set(t.container.Id,t),this._currentContainer&&t.container.Id===this._currentContainer.Id&&this._onDidChangeActiveContainer.fire(t)}async getChildContainers(t){if(t.groupType===0){let r=this.devContainers.map(async n=>this.getChildDevContainer(n,t));return r.push(...this.attachContainers.map(async n=>{let o=new Br(n,this.recentAttachEntries.get(n.Id).map(i=>new As(n,i,!1)),t);return this.setContainerItems(o),o})),Promise.all(r)}else return this.otherContainers.map(r=>{let n=new Br(r,[],t);return this.setContainerItems(n),n})}getChildFolders(t){return t.folders&&t.folders.length>1?t.folders:[]}async getChildItems(t){if(t===void 0){let r=await ss(this.dockerParams,!0);if(await this.setHasContainersContext(r.length>0),r.length===0)return[];let n=await oa(this.dockerParams,r);return this.getChildGroups(n)}else{if(Sr.isGroupItem(t))return this.getChildContainers(t);if(Sr.isContainerItem(t))return this.getChildFolders(t)}return[]}async getChildren(t){return await this.action,await this.getDockerOrShowMessage(t)?(this.onFirstReveal&&(this.onFirstReveal(this.dockerParams),this.onFirstReveal=void 0),this.setTreeMessage(void 0),this.getChildItems(t)):[]}async refresh(t){t===void 0&&(this.refreshDockerParams=!0),this._onDidChangeTreeData.fire(t)}async setCurrents(){let t=le.workspace.workspaceFolders,r;if(this.dockerParams){if(t&&t.length>0){let n=this.resolverResults.get(t[0].uri.authority);n&&n.dockerContainerId&&(r=await qn(this.dockerParams,n.dockerContainerId),this.currentFolder=t[0].uri.path)}else if(this.resolverResults.size>0){let n=[...this.resolverResults.values()][0].dockerContainerId;n&&(r=await qn(this.dockerParams,n))}}r!==this._currentContainer&&(this._currentContainer=r)}addContainerToMap(t){if(Tc(t)){this.devContainers.push(t);return}else if(Ic(t)){this.devContainers.push(t);return}else if(Pc(t)){this.devContainers.push(t);return}else if(eb(t)&&this.recentDevComposeEntries.has(t.Id)){this.devContainers.push(t);return}else if(this.recentAttachEntries.has(t.Id)){this.attachContainers.push(t);return}this.otherContainers.push(t)}async setContainerTypes(t){return await this.setRecentEntries(t),this.devContainers.length=0,this.attachContainers.length=0,this.otherContainers.length=0,t.forEach(r=>{this.addContainerToMap(r)}),{hasDev:this.devContainers.length>0,hasAttach:this.attachContainers.length>0}}async getWorkspaceFolderFromHostWorkspace(t){let{cliHost:r,dockerCLI:n,dockerComposePath:o}=this.dockerParams,i=St(r.path,t),s=await Cp(r,i,Ma()),a={cliHost:r,dockerPath:n,dockerComposePath:o,appRoot:le.env.appRoot,extensionPath:this.context.extensionPath,package:await ln(this.context.extensionPath),output:this.output},c=s&&await $m(a,i.rootFolderPath,s);if(c&&jr(c.configuration)){let u=wr(this.dockerParams.env);return le.Uri.parse(Sp(t,c.workspace.workspaceFolder,u),!0)}}async getWorkspaceFolderFromContainer(t){let r=Tc(t);if(r)return this.getWorkspaceFolderFromHostWorkspace(r);{let n=Ic(t),o=Hv(t),i=CF(t);if(n){let a=wr(this.dockerParams.env);return le.Uri.parse(Wo(n,o,i,!1,a,void 0))}let s=Pc(t);if(s){let a=wr(this.dockerParams.env);return le.Uri.parse(Wo(void 0,s.volumeName,s.folder,!1,a,void 0))}}}async getWorkspaceFolderFromHostPath(t){let r=this.dockerParams.cliHost,n=await DF(r,t,this.output),o=RF(r,n,t),i=wr(this.dockerParams.env);return le.Uri.parse(Sp(t,o,i),!0)}getWorkspaceFolderFromRepository(t,r,n){let o=wr(this.dockerParams.env);return le.Uri.parse(Wo(t,r,n,!1,o,void 0),!0)}getWorkspaceFolderFromDevContainerInVolume(t,r){let n=wr(this.dockerParams.env);return le.Uri.parse(Wo(void 0,t,r,!1,n,void 0),!0)}async findComposeTargetContainer(t,r){var n;return(n=r.find(o=>Tc(o)===t))==null?void 0:n.Id}trySetEntryWithAttachAuthority(t,r,n){let o;if("containerName"in r){let i=n.find(s=>s.Name===r.containerName);i&&(o=i.Id)}else o=r.containerId;o&&(this.recentAttachEntries.has(o)?this.recentAttachEntries.get(o).push(t):this.recentAttachEntries.set(o,[t]))}async trySetEntryWithDevAuthority(t,r,n,o){let i=r.hostPath,s=o[i];if(s||(s=await this.getWorkspaceFolderFromHostPath(r.hostPath),o[i]=s),s.path!==t.path){this.recentAttachDevContainerEntries.has(r.hostPath)?this.recentAttachDevContainerEntries.get(r.hostPath).push(t):this.recentAttachDevContainerEntries.set(r.hostPath,[t]);let a=await this.findComposeTargetContainer(r.hostPath,n);a&&this.recentDevComposeEntries.has(a)?this.recentDevComposeEntries.get(a).push(t):a&&this.recentDevComposeEntries.set(a,[t])}}trySetEntryWithRepoAuthority(t,r){this.getWorkspaceFolderFromRepository(r.repositoryPath,r.volumeName,r.folder).path!==t.path&&(this.recentAttachDevContainerEntries.has(r.repositoryPath)?this.recentAttachDevContainerEntries.get(r.repositoryPath).push(t):this.recentAttachDevContainerEntries.set(r.repositoryPath,[t]))}trySetEntryWithDevContainerInVolumeAuthority(t,r){if(this.getWorkspaceFolderFromDevContainerInVolume(r.volumeName,r.folder).path!==t.path){let o=ab(r);this.recentAttachDevContainerEntries.has(o)?this.recentAttachDevContainerEntries.get(o).push(t):this.recentAttachDevContainerEntries.set(o,[t])}}trySetEntryWithVolumeAuthority(t,r){let n=r.volumeName;!n||(this.recentAttachEntries.has(n)?this.recentAttachEntries.get(n).push(t):this.recentAttachEntries.set(n,[t]))}async trySetEntry(t,r,n){if(!t||!t.folderUri&&!t.workspace.configPath)return;let o=t.folderUri??t.workspace.configPath,i=Bl(o.authority);if(i)this.trySetEntryWithAttachAuthority(o,i,r);else{let s=Bn(o.authority);s&&(yr(s)?await this.trySetEntryWithDevAuthority(o,s,r,n):Kr(s)?this.trySetEntryWithRepoAuthority(o,s):cs(s)?this.trySetEntryWithDevContainerInVolumeAuthority(o,s):this.trySetEntryWithVolumeAuthority(o,s))}}async setRecentEntries(t){this.recentAttachEntries.clear(),this.recentAttachDevContainerEntries.clear(),this.recentDevComposeEntries.clear();let r=await le.commands.executeCommand("_workbench.getRecentlyOpened");if(r&&r.workspaces){let n={};for(let o of r.workspaces)await this.trySetEntry(o,t,n)}}withProgress(t,r){return this.action=this.action.then(()=>r()),this.refresh(t)}};var Os=class{constructor(t){this.label=t;this.type="Default"}static isDetailItem(t){return!!t&&t.label!==void 0&&t.type!==void 0}static isImageItem(t){return!!t&&t.type==="Image"}static isVolume(t){return!!t&&t.type==="Volume"}static isDevVolume(t){return!!t&&t.type==="DevVolume"}},rT=class{constructor(t){this.detail=t;this.type="Image";this.context="image";this.label="Image"}inspect(t){return GL(t,this.detail)}},nT=class{constructor(t,r){this.label=t;this.volumeDetails=r;this.type="Volume";this.context="volume"}async inspect(t){return Tv(t,this.volumeDetails)}},oT=class{constructor(t,r,n,o){this.context=t;this.dockerParams=r;this.telemetry=n;this.output=o;this._onDidChangeTreeData=new le.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this.setTreeTitle=()=>{}}updateDockerParameters(t){this.dockerParams=t}set setTitle(t){this.setTreeTitle=t}get container(){return this._container?this._container.container:void 0}getTreeItem(t){let r=new le.TreeItem(t.label,Array.isArray(t.detail)&&t.detail.length>0?le.TreeItemCollapsibleState.Expanded:le.TreeItemCollapsibleState.None);return r.tooltip=t.label,t.detail&&!Array.isArray(t.detail)&&(r.description=t.detail,r.tooltip+=` ${r.description}`),r.contextValue=t.context,r.command=t.command,r}async getAttributes(t,r,n){let o=[];r&&o.push({label:"Workspace",detail:r});let i=Ic(t.container);i&&o.push({label:"Repository",detail:i});let s=Pc(t.container);return s&&(o.push({label:"Volume",detail:s.volumeName}),o.push({label:"Folder",detail:s.folder})),o.push({label:"Name",detail:t.container.Name}),o.push(new rT(t.container.Config.Image)),n&&o.push({label:"Configuration",detail:n,command:{title:"Open Dev Container File",command:"remote-containers.openDevContainerFile",arguments:[n]},context:"devContainer"}),o}async getMounts(t){let r=[];return t&&t.Mounts.forEach(n=>{if(n.Type==="volume"){let o=n.Name,i=new nT(`Volume: ${o}`,o),s={label:`Destination: ${n.Destination}`,detail:void 0};r.push({label:"Volume mount",detail:[i,s]})}else if(n.Type==="bind"){let o={label:`Source: ${n.Source}`,detail:void 0},i={label:`Destination: ${n.Destination}`,detail:void 0};r.push({label:"Bind mount",detail:[o,i]})}}),r}async getChildrenFromRoot(t){let r=[],n=Tc(t.container),o;if(this.dockerParams&&n){let a=await Cp(this.dockerParams.cliHost,St(this.dockerParams.cliHost.path,n),Ma());a&&(o=qe(a,this.dockerParams.cliHost.platform))}r.push({label:"Attributes",detail:await this.getAttributes(t,n,o),type:"Title"});let i;this.dockerParams&&(i=await mn(this.dockerParams,t.container.Id));let s=await this.getMounts(i);return s.length>0&&r.push({label:"Mounts",detail:s,type:"Title"}),r}async testContainer(){let t=!0;try{(this.dockerParams?await mn(this.dockerParams,this._container.container.Id):void 0)===void 0&&(t=!1)}catch{t=!1}return t||(this._container=void 0,this.setTreeTitle("Details (Containers)")),t}async getChildren(t){if(this._container===void 0)return[];let r=[];return t===void 0?await this.testContainer()&&(this.setTreeTitle(this._container.getContainerLabel()),r=await this.getChildrenFromRoot(this._container)):Array.isArray(t.detail)&&r.push(...t.detail),r}async refresh(t){this.dockerParams=await ft(this.context,this.output),await rh(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0,this._container=void 0),this._container=t||this._container,this._onDidChangeTreeData.fire(void 0)}},iT=class extends Os{constructor(r){super(r.Name);this.type="DevVolume";this.volumeDetails=r,this.createdAt=void 0}async asTreeItem(){let r=this.getLabel(),n=new le.TreeItem(r,le.TreeItemCollapsibleState.None);return n.iconPath=this.iconPath,n.description=this.getDescription(),this.isUniqueVolume()?n.contextValue="uniqueDevVolume":n.contextValue="devVolume",n}isUniqueVolume(){let r=this.volumeDetails.Labels;if(r){let n=r["vsch.local.repository.unique"];if(n&&n==="true")return!0}return!1}getLabel(){let r=this.volumeDetails.Name;if(this.volumeDetails.Labels&&this.isUniqueVolume()){let o=this.getRepository();o&&o.gitUrlInfo.repository!=="unknown"&&(r=o.gitUrlInfo.fullRepositoryName)}return r}getDescription(){let r="";if(this.volumeDetails.Labels&&this.isUniqueVolume()){let o=this.getRepository();if(o&&o.gitUrlInfo.repository!=="unknown"){let i=this.getBranchName(),s=this.getPullRequestId();s?r=`#${s}`:i&&(r=`${i}`)}}return r}getBranchName(){let r=this.volumeDetails.Labels;if(r&&this.isUniqueVolume()&&r["vsch.local.repository.branch"])return r["vsch.local.repository.branch"]}getPullRequestId(){let r=this.volumeDetails.Labels;if(r&&this.isUniqueVolume()&&r["vsch.local.repository.pullRequestId"])return r["vsch.local.repository.pullRequestId"]}getRepository(){let r=this.volumeDetails.Labels;if(r){let n=r["vsch.local.repository.unique"];if(n&&n==="true"){let o=r["vsch.local.repository"];return _o(o)}}}get iconPath(){return new le.ThemeIcon("file-symlink-directory")}getTimeElapsed(){if(this.createdAt)return this.createdAt;let r="";if(new Date(this.volumeDetails.CreatedAt).getFullYear()>1){let o=new Date,i=new Date(this.volumeDetails.CreatedAt),s,a,c=o.getTime()-i.getTime();(a=Math.round(c/Br.years))>0?a===1?s="year":s="years":(a=Math.round(c/Br.days))>0?a===1?s="day":s="days":(a=Math.round(c/Br.hours))>0?a===1?s="hour":s="hours":(a=Math.round(c/Br.minutes))>0?a===1?s="minute":s="minutes":(a=Math.round(c/Br.seconds),a===1?s="second":s="seconds"),r=` ${a} ${s} ago`}return this.createdAt=r,r}async inspect(r){return Tv(r,this.volumeDetails.Name)}async inspectInBasicDevContainer(){await le.commands.executeCommand("remote-containers.inspectVolume",this.volumeDetails.Name)}async cloneRepositoryInVolume(){await le.commands.executeCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",this.volumeDetails.Name)}async removeVolume(r){if(!((await KS(r)).indexOf(this.volumeDetails.Name)>=0)){await le.window.showInformationMessage(`Volume '${this.volumeDetails.Name}' is in use and cannot be removed.`,{modal:!0});return}await le.window.showInformationMessage(`Are you sure you want to remove volume '${this.volumeDetails.Name}'?`,{modal:!0},"Remove")==="Remove"&&await vP(r,this.volumeDetails.Name)}},sT=class{constructor(t,r,n){this.context=t;this.telemetry=r;this.output=n;this._onDidChangeTreeData=new le.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event}async getTreeItem(t){return t.asTreeItem()}async getDockerParams(){return this.dockerParams||(this.dockerParams=await ft(this.context,this.output,void 0,void 0),await rh(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0)),this.dockerParams}async setHasVolumesContext(t){await le.commands.executeCommand("setContext","remote-containers:noDevVolumes",t)}async getDockerOrShowMessage(t){return!(!this.dockerParams&&(t===void 0&&await this.tryEnsureDocker(),!this.dockerParams))}async getChildren(t){if(!await this.getDockerOrShowMessage(t))return[];let r=await ft(this.context,this.output),n=await Co(r),o=await pp(r,n),i=a=>!(a.Name==="vscode"||a.Name.length===64&&/^[0-9a-fA-F]+$/.test(a.Name)),s=o.filter(i);return await this.setHasVolumesContext(s.length===0),s.sort((a,c)=>{let u=new Date(a.CreatedAt);return new Date(c.CreatedAt).getTime()-u.getTime()}),s.map(a=>new iT(a))}async resolveTreeItem(t,r){let n=await ft(this.context,this.output),o=await this.getAssociatedContainers(n,r),i=r.getLabel(),s=r.getRepository(),a=r.getBranchName(),c=r.getPullRequestId(),u=r.getTimeElapsed();return o.length>0?t.tooltip=this.renderMarkdown(i,s,a,c,u,o.join(", ")):t.tooltip=this.renderMarkdown(i,s,a,c,u,"*None*"),t}async getAssociatedContainers(t,r){let n=[],o=await ss(t,!0),i=await oa(t,o);for(let s of i)for(let a of s.Mounts)a.Type==="volume"&&a.Name===r.volumeDetails.Name&&n.push(s.Name.substring(1));return n}renderMarkdown(t,r,n,o,i,s){let a=new le.MarkdownString(void 0,!0);if(r){let c=r.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)",u=r.gitUrlInfo.repositoryUrl;u.startsWith("http")?(u=r.gitUrlInfo.repositoryUrl.replace(".git",""),a.appendMarkdown(`${c} [${u}](${u})
`)):a.appendMarkdown(`${c} ${u})
`),a.appendMarkdown(`&nbsp;  
`),n&&(r.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-compare) [${n}](${u}/tree/${n})
`):a.appendMarkdown(`$(git-compare) ${n}
`),a.appendMarkdown(`&nbsp;  
`)),o&&(r.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-pull-request-create) [#${o}](${u}/pull/${o})
`):a.appendMarkdown(`$(git-pull-request-create) #${o}
`),a.appendMarkdown(`&nbsp;  
`)),a.appendMarkdown(`$(history) ${i}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`)}else a.appendMarkdown(`$(file-symlink-directory) ${t}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(history) ${i}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`);return a}handleDockerEvent(t){try{let r=JSON.parse(t.toString());if(!r.Action)return;(r.Action==="die"||r.Action==="destroy"||r.Action==="create"||r.Action==="prune")&&this._onDidChangeTreeData.fire()}catch{}}async tryEnsureDocker(){let t=await this.getDockerParams();if(!!t)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await XS(t,{event:["destroy","die","kill","create","rename","resize","restart","start","stop","unpause","prune"]}),this.eventsProcess.stdout.on("data",r=>{this.handleDockerEvent(r)})}catch(r){r.code!=="ENOENT"&&console.log(r),this.dockerParams=void 0}}async refresh(t){t===void 0&&(this.dockerParams=void 0),this._onDidChangeTreeData.fire(t)}},Sne="vm-active",bne="vm-default",xne="folder-active",Pne="folder";function uE(e,t){let r=`${t}.svg`;return{light:le.Uri.file(e.asAbsolutePath(Du.join("resources","light",r))),dark:le.Uri.file(e.asAbsolutePath(Du.join("resources","dark",r))),highContrast:le.Uri.file(e.asAbsolutePath(Du.join("resources","highContrast",r)))}}var hT=require("util");var No=ce(require("vscode"));async function i2(e,t,r={}){let n=El(t[0],t.slice(1),void 0),o=await YO(t[0],t.slice(1),void 0,e.loadNativeModule),i=await cv({params:e,createdAt:void 0,startedAt:void 0,sharedDataFolderIsLocalCacheFolder:!1,sharedDataFolder:void 0,remoteWorkspaceFolder:"/",containerUser:void 0,containerGroup:void 0,containerEnv:void 0,remoteExec:n,remotePtyExec:o,remoteExecAsRoot:void 0,rootShellServer:void 0,remoteWaylandSocket:void 0}),{hostOrContainerPort:s,connectionToken:a,webConnectionToken:c,remoteEnv:u,serverDownloaded:l}=await IN(e,i,r,async()=>{},void 0);return{params:e,properties:i,config:void 0,resolvedAuthority:{host:ia,port:s,connectionToken:a,extensionHostEnv:u},webConnectionToken:c,tunnelInformation:{},dockerParams:void 0,dockerContainerId:void 0,serverDownloaded:l}}async function s2(e,t,r){var n,o,i;if(!!await $a(e))if(r&&r.name){let s=["get","pod",r.name,"-o","json"];r.namespace&&s.push("--namespace",r.namespace);let{cliHost:a,env:c,output:u}=t,l=(await Oe({exec:a.exec,cmd:"kubectl",args:["config","current-context"],env:c,output:u})).stdout.toString().trim(),f=(await Oe({exec:a.exec,cmd:"kubectl",args:s,env:c,output:u})).stdout.toString(),p=JSON.parse(f),m=((n=p.spec)==null?void 0:n.containers)||[];if(!m.length){t.output.write(`No containers found. Pod details:
${f}`),await No.window.showErrorMessage("No containers found.",{modal:!0},"Show Log")&&No.commands.executeCommand(tn);return}let h=m.length>1?(o=await No.window.showQuickPick(m.map(g=>({label:g.name,detail:g.image,container:g})),{placeHolder:"Select container"}))==null?void 0:o.container:m[0];if(h){let g=((i=p.metadata)==null?void 0:i.namespace)||r.namespace,v={remoteAuthority:Ine({context:l,podname:r.name,namespace:g,name:h.name,image:h.image})};/\d$/.test(e.extensionPath)||(v.reuseWindow=!0),await No.commands.executeCommand("vscode.newWindow",v)}}else t.output.write(`No Pod name found. Pod object:
${JSON.stringify(r,void 0,"  ")}`),await No.window.showErrorMessage("No Pod name found.",{modal:!0},"Show Log")&&No.commands.executeCommand(tn)}async function a2(e,t,r,n,o){return await $a(e)?{...await Tne(e,t,r,n,o),isTrusted:!0}:(await No.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function Tne(e,t,r,n,o){let i;return No.window.withProgress({location:No.ProgressLocation.Notification,title:Yd,cancellable:!1},async s=>{try{let a=Dne(r),c=process.cwd(),u=await Hn(void 0,c,ko,hi(),e.extensionPath,await Eo(),t.product,n.log,Hi);i=await zd({authority:r,extensionContext:e,sessionStart:n.sessionStart,progress:s,cliHost:u,env:u.env,cwd:c,isLocalContainer:!0,telemetry:t,output:n.log,logFilePath:n.logFilePath,allowSystemConfigChange:!1,postCreate:o}),i.setWorkspaceName(`${a.name} in ${a.podname} (${a.image})`);let l=["kubectl","exec","-it",a.podname];return a.context&&l.push("--context",a.context),a.namespace&&l.push("--namespace",a.namespace),l.push("--container",a.name,"--"),await i2(i,l)}catch(a){let c=a instanceof Me?a:new Me({description:"An error occurred attaching to the container.",originalError:a});throw c.actions=[...Wl,Rc,ca,Vl,Dc],c}}).then(s=>(Ds(t,"k8s-container","success",i,void 0,void 0,s.properties),s),s=>{let a=s instanceof Me?s:new Me({description:"An error occurred attaching to the container.",originalError:s});return Ds(t,"k8s-container","failure",i,void 0,void 0,a.containerProperties,a),ua(a,"k8s-container",t,!0,n)})}function Ine(e){let t=[];for(let r in e){let n=e[r];n&&t.push(`${r}=${encodeURIComponent(n)}`)}return`k8s-container+${t.join("+")}`}function Dne(e){return e.substr(e.indexOf("+")+1).split("+").reduce((t,r)=>{let n=r.indexOf("=");return n!==-1&&(t[r.substr(0,n)]=decodeURIComponent(r.substr(n+1))),t},{})}var bt=ce(require("vscode")),ku=ce(require("fs")),rf=ce(require("os")),Ru=ce(require("path")),dE=require("child_process"),nf=require("util");function fE(e){switch(e.quality){case"stable":return"";case"insider":return"-insiders";default:return`-${e.quality}`}}async function c2(e,t){let r=e.globalStorageUri,n=$n.joinPath(r,"cli-bin");await bt.workspace.fs.createDirectory(n);let o="";try{o=(await bt.workspace.fs.readFile($n.joinPath(n,"remote-containers-path"))).toString()}catch(u){if((u==null?void 0:u.code)!=="FileNotFound")return}if(o===e.extensionPath)return;let i=$n.joinPath(e.extensionUri,"dev-containers-user-cli","bin"),s=fE(t),a=`devcontainer${s}`,c=[{source:"devcontainer",destination:a},{source:"devcontainer.cmd",destination:`devcontainer${s}.cmd`}];for(let u of c)await bt.workspace.fs.copy($n.joinPath(i,u.source),$n.joinPath(n,u.destination),{overwrite:!0});process.platform!=="win32"&&await ku.promises.chmod($n.joinPath(n,a).fsPath,493),await bt.workspace.fs.writeFile($n.joinPath(n,"vscode-app-root"),Buffer.from(bt.env.appRoot,"utf-8")),await bt.workspace.fs.writeFile($n.joinPath(n,"vscode-path"),Buffer.from(process.execPath,"utf-8")),await bt.workspace.fs.writeFile($n.joinPath(n,"vscode-quality"),Buffer.from(t.quality??"","utf-8")),await bt.workspace.fs.writeFile($n.joinPath(n,"vscode-machine-id"),Buffer.from(bt.env.machineId,"utf-8")),await bt.workspace.fs.writeFile($n.joinPath(n,"remote-containers-path"),Buffer.from(e.extensionPath,"utf-8"))}async function Rne(e,t){let r=fE(t),n="";try{if(n=(await(0,nf.promisify)(dE.exec)(`powershell.exe -NoProfile -NonInteractive -Command "[System.Environment]::GetEnvironmentVariable('PATH', 'User')"`)).stdout.toString().trim(),n.indexOf(e)>=0)return await bt.window.showInformationMessage("The devcontainer CLI is already in your PATH",{modal:!0,detail:`Try running 'devcontainer${r} --help'
Note: you may need to restart your shell for PATH changes to take effect`}),!0;switch(await bt.window.showInformationMessage("The devcontainer CLI needs to be added to your PATH",{modal:!0},"Add","Copy CLI Path")){case"Add":let s=(0,nf.promisify)(dE.exec)(`powershell.exe  -NoProfile -NonInteractive -Command "[System.Environment]::SetEnvironmentVariable('PATH', '${n};${e}', 'User')`),a=bt.window.showInformationMessage("The devcontainer CLI has been added to your PATH",{modal:!0,detail:`Try running 'devcontainer${r} --help'
Note: you may need to restart your shell for PATH changes to take effect`});await Promise.all([s,a]);break;case"Copy CLI Path":await bt.env.clipboard.writeText(e),await bt.window.showInformationMessage("The devcontainer CLI path has been copied to the clipboard",{modal:!0,detail:`After adding to your PATH, try running 'devcontainer${r} --help'
Note: you may need to restart your shell for PATH changes to take effect`});break}return!0}catch{return!1}}async function kne(e,t){let n=(process.env.PATH??"").split(":"),o=[Ru.join(rf.homedir(),"bin"),Ru.join(rf.homedir(),".local/bin")],i="/usr/local/bin";rf.platform()==="darwin"&&o.push(i);let s=(0,nf.promisify)(ku.stat);for(let a of o){if(n.findIndex(f=>f===a)<0)continue;try{await s(a)}catch{continue}let c=fE(t),u=Ru.join(a,`devcontainer${c}`);try{let f=await s(u);return console.log(f),await bt.window.showInformationMessage(`The devcontainer CLI is already symlinked in ${a}`,{modal:!0,detail:`Try running 'devcontainer${c} --help'
Note: you may need to restart your shell for PATH changes to take effect`}),!0}catch(f){if((f==null?void 0:f.code)!=="ENOENT")return!1}let l=await bt.window.showInformationMessage("The devcontainer CLI needs to be in your PATH",{detail:`Create a symlink in ${a}?`,modal:!0},"Create","Copy CLI Path"),d=Ru.join(e,`devcontainer${c}`);switch(l){case"Create":if(a===i){if(!await Ane(d,u))break}else await(0,nf.promisify)(ku.symlink)(d,u);await bt.window.showInformationMessage(`The devcontainer CLI has been symlinked in ${a}`,{modal:!0,detail:`Try running 'devcontainer${c} --help'
Note: you may need to restart your shell for PATH changes to take effect`});break;case"Copy CLI Path":await bt.env.clipboard.writeText(e),await bt.window.showInformationMessage("The devcontainer CLI path has been copied to the clipboard",{modal:!0,detail:`After adding to your PATH, try running 'devcontainer${c} --help'
Note: you may need to restart your shell for PATH changes to take effect`});break}return!0}return!1}async function Ane(e,t){try{return await ku.promises.symlink(e,t),!0}catch(r){if(r.code!=="EACCES"&&r.code!=="ENOENT")throw r;if(await bt.window.showInformationMessage("This will now prompt with 'osascript' for Administrator privileges to install the shell command.",{modal:!0},"OK")==="OK"){let o=`osascript -e "do shell script \\"mkdir -p ${Ru.dirname(t)} && ln -sf '${e}' '${t}'\\" with administrator privileges"`;return await(0,nf.promisify)(dE.exec)(o),!0}return!1}}async function u2(e,t){let r=e.globalStorageUri,n=$n.joinPath(r,"cli-bin").fsPath;switch(rf.platform()){case"win32":if(await Rne(n,t))return;break;case"darwin":case"linux":if(await kne(n,t))return;break}if(await bt.window.showInformationMessage("The devcontainer CLI needs to be included your PATH",{modal:!0},"Copy CLI Path")==="Copy CLI Path"){await bt.env.clipboard.writeText(n);let i=fE(t);await bt.window.showInformationMessage("The devcontainer CLI path has been copied to the clipboard",{modal:!0,detail:`After adding to your PATH, try running 'devcontainer${i} --help'
Note: you may need to restart your shell for PATH changes to take effect`})}}var br=ce(require("vscode")),aT=ce(require("path"));var One="Select Dev Container Configuration",Nne=`[Creating Dev Container (show log)](command:${tn} "Show details in terminal")`,l2="alpine:3.16.3",d2=["devcontainers","microsoft"];async function f2(e,t,r){let n=await Lne(e,t,r);if(!n)return;let{volumeAndFolderName:o}=n,i=wr(t.env),s=br.Uri.parse(Wo(void 0,o,o,!1,i,void 0));await _u({uri:s,type:"folder",label:`${o} [Dev Container]`}),await br.commands.executeCommand("vscode.openFolder",s)}async function Lne(e,t,r){let{output:n}=t;ot(t,"pull",l2);let o=await HP({telemetry:r,output:n,existingFilesLearnMoreLink:wu,predefinedDefinitionsLearnMoreLink:Eu,openConfigurationCommandId:yu},One,!0),i=await Co(t),s=async()=>{o.skipOptions=!0;let l=await Qw(o,void 0,void 0);if(l==="back"||!l)return;let d=l.metadata.template;if(d2.indexOf(d.owner)===-1){let f=`@${d.owner}`,p={label:`Trust ${f}`,description:"from GitHub",buttons:[{iconPath:new br.ThemeIcon("info"),tooltip:"Open Documentation"}]},m={label:"Cancel"},h=o.quickPick.onDidTriggerItemButton(()=>{br.env.openExternal(br.Uri.parse(d.documentationURL))}),g=await eo(o.quickPick,[p,m],`The ${d.name} is from the ${f} GitHub owner/organization.`,void 0,void 0,!0);if(h.dispose(),!g||g===m){o.quickPick.dispose();return}if(g==="back")return s()}return p2(o,l,i,Fne(l.id,i),s)},a=await s();if(!a)return;let{selectedTemplate:c,volumeName:u}=a;return br.window.withProgress({location:br.ProgressLocation.Notification,title:Nne,cancellable:!1},async()=>{let l;try{let{stdout:d}=await ot(t,...Mne(u,aa()));l=d.toString().trim();let f=aT.posix.join(aa(),u),p=Bo(t,l,"root"),m=await ki(t,l,"root",ko),h=jn("container",f,{},p,m,()=>{throw new Error("not implemented")},"node",n);await h.mkdirp(f);let g=St(aT.posix,f),v=await UP(o,h,g,c);return o.quickPick.hide(),v?{volumeAndFolderName:u}:void 0}finally{if(l)try{await ot(t,"rm","-f",l)}catch{}}})}function Fne(e,t){let r,n=(/([^/:]+)(:[^/:]+)?$/.exec(e)||[])[1]||"devcontainer",o=0;do r=`${n}${o++?`-${o}`:""}`;while(t.indexOf(r)!==-1);return r}async function p2(e,t,r,n,o){let{quickPick:i}=e;i.placeholder="Dev container name",i.selectedItems=[],i.value=n,i.buttons=[br.QuickInputButtons.Back];let s={label:"Additional Options...",alwaysShow:!0},a=!1;function c(){a=!1,i.items=[{label:"Create Dev Container",description:i.value,alwaysShow:!0},s]}function u(p){a=!0,i.items=[{label:p,alwaysShow:!0}]}c();let l=[],d=await new Promise(p=>{l=[i.onDidAccept(()=>{i.value?a||p({volumeName:i.value,options:i.selectedItems[0]===s}):u("The name cannot be empty.")}),i.onDidHide(()=>p(void 0)),i.onDidChangeValue(m=>{r.indexOf(m)!==-1?u("A Docker volume with this name already exists."):m&&!/^[a-zA-Z0-9]/.test(m)?u("Only alphanumeric characters are allowed as the first character."):m&&!/^[a-zA-Z0-9][a-zA-Z0-9_.-]*$/.test(m)?u("Only alphanumeric characters, periods, underscores and hyphens are allowed."):c()}),i.onDidTriggerButton(()=>p("back"))]});if(l.forEach(p=>p.dispose()),!d)return;if(d==="back")return o();let{volumeName:f}=d;if(d.options){let p=async()=>{e.skipOptions=!1;let h=await ef(e,t.metadata.template,async()=>{let w=await p2(e,t,r,f,o);if(!!w)return f=w.volumeName,w.selectedTemplate});if(h==="back"||!h)return;let v=h.metadata.features.filter(w=>d2.indexOf(w.owner)===-1);if(v.length){let w=[...new Set(v.map(P=>P.owner))].sort().map(P=>`@${P}`),E=w.length===1?w[0]:`${w.slice(0,-1).join(", ")} and ${w[w.length-1]}`,C={label:`Trust ${E}`,description:"from GitHub",buttons:[{iconPath:new br.ThemeIcon("info"),tooltip:"Open Documentation"}]},S={label:"Cancel"},x=e.quickPick.onDidTriggerItemButton(()=>{for(let P of v)br.env.openExternal(br.Uri.parse(P.documentationURL))}),I=await eo(e.quickPick,[C,S],`Some features are from the ${E} GitHub owner/organization(s).`,void 0,void 0,!0);if(x.dispose(),!I||I===S){e.quickPick.dispose();return}if(I==="back")return p()}return h},m=await p();if(!m)return;t=m}return i.busy=!0,i.enabled=!1,{volumeName:f,selectedTemplate:t}}function Mne(e,t){return["run","-d","--mount",`type=volume,src=${e},dst=${t}`,l2,"sleep","infinity"]}var lT=class{constructor(t,r,n){this.context=t;this.telemetry=n,this.output=r}handleUri(t){switch(t.path){case"/cloneInVolume":this.cloneInVolume(t)}}async cloneInVolume(t){let r=E2.parse(t.query);if(!r.url){q.window.showErrorMessage(`Failed to handle the URI '${t}' expected a 'url' query parameter.`,{modal:!0});return}let n;Array.isArray(r.url)?n=r.url[0]:n=r.url;let o=await ft(this.context,this.output.log);if(!await on(this.context,o,await this.telemetry))return;if(await I_(o.cliHost,n,this.output.log)===!1){q.commands.executeCommand(tn),await q.window.showErrorMessage(`Cannot access the repository '${n}'.`,{modal:!0});return}await q.commands.executeCommand(kw,r.url)}};async function Une(e){var P;hH();let t=new Date;mH(e);let r=await ln(e.extensionPath),n=await Yf(q.env.appRoot);gH(e,n);let o=pH(e,r,n),i=`Dev Containers ${r.version} in VS Code ${q.version} (${n.commit||"out-of-source"}).`,s=new Am(e.logPath,t,i);e.subscriptions.push(q.commands.registerCommand(tn,()=>s.show()));let{channel:a,postCreate:c}=fH(s.log,t);e.subscriptions.push(q.commands.registerCommand(dP,()=>a.show()));let u,l=new Promise(T=>u=T);e.subscriptions.push(q.workspace.registerRemoteAuthorityResolver("dev-container",{resolve:Aw(s,c,en.results,u,async(T,D,R)=>OB(e,await o,T,en.onRemoveOnShutdownChanged,D,R)),async getCanonicalURI(T){var R;let D=Bn(T.authority);if(D&&yr(D)){let{hostPath:k,settings:U}=D;return zr(k)?yl(k,s.log):U&&"host"in U&&((R=U.host)==null?void 0:R.startsWith("ssh://"))?Qf(U.host,k):q.Uri.file(k)}return T}}),q.workspace.registerRemoteAuthorityResolver("attached-container",{resolve:Aw(s,c,en.results,u,async(T,D,R)=>GB(e,await o,T,D,R))}),q.workspace.registerRemoteAuthorityResolver("k8s-container",{resolve:Aw(s,c,en.results,u,async(T,D,R)=>a2(e,await o,T,D,R))}),q.window.registerUriHandler(new lT(e,s,o)));let d=async(T,D,R)=>{let k=await ft(e,s.log);if(!await on(e,k,await o))return;let U;if(Sr.isFolderItem(T)?(U=T.folder,R=Vne()):U=T,U.scheme==="vscode-remote")return q.commands.executeCommand("vscode.openFolder",U,R);{let W=St(k.cliHost.path,qe(U,k.cliHost.platform));return hE(e,W,k,await o,D,R)}};e.subscriptions.push(q.commands.registerCommand("remote-containers.openFolder",async(T,D)=>T?d(T,!1,D):v2(e,!0,await o,!1,s.log))),e.subscriptions.push(q.commands.registerCommand("remote-containers.openWorkspace",async(T,D)=>T?d(T,!1,D):v2(e,!1,await o,!1,s.log))),e.subscriptions.push(q.commands.registerCommand(rH,async T=>nh(e,await o,s.log,T))),e.subscriptions.push(q.commands.registerCommand(kw,async T=>nh(e,await o,s.log,T,So))),e.subscriptions.push(q.commands.registerCommand(nH,async()=>{var W;let T=q.workspace.workspaceFolders;if(!T)return;let D=T[0].uri;if(T.length>1){let j=await q.window.showOpenDialog({canSelectFolders:!0,canSelectFiles:!1,canSelectMany:!1,title:"Choose a repository to clone in a Container Volume"});D=j==null?void 0:j[0]}let R,k;try{let j=await q.commands.executeCommand("remoteHub.api.getRepositoryContext",D);if(!j)throw new Error("Unable to get active repository context.");R=j.name,k=j.ref}catch{let O=await(await((W=q.extensions.getExtension("ms-vscode.remote-repositories"))==null?void 0:W.activate())).getMetadata(D);if(!O)throw new Error("Unable to get active repository context.");R=`${O.repo.owner}/${O.repo.name}`,k=(await O.getRevision()).name}let U=`https://github.com/${R}`;return k&&(U=`${U}/tree/${k}`),nh(e,await o,s.log,U,So)})),e.subscriptions.push(q.commands.registerCommand(oH,async T=>Kne(e,await o,s.log,T,So))),e.subscriptions.push(q.commands.registerCommand("remote-containers.inspectVolume",async(T,D,R)=>S2(e,T,D,R,await o,s.log))),e.subscriptions.push(q.commands.registerCommand("remote-containers.inspectVolumeFromViewlet",async T=>Xne(e,T,await o,s.log))),e.subscriptions.push(q.commands.registerCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",async T=>nh(e,await o,s.log,void 0,T))),e.subscriptions.push(q.commands.registerCommand("remote-containers.reopenInContainer",()=>f(!1))),e.subscriptions.push(q.commands.registerCommand("remote-containers.rebuildAndReopenInContainer",()=>f(!0))),e.subscriptions.push(q.commands.registerCommand("remote-containers.rebuildNoCacheAndReopenInContainer",()=>f("rebuildNoCache")));let f=async T=>{if(!await q.workspace.requestWorkspaceTrust({message:Fm}))return;let R=await ft(e,s.log);if(!await on(e,R,await o))return;let k=q.workspace.workspaceFile;if(k&&k.scheme==="untitled"){await Iw();return}let U=q.workspace.workspaceFolders;if(!k&&U&&U.length){let j=U.length>1?await q.window.showWorkspaceFolderPick({placeHolder:"Pick a folder to reopen in a container."}):U[0];j&&(k=j.uri)}let W=await pP(k);if(W){await oh(e,W.repositoryPath,W.volumeName,W.folder,R);return}if(k){let j;if(R.cliHost.type==="wsl"&&k.scheme==="file"){let O=qe(k,process.platform),H=vl(O)||hP()||await zg(R.output)||(()=>{throw new Error("No default WSL distro found.")})();j=await Ec(H,O,R.output)}else j=qe(k,R.cliHost.platform);let $=St(R.cliHost.path,j);await hE(e,$,R,await o,T,{forceReuseWindow:!0})}};e.subscriptions.push(q.commands.registerCommand("remote-containers.reopenLocally",async()=>{let T=q.workspace.workspaceFolders,D=q.workspace.workspaceFile||T&&T.length&&T[0].uri;if(D&&D.scheme==="vscode-remote"){let R=Bn(D.authority);if(R&&yr(R)){let k=q.Uri.file(R.hostPath),U={forceReuseWindow:!0};await q.commands.executeCommand("vscode.openFolder",k,U)}else q.window.showInformationMessage("'Reopen Locally' not possible in current context.")}})),e.subscriptions.push(q.commands.registerCommand("remote-containers.reopenInWSL",async()=>{let T=q.workspace.workspaceFolders,D=q.workspace.workspaceFile||T&&T.length&&T[0].uri;if(D&&D.scheme==="vscode-remote"){let R=Bn(D.authority);if(R&&yr(R)&&zr(R.hostPath)){let k=q.Uri.parse((await yl(R.hostPath,s.log)).toString()),U={forceReuseWindow:!0};await q.commands.executeCommand("vscode.openFolder",k,U)}else q.window.showInformationMessage("'Reopen in WSL' not possible in current context.")}})),e.subscriptions.push(q.commands.registerCommand("remote-containers.reopenInSSH",async()=>{let T=q.workspace.workspaceFolders,D=q.workspace.workspaceFile||T&&T.length&&T[0].uri;if(D&&D.scheme==="vscode-remote"){let R=Bn(D.authority),k=R==null?void 0:R.settings;if(R&&yr(R)&&k&&"host"in k&&k.host&&k.host.startsWith("ssh://")){let U=q.Uri.parse(Qf(k.host,R.hostPath).toString()),W={forceReuseWindow:!0};await q.commands.executeCommand("vscode.openFolder",U,W)}else q.window.showInformationMessage("'Reopen in SSH' not possible in current context.")}}));let p,m=async T=>{var U;if(!await $a(e))return;let D,R=typeof T=="string"?T:(U=T==null?void 0:T.containerDesc)==null?void 0:U.Id;if(R){let W=await ft(e,s.log);if(!await on(e,W,await o))return;D=await mn(W,R)}else{let W=!1;p||(p=Ri(e.extensionPath,async $=>(W=!0,Is($)),s.log));let j=await ft(e,s.log,void 0,void 0,p);if(D=await ooe(j,on(e,j,await o),()=>W),!D)return}let k=await ft(e,s.log);lE(k,D,e)};e.subscriptions.push(q.commands.registerCommand("remote-containers.attachToRunningContainer",m)),e.subscriptions.push(q.commands.registerCommand("remote-containers.attachToRunningContainerFromViewlet",m)),e.subscriptions.push(q.commands.registerCommand("remote-containers.attachToK8sContainerFromViewlet",async T=>s2(e,await ft(e,s.log),T)));let h=async T=>{var k;let D=await ft(e,s.log);if(!await on(e,D,await o))return;let R=(k=T==null?void 0:T.pullRequestModel)==null?void 0:k.html_url;nh(e,await o,s.log,R,So)};e.subscriptions.push(q.commands.registerCommand("remote-containers.checkoutPRInVolume",h)),e.subscriptions.push(q.commands.registerCommand("remote-containers.rebuildContainer",async()=>{let T=await Cu();if(T){let D=await ft(e,s.log);await oh(e,T.repositoryPath,T.volumeName,T.folder,D,!0);return}return await Promise.all(en.onRemoveOnShutdownChangedEmitter.fire(!0)),q.commands.executeCommand("workbench.action.reloadWindow")})),e.subscriptions.push(q.commands.registerCommand("remote-containers.rebuildContainerNoCache",async()=>{let T=await Cu();if(T){let D=await ft(e,s.log);await oh(e,T.repositoryPath,T.volumeName,T.folder,D,"rebuildNoCache");return}return await Promise.all(en.onRemoveOnShutdownChangedEmitter.fire("rebuildNoCache")),q.commands.executeCommand("workbench.action.reloadWindow")}));let g=q.env.remoteName&&q.env.remoteName!=="test"?"linux":process.platform,v=((P=(q.workspace.workspaceFolders||[])[0])==null?void 0:P.uri)||Ue.file(process.cwd()),w=Vd(g,v),E={fileHost:w,findDevContainerFiles:wP,telemetry:o,output:s.log,existingFilesLearnMoreLink:wu,predefinedDefinitionsLearnMoreLink:Eu,openConfigurationCommandId:yu},C=await AB(e,E);e.subscriptions.push(q.commands.registerCommand("remote-containers.createDevContainerFile",async()=>{if(!q.workspace.workspaceFolders){await q.window.showInformationMessage("Open a folder to create the configuration files in first.",{modal:!0},"Open Folder")&&await q.commands.executeCommand(process.platform==="darwin"?"workbench.action.files.openFileFolder":"workbench.action.files.openFolder");return}await uT(e,w,C,await o,s.log)})),e.subscriptions.push(q.commands.registerCommand("remote-containers.createDevContainer",async()=>{let T=await ft(e,s.log);!await on(e,T,await o)||await f2(e,T,await o)})),e.subscriptions.push(q.commands.registerCommand("remote-containers.openDevContainerFile",async(T,D)=>{let R,k=await ft(e,s.log),U;if(typeof T=="string"?R=[Ue.file(T)]:(U=await wP(),R=(await Promise.all(U.map(W=>W.scheme==="file"||W.scheme==="vscode-remote"?W:k.cliHost.toCommonURI(qe(W,k.cliHost.platform))))).filter(W=>!!W)),R.length){let W=await gu(k.cliHost,R);if(!W||W==="cancelled")return;let j=await Cu();if(j){let $=dH(j.folder);for(let O of $){try{await q.workspace.openTextDocument(q.Uri.parse(O.toString()))}catch{continue}await q.commands.executeCommand("vscode.open",q.Uri.parse(O.toString()),D);return}return}if(W){let $=sF(W);if($){let O=`https://github.com/microsoft/vscode-dev-containers/tree/main/repository-containers/${process.platform==="win32"?$.replace(/\\/g,"/"):$}`;return q.env.openExternal(q.Uri.parse(O))}else{if(W.scheme==="file"&&await lr(W.fsPath))return await q.commands.executeCommand("vscode.open",q.Uri.parse(W.toString()),D);if(W.scheme==="file"&&en.results.size)return await wo(Ho,W,[],is),await q.commands.executeCommand("vscode.open",q.Uri.parse(W.toString()),D);if(W.scheme==="vscode-remote")return await q.commands.executeCommand("vscode.open",q.Uri.parse(W.toString()),D);if(T===void 0)return await uT(e,w,C,await o,s.log)}}}else if(T===void 0&&!(U!=null&&U.length))return await uT(e,w,C,await o,s.log)})),e.subscriptions.push(q.commands.registerCommand("remote-containers.openAttachConfigByNameFile",async()=>{let{dockerContainerId:T,dockerParams:D}=[...en.results.values()][0];if(!T||!D)return q.window.showInformationMessage("Named configurations are only available for Docker containers.",{modal:!0});let R=await mn(D,T),k=nE(e.globalStoragePath,R.Name),U=q.Uri.file(k);return await lr(k)?q.commands.executeCommand("vscode.open",U):(await wo(Ho,U,[],is),q.commands.executeCommand("vscode.open",U))})),e.subscriptions.push(q.commands.registerCommand("remote-containers.openAttachDevContainerFile",async()=>{let T=[...(await HB(e.globalStoragePath)).map(R=>({label:R.name,...R})).sort((R,k)=>R.label.localeCompare(k.label)),...(await BB(e.globalStoragePath)).map(R=>({label:R.image,...R})).sort((R,k)=>R.label.localeCompare(k.label))],D=await q.window.showQuickPick(T.length?T:[{label:"No configuration found."}],{placeHolder:"Choose a configuration file"});if(D&&"uri"in D)return q.commands.executeCommand("vscode.open",q.Uri.parse(D.uri.toString()))})),e.subscriptions.push(q.commands.registerCommand("remote-containers.settings",async()=>q.commands.executeCommand("workbench.action.openSettings",`@ext:${g2()}`))),e.subscriptions.push(q.commands.registerCommand("remote-containers.getHelp",async()=>q.env.openExternal(q.Uri.parse("https://aka.ms/vscode-remote/containers")))),e.subscriptions.push(q.commands.registerCommand("remote-containers.getStarted",async()=>q.env.openExternal(q.Uri.parse("https://aka.ms/vscode-remote/containers/getting-started")))),e.subscriptions.push(q.commands.registerCommand("remote-containers.reportIssue",async()=>q.commands.executeCommand("vscode.openIssueReporter",g2()))),e.subscriptions.push(q.commands.registerCommand("remote-containers.provideFeedback",async()=>q.env.openExternal(q.Uri.parse("https://aka.ms/vscode-remote/containers/provide-feedback")))),e.subscriptions.push(q.languages.registerDocumentLinkProvider([{pattern:"**/devcontainer.json",language:"jsonc"},{pattern:"**/.devcontainer.json",language:"jsonc"}],new aE(w))),e.subscriptions.push(q.commands.registerCommand("remote-containers.trySample",async()=>{doe(e,s.log)})),e.subscriptions.push(q.commands.registerCommand("remote-containers.openLogFile",()=>foe(e))),e.subscriptions.push(q.commands.registerCommand("remote-containers.openLastLogFile",()=>poe(e,"remoteContainers",s.logFilePath))),e.subscriptions.push(q.commands.registerCommand("remote-containers.showReopenInContainerNotificationReset",()=>aoe(e))),e.subscriptions.push(q.commands.registerCommand("remote-containers.showRecoveryContainerNotificationReset",()=>Hne(e))),e.subscriptions.push(q.commands.registerCommand("remote-containers.installDocker",()=>sE(s.log))),o2(e,en.results,await o,s.log),await c2(e,n),e.subscriptions.push(q.commands.registerCommand("remote-containers.installUserCLI",()=>u2(e,n))),(async()=>{let T=q.env.remoteAuthority,D=T&&Bn(T);D&&(Kr(D)||cs(D))&&D.inspectVolume&&await l,await lH(e)||await b2(e,w,await o,s.log)})().catch(console.error),qne(e);let S=q.env.remoteName,x=!S||["dev-container","attached-container","wsl","ssh-remote","exec","k8s-container","codespaces"].indexOf(S)!==-1?[{pattern:"**/.devcontainer.json"},{pattern:"**/devcontainer.json"}]:[];e.subscriptions.push(q.commands.registerCommand("remote-containers.addExtensionToConfig",C.addExtensionToConfiguration),q.languages.registerCompletionItemProvider([...x,{pattern:Yt.join(oE(e.globalStoragePath),"*.json")},{pattern:Yt.join(rE(e.globalStoragePath),"*.json")}],C.createCompletionItemProvider()),q.commands.registerCommand("remote-containers.configureContainerFeatures",async()=>{await C.configureContainerFeatures()}),q.commands.registerCommand("remote-containers.labelPortAndUpdateConfig",C.addPortLabelToConfiguration)),await Cu()&&q.commands.executeCommand("setContext","isRecoveryContainer",!0)}var h2="showRecoveryContainerNotification",C2="showReopenInContainerNotificationReset",jne=5e3;function Hne(e){return e.globalState.update(C2,Date.now())}async function qne(e){setTimeout(async()=>{let t=e.globalState.get(C2);if(mT(e.globalState.get(h2),t))return;if(await Cu()){let n="This is a recovery container that allows you to edit your Dockerfile. Use 'Reopen in Container' to retry.",o="Reopen in Container",i="Don't Show Again",s=await q.window.showInformationMessage(n,o,i);s===o?q.commands.executeCommand("remote-containers.reopenInContainer"):s===i&&await e.globalState.update(h2,Date.now())}},jne)}async function Bne(){await Promise.all([...en.results.values()].map(e=>Promise.all(e.params.shutdowns.map(t=>{try{t()}catch(r){console.error(r)}}))))}function g2(){let{name:e,publisher:t}=m2();return`${t}.${e}`}async function v2(e,t,r,n,o){var d;let i=await ft(e,o);if(!await on(e,i,r))return;let s,a=q.workspace.workspaceFolders;if(a&&a[0]){let f=a[0].uri;if(f.scheme==="vscode-remote"){let p=Bn(f.authority);if(p&&yr(p)){let m=St(i.cliHost.path,p.hostPath);s=q.Uri.file(m.rootFolderPath)}else/^(wsl|ssh-remote)\+/.test(f.authority)&&(s=f)}else f.scheme==="file"&&(s=f)}s||((d=q.env.remoteName)!=null&&d.match(/^(wsl|ssh-remote)$/)?s=q.Uri.from({scheme:"vscode-remote",authority:q.env.remoteAuthority,path:await i.cliHost.homedir()}):s=q.Uri.file(w2.homedir()));let c=t?{defaultUri:s,canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,openLabel:"Open"}:{defaultUri:s,canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{"Code Workspace":["code-workspace"]},openLabel:"Open"},u=await q.window.showOpenDialog(c),l=u&&u[0];if(l){let f=t?l:l.with({path:Yt.posix.dirname(l.path)}),p=await ft(e,i.output,f,mP()==="always"),m=qe(l,p.cliHost.platform),h=St(p.cliHost.path,m);await hE(e,h,p,r,n)}}function Vne(){return q.workspace.getConfiguration("window").get("openFoldersInNewWindow",void 0)==="on"?{forceNewWindow:!0}:{forceReuseWindow:!0}}async function hE(e,t,r,n,o,i){var x,I;let{cliHost:s}=r;if(zr(t.rootFolderPath)){if(r=await ft(e,r.output,t.rootFolderPath),s=r.cliHost,!await on(e,r,n))return;t=St(s.path,t.isWorkspaceFile?s.path.join(s.cwd,Yt.basename(t.workspaceOrFolderPath)):s.cwd)}let a=await Pg(s,t);if(a){let P="Continue";if(await q.window.showInformationMessage(`The workspace could fail to open in a container: ${a}`,{modal:!0},P)!==P)return}let c=await Wne(s,t);if(c==="cancelled")return;let u=c||await Cp(s,t,Ma(),!0,r.output),l=u&&(u.scheme==="file"?await pt(u.fsPath):await s.readFile(qe(u,s.platform))).toString(),d=!!(l&&((x=yt(l))==null?void 0:x.initializeCommand)),{dockerCLI:f,dockerComposePath:p}=r,m={cliHost:s,dockerPath:f,dockerComposePath:p,appRoot:q.env.appRoot,extensionPath:e.extensionPath,package:await ln(e.extensionPath),output:r.output},h=u&&await(d?$m(m,t.rootFolderPath,u):EP(m,t.rootFolderPath,u));if(h==="canceled")return;if(!h||!_v(h.configuration)){let P=await eE({fileHost:s,telemetry:n,output:r.output,existingFilesLearnMoreLink:wu,predefinedDefinitionsLearnMoreLink:Eu,openConfigurationCommandId:yu},t);if(!P||(h=await EP(m,t.rootFolderPath,Ue.file(P).with({scheme:wt.scheme})),!h||h==="canceled"))return}if(!await zne(r,"mergedConfiguration"in h?h.mergedConfiguration:h.configuration))return;let g=h.configuration,v=h.workspace.workspaceFolder;if(jr(g)){let P=ra(s,g);if(!g.initializeCommand&&!await vr(s).readDocument(P))return ih(`"${P.fsPath}" does not exist.`,s,g.configFilePath);if(g.workspaceFolder&&!Yt.posix.isAbsolute(g.workspaceFolder))return ih("Workspace folder in devcontainer.json must be an absolute path.",s,g.configFilePath)}else if(!("image"in g))if("dockerComposeFile"in g){if(!await ZB(r)||!await ioe(t,r,g))return}else{let P=g.configFilePath;return ih(`Configuration "${s.path.relative(t.rootFolderPath,qe(P,s.platform))}" not valid.`,s,P)}t.isWorkspaceFile&&(v=Yt.posix.join(v,s.path.basename(t.workspaceOrFolderPath)));let w=wr(r.env),E=s.type==="wsl"?(await s.toCommonURI(t.workspaceOrFolderPath)).fsPath:t.workspaceOrFolderPath,C=(s.type==="local"||s.type==="wsl")&&w&&"host"in w&&((I=w.host)==null?void 0:I.startsWith("ssh://")),S=q.Uri.parse(Sp(E,v,w,C,u));await _u({uri:S,type:t.isWorkspaceFile?"workspace":"folder",label:`${kF(s.platform,t.workspaceOrFolderPath,await s.homedir())}${jl(w)} [Dev Container]`}),await yP(e,o?S.authority:!1),await Nm(e,o==="rebuildNoCache"?S.authority:!1),await q.commands.executeCommand("vscode.openFolder",S,i)}async function Wne(e,t){let r=Gne(e,t.rootFolderPath),n=new q.RelativePattern(r,Dw),o=await q.workspace.findFiles(n),i=await gu(e,o);return i!=="cancelled"&&(i==null?void 0:i.scheme)===pn.scheme?Ue.from({scheme:wt.scheme,path:i.path}):i}function Gne(e,t){switch(e.type){case"local":return Ue.file(t);case"wsl":return q.env.remoteName==="wsl"?Ue.from({scheme:"vscode-remote",authority:q.env.remoteAuthority,path:t}):void 0;case"ssh":return q.env.remoteName==="ssh-remote"?Ue.from({scheme:"vscode-remote",authority:q.env.remoteAuthority,path:t}):void 0;default:return}}async function zne(e,{hostRequirements:t}){var n,o;let r=t&&Yne(t);if(r&&(r.cpus||r.memory||r.gpu&&r.gpu!=="optional")){let i=await ot(e,"info","--format","{{json .}}"),s=JSON.parse(i.stdout.toString()),a=s.NCPU&&r.cpus&&r.cpus>s.NCPU,c=s.MemTotal&&r.memory&&r.memory>s.MemTotal,u=((o=(n=s.Runtimes)==null?void 0:n.nvidia)==null?void 0:o.path)==="nvidia-container-runtime";if(a||c){let l=[];s.NCPU&&l.push(`CPUs ${s.NCPU}`),s.MemTotal&&l.push(`RAM ${cT(s.MemTotal)}`),u&&l.push("GPU");let d=[];r.cpus&&d.push(`CPUs ${r.cpus}`),r.memory&&d.push(`RAM ${cT(r.memory)}`),r.storage&&d.push(`disk ${cT(r.storage)}`),r.gpu&&r.gpu!=="optional"&&d.push("GPU");let f=`Docker daemon: ${l.join(", ")}
devcontainer.json: ${d.join(", ")}`;if(!await q.window.showInformationMessage("Not all host requirements in devcontainer.json are met by the Docker daemon.",{modal:!0,detail:f},"Continue"))return!1}}return!0}function Yne(e){return{cpus:e.cpus||0,memory:y2(e.memory||"0"),storage:y2(e.storage||"0"),gpu:e.gpu}}function y2(e){let t=/^(\d+)([tgmk]b)?$/.exec(e);if(t){let[,r,n]=t,o=parseInt(r,10),i=n&&{t:2**40,g:2**30,m:2**20,k:2**10}[n[0]]||1;return o*i}return 0}function cT(e){let t=Math.min(Math.floor(Math.log2(Math.max(Math.abs(e),1))/10),4),r=e/Math.pow(2,10*t),n=Math.max(Math.pow(10,2-Math.floor(Math.log10(Math.max(Math.abs(r),1)))),1),o=Math.round(r*n)/n,i=[" bytes","kb","mb","gb","tb"][t];return`${o}${i}`}async function nh(e,t,r,n,o){if(!await Mm(e))return;let i=await ft(e,r),s=null;if(!!await on(e,i,t)){if(typeof n=="string")s=n;else{let a=await q.commands.executeCommand("git-base.api.getRemoteSources",{providerLabel:c=>`Clone a repository from ${c.name} in a Container Volume`,urlLabel:"Clone git repository from URL",branch:!0});if(a){s=(typeof a=="string"?a:a.url).trim(),s.split("/").length===2&&s.indexOf(":")===-1&&(s=`https://github.com/${s}`);let c=Ni(s);if(await I_(i.cliHost,c.repositoryUrl,i.output)===!1){q.commands.executeCommand(tn),await q.window.showInformationMessage(`Cannot access the repository '${c.repositoryUrl}'.`,{modal:!0});return}typeof a!="string"&&a.branch&&(s=`${s}/tree/${a.branch}`)}}s&&await _2(e,i,s,o)}}async function _2(e,t,r,n){if(n||(n=await Jne(t)),n){let o=gT(r);n!==So&&(o=await eoe(r)),o&&await oh(e,r,n,o,t)}}async function Kne(e,t,r,n,o){if(!await Mm(e))return;let i=await ft(e,r),s=/^(?:(?:https:\/\/)?github.com\/)?([^/]+)\/([^/]+?)(?:\/(?:pull\/([0-9]+)))?(?:\/|$)/i;if(!await on(e,i,t))return;let a={placeHolder:"e.g. https://github.com/microsoft/vscode/pull/123",prompt:"Enter a GitHub pull request url",validateInput:l=>s.test(l)?void 0:"Invalid pull request url"},c;if(n?c=n:c=await q.window.showInputBox(a),!c)return;let u=Ni(c);if(u.repository==="unknown"||!u.pullRequestId){await q.window.showInformationMessage(`Invalid pull request URL '${c}'.`,{modal:!0});return}await _2(e,i,c,o)}async function S2(e,t,r,n,o,i){let s=await ft(e,i);!await on(e,s,o)||(t||(t=await Qne(s)),t&&(r&&n?await noe(t,r,n,s):await roe(t,s)))}async function Xne(e,t,r,n){let o=await ft(e,n);!await on(e,o,await r)||t&&t.volumeName&&await S2(e,t.volumeName,void 0,void 0,r,n)}var sh=class{get detail(){return""}},dT=class extends sh{get label(){return"$(plus) Create a new volume..."}get description(){return""}get volumeName(){return""}get detail(){return"Use this volume to store several cloned repositories."}get alwaysShow(){return!0}},fT=class extends sh{constructor(r){super();this.volume=r}get label(){return`$(folder) ${this.volume.Name}`}get description(){return`created at ${new Date(this.volume.CreatedAt).toDateString()}`}get volumeName(){return this.volume.Name}},pT=class extends sh{constructor(r){super();this.volume=r}get label(){return`$(folder) ${this.volume.Name}`}get description(){return`created at ${new Date(this.volume.CreatedAt).toDateString()}`}get volumeName(){return this.volume.Name}};async function Qne(e){let t=await Co(e),n=(await pp(e,t)).map(a=>new pT(a)),o="Select the volume to inspect with Visual Studio Code",i=q.window.createQuickPick();i.items=n,i.placeholder=o,i.show();let s=await new Promise(a=>{i.onDidAccept(()=>a(i.activeItems[0])),i.onDidHide(()=>a(void 0))});return i.hide(),s?s.volume.Name:null}async function Jne(e){let t=await Co(e,["vsch.local.repository.unique=false"]),n=(await pp(e,t)).map(l=>new fT(l)),o=new dT,i=[o,...n],s="Select the volume for the cloned repository",a=q.window.createQuickPick();a.items=i,a.placeholder=s,a.ignoreFocusOut=!0,a.show();let c=await new Promise(l=>{a.onDidAccept(()=>l(a.activeItems[0])),a.onDidHide(()=>l(void 0))});if(a.hide(),!c)return null;let u=null;return c===o?u=await Zne(e):u=c.volumeName,u}async function Zne(e){let t="",r="vsc-remote-containers",n=await Co(e);n.find(s=>s===r)||(t=r);let o={prompt:"Enter the volume name.",value:t,ignoreFocusOut:!0,validateInput:s=>/^[a-zA-Z0-9][a-zA-Z0-9_.-]+$/i.test(s)?null:s.length<2?"Volume names should be at least two characters and the first character must be alphanumeric.":"Only [a-zA-Z0-9_.-] are allowed and the first character must be alphanumeric."},i=await q.window.showInputBox(o);return i?n.find(s=>s===i)?(await q.window.showErrorMessage("Volume already exists",{modal:!0}),null):i:null}async function eoe(e){let t={prompt:"Enter the target folder name.",value:gT(e),ignoreFocusOut:!0},r=await q.window.showInputBox(t);return r||null}function gT(e){return _o(e).repositoryName}async function toe(){return(await q.authentication.getSession("github",["repo"],{createIfNone:!0})).accessToken}async function oh(e,t,r,n,o,i=!1){let s=wr(o.env),a=$l(t),c;try{c=await a.parseUrl(void 0)}catch(l){if(l instanceof gp){q.window.showErrorMessage(l.description);return}let d=await toe();try{c=await a.parseUrl(d)}catch{q.window.showErrorMessage(`Cannot access '${t}'.`,{modal:!0});return}}let u=q.Uri.parse(Wo(t,r,n,!1,s,c));r===So&&(r="a unique volume"),await _u({uri:u,type:"folder",label:`${n} in ${r} [Dev Container]`}),await yP(e,i?u.authority:!1),await Nm(e,i==="rebuildNoCache"?u.authority:!1),await q.commands.executeCommand("vscode.openFolder",u)}async function roe(e,t){let r=wr(t.env),n=q.Uri.parse(Wo(void 0,e,void 0,!0,r,void 0));await _u({uri:n,type:"folder",label:`Volume ${e} [Dev Container]`}),await q.commands.executeCommand("vscode.openFolder",n)}async function noe(e,t,r,n){let o=wr(n.env),i=q.Uri.parse(Wo(t,e,r,!0,o,void 0));await _u({uri:i,type:"folder",label:`${r} in ${e} [Inspect Dev Container]`}),await q.commands.executeCommand("vscode.openFolder",i)}async function lE(e,t,r,n){if(!await $a(r))return;let o,i=e.cliHost;if(i.type==="wsl"){let u=await i.toCommonURI(i.cwd);u&&u.scheme==="file"&&(o=u.fsPath)}let s=TF(t.Name,wr(e.env),o),a=await UB(r.globalStoragePath,t),c=r.extensionMode===q.ExtensionMode.Development;if(a&&a.workspaceFolder&&!n){let u=q.Uri.parse(`vscode-remote://${s}${a.workspaceFolder}`),l={};c?l.forceReuseWindow=!0:l.forceNewWindow=!0,await q.commands.executeCommand("vscode.openFolder",u,l)}else{let u={remoteAuthority:s};c&&!n&&(u.reuseWindow=!0),await q.commands.executeCommand("vscode.newWindow",u)}}async function ooe(e,t,r){let n=(async()=>{if(!await t)throw new Error("cancel");let o=await ss(e),i=await oa(e,o),s=[];if(i.forEach(a=>{a.State.Status==="running"&&s.push({label:a.Name,description:`${a.Config.Image} ${a.Id}`,containerInfo:a})}),s.length===0)throw q.window.showErrorMessage("There are no running containers to attach to.",{modal:!0}),new Error("cancel");return s})();try{let o={placeHolder:"Select the container to attach VS Code"},i=await q.window.showQuickPick(n,o);if(!i&&r()){if(!await t)throw new Error("cancel");i=await q.window.showQuickPick(n,o)}return i?i.containerInfo:void 0}catch(o){if(o&&o.message==="cancel")return;throw o}}async function ioe(e,t,r){if(!r.workspaceFolder)return ih("Workspace folder not specified in devcontainer.json.",t.cliHost,r.configFilePath),!1;if(!Yt.posix.isAbsolute(r.workspaceFolder))return ih("Workspace folder in devcontainer.json must be an absolute path.",t.cliHost,r.configFilePath),!1;let n=await na(t.cliHost,r,t.cliHost.env,t.cliHost.cwd),o=await ZS(t,e,n),i=await tF(t,o,r.service);return!(i&&await mn(t,i)&&!await soe(t.cliHost,n))}async function soe(e,t){let r=[];for(let n=0;n<t.length;n++)await e.isFile(t[n])||r.push(t[n]);return r.length>0?(q.window.showErrorMessage(`The following referenced docker compose files do not exist: ${r.join(", ")}`,{modal:!0}),!1):!0}async function ih(e,t,r){if(await q.window.showErrorMessage(e,{modal:!0},"Open devcontainer.json")){let o=qe(r,t.platform),i=await t.toCommonURI(o);i&&q.window.showTextDocument(q.Uri.parse(i.toString()))}}async function uT(e,t,r,n,o){await r.createConfiguration()&&await b2(e,t,n,o)}async function b2(e,t,r,n){if([void 0,"wsl","ssh-remote"].indexOf(q.env.remoteName)===-1)return;let o=q.workspace.workspaceFile,i=q.workspace.workspaceFolders,s=o||i&&i.length&&i[0].uri||void 0;if(s&&s.scheme!=="vscode-vfs"){let a=qe(s,t.platform),c=St(t.path,a),u=await Fv(t,c,Ma());u&&await coe(e,u,c,t,r,n)}}var pE="showReopenInContainerNotification",x2="showReopenInContainerNotificationReset";function aoe(e){return e.globalState.update(x2,Date.now())}async function coe(e,t,r,n,o,i){let s=e.globalState.get(x2);if(mT(e.globalState.get(pE),s)||mT(e.workspaceState.get(pE),s))return;let a=iF(n,r,t.uri),c,u="";if(n.platform!=="linux"&&q.env.remoteName!=="wsl"&&!(n.platform==="win32"&&zr(r.rootFolderPath))&&q.env.remoteName!=="ssh"){let w=await ft(e,i);if(c=await mA(w.cliHost,r,w.output),c&&a){let E=await Hf(w.cliHost,r.rootFolderPath,w.output);E&&await vA(w.cliHost,r,w.cliHost.path.relative(E,qe(t.uri,w.cliHost.platform)),w.output)||(c=void 0)}if(c){let{cliHost:E,dockerCLI:C,dockerComposePath:S}=w,x={cliHost:E,dockerPath:C,dockerComposePath:S,appRoot:q.env.appRoot,extensionPath:e.extensionPath,package:await ln(e.extensionPath),output:i},I=await $m(x,r.rootFolderPath,t.uri);(!I||!jr(I.configuration)&&!("image"in I.configuration))&&(c=void 0)}c&&(u=" Or: Clone repository in Docker volume for [better I/O performance](https://aka.ms/vscode-remote/containers/open-repo).")}let l;a?r.isWorkspaceFile?l="Workspace contains a Dev Container configuration file.":l="Folder contains a Dev Container configuration file.":l="There is a [Dev Container configuration](command:remote-containers.openDevContainerFile) available for this repository.";let d="Reopen in Container",f="Clone in Volume",p="Don't Show Again...",m=r.isWorkspaceFile?`${l} Reopen workspace to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).${u}`:`${l} Reopen folder to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).${u}`,h=c?[d,f,p]:[d,p];uoe(o,t.location);let g=await q.window.showInformationMessage(m,...h);if(loe(o,g===d?"reopen":g===f?"openRepository":g===p?"dontShowAgain":"cancel",t.location),g===d){if(!await q.workspace.requestWorkspaceTrust({message:Fm}))return;let E=await ft(e,i);if(!await on(e,E,o))return;if(E.cliHost.type==="wsl"&&n.platform==="win32"){let{cwd:C}=await nS(r.workspaceOrFolderPath,hi(),i);r=St(E.cliHost.path,C)}try{await hE(e,r,E,o,!1,{forceReuseWindow:!0})}catch(C){await ua(C,"ui",o)}}else if(g===f){let w=await ft(e,i),E=await gA(w.cliHost,r,w.output),C="OK",S="Cancel";(!E||C===await q.window.showInformationMessage("Local changes not pushed to the Git remote will not be available in the Docker volume.",C,S))&&await q.window.withProgress({location:q.ProgressLocation.Notification,title:"Clone in Volume"},async(x,I)=>{x.report({message:"Follow the prompts at the top of the window."}),await q.commands.executeCommand(kw,c)})}else if(g===p){let w=r.isWorkspaceFile?"Any Workspace":"Any Folder",E=r.isWorkspaceFile?"Current Workspace":"Current Folder",C=r.isWorkspaceFile?"Don't show again for the current workspace or for any workspace?":"Don't show again for the current folder or for any folder?",S=await q.window.showInformationMessage(C,w,E);S===w?await e.globalState.update(pE,Date.now()):S===E&&await e.workspaceState.update(pE,Date.now())}}function uoe(e,t){e.sendTelemetryEvent("reopenNotificationOpen",{location:t})}function loe(e,t,r){e.sendTelemetryEvent("reopenNotificationResult",{result:t,location:r})}function mT(e,t){return e===!1?e=1:e===void 0&&(e=-1),t===void 0&&(t=0),t<e}async function doe(e,t){let r=[{label:"C++",detail:"https://github.com/Microsoft/vscode-remote-try-cpp"},{label:"Go",detail:"https://github.com/Microsoft/vscode-remote-try-go"},{label:"Java",detail:"https://github.com/Microsoft/vscode-remote-try-java"},{label:".NET",detail:"https://github.com/Microsoft/vscode-remote-try-dotnet"},{label:"Node",detail:"https://github.com/Microsoft/vscode-remote-try-node"},{label:"PHP",detail:"https://github.com/Microsoft/vscode-remote-try-php"},{label:"Python",detail:"https://github.com/Microsoft/vscode-remote-try-python"},{label:"Rust",detail:"https://github.com/Microsoft/vscode-remote-try-rust"}],n={placeHolder:"Select a sample repository to clone in a container volume"},o=await q.window.showQuickPick(r,n);if(!o)return;let i=await ft(e,t);o.detail&&await oh(e,o.detail,So,gT(o.detail),i)}async function foe(e){let t=await Promise.all((await P2(e)).map(async n=>{let o=await(0,hT.promisify)(gE.stat)(n.path),i=n.time;return{label:n.prefix,description:`${of(i.getFullYear())}-${of(i.getMonth()+1)}-${of(i.getDate())} ${of(i.getHours())}:${of(i.getMinutes())}:${of(i.getSeconds())} - ${o.size} bytes`,path:n.path}}));t.length||t.push({label:"No log files found."});let r=await q.window.showQuickPick(t,{placeHolder:"Choose a log file"});r&&r.path&&await q.window.showTextDocument(q.Uri.file(r.path))}function of(e,t=2){return e.toString().padStart(t,"0")}async function poe(e,t,r){let n=(await P2(e)).find(o=>o.name.startsWith(t)&&o.path!==r);n?await q.window.showTextDocument(q.Uri.file(n.path)):await q.window.showInformationMessage("No previous log file found.",{modal:!0})}async function P2(e){let t=[],r=Yt.basename(e.logPath),n=Yt.dirname(Yt.dirname(Yt.dirname(e.logPath))),o=/(\d\d\d\d)(\d\d)(\d\d)T(\d\d)(\d\d)(\d\d)/;o.test(Yt.basename(n))&&(n=Yt.dirname(n));for(let i of(await mE(n)).sort().reverse()){let s=o.exec(i);if(s){let a=Yt.join(n,i);for(let c of await mE(a)){let u=Yt.join(a,c),l=c.startsWith("window");for(let d of l?await mE(u):[c]){let f=Yt.join(l?u:a,d),p=Yt.join(f,r);for(let m of(await mE(p)).sort()){let h=Yt.join(p,m),g=/(\d\d\d\d)-(\d\d)-(\d\d)T(\d\d)[:\-](\d\d)[:\-](\d\d)\.(\d\d\d)Z/.exec(m),v=g?new Date(`${g[1]}-${g[2]}-${g[3]}T${g[4]}:${g[5]}:${g[6]}.${g[7]}Z`):new Date(`${s[1]}-${s[2]}-${s[3]}T${s[4]}:${s[5]}:${s[6]}Z`);t.push({name:m,path:h,time:v,prefix:g?m.substr(0,g.index-1):m.substr(0,m.length-4)})}}}}}return t.sort((i,s)=>i.time>s.time?-1:i.time<s.time?1:i.path.localeCompare(s.path)),t}async function mE(e){try{return await(0,hT.promisify)(gE.readdir)(e)}catch{return[]}}0&&(module.exports={activate,attachToContainer,deactivate});
//# sourceMappingURL=extension.js.map
